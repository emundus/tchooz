(function(t){function e(e){for(var s,r,o=e[0],l=e[1],c=e[2],d=0,p=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&p.push(n[r][0]),n[r]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);u&&u(e);while(p.length)p.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],s=!0,o=1;o<a.length;o++){var l=a[o];0!==n[l]&&(s=!1)}s&&(i.splice(e--,1),t=r(r.s=a[0]))}return t}var s={},n={app:0},i=[];function r(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=s,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(a,s,function(e){return t[e]}.bind(null,s));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var u=l;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0373":function(t,e,a){"use strict";a("c1ff")},"062c":function(t,e,a){},"0b2c":function(t,e,a){"use strict";a("9556")},"0bd7":function(t,e,a){},"0fd5":function(t,e,a){var s={"./af":"8206","./af.js":"8206","./ar":"cdac","./ar-dz":"7f26","./ar-dz.js":"7f26","./ar-kw":"8e88","./ar-kw.js":"8e88","./ar-ly":"cd65","./ar-ly.js":"cd65","./ar-ma":"e8d6","./ar-ma.js":"e8d6","./ar-ps":"ddbb","./ar-ps.js":"ddbb","./ar-sa":"a284","./ar-sa.js":"a284","./ar-tn":"64f7","./ar-tn.js":"64f7","./ar.js":"cdac","./az":"b139","./az.js":"b139","./be":"98e2","./be.js":"98e2","./bg":"a1a5","./bg.js":"a1a5","./bm":"4d0d","./bm.js":"4d0d","./bn":"e8ae","./bn-bd":"5dd8","./bn-bd.js":"5dd8","./bn.js":"e8ae","./bo":"bcf2","./bo.js":"bcf2","./br":"69f1","./br.js":"69f1","./bs":"24d1","./bs.js":"24d1","./ca":"3507","./ca.js":"3507","./cs":"d15f","./cs.js":"d15f","./cv":"7bfe","./cv.js":"7bfe","./cy":"1d35","./cy.js":"1d35","./da":"a019","./da.js":"a019","./de":"0cfa","./de-at":"edea","./de-at.js":"edea","./de-ch":"9aae","./de-ch.js":"9aae","./de.js":"0cfa","./dv":"1722","./dv.js":"1722","./el":"5390","./el.js":"5390","./en-au":"dad9","./en-au.js":"dad9","./en-ca":"6f13","./en-ca.js":"6f13","./en-gb":"6267","./en-gb.js":"6267","./en-ie":"80b1","./en-ie.js":"80b1","./en-il":"ad38","./en-il.js":"ad38","./en-in":"eb60","./en-in.js":"eb60","./en-nz":"39db","./en-nz.js":"39db","./en-sg":"c30d","./en-sg.js":"c30d","./eo":"1a30","./eo.js":"1a30","./es":"48a3","./es-do":"f306","./es-do.js":"f306","./es-mx":"56d9","./es-mx.js":"56d9","./es-us":"60bf","./es-us.js":"60bf","./es.js":"48a3","./et":"f891","./et.js":"f891","./eu":"a403","./eu.js":"a403","./fa":"ce14","./fa.js":"ce14","./fi":"fc14","./fi.js":"fc14","./fil":"f46e","./fil.js":"f46e","./fo":"2bf2","./fo.js":"2bf2","./fr":"c1e8","./fr-ca":"50a2","./fr-ca.js":"50a2","./fr-ch":"b087","./fr-ch.js":"b087","./fr.js":"c1e8","./fy":"4665","./fy.js":"4665","./ga":"b396","./ga.js":"b396","./gd":"056c","./gd.js":"056c","./gl":"efde","./gl.js":"efde","./gom-deva":"12ea","./gom-deva.js":"12ea","./gom-latn":"8e2c","./gom-latn.js":"8e2c","./gu":"533d","./gu.js":"533d","./he":"7520","./he.js":"7520","./hi":"d2f3","./hi.js":"d2f3","./hr":"7e79","./hr.js":"7e79","./hu":"148f","./hu.js":"148f","./hy-am":"6711","./hy-am.js":"6711","./id":"2b10","./id.js":"2b10","./is":"1feb","./is.js":"1feb","./it":"1b21","./it-ch":"8d2c","./it-ch.js":"8d2c","./it.js":"1b21","./ja":"926e","./ja.js":"926e","./jv":"5a78","./jv.js":"5a78","./ka":"5975","./ka.js":"5975","./kk":"cc93","./kk.js":"cc93","./km":"66e1","./km.js":"66e1","./kn":"5421","./kn.js":"5421","./ko":"1297","./ko.js":"1297","./ku":"16f8","./ku-kmr":"4430","./ku-kmr.js":"4430","./ku.js":"16f8","./ky":"3df9","./ky.js":"3df9","./lb":"c124","./lb.js":"c124","./lo":"20a5","./lo.js":"20a5","./lt":"c14a","./lt.js":"c14a","./lv":"c553","./lv.js":"c553","./me":"ae25","./me.js":"ae25","./mi":"6f56","./mi.js":"6f56","./mk":"c8fc","./mk.js":"c8fc","./ml":"752d","./ml.js":"752d","./mn":"f09e","./mn.js":"f09e","./mr":"0a56","./mr.js":"0a56","./ms":"55b6","./ms-my":"a9e9","./ms-my.js":"a9e9","./ms.js":"55b6","./mt":"624b","./mt.js":"624b","./my":"e256","./my.js":"e256","./nb":"e1d5","./nb.js":"e1d5","./ne":"761a","./ne.js":"761a","./nl":"a0f2","./nl-be":"5cb2","./nl-be.js":"5cb2","./nl.js":"a0f2","./nn":"4fda","./nn.js":"4fda","./oc-lnc":"ec3d","./oc-lnc.js":"ec3d","./pa-in":"2f2f","./pa-in.js":"2f2f","./pl":"317f","./pl.js":"317f","./pt":"5553","./pt-br":"a9ab","./pt-br.js":"a9ab","./pt.js":"5553","./ro":"db12","./ro.js":"db12","./ru":"7aa4","./ru.js":"7aa4","./sd":"e87b","./sd.js":"e87b","./se":"a296","./se.js":"a296","./si":"51ec","./si.js":"51ec","./sk":"608b","./sk.js":"608b","./sl":"b367","./sl.js":"b367","./sq":"f68f","./sq.js":"f68f","./sr":"0991","./sr-cyrl":"c577","./sr-cyrl.js":"c577","./sr.js":"0991","./ss":"cf76","./ss.js":"cf76","./sv":"0153","./sv.js":"0153","./sw":"cb6f","./sw.js":"cb6f","./ta":"8bfa","./ta.js":"8bfa","./te":"668b","./te.js":"668b","./tet":"eae7","./tet.js":"eae7","./tg":"70b1","./tg.js":"70b1","./th":"7180","./th.js":"7180","./tk":"4912","./tk.js":"4912","./tl-ph":"f8bb","./tl-ph.js":"f8bb","./tlh":"b026","./tlh.js":"b026","./tr":"371d","./tr.js":"371d","./tzl":"c744","./tzl.js":"c744","./tzm":"787a","./tzm-latn":"71e0","./tzm-latn.js":"71e0","./tzm.js":"787a","./ug-cn":"6b5c","./ug-cn.js":"6b5c","./uk":"8c0c","./uk.js":"8c0c","./ur":"519e","./ur.js":"519e","./uz":"7982","./uz-latn":"3137","./uz-latn.js":"3137","./uz.js":"7982","./vi":"ae22","./vi.js":"ae22","./x-pseudo":"1129","./x-pseudo.js":"1129","./yo":"b4bf","./yo.js":"b4bf","./zh-cn":"fdc4","./zh-cn.js":"fdc4","./zh-hk":"747d","./zh-hk.js":"747d","./zh-mo":"fe39","./zh-mo.js":"fe39","./zh-tw":"d3e0","./zh-tw.js":"d3e0"};function n(t){var e=i(t);return a(e)}function i(t){if(!a.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}n.keys=function(){return Object.keys(s)},n.resolve=i,t.exports=n,n.id="0fd5"},1:function(t,e){},1149:function(t,e,a){"use strict";a("fda5")},"11fa":function(t,e,a){},"13f5":function(t,e,a){},1474:function(t,e,a){(function(e){
/*!
 * Quill Editor v1.3.6
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */
!function(e,a){t.exports=a()}("undefined"!=typeof self&&self,(function(){return function(t){function e(s){if(a[s])return a[s].exports;var n=a[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var a={};return e.m=t,e.c=a,e.d=function(t,a,s){e.o(t,a)||Object.defineProperty(t,a,{configurable:!1,enumerable:!0,get:s})},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=45)}([function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(17),n=a(18),i=a(19),r=a(48),o=a(49),l=a(50),c=a(51),u=a(52),d=a(11),p=a(29),m=a(30),h=a(28),f=a(1),_={Scope:f.Scope,create:f.create,find:f.find,query:f.query,register:f.register,Container:s.default,Format:n.default,Leaf:i.default,Embed:c.default,Scroll:r.default,Block:l.default,Inline:o.default,Text:u.default,Attributor:{Attribute:d.default,Class:p.default,Style:m.default,Store:h.default}};e.default=_},function(t,e,a){"use strict";function s(t,e){var a=i(t);if(null==a)throw new l("Unable to create "+t+" blot");var s=a;return new s(t instanceof Node||t.nodeType===Node.TEXT_NODE?t:s.create(e),e)}function n(t,a){return void 0===a&&(a=!1),null==t?null:null!=t[e.DATA_KEY]?t[e.DATA_KEY].blot:a?n(t.parentNode,a):null}function i(t,e){var a;if(void 0===e&&(e=c.ANY),"string"==typeof t)a=m[t]||u[t];else if(t instanceof Text||t.nodeType===Node.TEXT_NODE)a=m.text;else if("number"==typeof t)t&c.LEVEL&c.BLOCK?a=m.block:t&c.LEVEL&c.INLINE&&(a=m.inline);else if(t instanceof HTMLElement){var s=(t.getAttribute("class")||"").split(/\s+/);for(var n in s)if(a=d[s[n]])break;a=a||p[t.tagName]}return null==a?null:e&c.LEVEL&a.scope&&e&c.TYPE&a.scope?a:null}function r(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(t.length>1)return t.map((function(t){return r(t)}));var a=t[0];if("string"!=typeof a.blotName&&"string"!=typeof a.attrName)throw new l("Invalid definition");if("abstract"===a.blotName)throw new l("Cannot register abstract class");if(m[a.blotName||a.attrName]=a,"string"==typeof a.keyName)u[a.keyName]=a;else if(null!=a.className&&(d[a.className]=a),null!=a.tagName){Array.isArray(a.tagName)?a.tagName=a.tagName.map((function(t){return t.toUpperCase()})):a.tagName=a.tagName.toUpperCase();var s=Array.isArray(a.tagName)?a.tagName:[a.tagName];s.forEach((function(t){null!=p[t]&&null!=a.className||(p[t]=a)}))}return a}var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])};return function(e,a){function s(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(s.prototype=a.prototype,new s)}}();Object.defineProperty(e,"__esModule",{value:!0});var l=function(t){function e(e){var a=this;return e="[Parchment] "+e,a=t.call(this,e)||this,a.message=e,a.name=a.constructor.name,a}return o(e,t),e}(Error);e.ParchmentError=l;var c,u={},d={},p={},m={};e.DATA_KEY="__blot",function(t){t[t.TYPE=3]="TYPE",t[t.LEVEL=12]="LEVEL",t[t.ATTRIBUTE=13]="ATTRIBUTE",t[t.BLOT=14]="BLOT",t[t.INLINE=7]="INLINE",t[t.BLOCK=11]="BLOCK",t[t.BLOCK_BLOT=10]="BLOCK_BLOT",t[t.INLINE_BLOT=6]="INLINE_BLOT",t[t.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",t[t.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",t[t.ANY=15]="ANY"}(c=e.Scope||(e.Scope={})),e.create=s,e.find=n,e.query=i,e.register=r},function(t,e){"use strict";var a=Object.prototype.hasOwnProperty,s=Object.prototype.toString,n=function(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===s.call(t)},i=function(t){if(!t||"[object Object]"!==s.call(t))return!1;var e,n=a.call(t,"constructor"),i=t.constructor&&t.constructor.prototype&&a.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!i)return!1;for(e in t);return void 0===e||a.call(t,e)};t.exports=function t(){var e,a,s,r,o,l,c=arguments[0],u=1,d=arguments.length,p=!1;for("boolean"==typeof c&&(p=c,c=arguments[1]||{},u=2),(null==c||"object"!=typeof c&&"function"!=typeof c)&&(c={});u<d;++u)if(null!=(e=arguments[u]))for(a in e)s=c[a],r=e[a],c!==r&&(p&&r&&(i(r)||(o=n(r)))?(o?(o=!1,l=s&&n(s)?s:[]):l=s&&i(s)?s:{},c[a]=t(p,l,r)):void 0!==r&&(c[a]=r));return c}},function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==t?e:("function"==typeof t.formats&&(e=(0,d.default)(e,t.formats())),null==t.parent||"scroll"==t.parent.blotName||t.parent.statics.scope!==t.statics.scope?e:o(t.parent,e))}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.BlockEmbed=e.bubbleFormats=void 0;var l=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),c=function t(e,a,s){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,a);if(void 0===n){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,a,s)}if("value"in n)return n.value;var r=n.get;return void 0!==r?r.call(s):void 0},u=a(2),d=s(u),p=a(4),m=s(p),h=a(0),f=s(h),_=a(14),g=s(_),v=a(5),y=s(v),b=a(8),w=s(b),O=function(t){function e(){return n(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return r(e,t),l(e,[{key:"attach",value:function(){c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"attach",this).call(this),this.attributes=new f.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return(new m.default).insert(this.value(),(0,d.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(t,e){var a=f.default.query(t,f.default.Scope.BLOCK_ATTRIBUTE);null!=a&&this.attributes.attribute(a,e)}},{key:"formatAt",value:function(t,e,a,s){this.format(a,s)}},{key:"insertAt",value:function(t,a,s){if("string"==typeof a&&a.endsWith("\n")){var n=f.default.create(E.blotName);this.parent.insertBefore(n,0===t?this:this.next),n.insertAt(0,a.slice(0,-1))}else c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertAt",this).call(this,t,a,s)}}]),e}(f.default.Embed);O.scope=f.default.Scope.BLOCK_BLOT;var E=function(t){function e(t){n(this,e);var a=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return a.cache={},a}return r(e,t),l(e,[{key:"delta",value:function(){return null==this.cache.delta&&(this.cache.delta=this.descendants(f.default.Leaf).reduce((function(t,e){return 0===e.length()?t:t.insert(e.value(),o(e))}),new m.default).insert("\n",o(this))),this.cache.delta}},{key:"deleteAt",value:function(t,a){c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"deleteAt",this).call(this,t,a),this.cache={}}},{key:"formatAt",value:function(t,a,s,n){a<=0||(f.default.query(s,f.default.Scope.BLOCK)?t+a===this.length()&&this.format(s,n):c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"formatAt",this).call(this,t,Math.min(a,this.length()-t-1),s,n),this.cache={})}},{key:"insertAt",value:function(t,a,s){if(null!=s)return c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertAt",this).call(this,t,a,s);if(0!==a.length){var n=a.split("\n"),i=n.shift();i.length>0&&(t<this.length()-1||null==this.children.tail?c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertAt",this).call(this,Math.min(t,this.length()-1),i):this.children.tail.insertAt(this.children.tail.length(),i),this.cache={});var r=this;n.reduce((function(t,e){return r=r.split(t,!0),r.insertAt(0,e),e.length}),t+i.length)}}},{key:"insertBefore",value:function(t,a){var s=this.children.head;c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertBefore",this).call(this,t,a),s instanceof g.default&&s.remove(),this.cache={}}},{key:"length",value:function(){return null==this.cache.length&&(this.cache.length=c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"length",this).call(this)+1),this.cache.length}},{key:"moveChildren",value:function(t,a){c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"moveChildren",this).call(this,t,a),this.cache={}}},{key:"optimize",value:function(t){c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"optimize",this).call(this,t),this.cache={}}},{key:"path",value:function(t){return c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"path",this).call(this,t,!0)}},{key:"removeChild",value:function(t){c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removeChild",this).call(this,t),this.cache={}}},{key:"split",value:function(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(a&&(0===t||t>=this.length()-1)){var s=this.clone();return 0===t?(this.parent.insertBefore(s,this),this):(this.parent.insertBefore(s,this.next),s)}var n=c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"split",this).call(this,t,a);return this.cache={},n}}]),e}(f.default.Block);E.blotName="block",E.tagName="P",E.defaultChild="break",E.allowedChildren=[y.default,f.default.Embed,w.default],e.bubbleFormats=o,e.BlockEmbed=O,e.default=E},function(t,e,a){var s=a(54),n=a(12),i=a(2),r=a(20),o=String.fromCharCode(0),l=function(t){Array.isArray(t)?this.ops=t:null!=t&&Array.isArray(t.ops)?this.ops=t.ops:this.ops=[]};l.prototype.insert=function(t,e){var a={};return 0===t.length?this:(a.insert=t,null!=e&&"object"==typeof e&&Object.keys(e).length>0&&(a.attributes=e),this.push(a))},l.prototype.delete=function(t){return t<=0?this:this.push({delete:t})},l.prototype.retain=function(t,e){if(t<=0)return this;var a={retain:t};return null!=e&&"object"==typeof e&&Object.keys(e).length>0&&(a.attributes=e),this.push(a)},l.prototype.push=function(t){var e=this.ops.length,a=this.ops[e-1];if(t=i(!0,{},t),"object"==typeof a){if("number"==typeof t.delete&&"number"==typeof a.delete)return this.ops[e-1]={delete:a.delete+t.delete},this;if("number"==typeof a.delete&&null!=t.insert&&(e-=1,"object"!=typeof(a=this.ops[e-1])))return this.ops.unshift(t),this;if(n(t.attributes,a.attributes)){if("string"==typeof t.insert&&"string"==typeof a.insert)return this.ops[e-1]={insert:a.insert+t.insert},"object"==typeof t.attributes&&(this.ops[e-1].attributes=t.attributes),this;if("number"==typeof t.retain&&"number"==typeof a.retain)return this.ops[e-1]={retain:a.retain+t.retain},"object"==typeof t.attributes&&(this.ops[e-1].attributes=t.attributes),this}}return e===this.ops.length?this.ops.push(t):this.ops.splice(e,0,t),this},l.prototype.chop=function(){var t=this.ops[this.ops.length-1];return t&&t.retain&&!t.attributes&&this.ops.pop(),this},l.prototype.filter=function(t){return this.ops.filter(t)},l.prototype.forEach=function(t){this.ops.forEach(t)},l.prototype.map=function(t){return this.ops.map(t)},l.prototype.partition=function(t){var e=[],a=[];return this.forEach((function(s){(t(s)?e:a).push(s)})),[e,a]},l.prototype.reduce=function(t,e){return this.ops.reduce(t,e)},l.prototype.changeLength=function(){return this.reduce((function(t,e){return e.insert?t+r.length(e):e.delete?t-e.delete:t}),0)},l.prototype.length=function(){return this.reduce((function(t,e){return t+r.length(e)}),0)},l.prototype.slice=function(t,e){t=t||0,"number"!=typeof e&&(e=1/0);for(var a=[],s=r.iterator(this.ops),n=0;n<e&&s.hasNext();){var i;n<t?i=s.next(t-n):(i=s.next(e-n),a.push(i)),n+=r.length(i)}return new l(a)},l.prototype.compose=function(t){for(var e=r.iterator(this.ops),a=r.iterator(t.ops),s=new l;e.hasNext()||a.hasNext();)if("insert"===a.peekType())s.push(a.next());else if("delete"===e.peekType())s.push(e.next());else{var n=Math.min(e.peekLength(),a.peekLength()),i=e.next(n),o=a.next(n);if("number"==typeof o.retain){var c={};"number"==typeof i.retain?c.retain=n:c.insert=i.insert;var u=r.attributes.compose(i.attributes,o.attributes,"number"==typeof i.retain);u&&(c.attributes=u),s.push(c)}else"number"==typeof o.delete&&"number"==typeof i.retain&&s.push(o)}return s.chop()},l.prototype.concat=function(t){var e=new l(this.ops.slice());return t.ops.length>0&&(e.push(t.ops[0]),e.ops=e.ops.concat(t.ops.slice(1))),e},l.prototype.diff=function(t,e){if(this.ops===t.ops)return new l;var a=[this,t].map((function(e){return e.map((function(a){if(null!=a.insert)return"string"==typeof a.insert?a.insert:o;var s=e===t?"on":"with";throw new Error("diff() called "+s+" non-document")})).join("")})),i=new l,c=s(a[0],a[1],e),u=r.iterator(this.ops),d=r.iterator(t.ops);return c.forEach((function(t){for(var e=t[1].length;e>0;){var a=0;switch(t[0]){case s.INSERT:a=Math.min(d.peekLength(),e),i.push(d.next(a));break;case s.DELETE:a=Math.min(e,u.peekLength()),u.next(a),i.delete(a);break;case s.EQUAL:a=Math.min(u.peekLength(),d.peekLength(),e);var o=u.next(a),l=d.next(a);n(o.insert,l.insert)?i.retain(a,r.attributes.diff(o.attributes,l.attributes)):i.push(l).delete(a)}e-=a}})),i.chop()},l.prototype.eachLine=function(t,e){e=e||"\n";for(var a=r.iterator(this.ops),s=new l,n=0;a.hasNext();){if("insert"!==a.peekType())return;var i=a.peek(),o=r.length(i)-a.peekLength(),c="string"==typeof i.insert?i.insert.indexOf(e,o)-o:-1;if(c<0)s.push(a.next());else if(c>0)s.push(a.next(c));else{if(!1===t(s,a.next(1).attributes||{},n))return;n+=1,s=new l}}s.length()>0&&t(s,{},n)},l.prototype.transform=function(t,e){if(e=!!e,"number"==typeof t)return this.transformPosition(t,e);for(var a=r.iterator(this.ops),s=r.iterator(t.ops),n=new l;a.hasNext()||s.hasNext();)if("insert"!==a.peekType()||!e&&"insert"===s.peekType())if("insert"===s.peekType())n.push(s.next());else{var i=Math.min(a.peekLength(),s.peekLength()),o=a.next(i),c=s.next(i);if(o.delete)continue;c.delete?n.push(c):n.retain(i,r.attributes.transform(o.attributes,c.attributes,e))}else n.retain(r.length(a.next()));return n.chop()},l.prototype.transformPosition=function(t,e){e=!!e;for(var a=r.iterator(this.ops),s=0;a.hasNext()&&s<=t;){var n=a.peekLength(),i=a.peekType();a.next(),"delete"!==i?("insert"===i&&(s<t||!e)&&(t+=n),s+=n):t-=Math.min(n,t-s)}return t},t.exports=l},function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),l=function t(e,a,s){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,a);if(void 0===n){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,a,s)}if("value"in n)return n.value;var r=n.get;return void 0!==r?r.call(s):void 0},c=a(8),u=s(c),d=a(0),p=s(d),m=function(t){function e(){return n(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return r(e,t),o(e,[{key:"formatAt",value:function(t,a,s,n){if(e.compare(this.statics.blotName,s)<0&&p.default.query(s,p.default.Scope.BLOT)){var i=this.isolate(t,a);n&&i.wrap(s,n)}else l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"formatAt",this).call(this,t,a,s,n)}},{key:"optimize",value:function(t){if(l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"optimize",this).call(this,t),this.parent instanceof e&&e.compare(this.statics.blotName,this.parent.statics.blotName)>0){var a=this.parent.isolate(this.offset(),this.length());this.moveChildren(a),a.wrap(this)}}}],[{key:"compare",value:function(t,a){var s=e.order.indexOf(t),n=e.order.indexOf(a);return s>=0||n>=0?s-n:t===a?0:t<a?-1:1}}]),e}(p.default.Inline);m.allowedChildren=[m,p.default.Embed,u.default],m.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],e.default=m},function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}function n(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(e=(0,S.default)(!0,{container:t,modules:{clipboard:!0,keyboard:!0,history:!0}},e),e.theme&&e.theme!==U.DEFAULTS.theme){if(e.theme=U.import("themes/"+e.theme),null==e.theme)throw new Error("Invalid theme "+e.theme+". Did you register it?")}else e.theme=x.default;var a=(0,S.default)(!0,{},e.theme.DEFAULTS);[a,e].forEach((function(t){t.modules=t.modules||{},Object.keys(t.modules).forEach((function(e){!0===t.modules[e]&&(t.modules[e]={})}))}));var s=Object.keys(a.modules).concat(Object.keys(e.modules)),n=s.reduce((function(t,e){var a=U.import("modules/"+e);return null==a?T.error("Cannot load "+e+" module. Are you sure you registered it?"):t[e]=a.DEFAULTS||{},t}),{});return null!=e.modules&&e.modules.toolbar&&e.modules.toolbar.constructor!==Object&&(e.modules.toolbar={container:e.modules.toolbar}),e=(0,S.default)(!0,{},U.DEFAULTS,{modules:n},a,e),["bounds","container","scrollingContainer"].forEach((function(t){"string"==typeof e[t]&&(e[t]=document.querySelector(e[t]))})),e.modules=Object.keys(e.modules).reduce((function(t,a){return e.modules[a]&&(t[a]=e.modules[a]),t}),{}),e}function o(t,e,a,s){if(this.options.strict&&!this.isEnabled()&&e===v.default.sources.USER)return new h.default;var n=null==a?null:this.getSelection(),i=this.editor.delta,r=t();if(null!=n&&(!0===a&&(a=n.index),null==s?n=c(n,r,e):0!==s&&(n=c(n,a,s,e)),this.setSelection(n,v.default.sources.SILENT)),r.length()>0){var o,l,u=[v.default.events.TEXT_CHANGE,r,i,e];if((o=this.emitter).emit.apply(o,[v.default.events.EDITOR_CHANGE].concat(u)),e!==v.default.sources.SILENT)(l=this.emitter).emit.apply(l,u)}return r}function l(t,e,a,s,n){var i={};return"number"==typeof t.index&&"number"==typeof t.length?"number"!=typeof e?(n=s,s=a,a=e,e=t.length,t=t.index):(e=t.length,t=t.index):"number"!=typeof e&&(n=s,s=a,a=e,e=0),"object"===(void 0===a?"undefined":u(a))?(i=a,n=s):"string"==typeof a&&(null!=s?i[a]=s:n=a),n=n||v.default.sources.API,[t,e,i,n]}function c(t,e,a,s){if(null==t)return null;var n=void 0,i=void 0;if(e instanceof h.default){var r=[t.index,t.index+t.length].map((function(t){return e.transformPosition(t,s!==v.default.sources.USER)})),o=d(r,2);n=o[0],i=o[1]}else{var l=[t.index,t.index+t.length].map((function(t){return t<e||t===e&&s===v.default.sources.USER?t:a>=0?t+a:Math.max(e,t+a)})),c=d(l,2);n=c[0],i=c[1]}return new E.Range(n,i-n)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.overload=e.expandConfig=void 0;var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d=function(){function t(t,e){var a=[],s=!0,n=!1,i=void 0;try{for(var r,o=t[Symbol.iterator]();!(s=(r=o.next()).done)&&(a.push(r.value),!e||a.length!==e);s=!0);}catch(t){n=!0,i=t}finally{try{!s&&o.return&&o.return()}finally{if(n)throw i}}return a}return function(e,a){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),p=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}();a(53);var m=a(4),h=s(m),f=a(57),_=s(f),g=a(9),v=s(g),y=a(7),b=s(y),w=a(0),O=s(w),E=a(22),C=s(E),N=a(2),S=s(N),A=a(10),D=s(A),M=a(32),x=s(M),T=(0,D.default)("quill"),U=function(){function t(e){var a=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(i(this,t),this.options=r(e,s),this.container=this.options.container,null==this.container)return T.error("Invalid Quill container",e);this.options.debug&&t.debug(this.options.debug);var n=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new v.default,this.scroll=O.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new _.default(this.scroll),this.selection=new C.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(v.default.events.EDITOR_CHANGE,(function(t){t===v.default.events.TEXT_CHANGE&&a.root.classList.toggle("ql-blank",a.editor.isBlank())})),this.emitter.on(v.default.events.SCROLL_UPDATE,(function(t,e){var s=a.selection.lastRange,n=s&&0===s.length?s.index:void 0;o.call(a,(function(){return a.editor.update(null,e,n)}),t)}));var l=this.clipboard.convert("<div class='ql-editor' style=\"white-space: normal;\">"+n+"<p><br></p></div>");this.setContents(l),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return p(t,null,[{key:"debug",value:function(t){!0===t&&(t="log"),D.default.level(t)}},{key:"find",value:function(t){return t.__quill||O.default.find(t)}},{key:"import",value:function(t){return null==this.imports[t]&&T.error("Cannot import "+t+". Are you sure it was registered?"),this.imports[t]}},{key:"register",value:function(t,e){var a=this,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("string"!=typeof t){var n=t.attrName||t.blotName;"string"==typeof n?this.register("formats/"+n,t,e):Object.keys(t).forEach((function(s){a.register(s,t[s],e)}))}else null==this.imports[t]||s||T.warn("Overwriting "+t+" with",e),this.imports[t]=e,(t.startsWith("blots/")||t.startsWith("formats/"))&&"abstract"!==e.blotName?O.default.register(e):t.startsWith("modules")&&"function"==typeof e.register&&e.register()}}]),p(t,[{key:"addContainer",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"==typeof t){var a=t;t=document.createElement("div"),t.classList.add(a)}return this.container.insertBefore(t,e),t}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(t,e,a){var s=this,n=l(t,e,a),i=d(n,4);return t=i[0],e=i[1],a=i[3],o.call(this,(function(){return s.editor.deleteText(t,e)}),a,t,-1*e)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.scroll.enable(t),this.container.classList.toggle("ql-disabled",!t)}},{key:"focus",value:function(){var t=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=t,this.scrollIntoView()}},{key:"format",value:function(t,e){var a=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:v.default.sources.API;return o.call(this,(function(){var s=a.getSelection(!0),i=new h.default;if(null==s)return i;if(O.default.query(t,O.default.Scope.BLOCK))i=a.editor.formatLine(s.index,s.length,n({},t,e));else{if(0===s.length)return a.selection.format(t,e),i;i=a.editor.formatText(s.index,s.length,n({},t,e))}return a.setSelection(s,v.default.sources.SILENT),i}),s)}},{key:"formatLine",value:function(t,e,a,s,n){var i=this,r=void 0,c=l(t,e,a,s,n),u=d(c,4);return t=u[0],e=u[1],r=u[2],n=u[3],o.call(this,(function(){return i.editor.formatLine(t,e,r)}),n,t,0)}},{key:"formatText",value:function(t,e,a,s,n){var i=this,r=void 0,c=l(t,e,a,s,n),u=d(c,4);return t=u[0],e=u[1],r=u[2],n=u[3],o.call(this,(function(){return i.editor.formatText(t,e,r)}),n,t,0)}},{key:"getBounds",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=void 0;a="number"==typeof t?this.selection.getBounds(t,e):this.selection.getBounds(t.index,t.length);var s=this.container.getBoundingClientRect();return{bottom:a.bottom-s.top,height:a.height,left:a.left-s.left,right:a.right-s.left,top:a.top-s.top,width:a.width}}},{key:"getContents",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-t,a=l(t,e),s=d(a,2);return t=s[0],e=s[1],this.editor.getContents(t,e)}},{key:"getFormat",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSelection(!0),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"number"==typeof t?this.editor.getFormat(t,e):this.editor.getFormat(t.index,t.length)}},{key:"getIndex",value:function(t){return t.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(t){return this.scroll.leaf(t)}},{key:"getLine",value:function(t){return this.scroll.line(t)}},{key:"getLines",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;return"number"!=typeof t?this.scroll.lines(t.index,t.length):this.scroll.lines(t,e)}},{key:"getModule",value:function(t){return this.theme.modules[t]}},{key:"getSelection",value:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-t,a=l(t,e),s=d(a,2);return t=s[0],e=s[1],this.editor.getText(t,e)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(e,a,s){var n=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.sources.API;return o.call(this,(function(){return n.editor.insertEmbed(e,a,s)}),i,e)}},{key:"insertText",value:function(t,e,a,s,n){var i=this,r=void 0,c=l(t,0,a,s,n),u=d(c,4);return t=u[0],r=u[2],n=u[3],o.call(this,(function(){return i.editor.insertText(t,e,r)}),n,t,e.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(t,e,a){this.clipboard.dangerouslyPasteHTML(t,e,a)}},{key:"removeFormat",value:function(t,e,a){var s=this,n=l(t,e,a),i=d(n,4);return t=i[0],e=i[1],a=i[3],o.call(this,(function(){return s.editor.removeFormat(t,e)}),a,t)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v.default.sources.API;return o.call(this,(function(){t=new h.default(t);var a=e.getLength(),s=e.editor.deleteText(0,a),n=e.editor.applyDelta(t),i=n.ops[n.ops.length-1];return null!=i&&"string"==typeof i.insert&&"\n"===i.insert[i.insert.length-1]&&(e.editor.deleteText(e.getLength()-1,1),n.delete(1)),s.compose(n)}),a)}},{key:"setSelection",value:function(e,a,s){if(null==e)this.selection.setRange(null,a||t.sources.API);else{var n=l(e,a,s),i=d(n,4);e=i[0],a=i[1],s=i[3],this.selection.setRange(new E.Range(e,a),s),s!==v.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v.default.sources.API,a=(new h.default).insert(t);return this.setContents(a,e)}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v.default.sources.USER,e=this.scroll.update(t);return this.selection.update(t),e}},{key:"updateContents",value:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v.default.sources.API;return o.call(this,(function(){return t=new h.default(t),e.editor.applyDelta(t,a)}),a,!0)}}]),t}();U.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},U.events=v.default.events,U.sources=v.default.sources,U.version="1.3.6",U.imports={delta:h.default,parchment:O.default,"core/module":b.default,"core/theme":x.default},e.expandConfig=r,e.overload=l,e.default=U},function(t,e,a){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function t(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s(this,t),this.quill=e,this.options=a};n.DEFAULTS={},e.default=n},function(t,e,a){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=a(0),o=function(t){return t&&t.__esModule?t:{default:t}}(r),l=function(t){function e(){return s(this,e),n(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return i(e,t),e}(o.default.Text);e.default=l},function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),l=function t(e,a,s){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,a);if(void 0===n){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,a,s)}if("value"in n)return n.value;var r=n.get;return void 0!==r?r.call(s):void 0},c=a(58),u=s(c),d=a(10),p=s(d),m=(0,p.default)("quill:events");["selectionchange","mousedown","mouseup","click"].forEach((function(t){document.addEventListener(t,(function(){for(var t=arguments.length,e=Array(t),a=0;a<t;a++)e[a]=arguments[a];[].slice.call(document.querySelectorAll(".ql-container")).forEach((function(t){var a;t.__quill&&t.__quill.emitter&&(a=t.__quill.emitter).handleDOM.apply(a,e)}))}))}));var h=function(t){function e(){n(this,e);var t=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.listeners={},t.on("error",m.error),t}return r(e,t),o(e,[{key:"emit",value:function(){m.log.apply(m,arguments),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(t){for(var e=arguments.length,a=Array(e>1?e-1:0),s=1;s<e;s++)a[s-1]=arguments[s];(this.listeners[t.type]||[]).forEach((function(e){var s=e.node,n=e.handler;(t.target===s||s.contains(t.target))&&n.apply(void 0,[t].concat(a))}))}},{key:"listenDOM",value:function(t,e,a){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push({node:e,handler:a})}}]),e}(u.default);h.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},h.sources={API:"api",SILENT:"silent",USER:"user"},e.default=h},function(t,e,a){"use strict";function s(t){if(i.indexOf(t)<=i.indexOf(r)){for(var e,a=arguments.length,s=Array(a>1?a-1:0),n=1;n<a;n++)s[n-1]=arguments[n];(e=console)[t].apply(e,s)}}function n(t){return i.reduce((function(e,a){return e[a]=s.bind(console,a,t),e}),{})}Object.defineProperty(e,"__esModule",{value:!0});var i=["error","warn","log","info"],r="warn";s.level=n.level=function(t){r=t},e.default=n},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(1),n=function(){function t(t,e,a){void 0===a&&(a={}),this.attrName=t,this.keyName=e;var n=s.Scope.TYPE&s.Scope.ATTRIBUTE;null!=a.scope?this.scope=a.scope&s.Scope.LEVEL|n:this.scope=s.Scope.ATTRIBUTE,null!=a.whitelist&&(this.whitelist=a.whitelist)}return t.keys=function(t){return[].map.call(t.attributes,(function(t){return t.name}))},t.prototype.add=function(t,e){return!!this.canAdd(t,e)&&(t.setAttribute(this.keyName,e),!0)},t.prototype.canAdd=function(t,e){return null!=s.query(t,s.Scope.BLOT&(this.scope|s.Scope.TYPE))&&(null==this.whitelist||("string"==typeof e?this.whitelist.indexOf(e.replace(/["']/g,""))>-1:this.whitelist.indexOf(e)>-1))},t.prototype.remove=function(t){t.removeAttribute(this.keyName)},t.prototype.value=function(t){var e=t.getAttribute(this.keyName);return this.canAdd(t,e)&&e?e:""},t}();e.default=n},function(t,e,a){function s(t){return null===t||void 0===t}function n(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length)&&"function"==typeof t.copy&&"function"==typeof t.slice&&!(t.length>0&&"number"!=typeof t[0])}function i(t,e,a){var i,u;if(s(t)||s(e))return!1;if(t.prototype!==e.prototype)return!1;if(l(t))return!!l(e)&&(t=r.call(t),e=r.call(e),c(t,e,a));if(n(t)){if(!n(e))return!1;if(t.length!==e.length)return!1;for(i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}try{var d=o(t),p=o(e)}catch(t){return!1}if(d.length!=p.length)return!1;for(d.sort(),p.sort(),i=d.length-1;i>=0;i--)if(d[i]!=p[i])return!1;for(i=d.length-1;i>=0;i--)if(u=d[i],!c(t[u],e[u],a))return!1;return typeof t==typeof e}var r=Array.prototype.slice,o=a(55),l=a(56),c=t.exports=function(t,e,a){return a||(a={}),t===e||(t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():!t||!e||"object"!=typeof t&&"object"!=typeof e?a.strict?t===e:t==e:i(t,e,a))}},function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Code=void 0;var o=function(){function t(t,e){var a=[],s=!0,n=!1,i=void 0;try{for(var r,o=t[Symbol.iterator]();!(s=(r=o.next()).done)&&(a.push(r.value),!e||a.length!==e);s=!0);}catch(t){n=!0,i=t}finally{try{!s&&o.return&&o.return()}finally{if(n)throw i}}return a}return function(e,a){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),c=function t(e,a,s){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,a);if(void 0===n){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,a,s)}if("value"in n)return n.value;var r=n.get;return void 0!==r?r.call(s):void 0},u=a(4),d=s(u),p=a(0),m=s(p),h=a(3),f=s(h),_=a(5),g=s(_),v=a(8),y=s(v),b=function(t){function e(){return n(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return r(e,t),e}(g.default);b.blotName="code",b.tagName="CODE";var w=function(t){function e(){return n(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return r(e,t),l(e,[{key:"delta",value:function(){var t=this,e=this.domNode.textContent;return e.endsWith("\n")&&(e=e.slice(0,-1)),e.split("\n").reduce((function(e,a){return e.insert(a).insert("\n",t.formats())}),new d.default)}},{key:"format",value:function(t,a){if(t!==this.statics.blotName||!a){var s=this.descendant(y.default,this.length()-1),n=o(s,1),i=n[0];null!=i&&i.deleteAt(i.length()-1,1),c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"format",this).call(this,t,a)}}},{key:"formatAt",value:function(t,a,s,n){if(0!==a&&null!=m.default.query(s,m.default.Scope.BLOCK)&&(s!==this.statics.blotName||n!==this.statics.formats(this.domNode))){var i=this.newlineIndex(t);if(!(i<0||i>=t+a)){var r=this.newlineIndex(t,!0)+1,o=i-r+1,l=this.isolate(r,o),c=l.next;l.format(s,n),c instanceof e&&c.formatAt(0,t-r+a-o,s,n)}}}},{key:"insertAt",value:function(t,e,a){if(null==a){var s=this.descendant(y.default,t),n=o(s,2),i=n[0],r=n[1];i.insertAt(r,e)}}},{key:"length",value:function(){var t=this.domNode.textContent.length;return this.domNode.textContent.endsWith("\n")?t:t+1}},{key:"newlineIndex",value:function(t){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])return this.domNode.textContent.slice(0,t).lastIndexOf("\n");var e=this.domNode.textContent.slice(t).indexOf("\n");return e>-1?t+e:-1}},{key:"optimize",value:function(t){this.domNode.textContent.endsWith("\n")||this.appendChild(m.default.create("text","\n")),c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"optimize",this).call(this,t);var a=this.next;null!=a&&a.prev===this&&a.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===a.statics.formats(a.domNode)&&(a.optimize(t),a.moveChildren(this),a.remove())}},{key:"replace",value:function(t){c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"replace",this).call(this,t),[].slice.call(this.domNode.querySelectorAll("*")).forEach((function(t){var e=m.default.find(t);null==e?t.parentNode.removeChild(t):e instanceof m.default.Embed?e.remove():e.unwrap()}))}}],[{key:"create",value:function(t){var a=c(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this,t);return a.setAttribute("spellcheck",!1),a}},{key:"formats",value:function(){return!0}}]),e}(f.default);w.blotName="code-block",w.tagName="PRE",w.TAB="  ",e.Code=b,e.default=w},function(t,e,a){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),o=function t(e,a,s){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,a);if(void 0===n){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,a,s)}if("value"in n)return n.value;var r=n.get;return void 0!==r?r.call(s):void 0},l=a(0),c=function(t){return t&&t.__esModule?t:{default:t}}(l),u=function(t){function e(){return s(this,e),n(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return i(e,t),r(e,[{key:"insertInto",value:function(t,a){0===t.children.length?o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertInto",this).call(this,t,a):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),e}(c.default.Embed);u.blotName="break",u.tagName="BR",e.default=u},function(t,e,a){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function r(t,e){var a=document.createElement("a");a.href=t;var s=a.href.slice(0,a.href.indexOf(":"));return e.indexOf(s)>-1}Object.defineProperty(e,"__esModule",{value:!0}),e.sanitize=e.default=void 0;var o=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),l=function t(e,a,s){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,a);if(void 0===n){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,a,s)}if("value"in n)return n.value;var r=n.get;return void 0!==r?r.call(s):void 0},c=a(5),u=function(t){return t&&t.__esModule?t:{default:t}}(c),d=function(t){function e(){return s(this,e),n(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return i(e,t),o(e,[{key:"format",value:function(t,a){if(t!==this.statics.blotName||!a)return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"format",this).call(this,t,a);a=this.constructor.sanitize(a),this.domNode.setAttribute("href",a)}}],[{key:"create",value:function(t){var a=l(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this,t);return t=this.sanitize(t),a.setAttribute("href",t),a.setAttribute("target","_blank"),a}},{key:"formats",value:function(t){return t.getAttribute("href")}},{key:"sanitize",value:function(t){return r(t,this.PROTOCOL_WHITELIST)?t:this.SANITIZED_URL}}]),e}(u.default);d.blotName="link",d.tagName="A",d.SANITIZED_URL="about:blank",d.PROTOCOL_WHITELIST=["http","https","mailto","tel"],e.default=d,e.sanitize=r},function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){t.setAttribute(e,!("true"===t.getAttribute(e)))}Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),l=a(25),c=s(l),u=a(106),d=s(u),p=0,m=function(){function t(e){var a=this;n(this,t),this.select=e,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",(function(){a.togglePicker()})),this.label.addEventListener("keydown",(function(t){switch(t.keyCode){case c.default.keys.ENTER:a.togglePicker();break;case c.default.keys.ESCAPE:a.escape(),t.preventDefault()}})),this.select.addEventListener("change",this.update.bind(this))}return o(t,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),i(this.label,"aria-expanded"),i(this.options,"aria-hidden")}},{key:"buildItem",value:function(t){var e=this,a=document.createElement("span");return a.tabIndex="0",a.setAttribute("role","button"),a.classList.add("ql-picker-item"),t.hasAttribute("value")&&a.setAttribute("data-value",t.getAttribute("value")),t.textContent&&a.setAttribute("data-label",t.textContent),a.addEventListener("click",(function(){e.selectItem(a,!0)})),a.addEventListener("keydown",(function(t){switch(t.keyCode){case c.default.keys.ENTER:e.selectItem(a,!0),t.preventDefault();break;case c.default.keys.ESCAPE:e.escape(),t.preventDefault()}})),a}},{key:"buildLabel",value:function(){var t=document.createElement("span");return t.classList.add("ql-picker-label"),t.innerHTML=d.default,t.tabIndex="0",t.setAttribute("role","button"),t.setAttribute("aria-expanded","false"),this.container.appendChild(t),t}},{key:"buildOptions",value:function(){var t=this,e=document.createElement("span");e.classList.add("ql-picker-options"),e.setAttribute("aria-hidden","true"),e.tabIndex="-1",e.id="ql-picker-options-"+p,p+=1,this.label.setAttribute("aria-controls",e.id),this.options=e,[].slice.call(this.select.options).forEach((function(a){var s=t.buildItem(a);e.appendChild(s),!0===a.selected&&t.selectItem(s)})),this.container.appendChild(e)}},{key:"buildPicker",value:function(){var t=this;[].slice.call(this.select.attributes).forEach((function(e){t.container.setAttribute(e.name,e.value)})),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var t=this;this.close(),setTimeout((function(){return t.label.focus()}),1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this.container.querySelector(".ql-selected");if(t!==a&&(null!=a&&a.classList.remove("ql-selected"),null!=t&&(t.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(t.parentNode.children,t),t.hasAttribute("data-value")?this.label.setAttribute("data-value",t.getAttribute("data-value")):this.label.removeAttribute("data-value"),t.hasAttribute("data-label")?this.label.setAttribute("data-label",t.getAttribute("data-label")):this.label.removeAttribute("data-label"),e))){if("function"==typeof Event)this.select.dispatchEvent(new Event("change"));else if("object"===("undefined"==typeof Event?"undefined":r(Event))){var s=document.createEvent("Event");s.initEvent("change",!0,!0),this.select.dispatchEvent(s)}this.close()}}},{key:"update",value:function(){var t=void 0;if(this.select.selectedIndex>-1){var e=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];t=this.select.options[this.select.selectedIndex],this.selectItem(e)}else this.selectItem(null);var a=null!=t&&t!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",a)}}]),t}();e.default=m},function(t,e,a){"use strict";function s(t){var e=o.find(t);if(null==e)try{e=o.create(t)}catch(a){e=o.create(o.Scope.INLINE),[].slice.call(t.childNodes).forEach((function(t){e.domNode.appendChild(t)})),t.parentNode&&t.parentNode.replaceChild(e.domNode,t),e.attach()}return e}var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])};return function(e,a){function s(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(s.prototype=a.prototype,new s)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=a(47),r=a(27),o=a(1),l=function(t){function e(e){var a=t.call(this,e)||this;return a.build(),a}return n(e,t),e.prototype.appendChild=function(t){this.insertBefore(t)},e.prototype.attach=function(){t.prototype.attach.call(this),this.children.forEach((function(t){t.attach()}))},e.prototype.build=function(){var t=this;this.children=new i.default,[].slice.call(this.domNode.childNodes).reverse().forEach((function(e){try{var a=s(e);t.insertBefore(a,t.children.head||void 0)}catch(t){if(t instanceof o.ParchmentError)return;throw t}}))},e.prototype.deleteAt=function(t,e){if(0===t&&e===this.length())return this.remove();this.children.forEachAt(t,e,(function(t,e,a){t.deleteAt(e,a)}))},e.prototype.descendant=function(t,a){var s=this.children.find(a),n=s[0],i=s[1];return null==t.blotName&&t(n)||null!=t.blotName&&n instanceof t?[n,i]:n instanceof e?n.descendant(t,i):[null,-1]},e.prototype.descendants=function(t,a,s){void 0===a&&(a=0),void 0===s&&(s=Number.MAX_VALUE);var n=[],i=s;return this.children.forEachAt(a,s,(function(a,s,r){(null==t.blotName&&t(a)||null!=t.blotName&&a instanceof t)&&n.push(a),a instanceof e&&(n=n.concat(a.descendants(t,s,i))),i-=r})),n},e.prototype.detach=function(){this.children.forEach((function(t){t.detach()})),t.prototype.detach.call(this)},e.prototype.formatAt=function(t,e,a,s){this.children.forEachAt(t,e,(function(t,e,n){t.formatAt(e,n,a,s)}))},e.prototype.insertAt=function(t,e,a){var s=this.children.find(t),n=s[0],i=s[1];if(n)n.insertAt(i,e,a);else{var r=null==a?o.create("text",e):o.create(e,a);this.appendChild(r)}},e.prototype.insertBefore=function(t,e){if(null!=this.statics.allowedChildren&&!this.statics.allowedChildren.some((function(e){return t instanceof e})))throw new o.ParchmentError("Cannot insert "+t.statics.blotName+" into "+this.statics.blotName);t.insertInto(this,e)},e.prototype.length=function(){return this.children.reduce((function(t,e){return t+e.length()}),0)},e.prototype.moveChildren=function(t,e){this.children.forEach((function(a){t.insertBefore(a,e)}))},e.prototype.optimize=function(e){if(t.prototype.optimize.call(this,e),0===this.children.length)if(null!=this.statics.defaultChild){var a=o.create(this.statics.defaultChild);this.appendChild(a),a.optimize(e)}else this.remove()},e.prototype.path=function(t,a){void 0===a&&(a=!1);var s=this.children.find(t,a),n=s[0],i=s[1],r=[[this,t]];return n instanceof e?r.concat(n.path(i,a)):(null!=n&&r.push([n,i]),r)},e.prototype.removeChild=function(t){this.children.remove(t)},e.prototype.replace=function(a){a instanceof e&&a.moveChildren(this),t.prototype.replace.call(this,a)},e.prototype.split=function(t,e){if(void 0===e&&(e=!1),!e){if(0===t)return this;if(t===this.length())return this.next}var a=this.clone();return this.parent.insertBefore(a,this.next),this.children.forEachAt(t,this.length(),(function(t,s,n){t=t.split(s,e),a.appendChild(t)})),a},e.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},e.prototype.update=function(t,e){var a=this,n=[],i=[];t.forEach((function(t){t.target===a.domNode&&"childList"===t.type&&(n.push.apply(n,t.addedNodes),i.push.apply(i,t.removedNodes))})),i.forEach((function(t){if(!(null!=t.parentNode&&"IFRAME"!==t.tagName&&document.body.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var e=o.find(t);null!=e&&(null!=e.domNode.parentNode&&e.domNode.parentNode!==a.domNode||e.detach())}})),n.filter((function(t){return t.parentNode==a.domNode})).sort((function(t,e){return t===e?0:t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1})).forEach((function(t){var e=null;null!=t.nextSibling&&(e=o.find(t.nextSibling));var n=s(t);n.next==e&&null!=n.next||(null!=n.parent&&n.parent.removeChild(a),a.insertBefore(n,e||void 0))}))},e}(r.default);e.default=l},function(t,e,a){"use strict";var s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])};return function(e,a){function s(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(s.prototype=a.prototype,new s)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=a(11),i=a(28),r=a(17),o=a(1),l=function(t){function e(e){var a=t.call(this,e)||this;return a.attributes=new i.default(a.domNode),a}return s(e,t),e.formats=function(t){return"string"==typeof this.tagName||(Array.isArray(this.tagName)?t.tagName.toLowerCase():void 0)},e.prototype.format=function(t,e){var a=o.query(t);a instanceof n.default?this.attributes.attribute(a,e):e&&(null==a||t===this.statics.blotName&&this.formats()[t]===e||this.replaceWith(t,e))},e.prototype.formats=function(){var t=this.attributes.values(),e=this.statics.formats(this.domNode);return null!=e&&(t[this.statics.blotName]=e),t},e.prototype.replaceWith=function(e,a){var s=t.prototype.replaceWith.call(this,e,a);return this.attributes.copy(s),s},e.prototype.update=function(e,a){var s=this;t.prototype.update.call(this,e,a),e.some((function(t){return t.target===s.domNode&&"attributes"===t.type}))&&this.attributes.build()},e.prototype.wrap=function(a,s){var n=t.prototype.wrap.call(this,a,s);return n instanceof e&&n.statics.scope===this.statics.scope&&this.attributes.move(n),n},e}(r.default);e.default=l},function(t,e,a){"use strict";var s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])};return function(e,a){function s(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(s.prototype=a.prototype,new s)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=a(27),i=a(1),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.value=function(t){return!0},e.prototype.index=function(t,e){return this.domNode===t||this.domNode.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(e,1):-1},e.prototype.position=function(t,e){var a=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return t>0&&(a+=1),[this.parent.domNode,a]},e.prototype.value=function(){return t={},t[this.statics.blotName]=this.statics.value(this.domNode)||!0,t;var t},e.scope=i.Scope.INLINE_BLOT,e}(n.default);e.default=r},function(t,e,a){function s(t){this.ops=t,this.index=0,this.offset=0}var n=a(12),i=a(2),r={attributes:{compose:function(t,e,a){"object"!=typeof t&&(t={}),"object"!=typeof e&&(e={});var s=i(!0,{},e);for(var n in a||(s=Object.keys(s).reduce((function(t,e){return null!=s[e]&&(t[e]=s[e]),t}),{})),t)void 0!==t[n]&&void 0===e[n]&&(s[n]=t[n]);return Object.keys(s).length>0?s:void 0},diff:function(t,e){"object"!=typeof t&&(t={}),"object"!=typeof e&&(e={});var a=Object.keys(t).concat(Object.keys(e)).reduce((function(a,s){return n(t[s],e[s])||(a[s]=void 0===e[s]?null:e[s]),a}),{});return Object.keys(a).length>0?a:void 0},transform:function(t,e,a){if("object"!=typeof t)return e;if("object"==typeof e){if(!a)return e;var s=Object.keys(e).reduce((function(a,s){return void 0===t[s]&&(a[s]=e[s]),a}),{});return Object.keys(s).length>0?s:void 0}}},iterator:function(t){return new s(t)},length:function(t){return"number"==typeof t.delete?t.delete:"number"==typeof t.retain?t.retain:"string"==typeof t.insert?t.insert.length:1}};s.prototype.hasNext=function(){return this.peekLength()<1/0},s.prototype.next=function(t){t||(t=1/0);var e=this.ops[this.index];if(e){var a=this.offset,s=r.length(e);if(t>=s-a?(t=s-a,this.index+=1,this.offset=0):this.offset+=t,"number"==typeof e.delete)return{delete:t};var n={};return e.attributes&&(n.attributes=e.attributes),"number"==typeof e.retain?n.retain=t:"string"==typeof e.insert?n.insert=e.insert.substr(a,t):n.insert=e.insert,n}return{retain:1/0}},s.prototype.peek=function(){return this.ops[this.index]},s.prototype.peekLength=function(){return this.ops[this.index]?r.length(this.ops[this.index])-this.offset:1/0},s.prototype.peekType=function(){return this.ops[this.index]?"number"==typeof this.ops[this.index].delete?"delete":"number"==typeof this.ops[this.index].retain?"retain":"insert":"retain"},t.exports=r},function(t,a){var s=function(){"use strict";function t(t,e){return null!=e&&t instanceof e}function a(s,n,i,r,d){function p(s,i){if(null===s)return null;if(0===i)return s;var _,g;if("object"!=typeof s)return s;if(t(s,l))_=new l;else if(t(s,c))_=new c;else if(t(s,u))_=new u((function(t,e){s.then((function(e){t(p(e,i-1))}),(function(t){e(p(t,i-1))}))}));else if(a.__isArray(s))_=[];else if(a.__isRegExp(s))_=new RegExp(s.source,o(s)),s.lastIndex&&(_.lastIndex=s.lastIndex);else if(a.__isDate(s))_=new Date(s.getTime());else{if(f&&e.isBuffer(s))return _=new e(s.length),s.copy(_),_;t(s,Error)?_=Object.create(s):void 0===r?(g=Object.getPrototypeOf(s),_=Object.create(g)):(_=Object.create(r),g=r)}if(n){var v=m.indexOf(s);if(-1!=v)return h[v];m.push(s),h.push(_)}for(var y in t(s,l)&&s.forEach((function(t,e){var a=p(e,i-1),s=p(t,i-1);_.set(a,s)})),t(s,c)&&s.forEach((function(t){var e=p(t,i-1);_.add(e)})),s){var b;g&&(b=Object.getOwnPropertyDescriptor(g,y)),b&&null==b.set||(_[y]=p(s[y],i-1))}if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(s);for(y=0;y<w.length;y++){var O=w[y],E=Object.getOwnPropertyDescriptor(s,O);(!E||E.enumerable||d)&&(_[O]=p(s[O],i-1),E.enumerable||Object.defineProperty(_,O,{enumerable:!1}))}}if(d){var C=Object.getOwnPropertyNames(s);for(y=0;y<C.length;y++){var N=C[y];E=Object.getOwnPropertyDescriptor(s,N);E&&E.enumerable||(_[N]=p(s[N],i-1),Object.defineProperty(_,N,{enumerable:!1}))}}return _}"object"==typeof n&&(i=n.depth,r=n.prototype,d=n.includeNonEnumerable,n=n.circular);var m=[],h=[],f="undefined"!=typeof e;return void 0===n&&(n=!0),void 0===i&&(i=1/0),p(s,i)}function s(t){return Object.prototype.toString.call(t)}function n(t){return"object"==typeof t&&"[object Date]"===s(t)}function i(t){return"object"==typeof t&&"[object Array]"===s(t)}function r(t){return"object"==typeof t&&"[object RegExp]"===s(t)}function o(t){var e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),e}var l,c,u;try{l=Map}catch(t){l=function(){}}try{c=Set}catch(t){c=function(){}}try{u=Promise}catch(t){u=function(){}}return a.clonePrototype=function(t){if(null===t)return null;var e=function(){};return e.prototype=t,new e},a.__objToStr=s,a.__isDate=n,a.__isArray=i,a.__isRegExp=r,a.__getRegExpFlags=o,a}();"object"==typeof t&&t.exports&&(t.exports=s)},function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}function n(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){try{e.parentNode}catch(t){return!1}return e instanceof Text&&(e=e.parentNode),t.contains(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Range=void 0;var o=function(){function t(t,e){var a=[],s=!0,n=!1,i=void 0;try{for(var r,o=t[Symbol.iterator]();!(s=(r=o.next()).done)&&(a.push(r.value),!e||a.length!==e);s=!0);}catch(t){n=!0,i=t}finally{try{!s&&o.return&&o.return()}finally{if(n)throw i}}return a}return function(e,a){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),c=a(0),u=s(c),d=a(21),p=s(d),m=a(12),h=s(m),f=a(9),_=s(f),g=a(10),v=s(g),y=(0,v.default)("quill:selection"),b=function t(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;i(this,t),this.index=e,this.length=a},w=function(){function t(e,a){var s=this;i(this,t),this.emitter=a,this.scroll=e,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=u.default.create("cursor",this),this.lastRange=this.savedRange=new b(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,(function(){s.mouseDown||setTimeout(s.update.bind(s,_.default.sources.USER),1)})),this.emitter.on(_.default.events.EDITOR_CHANGE,(function(t,e){t===_.default.events.TEXT_CHANGE&&e.length()>0&&s.update(_.default.sources.SILENT)})),this.emitter.on(_.default.events.SCROLL_BEFORE_UPDATE,(function(){if(s.hasFocus()){var t=s.getNativeRange();null!=t&&t.start.node!==s.cursor.textNode&&s.emitter.once(_.default.events.SCROLL_UPDATE,(function(){try{s.setNativeRange(t.start.node,t.start.offset,t.end.node,t.end.offset)}catch(t){}}))}})),this.emitter.on(_.default.events.SCROLL_OPTIMIZE,(function(t,e){if(e.range){var a=e.range,n=a.startNode,i=a.startOffset,r=a.endNode,o=a.endOffset;s.setNativeRange(n,i,r,o)}})),this.update(_.default.sources.SILENT)}return l(t,[{key:"handleComposition",value:function(){var t=this;this.root.addEventListener("compositionstart",(function(){t.composing=!0})),this.root.addEventListener("compositionend",(function(){if(t.composing=!1,t.cursor.parent){var e=t.cursor.restore();if(!e)return;setTimeout((function(){t.setNativeRange(e.startNode,e.startOffset,e.endNode,e.endOffset)}),1)}}))}},{key:"handleDragging",value:function(){var t=this;this.emitter.listenDOM("mousedown",document.body,(function(){t.mouseDown=!0})),this.emitter.listenDOM("mouseup",document.body,(function(){t.mouseDown=!1,t.update(_.default.sources.USER)}))}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(t,e){if(null==this.scroll.whitelist||this.scroll.whitelist[t]){this.scroll.update();var a=this.getNativeRange();if(null!=a&&a.native.collapsed&&!u.default.query(t,u.default.Scope.BLOCK)){if(a.start.node!==this.cursor.textNode){var s=u.default.find(a.start.node,!1);if(null==s)return;if(s instanceof u.default.Leaf){var n=s.split(a.start.offset);s.parent.insertBefore(this.cursor,n)}else s.insertBefore(this.cursor,a.start.node);this.cursor.attach()}this.cursor.format(t,e),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=this.scroll.length();t=Math.min(t,a-1),e=Math.min(t+e,a-1)-t;var s=void 0,n=this.scroll.leaf(t),i=o(n,2),r=i[0],l=i[1];if(null==r)return null;var c=r.position(l,!0),u=o(c,2);s=u[0],l=u[1];var d=document.createRange();if(e>0){d.setStart(s,l);var p=this.scroll.leaf(t+e),m=o(p,2);if(r=m[0],l=m[1],null==r)return null;var h=r.position(l,!0),f=o(h,2);return s=f[0],l=f[1],d.setEnd(s,l),d.getBoundingClientRect()}var _="left",g=void 0;return s instanceof Text?(l<s.data.length?(d.setStart(s,l),d.setEnd(s,l+1)):(d.setStart(s,l-1),d.setEnd(s,l),_="right"),g=d.getBoundingClientRect()):(g=r.domNode.getBoundingClientRect(),l>0&&(_="right")),{bottom:g.top+g.height,height:g.height,left:g[_],right:g[_],top:g.top,width:0}}},{key:"getNativeRange",value:function(){var t=document.getSelection();if(null==t||t.rangeCount<=0)return null;var e=t.getRangeAt(0);if(null==e)return null;var a=this.normalizeNative(e);return y.info("getNativeRange",a),a}},{key:"getRange",value:function(){var t=this.getNativeRange();return null==t?[null,null]:[this.normalizedToRange(t),t]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(t){var e=this,a=[[t.start.node,t.start.offset]];t.native.collapsed||a.push([t.end.node,t.end.offset]);var s=a.map((function(t){var a=o(t,2),s=a[0],n=a[1],i=u.default.find(s,!0),r=i.offset(e.scroll);return 0===n?r:i instanceof u.default.Container?r+i.length():r+i.index(s,n)})),i=Math.min(Math.max.apply(Math,n(s)),this.scroll.length()-1),r=Math.min.apply(Math,[i].concat(n(s)));return new b(r,i-r)}},{key:"normalizeNative",value:function(t){if(!r(this.root,t.startContainer)||!t.collapsed&&!r(this.root,t.endContainer))return null;var e={start:{node:t.startContainer,offset:t.startOffset},end:{node:t.endContainer,offset:t.endOffset},native:t};return[e.start,e.end].forEach((function(t){for(var e=t.node,a=t.offset;!(e instanceof Text)&&e.childNodes.length>0;)if(e.childNodes.length>a)e=e.childNodes[a],a=0;else{if(e.childNodes.length!==a)break;e=e.lastChild,a=e instanceof Text?e.data.length:e.childNodes.length+1}t.node=e,t.offset=a})),e}},{key:"rangeToNative",value:function(t){var e=this,a=t.collapsed?[t.index]:[t.index,t.index+t.length],s=[],n=this.scroll.length();return a.forEach((function(t,a){t=Math.min(n-1,t);var i=void 0,r=e.scroll.leaf(t),l=o(r,2),c=l[0],u=l[1],d=c.position(u,0!==a),p=o(d,2);i=p[0],u=p[1],s.push(i,u)})),s.length<2&&(s=s.concat(s)),s}},{key:"scrollIntoView",value:function(t){var e=this.lastRange;if(null!=e){var a=this.getBounds(e.index,e.length);if(null!=a){var s=this.scroll.length()-1,n=this.scroll.line(Math.min(e.index,s)),i=o(n,1),r=i[0],l=r;if(e.length>0){var c=this.scroll.line(Math.min(e.index+e.length,s));l=o(c,1)[0]}if(null!=r&&null!=l){var u=t.getBoundingClientRect();a.top<u.top?t.scrollTop-=u.top-a.top:a.bottom>u.bottom&&(t.scrollTop+=a.bottom-u.bottom)}}}}},{key:"setNativeRange",value:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e,n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(y.info("setNativeRange",t,e,a,s),null==t||null!=this.root.parentNode&&null!=t.parentNode&&null!=a.parentNode){var i=document.getSelection();if(null!=i)if(null!=t){this.hasFocus()||this.root.focus();var r=(this.getNativeRange()||{}).native;if(null==r||n||t!==r.startContainer||e!==r.startOffset||a!==r.endContainer||s!==r.endOffset){"BR"==t.tagName&&(e=[].indexOf.call(t.parentNode.childNodes,t),t=t.parentNode),"BR"==a.tagName&&(s=[].indexOf.call(a.parentNode.childNodes,a),a=a.parentNode);var o=document.createRange();o.setStart(t,e),o.setEnd(a,s),i.removeAllRanges(),i.addRange(o)}}else i.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_.default.sources.API;if("string"==typeof e&&(a=e,e=!1),y.info("setRange",t),null!=t){var s=this.rangeToNative(t);this.setNativeRange.apply(this,n(s).concat([e]))}else this.setNativeRange(null);this.update(a)}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_.default.sources.USER,e=this.lastRange,a=this.getRange(),s=o(a,2),n=s[0],i=s[1];if(this.lastRange=n,null!=this.lastRange&&(this.savedRange=this.lastRange),!(0,h.default)(e,this.lastRange)){var r;!this.composing&&null!=i&&i.native.collapsed&&i.start.node!==this.cursor.textNode&&this.cursor.restore();var l,c=[_.default.events.SELECTION_CHANGE,(0,p.default)(this.lastRange),(0,p.default)(e),t];if((r=this.emitter).emit.apply(r,[_.default.events.EDITOR_CHANGE].concat(c)),t!==_.default.sources.SILENT)(l=this.emitter).emit.apply(l,c)}}}]),t}();e.Range=b,e.default=w},function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var o=a(0),l=s(o),c=a(3),u=s(c),d=function(t){function e(){return n(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return r(e,t),e}(l.default.Container);d.allowedChildren=[u.default,c.BlockEmbed,d],e.default=d},function(t,e,a){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.ColorStyle=e.ColorClass=e.ColorAttributor=void 0;var r=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),o=function t(e,a,s){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,a);if(void 0===n){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,a,s)}if("value"in n)return n.value;var r=n.get;return void 0!==r?r.call(s):void 0},l=a(0),c=function(t){return t&&t.__esModule?t:{default:t}}(l),u=function(t){function e(){return s(this,e),n(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return i(e,t),r(e,[{key:"value",value:function(t){var a=o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"value",this).call(this,t);return a.startsWith("rgb(")?(a=a.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+a.split(",").map((function(t){return("00"+parseInt(t).toString(16)).slice(-2)})).join("")):a}}]),e}(c.default.Attributor.Style),d=new c.default.Attributor.Class("color","ql-color",{scope:c.default.Scope.INLINE}),p=new u("color","color",{scope:c.default.Scope.INLINE});e.ColorAttributor=u,e.ColorClass=d,e.ColorStyle=p},function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}function n(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function l(t,e){var a,s=t===j.keys.LEFT?"prefix":"suffix";return a={key:t,shiftKey:e,altKey:null},n(a,s,/^$/),n(a,"handler",(function(a){var s=a.index;t===j.keys.RIGHT&&(s+=a.length+1);var n=this.quill.getLeaf(s);return!(g(n,1)[0]instanceof x.default.Embed)||(t===j.keys.LEFT?e?this.quill.setSelection(a.index-1,a.length+1,U.default.sources.USER):this.quill.setSelection(a.index-1,U.default.sources.USER):e?this.quill.setSelection(a.index,a.length+1,U.default.sources.USER):this.quill.setSelection(a.index+a.length+1,U.default.sources.USER),!1)})),a}function c(t,e){if(!(0===t.index||this.quill.getLength()<=1)){var a=this.quill.getLine(t.index),s=g(a,1),n=s[0],i={};if(0===e.offset){var r=this.quill.getLine(t.index-1),o=g(r,1),l=o[0];if(null!=l&&l.length()>1){var c=n.formats(),u=this.quill.getFormat(t.index-1,1);i=D.default.attributes.diff(c,u)||{}}}var d=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(e.prefix)?2:1;this.quill.deleteText(t.index-d,d,U.default.sources.USER),Object.keys(i).length>0&&this.quill.formatLine(t.index-d,d,i,U.default.sources.USER),this.quill.focus()}}function u(t,e){var a=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(e.suffix)?2:1;if(!(t.index>=this.quill.getLength()-a)){var s={},n=0,i=this.quill.getLine(t.index),r=g(i,1),o=r[0];if(e.offset>=o.length()-1){var l=this.quill.getLine(t.index+1),c=g(l,1),u=c[0];if(u){var d=o.formats(),p=this.quill.getFormat(t.index,1);s=D.default.attributes.diff(d,p)||{},n=u.length()}}this.quill.deleteText(t.index,a,U.default.sources.USER),Object.keys(s).length>0&&this.quill.formatLine(t.index+n-1,a,s,U.default.sources.USER)}}function d(t){var e=this.quill.getLines(t),a={};if(e.length>1){var s=e[0].formats(),n=e[e.length-1].formats();a=D.default.attributes.diff(n,s)||{}}this.quill.deleteText(t,U.default.sources.USER),Object.keys(a).length>0&&this.quill.formatLine(t.index,1,a,U.default.sources.USER),this.quill.setSelection(t.index,U.default.sources.SILENT),this.quill.focus()}function p(t,e){var a=this;t.length>0&&this.quill.scroll.deleteAt(t.index,t.length);var s=Object.keys(e.format).reduce((function(t,a){return x.default.query(a,x.default.Scope.BLOCK)&&!Array.isArray(e.format[a])&&(t[a]=e.format[a]),t}),{});this.quill.insertText(t.index,"\n",s,U.default.sources.USER),this.quill.setSelection(t.index+1,U.default.sources.SILENT),this.quill.focus(),Object.keys(e.format).forEach((function(t){null==s[t]&&(Array.isArray(e.format[t])||"link"!==t&&a.quill.format(t,e.format[t],U.default.sources.USER))}))}function m(t){return{key:j.keys.TAB,shiftKey:!t,format:{"code-block":!0},handler:function(e){var a=x.default.query("code-block"),s=e.index,n=e.length,i=this.quill.scroll.descendant(a,s),r=g(i,2),o=r[0],l=r[1];if(null!=o){var c=this.quill.getIndex(o),u=o.newlineIndex(l,!0)+1,d=o.newlineIndex(c+l+n),p=o.domNode.textContent.slice(u,d).split("\n");l=0,p.forEach((function(e,i){t?(o.insertAt(u+l,a.TAB),l+=a.TAB.length,0===i?s+=a.TAB.length:n+=a.TAB.length):e.startsWith(a.TAB)&&(o.deleteAt(u+l,a.TAB.length),l-=a.TAB.length,0===i?s-=a.TAB.length:n-=a.TAB.length),l+=e.length+1})),this.quill.update(U.default.sources.USER),this.quill.setSelection(s,n,U.default.sources.SILENT)}}}}function h(t){return{key:t[0].toUpperCase(),shortKey:!0,handler:function(e,a){this.quill.format(t,!a.format[t],U.default.sources.USER)}}}function f(t){if("string"==typeof t||"number"==typeof t)return f({key:t});if("object"===(void 0===t?"undefined":_(t))&&(t=(0,b.default)(t,!1)),"string"==typeof t.key)if(null!=j.keys[t.key.toUpperCase()])t.key=j.keys[t.key.toUpperCase()];else{if(1!==t.key.length)return null;t.key=t.key.toUpperCase().charCodeAt(0)}return t.shortKey&&(t[B]=t.shortKey,delete t.shortKey),t}Object.defineProperty(e,"__esModule",{value:!0}),e.SHORTKEY=e.default=void 0;var _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g=function(){function t(t,e){var a=[],s=!0,n=!1,i=void 0;try{for(var r,o=t[Symbol.iterator]();!(s=(r=o.next()).done)&&(a.push(r.value),!e||a.length!==e);s=!0);}catch(t){n=!0,i=t}finally{try{!s&&o.return&&o.return()}finally{if(n)throw i}}return a}return function(e,a){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),v=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),y=a(21),b=s(y),w=a(12),O=s(w),E=a(2),C=s(E),N=a(4),S=s(N),A=a(20),D=s(A),M=a(0),x=s(M),T=a(6),U=s(T),k=a(10),R=s(k),L=a(7),I=s(L),P=(0,R.default)("quill:keyboard"),B=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",j=function(t){function e(t,a){i(this,e);var s=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,a));return s.bindings={},Object.keys(s.options.bindings).forEach((function(e){("list autofill"!==e||null==t.scroll.whitelist||t.scroll.whitelist.list)&&s.options.bindings[e]&&s.addBinding(s.options.bindings[e])})),s.addBinding({key:e.keys.ENTER,shiftKey:null},p),s.addBinding({key:e.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},(function(){})),/Firefox/i.test(navigator.userAgent)?(s.addBinding({key:e.keys.BACKSPACE},{collapsed:!0},c),s.addBinding({key:e.keys.DELETE},{collapsed:!0},u)):(s.addBinding({key:e.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},c),s.addBinding({key:e.keys.DELETE},{collapsed:!0,suffix:/^.?$/},u)),s.addBinding({key:e.keys.BACKSPACE},{collapsed:!1},d),s.addBinding({key:e.keys.DELETE},{collapsed:!1},d),s.addBinding({key:e.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},c),s.listen(),s}return o(e,t),v(e,null,[{key:"match",value:function(t,e){return e=f(e),!["altKey","ctrlKey","metaKey","shiftKey"].some((function(a){return!!e[a]!==t[a]&&null!==e[a]}))&&e.key===(t.which||t.keyCode)}}]),v(e,[{key:"addBinding",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=f(t);if(null==s||null==s.key)return P.warn("Attempted to add invalid keyboard binding",s);"function"==typeof e&&(e={handler:e}),"function"==typeof a&&(a={handler:a}),s=(0,C.default)(s,e,a),this.bindings[s.key]=this.bindings[s.key]||[],this.bindings[s.key].push(s)}},{key:"listen",value:function(){var t=this;this.quill.root.addEventListener("keydown",(function(a){if(!a.defaultPrevented){var s=a.which||a.keyCode,n=(t.bindings[s]||[]).filter((function(t){return e.match(a,t)}));if(0!==n.length){var i=t.quill.getSelection();if(null!=i&&t.quill.hasFocus()){var r=t.quill.getLine(i.index),o=g(r,2),l=o[0],c=o[1],u=t.quill.getLeaf(i.index),d=g(u,2),p=d[0],m=d[1],h=0===i.length?[p,m]:t.quill.getLeaf(i.index+i.length),f=g(h,2),v=f[0],y=f[1],b=p instanceof x.default.Text?p.value().slice(0,m):"",w=v instanceof x.default.Text?v.value().slice(y):"",E={collapsed:0===i.length,empty:0===i.length&&l.length()<=1,format:t.quill.getFormat(i),offset:c,prefix:b,suffix:w};n.some((function(e){if(null!=e.collapsed&&e.collapsed!==E.collapsed)return!1;if(null!=e.empty&&e.empty!==E.empty)return!1;if(null!=e.offset&&e.offset!==E.offset)return!1;if(Array.isArray(e.format)){if(e.format.every((function(t){return null==E.format[t]})))return!1}else if("object"===_(e.format)&&!Object.keys(e.format).every((function(t){return!0===e.format[t]?null!=E.format[t]:!1===e.format[t]?null==E.format[t]:(0,O.default)(e.format[t],E.format[t])})))return!1;return!(null!=e.prefix&&!e.prefix.test(E.prefix))&&!(null!=e.suffix&&!e.suffix.test(E.suffix))&&!0!==e.handler.call(t,i,E)}))&&a.preventDefault()}}}}))}}]),e}(I.default);j.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},j.DEFAULTS={bindings:{bold:h("bold"),italic:h("italic"),underline:h("underline"),indent:{key:j.keys.TAB,format:["blockquote","indent","list"],handler:function(t,e){if(e.collapsed&&0!==e.offset)return!0;this.quill.format("indent","+1",U.default.sources.USER)}},outdent:{key:j.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(t,e){if(e.collapsed&&0!==e.offset)return!0;this.quill.format("indent","-1",U.default.sources.USER)}},"outdent backspace":{key:j.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(t,e){null!=e.format.indent?this.quill.format("indent","-1",U.default.sources.USER):null!=e.format.list&&this.quill.format("list",!1,U.default.sources.USER)}},"indent code-block":m(!0),"outdent code-block":m(!1),"remove tab":{key:j.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(t){this.quill.deleteText(t.index-1,1,U.default.sources.USER)}},tab:{key:j.keys.TAB,handler:function(t){this.quill.history.cutoff();var e=(new S.default).retain(t.index).delete(t.length).insert("\t");this.quill.updateContents(e,U.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index+1,U.default.sources.SILENT)}},"list empty enter":{key:j.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(t,e){this.quill.format("list",!1,U.default.sources.USER),e.format.indent&&this.quill.format("indent",!1,U.default.sources.USER)}},"checklist enter":{key:j.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(t){var e=this.quill.getLine(t.index),a=g(e,2),s=a[0],n=a[1],i=(0,C.default)({},s.formats(),{list:"checked"}),r=(new S.default).retain(t.index).insert("\n",i).retain(s.length()-n-1).retain(1,{list:"unchecked"});this.quill.updateContents(r,U.default.sources.USER),this.quill.setSelection(t.index+1,U.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:j.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(t,e){var a=this.quill.getLine(t.index),s=g(a,2),n=s[0],i=s[1],r=(new S.default).retain(t.index).insert("\n",e.format).retain(n.length()-i-1).retain(1,{header:null});this.quill.updateContents(r,U.default.sources.USER),this.quill.setSelection(t.index+1,U.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(t,e){var a=e.prefix.length,s=this.quill.getLine(t.index),n=g(s,2),i=n[0],r=n[1];if(r>a)return!0;var o=void 0;switch(e.prefix.trim()){case"[]":case"[ ]":o="unchecked";break;case"[x]":o="checked";break;case"-":case"*":o="bullet";break;default:o="ordered"}this.quill.insertText(t.index," ",U.default.sources.USER),this.quill.history.cutoff();var l=(new S.default).retain(t.index-r).delete(a+1).retain(i.length()-2-r).retain(1,{list:o});this.quill.updateContents(l,U.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index-a,U.default.sources.SILENT)}},"code exit":{key:j.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(t){var e=this.quill.getLine(t.index),a=g(e,2),s=a[0],n=a[1],i=(new S.default).retain(t.index+s.length()-n-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(i,U.default.sources.USER)}},"embed left":l(j.keys.LEFT,!1),"embed left shift":l(j.keys.LEFT,!0),"embed right":l(j.keys.RIGHT,!1),"embed right shift":l(j.keys.RIGHT,!0)}},e.default=j,e.SHORTKEY=B},function(t,e,a){"use strict";t.exports={align:{"":a(75),center:a(76),right:a(77),justify:a(78)},background:a(79),blockquote:a(80),bold:a(81),clean:a(82),code:a(40),"code-block":a(40),color:a(83),direction:{"":a(84),rtl:a(85)},float:{center:a(86),full:a(87),left:a(88),right:a(89)},formula:a(90),header:{1:a(91),2:a(92)},italic:a(93),image:a(94),indent:{"+1":a(95),"-1":a(96)},link:a(97),list:{ordered:a(98),bullet:a(99),check:a(100)},script:{sub:a(101),super:a(102)},strike:a(103),underline:a(104),video:a(105)}},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(1),n=function(){function t(t){this.domNode=t,this.domNode[s.DATA_KEY]={blot:this}}return Object.defineProperty(t.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),t.create=function(t){if(null==this.tagName)throw new s.ParchmentError("Blot definition missing tagName");var e;return Array.isArray(this.tagName)?("string"==typeof t&&(t=t.toUpperCase(),parseInt(t).toString()===t&&(t=parseInt(t))),e="number"==typeof t?document.createElement(this.tagName[t-1]):this.tagName.indexOf(t)>-1?document.createElement(t):document.createElement(this.tagName[0])):e=document.createElement(this.tagName),this.className&&e.classList.add(this.className),e},t.prototype.attach=function(){null!=this.parent&&(this.scroll=this.parent.scroll)},t.prototype.clone=function(){var t=this.domNode.cloneNode(!1);return s.create(t)},t.prototype.detach=function(){null!=this.parent&&this.parent.removeChild(this),delete this.domNode[s.DATA_KEY]},t.prototype.deleteAt=function(t,e){this.isolate(t,e).remove()},t.prototype.formatAt=function(t,e,a,n){var i=this.isolate(t,e);if(null!=s.query(a,s.Scope.BLOT)&&n)i.wrap(a,n);else if(null!=s.query(a,s.Scope.ATTRIBUTE)){var r=s.create(this.statics.scope);i.wrap(r),r.format(a,n)}},t.prototype.insertAt=function(t,e,a){var n=null==a?s.create("text",e):s.create(e,a),i=this.split(t);this.parent.insertBefore(n,i)},t.prototype.insertInto=function(t,e){void 0===e&&(e=null),null!=this.parent&&this.parent.children.remove(this);var a=null;t.children.insertBefore(this,e),null!=e&&(a=e.domNode),this.domNode.parentNode==t.domNode&&this.domNode.nextSibling==a||t.domNode.insertBefore(this.domNode,a),this.parent=t,this.attach()},t.prototype.isolate=function(t,e){var a=this.split(t);return a.split(e),a},t.prototype.length=function(){return 1},t.prototype.offset=function(t){return void 0===t&&(t=this.parent),null==this.parent||this==t?0:this.parent.children.offset(this)+this.parent.offset(t)},t.prototype.optimize=function(t){null!=this.domNode[s.DATA_KEY]&&delete this.domNode[s.DATA_KEY].mutations},t.prototype.remove=function(){null!=this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},t.prototype.replace=function(t){null!=t.parent&&(t.parent.insertBefore(this,t.next),t.remove())},t.prototype.replaceWith=function(t,e){var a="string"==typeof t?s.create(t,e):t;return a.replace(this),a},t.prototype.split=function(t,e){return 0===t?this:this.next},t.prototype.update=function(t,e){},t.prototype.wrap=function(t,e){var a="string"==typeof t?s.create(t,e):t;return null!=this.parent&&this.parent.insertBefore(a,this.next),a.appendChild(this),a},t.blotName="abstract",t}();e.default=n},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(11),n=a(29),i=a(30),r=a(1),o=function(){function t(t){this.attributes={},this.domNode=t,this.build()}return t.prototype.attribute=function(t,e){e?t.add(this.domNode,e)&&(null!=t.value(this.domNode)?this.attributes[t.attrName]=t:delete this.attributes[t.attrName]):(t.remove(this.domNode),delete this.attributes[t.attrName])},t.prototype.build=function(){var t=this;this.attributes={};var e=s.default.keys(this.domNode),a=n.default.keys(this.domNode),o=i.default.keys(this.domNode);e.concat(a).concat(o).forEach((function(e){var a=r.query(e,r.Scope.ATTRIBUTE);a instanceof s.default&&(t.attributes[a.attrName]=a)}))},t.prototype.copy=function(t){var e=this;Object.keys(this.attributes).forEach((function(a){var s=e.attributes[a].value(e.domNode);t.format(a,s)}))},t.prototype.move=function(t){var e=this;this.copy(t),Object.keys(this.attributes).forEach((function(t){e.attributes[t].remove(e.domNode)})),this.attributes={}},t.prototype.values=function(){var t=this;return Object.keys(this.attributes).reduce((function(e,a){return e[a]=t.attributes[a].value(t.domNode),e}),{})},t}();e.default=o},function(t,e,a){"use strict";function s(t,e){return(t.getAttribute("class")||"").split(/\s+/).filter((function(t){return 0===t.indexOf(e+"-")}))}var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])};return function(e,a){function s(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(s.prototype=a.prototype,new s)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=a(11),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.keys=function(t){return(t.getAttribute("class")||"").split(/\s+/).map((function(t){return t.split("-").slice(0,-1).join("-")}))},e.prototype.add=function(t,e){return!!this.canAdd(t,e)&&(this.remove(t),t.classList.add(this.keyName+"-"+e),!0)},e.prototype.remove=function(t){s(t,this.keyName).forEach((function(e){t.classList.remove(e)})),0===t.classList.length&&t.removeAttribute("class")},e.prototype.value=function(t){var e=s(t,this.keyName)[0]||"",a=e.slice(this.keyName.length+1);return this.canAdd(t,a)?a:""},e}(i.default);e.default=r},function(t,e,a){"use strict";function s(t){var e=t.split("-"),a=e.slice(1).map((function(t){return t[0].toUpperCase()+t.slice(1)})).join("");return e[0]+a}var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])};return function(e,a){function s(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(s.prototype=a.prototype,new s)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=a(11),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.keys=function(t){return(t.getAttribute("style")||"").split(";").map((function(t){return t.split(":")[0].trim()}))},e.prototype.add=function(t,e){return!!this.canAdd(t,e)&&(t.style[s(this.keyName)]=e,!0)},e.prototype.remove=function(t){t.style[s(this.keyName)]="",t.getAttribute("style")||t.removeAttribute("style")},e.prototype.value=function(t){var e=t.style[s(this.keyName)];return this.canAdd(t,e)?e:""},e}(i.default);e.default=r},function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){var a=[],s=!0,n=!1,i=void 0;try{for(var r,o=t[Symbol.iterator]();!(s=(r=o.next()).done)&&(a.push(r.value),!e||a.length!==e);s=!0);}catch(t){n=!0,i=t}finally{try{!s&&o.return&&o.return()}finally{if(n)throw i}}return a}return function(e,a){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function t(e,a,s){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,a);if(void 0===n){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,a,s)}if("value"in n)return n.value;var r=n.get;return void 0!==r?r.call(s):void 0},c=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),u=a(0),d=s(u),p=a(8),m=s(p),h=function(t){function e(t,a){n(this,e);var s=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return s.selection=a,s.textNode=document.createTextNode(e.CONTENTS),s.domNode.appendChild(s.textNode),s._length=0,s}return r(e,t),c(e,null,[{key:"value",value:function(){}}]),c(e,[{key:"detach",value:function(){null!=this.parent&&this.parent.removeChild(this)}},{key:"format",value:function(t,a){if(0!==this._length)return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"format",this).call(this,t,a);for(var s=this,n=0;null!=s&&s.statics.scope!==d.default.Scope.BLOCK_BLOT;)n+=s.offset(s.parent),s=s.parent;null!=s&&(this._length=e.CONTENTS.length,s.optimize(),s.formatAt(n,e.CONTENTS.length,t,a),this._length=0)}},{key:"index",value:function(t,a){return t===this.textNode?0:l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"index",this).call(this,t,a)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!this.selection.composing&&null!=this.parent){var t=this.textNode,a=this.selection.getNativeRange(),s=void 0,n=void 0,i=void 0;if(null!=a&&a.start.node===t&&a.end.node===t){var r=[t,a.start.offset,a.end.offset];s=r[0],n=r[1],i=r[2]}for(;null!=this.domNode.lastChild&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==e.CONTENTS){var l=this.textNode.data.split(e.CONTENTS).join("");this.next instanceof m.default?(s=this.next.domNode,this.next.insertAt(0,l),this.textNode.data=e.CONTENTS):(this.textNode.data=l,this.parent.insertBefore(d.default.create(this.textNode),this),this.textNode=document.createTextNode(e.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),null!=n){var c=[n,i].map((function(t){return Math.max(0,Math.min(s.data.length,t-1))})),u=o(c,2);return n=u[0],i=u[1],{startNode:s,startOffset:n,endNode:s,endOffset:i}}}}},{key:"update",value:function(t,e){var a=this;if(t.some((function(t){return"characterData"===t.type&&t.target===a.textNode}))){var s=this.restore();s&&(e.range=s)}}},{key:"value",value:function(){return""}}]),e}(d.default.Embed);h.blotName="cursor",h.className="ql-cursor",h.tagName="span",h.CONTENTS="\ufeff",e.default=h},function(t,e,a){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),i=function(){function t(e,a){s(this,t),this.quill=e,this.options=a,this.modules={}}return n(t,[{key:"init",value:function(){var t=this;Object.keys(this.options.modules).forEach((function(e){null==t.modules[e]&&t.addModule(e)}))}},{key:"addModule",value:function(t){var e=this.quill.constructor.import("modules/"+t);return this.modules[t]=new e(this.quill,this.options.modules[t]||{}),this.modules[t]}}]),t}();i.DEFAULTS={modules:{}},i.themes={default:i},e.default=i},function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),l=function t(e,a,s){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,a);if(void 0===n){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,a,s)}if("value"in n)return n.value;var r=n.get;return void 0!==r?r.call(s):void 0},c=a(0),u=s(c),d=a(8),p=s(d),m="\ufeff",h=function(t){function e(t){n(this,e);var a=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return a.contentNode=document.createElement("span"),a.contentNode.setAttribute("contenteditable",!1),[].slice.call(a.domNode.childNodes).forEach((function(t){a.contentNode.appendChild(t)})),a.leftGuard=document.createTextNode(m),a.rightGuard=document.createTextNode(m),a.domNode.appendChild(a.leftGuard),a.domNode.appendChild(a.contentNode),a.domNode.appendChild(a.rightGuard),a}return r(e,t),o(e,[{key:"index",value:function(t,a){return t===this.leftGuard?0:t===this.rightGuard?1:l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"index",this).call(this,t,a)}},{key:"restore",value:function(t){var e=void 0,a=void 0,s=t.data.split(m).join("");if(t===this.leftGuard)if(this.prev instanceof p.default){var n=this.prev.length();this.prev.insertAt(n,s),e={startNode:this.prev.domNode,startOffset:n+s.length}}else a=document.createTextNode(s),this.parent.insertBefore(u.default.create(a),this),e={startNode:a,startOffset:s.length};else t===this.rightGuard&&(this.next instanceof p.default?(this.next.insertAt(0,s),e={startNode:this.next.domNode,startOffset:s.length}):(a=document.createTextNode(s),this.parent.insertBefore(u.default.create(a),this.next),e={startNode:a,startOffset:s.length}));return t.data=m,e}},{key:"update",value:function(t,e){var a=this;t.forEach((function(t){if("characterData"===t.type&&(t.target===a.leftGuard||t.target===a.rightGuard)){var s=a.restore(t.target);s&&(e.range=s)}}))}}]),e}(u.default.Embed);e.default=h},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AlignStyle=e.AlignClass=e.AlignAttribute=void 0;var s=a(0),n=function(t){return t&&t.__esModule?t:{default:t}}(s),i={scope:n.default.Scope.BLOCK,whitelist:["right","center","justify"]},r=new n.default.Attributor.Attribute("align","align",i),o=new n.default.Attributor.Class("align","ql-align",i),l=new n.default.Attributor.Style("align","text-align",i);e.AlignAttribute=r,e.AlignClass=o,e.AlignStyle=l},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BackgroundStyle=e.BackgroundClass=void 0;var s=a(0),n=function(t){return t&&t.__esModule?t:{default:t}}(s),i=a(24),r=new n.default.Attributor.Class("background","ql-bg",{scope:n.default.Scope.INLINE}),o=new i.ColorAttributor("background","background-color",{scope:n.default.Scope.INLINE});e.BackgroundClass=r,e.BackgroundStyle=o},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DirectionStyle=e.DirectionClass=e.DirectionAttribute=void 0;var s=a(0),n=function(t){return t&&t.__esModule?t:{default:t}}(s),i={scope:n.default.Scope.BLOCK,whitelist:["rtl"]},r=new n.default.Attributor.Attribute("direction","dir",i),o=new n.default.Attributor.Class("direction","ql-direction",i),l=new n.default.Attributor.Style("direction","direction",i);e.DirectionAttribute=r,e.DirectionClass=o,e.DirectionStyle=l},function(t,e,a){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.FontClass=e.FontStyle=void 0;var r=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),o=function t(e,a,s){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,a);if(void 0===n){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,a,s)}if("value"in n)return n.value;var r=n.get;return void 0!==r?r.call(s):void 0},l=a(0),c=function(t){return t&&t.__esModule?t:{default:t}}(l),u={scope:c.default.Scope.INLINE,whitelist:["serif","monospace"]},d=new c.default.Attributor.Class("font","ql-font",u),p=function(t){function e(){return s(this,e),n(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return i(e,t),r(e,[{key:"value",value:function(t){return o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"value",this).call(this,t).replace(/["']/g,"")}}]),e}(c.default.Attributor.Style),m=new p("font","font-family",u);e.FontStyle=m,e.FontClass=d},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SizeStyle=e.SizeClass=void 0;var s=a(0),n=function(t){return t&&t.__esModule?t:{default:t}}(s),i=new n.default.Attributor.Class("size","ql-size",{scope:n.default.Scope.INLINE,whitelist:["small","large","huge"]}),r=new n.default.Attributor.Style("size","font-size",{scope:n.default.Scope.INLINE,whitelist:["10px","18px","32px"]});e.SizeClass=i,e.SizeStyle=r},function(t,e,a){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),o=function t(e,a,s){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,a);if(void 0===n){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,a,s)}if("value"in n)return n.value;var r=n.get;return void 0!==r?r.call(s):void 0},l=a(5),c=function(t){return t&&t.__esModule?t:{default:t}}(l),u=function(t){function e(){return s(this,e),n(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return i(e,t),r(e,[{key:"optimize",value:function(t){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"optimize",this).call(this,t),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return o(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),e}(c.default);u.blotName="bold",u.tagName=["STRONG","B"],e.default=u},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(t,e,a){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),o=function t(e,a,s){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,a);if(void 0===n){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,a,s)}if("value"in n)return n.value;var r=n.get;return void 0!==r?r.call(s):void 0},l=a(16),c=function(t){return t&&t.__esModule?t:{default:t}}(l),u=function(t){function e(t,a){s(this,e);var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.label.innerHTML=a,i.container.classList.add("ql-color-picker"),[].slice.call(i.container.querySelectorAll(".ql-picker-item"),0,7).forEach((function(t){t.classList.add("ql-primary")})),i}return i(e,t),r(e,[{key:"buildItem",value:function(t){var a=o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"buildItem",this).call(this,t);return a.style.backgroundColor=t.getAttribute("value")||"",a}},{key:"selectItem",value:function(t,a){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"selectItem",this).call(this,t,a);var s=this.label.querySelector(".ql-color-label"),n=t&&t.getAttribute("data-value")||"";s&&("line"===s.tagName?s.style.stroke=n:s.style.fill=n)}}]),e}(c.default);e.default=u},function(t,e,a){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),o=function t(e,a,s){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,a);if(void 0===n){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,a,s)}if("value"in n)return n.value;var r=n.get;return void 0!==r?r.call(s):void 0},l=a(16),c=function(t){return t&&t.__esModule?t:{default:t}}(l),u=function(t){function e(t,a){s(this,e);var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.container.classList.add("ql-icon-picker"),[].forEach.call(i.container.querySelectorAll(".ql-picker-item"),(function(t){t.innerHTML=a[t.getAttribute("data-value")||""]})),i.defaultItem=i.container.querySelector(".ql-selected"),i.selectItem(i.defaultItem),i}return i(e,t),r(e,[{key:"selectItem",value:function(t,a){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"selectItem",this).call(this,t,a),t=t||this.defaultItem,this.label.innerHTML=t.innerHTML}}]),e}(c.default);e.default=u},function(t,e,a){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),i=function(){function t(e,a){var n=this;s(this,t),this.quill=e,this.boundsContainer=a||document.body,this.root=e.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",(function(){n.root.style.marginTop=-1*n.quill.root.scrollTop+"px"})),this.hide()}return n(t,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(t){var e=t.left+t.width/2-this.root.offsetWidth/2,a=t.bottom+this.quill.root.scrollTop;this.root.style.left=e+"px",this.root.style.top=a+"px",this.root.classList.remove("ql-flip");var s=this.boundsContainer.getBoundingClientRect(),n=this.root.getBoundingClientRect(),i=0;if(n.right>s.right&&(i=s.right-n.right,this.root.style.left=e+i+"px"),n.left<s.left&&(i=s.left-n.left,this.root.style.left=e+i+"px"),n.bottom>s.bottom){var r=n.bottom-n.top,o=t.bottom-t.top+r;this.root.style.top=a-o+"px",this.root.classList.add("ql-flip")}return i}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),t}();e.default=i},function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function o(t){var e=t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return e?(e[1]||"https")+"://www.youtube.com/embed/"+e[2]+"?showinfo=0":(e=t.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(e[1]||"https")+"://player.vimeo.com/video/"+e[2]+"/":t}function l(t,e){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.forEach((function(e){var s=document.createElement("option");e===a?s.setAttribute("selected","selected"):s.setAttribute("value",e),t.appendChild(s)}))}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.BaseTooltip=void 0;var c=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),u=function t(e,a,s){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,a);if(void 0===n){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,a,s)}if("value"in n)return n.value;var r=n.get;return void 0!==r?r.call(s):void 0},d=a(2),p=s(d),m=a(4),h=s(m),f=a(9),_=s(f),g=a(25),v=s(g),y=a(32),b=s(y),w=a(41),O=s(w),E=a(42),C=s(E),N=a(16),S=s(N),A=a(43),D=s(A),M=[!1,"center","right","justify"],x=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],T=[!1,"serif","monospace"],U=["1","2","3",!1],k=["small",!1,"large","huge"],R=function(t){function e(t,a){n(this,e);var s=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,a)),r=function e(a){if(!document.body.contains(t.root))return document.body.removeEventListener("click",e);null==s.tooltip||s.tooltip.root.contains(a.target)||document.activeElement===s.tooltip.textbox||s.quill.hasFocus()||s.tooltip.hide(),null!=s.pickers&&s.pickers.forEach((function(t){t.container.contains(a.target)||t.close()}))};return t.emitter.listenDOM("click",document.body,r),s}return r(e,t),c(e,[{key:"addModule",value:function(t){var a=u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addModule",this).call(this,t);return"toolbar"===t&&this.extendToolbar(a),a}},{key:"buildButtons",value:function(t,e){t.forEach((function(t){(t.getAttribute("class")||"").split(/\s+/).forEach((function(a){if(a.startsWith("ql-")&&(a=a.slice("ql-".length),null!=e[a]))if("direction"===a)t.innerHTML=e[a][""]+e[a].rtl;else if("string"==typeof e[a])t.innerHTML=e[a];else{var s=t.value||"";null!=s&&e[a][s]&&(t.innerHTML=e[a][s])}}))}))}},{key:"buildPickers",value:function(t,e){var a=this;this.pickers=t.map((function(t){if(t.classList.contains("ql-align"))return null==t.querySelector("option")&&l(t,M),new C.default(t,e.align);if(t.classList.contains("ql-background")||t.classList.contains("ql-color")){var a=t.classList.contains("ql-background")?"background":"color";return null==t.querySelector("option")&&l(t,x,"background"===a?"#ffffff":"#000000"),new O.default(t,e[a])}return null==t.querySelector("option")&&(t.classList.contains("ql-font")?l(t,T):t.classList.contains("ql-header")?l(t,U):t.classList.contains("ql-size")&&l(t,k)),new S.default(t)}));var s=function(){a.pickers.forEach((function(t){t.update()}))};this.quill.on(_.default.events.EDITOR_CHANGE,s)}}]),e}(b.default);R.DEFAULTS=(0,p.default)(!0,{},b.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var t=this,e=this.container.querySelector("input.ql-image[type=file]");null==e&&(e=document.createElement("input"),e.setAttribute("type","file"),e.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),e.classList.add("ql-image"),e.addEventListener("change",(function(){if(null!=e.files&&null!=e.files[0]){var a=new FileReader;a.onload=function(a){var s=t.quill.getSelection(!0);t.quill.updateContents((new h.default).retain(s.index).delete(s.length).insert({image:a.target.result}),_.default.sources.USER),t.quill.setSelection(s.index+1,_.default.sources.SILENT),e.value=""},a.readAsDataURL(e.files[0])}})),this.container.appendChild(e)),e.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var L=function(t){function e(t,a){n(this,e);var s=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,a));return s.textbox=s.root.querySelector('input[type="text"]'),s.listen(),s}return r(e,t),c(e,[{key:"listen",value:function(){var t=this;this.textbox.addEventListener("keydown",(function(e){v.default.match(e,"enter")?(t.save(),e.preventDefault()):v.default.match(e,"escape")&&(t.cancel(),e.preventDefault())}))}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"link",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),null!=e?this.textbox.value=e:t!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+t)||""),this.root.setAttribute("data-mode",t)}},{key:"restoreFocus",value:function(){var t=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=t}},{key:"save",value:function(){var t=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":var e=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",t,_.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",t,_.default.sources.USER)),this.quill.root.scrollTop=e;break;case"video":t=o(t);case"formula":if(!t)break;var a=this.quill.getSelection(!0);if(null!=a){var s=a.index+a.length;this.quill.insertEmbed(s,this.root.getAttribute("data-mode"),t,_.default.sources.USER),"formula"===this.root.getAttribute("data-mode")&&this.quill.insertText(s+1," ",_.default.sources.USER),this.quill.setSelection(s+2,_.default.sources.USER)}}this.textbox.value="",this.hide()}}]),e}(D.default);e.BaseTooltip=L,e.default=R},function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=a(46),i=s(n),r=a(34),o=a(36),l=a(62),c=a(63),u=s(c),d=a(64),p=s(d),m=a(65),h=s(m),f=a(35),_=a(24),g=a(37),v=a(38),y=a(39),b=s(y),w=a(66),O=s(w),E=a(15),C=s(E),N=a(67),S=s(N),A=a(68),D=s(A),M=a(69),x=s(M),T=a(70),U=s(T),k=a(71),R=s(k),L=a(13),I=s(L),P=a(72),B=s(P),j=a(73),F=s(j),q=a(74),$=s(q),H=a(26),G=s(H),z=a(16),V=s(z),Y=a(41),J=s(Y),K=a(42),W=s(K),X=a(43),Z=s(X),Q=a(107),tt=s(Q),et=a(108),at=s(et);i.default.register({"attributors/attribute/direction":o.DirectionAttribute,"attributors/class/align":r.AlignClass,"attributors/class/background":f.BackgroundClass,"attributors/class/color":_.ColorClass,"attributors/class/direction":o.DirectionClass,"attributors/class/font":g.FontClass,"attributors/class/size":v.SizeClass,"attributors/style/align":r.AlignStyle,"attributors/style/background":f.BackgroundStyle,"attributors/style/color":_.ColorStyle,"attributors/style/direction":o.DirectionStyle,"attributors/style/font":g.FontStyle,"attributors/style/size":v.SizeStyle},!0),i.default.register({"formats/align":r.AlignClass,"formats/direction":o.DirectionClass,"formats/indent":l.IndentClass,"formats/background":f.BackgroundStyle,"formats/color":_.ColorStyle,"formats/font":g.FontClass,"formats/size":v.SizeClass,"formats/blockquote":u.default,"formats/code-block":I.default,"formats/header":p.default,"formats/list":h.default,"formats/bold":b.default,"formats/code":L.Code,"formats/italic":O.default,"formats/link":C.default,"formats/script":S.default,"formats/strike":D.default,"formats/underline":x.default,"formats/image":U.default,"formats/video":R.default,"formats/list/item":m.ListItem,"modules/formula":B.default,"modules/syntax":F.default,"modules/toolbar":$.default,"themes/bubble":tt.default,"themes/snow":at.default,"ui/icons":G.default,"ui/picker":V.default,"ui/icon-picker":W.default,"ui/color-picker":J.default,"ui/tooltip":Z.default},!0),e.default=i.default},function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=a(0),i=s(n),r=a(6),o=s(r),l=a(3),c=s(l),u=a(14),d=s(u),p=a(23),m=s(p),h=a(31),f=s(h),_=a(33),g=s(_),v=a(5),y=s(v),b=a(59),w=s(b),O=a(8),E=s(O),C=a(60),N=s(C),S=a(61),A=s(S),D=a(25),M=s(D);o.default.register({"blots/block":c.default,"blots/block/embed":l.BlockEmbed,"blots/break":d.default,"blots/container":m.default,"blots/cursor":f.default,"blots/embed":g.default,"blots/inline":y.default,"blots/scroll":w.default,"blots/text":E.default,"modules/clipboard":N.default,"modules/history":A.default,"modules/keyboard":M.default}),i.default.register(c.default,d.default,f.default,y.default,w.default,E.default),e.default=o.default},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(){this.head=this.tail=null,this.length=0}return t.prototype.append=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.insertBefore(t[0],null),t.length>1&&this.append.apply(this,t.slice(1))},t.prototype.contains=function(t){for(var e,a=this.iterator();e=a();)if(e===t)return!0;return!1},t.prototype.insertBefore=function(t,e){t&&(t.next=e,null!=e?(t.prev=e.prev,null!=e.prev&&(e.prev.next=t),e.prev=t,e===this.head&&(this.head=t)):null!=this.tail?(this.tail.next=t,t.prev=this.tail,this.tail=t):(t.prev=null,this.head=this.tail=t),this.length+=1)},t.prototype.offset=function(t){for(var e=0,a=this.head;null!=a;){if(a===t)return e;e+=a.length(),a=a.next}return-1},t.prototype.remove=function(t){this.contains(t)&&(null!=t.prev&&(t.prev.next=t.next),null!=t.next&&(t.next.prev=t.prev),t===this.head&&(this.head=t.next),t===this.tail&&(this.tail=t.prev),this.length-=1)},t.prototype.iterator=function(t){return void 0===t&&(t=this.head),function(){var e=t;return null!=t&&(t=t.next),e}},t.prototype.find=function(t,e){void 0===e&&(e=!1);for(var a,s=this.iterator();a=s();){var n=a.length();if(t<n||e&&t===n&&(null==a.next||0!==a.next.length()))return[a,t];t-=n}return[null,0]},t.prototype.forEach=function(t){for(var e,a=this.iterator();e=a();)t(e)},t.prototype.forEachAt=function(t,e,a){if(!(e<=0))for(var s,n=this.find(t),i=n[0],r=n[1],o=t-r,l=this.iterator(i);(s=l())&&o<t+e;){var c=s.length();t>o?a(s,t-o,Math.min(e,o+c-t)):a(s,0,Math.min(c,t+e-o)),o+=c}},t.prototype.map=function(t){return this.reduce((function(e,a){return e.push(t(a)),e}),[])},t.prototype.reduce=function(t,e){for(var a,s=this.iterator();a=s();)e=t(e,a);return e},t}();e.default=s},function(t,e,a){"use strict";var s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])};return function(e,a){function s(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(s.prototype=a.prototype,new s)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=a(17),i=a(1),r={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},o=function(t){function e(e){var a=t.call(this,e)||this;return a.scroll=a,a.observer=new MutationObserver((function(t){a.update(t)})),a.observer.observe(a.domNode,r),a.attach(),a}return s(e,t),e.prototype.detach=function(){t.prototype.detach.call(this),this.observer.disconnect()},e.prototype.deleteAt=function(e,a){this.update(),0===e&&a===this.length()?this.children.forEach((function(t){t.remove()})):t.prototype.deleteAt.call(this,e,a)},e.prototype.formatAt=function(e,a,s,n){this.update(),t.prototype.formatAt.call(this,e,a,s,n)},e.prototype.insertAt=function(e,a,s){this.update(),t.prototype.insertAt.call(this,e,a,s)},e.prototype.optimize=function(e,a){var s=this;void 0===e&&(e=[]),void 0===a&&(a={}),t.prototype.optimize.call(this,a);for(var r=[].slice.call(this.observer.takeRecords());r.length>0;)e.push(r.pop());for(var o=function(t,e){void 0===e&&(e=!0),null!=t&&t!==s&&null!=t.domNode.parentNode&&(null==t.domNode[i.DATA_KEY].mutations&&(t.domNode[i.DATA_KEY].mutations=[]),e&&o(t.parent))},l=function(t){null!=t.domNode[i.DATA_KEY]&&null!=t.domNode[i.DATA_KEY].mutations&&(t instanceof n.default&&t.children.forEach(l),t.optimize(a))},c=e,u=0;c.length>0;u+=1){if(u>=100)throw new Error("[Parchment] Maximum optimize iterations reached");for(c.forEach((function(t){var e=i.find(t.target,!0);null!=e&&(e.domNode===t.target&&("childList"===t.type?(o(i.find(t.previousSibling,!1)),[].forEach.call(t.addedNodes,(function(t){var e=i.find(t,!1);o(e,!1),e instanceof n.default&&e.children.forEach((function(t){o(t,!1)}))}))):"attributes"===t.type&&o(e.prev)),o(e))})),this.children.forEach(l),c=[].slice.call(this.observer.takeRecords()),r=c.slice();r.length>0;)e.push(r.pop())}},e.prototype.update=function(e,a){var s=this;void 0===a&&(a={}),e=e||this.observer.takeRecords(),e.map((function(t){var e=i.find(t.target,!0);return null==e?null:null==e.domNode[i.DATA_KEY].mutations?(e.domNode[i.DATA_KEY].mutations=[t],e):(e.domNode[i.DATA_KEY].mutations.push(t),null)})).forEach((function(t){null!=t&&t!==s&&null!=t.domNode[i.DATA_KEY]&&t.update(t.domNode[i.DATA_KEY].mutations||[],a)})),null!=this.domNode[i.DATA_KEY].mutations&&t.prototype.update.call(this,this.domNode[i.DATA_KEY].mutations,a),this.optimize(e,a)},e.blotName="scroll",e.defaultChild="block",e.scope=i.Scope.BLOCK_BLOT,e.tagName="DIV",e}(n.default);e.default=o},function(t,e,a){"use strict";function s(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var a in t)if(t[a]!==e[a])return!1;return!0}var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])};return function(e,a){function s(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(s.prototype=a.prototype,new s)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=a(18),r=a(1),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.formats=function(a){if(a.tagName!==e.tagName)return t.formats.call(this,a)},e.prototype.format=function(a,s){var n=this;a!==this.statics.blotName||s?t.prototype.format.call(this,a,s):(this.children.forEach((function(t){t instanceof i.default||(t=t.wrap(e.blotName,!0)),n.attributes.copy(t)})),this.unwrap())},e.prototype.formatAt=function(e,a,s,n){null!=this.formats()[s]||r.query(s,r.Scope.ATTRIBUTE)?this.isolate(e,a).format(s,n):t.prototype.formatAt.call(this,e,a,s,n)},e.prototype.optimize=function(a){t.prototype.optimize.call(this,a);var n=this.formats();if(0===Object.keys(n).length)return this.unwrap();var i=this.next;i instanceof e&&i.prev===this&&s(n,i.formats())&&(i.moveChildren(this),i.remove())},e.blotName="inline",e.scope=r.Scope.INLINE_BLOT,e.tagName="SPAN",e}(i.default);e.default=o},function(t,e,a){"use strict";var s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])};return function(e,a){function s(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(s.prototype=a.prototype,new s)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=a(18),i=a(1),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.formats=function(a){var s=i.query(e.blotName).tagName;if(a.tagName!==s)return t.formats.call(this,a)},e.prototype.format=function(a,s){null!=i.query(a,i.Scope.BLOCK)&&(a!==this.statics.blotName||s?t.prototype.format.call(this,a,s):this.replaceWith(e.blotName))},e.prototype.formatAt=function(e,a,s,n){null!=i.query(s,i.Scope.BLOCK)?this.format(s,n):t.prototype.formatAt.call(this,e,a,s,n)},e.prototype.insertAt=function(e,a,s){if(null==s||null!=i.query(a,i.Scope.INLINE))t.prototype.insertAt.call(this,e,a,s);else{var n=this.split(e),r=i.create(a,s);n.parent.insertBefore(r,n)}},e.prototype.update=function(e,a){navigator.userAgent.match(/Trident/)?this.build():t.prototype.update.call(this,e,a)},e.blotName="block",e.scope=i.Scope.BLOCK_BLOT,e.tagName="P",e}(n.default);e.default=r},function(t,e,a){"use strict";var s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])};return function(e,a){function s(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(s.prototype=a.prototype,new s)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=a(19),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.formats=function(t){},e.prototype.format=function(e,a){t.prototype.formatAt.call(this,0,this.length(),e,a)},e.prototype.formatAt=function(e,a,s,n){0===e&&a===this.length()?this.format(s,n):t.prototype.formatAt.call(this,e,a,s,n)},e.prototype.formats=function(){return this.statics.formats(this.domNode)},e}(n.default);e.default=i},function(t,e,a){"use strict";var s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])};return function(e,a){function s(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(s.prototype=a.prototype,new s)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=a(19),i=a(1),r=function(t){function e(e){var a=t.call(this,e)||this;return a.text=a.statics.value(a.domNode),a}return s(e,t),e.create=function(t){return document.createTextNode(t)},e.value=function(t){var e=t.data;return e.normalize&&(e=e.normalize()),e},e.prototype.deleteAt=function(t,e){this.domNode.data=this.text=this.text.slice(0,t)+this.text.slice(t+e)},e.prototype.index=function(t,e){return this.domNode===t?e:-1},e.prototype.insertAt=function(e,a,s){null==s?(this.text=this.text.slice(0,e)+a+this.text.slice(e),this.domNode.data=this.text):t.prototype.insertAt.call(this,e,a,s)},e.prototype.length=function(){return this.text.length},e.prototype.optimize=function(a){t.prototype.optimize.call(this,a),this.text=this.statics.value(this.domNode),0===this.text.length?this.remove():this.next instanceof e&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},e.prototype.position=function(t,e){return void 0===e&&(e=!1),[this.domNode,t]},e.prototype.split=function(t,e){if(void 0===e&&(e=!1),!e){if(0===t)return this;if(t===this.length())return this.next}var a=i.create(this.domNode.splitText(t));return this.parent.insertBefore(a,this.next),this.text=this.statics.value(this.domNode),a},e.prototype.update=function(t,e){var a=this;t.some((function(t){return"characterData"===t.type&&t.target===a.domNode}))&&(this.text=this.statics.value(this.domNode))},e.prototype.value=function(){return this.text},e.blotName="text",e.scope=i.Scope.INLINE_BLOT,e}(n.default);e.default=r},function(t,e,a){"use strict";var s=document.createElement("div");if(s.classList.toggle("test-class",!1),s.classList.contains("test-class")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,e){return arguments.length>1&&!this.contains(t)==!e?e:n.call(this,t)}}String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return e=e||0,this.substr(e,t.length)===t}),String.prototype.endsWith||(String.prototype.endsWith=function(t,e){var a=this.toString();("number"!=typeof e||!isFinite(e)||Math.floor(e)!==e||e>a.length)&&(e=a.length),e-=t.length;var s=a.indexOf(t,e);return-1!==s&&s===e}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var e,a=Object(this),s=a.length>>>0,n=arguments[1],i=0;i<s;i++)if(e=a[i],t.call(n,e,i,a))return e}}),document.addEventListener("DOMContentLoaded",(function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)}))},function(t,e){function a(t,e,a){if(t==e)return t?[[_,t]]:[];(a<0||t.length<a)&&(a=null);var n=r(t,e),i=t.substring(0,n);t=t.substring(n),e=e.substring(n),n=o(t,e);var l=t.substring(t.length-n);t=t.substring(0,t.length-n),e=e.substring(0,e.length-n);var u=s(t,e);return i&&u.unshift([_,i]),l&&u.push([_,l]),c(u),null!=a&&(u=d(u,a)),p(u)}function s(t,e){var s;if(!t)return[[f,e]];if(!e)return[[h,t]];var i=t.length>e.length?t:e,r=t.length>e.length?e:t,o=i.indexOf(r);if(-1!=o)return s=[[f,i.substring(0,o)],[_,r],[f,i.substring(o+r.length)]],t.length>e.length&&(s[0][0]=s[2][0]=h),s;if(1==r.length)return[[h,t],[f,e]];var c=l(t,e);if(c){var u=c[0],d=c[1],p=c[2],m=c[3],g=c[4],v=a(u,p),y=a(d,m);return v.concat([[_,g]],y)}return n(t,e)}function n(t,e){for(var a=t.length,s=e.length,n=Math.ceil((a+s)/2),r=n,o=2*n,l=new Array(o),c=new Array(o),u=0;u<o;u++)l[u]=-1,c[u]=-1;l[r+1]=0,c[r+1]=0;for(var d=a-s,p=d%2!=0,m=0,_=0,g=0,v=0,y=0;y<n;y++){for(var b=-y+m;b<=y-_;b+=2){var w=r+b;A=b==-y||b!=y&&l[w-1]<l[w+1]?l[w+1]:l[w-1]+1;for(var O=A-b;A<a&&O<s&&t.charAt(A)==e.charAt(O);)A++,O++;if(l[w]=A,A>a)_+=2;else if(O>s)m+=2;else if(p){var E=r+d-b;if(E>=0&&E<o&&-1!=c[E]){var C=a-c[E];if(A>=C)return i(t,e,A,O)}}}for(var N=-y+g;N<=y-v;N+=2){E=r+N;C=N==-y||N!=y&&c[E-1]<c[E+1]?c[E+1]:c[E-1]+1;for(var S=C-N;C<a&&S<s&&t.charAt(a-C-1)==e.charAt(s-S-1);)C++,S++;if(c[E]=C,C>a)v+=2;else if(S>s)g+=2;else if(!p){w=r+d-N;if(w>=0&&w<o&&-1!=l[w]){var A=l[w];O=r+A-w;if(C=a-C,A>=C)return i(t,e,A,O)}}}}return[[h,t],[f,e]]}function i(t,e,s,n){var i=t.substring(0,s),r=e.substring(0,n),o=t.substring(s),l=e.substring(n),c=a(i,r),u=a(o,l);return c.concat(u)}function r(t,e){if(!t||!e||t.charAt(0)!=e.charAt(0))return 0;for(var a=0,s=Math.min(t.length,e.length),n=s,i=0;a<n;)t.substring(i,n)==e.substring(i,n)?(a=n,i=a):s=n,n=Math.floor((s-a)/2+a);return n}function o(t,e){if(!t||!e||t.charAt(t.length-1)!=e.charAt(e.length-1))return 0;for(var a=0,s=Math.min(t.length,e.length),n=s,i=0;a<n;)t.substring(t.length-n,t.length-i)==e.substring(e.length-n,e.length-i)?(a=n,i=a):s=n,n=Math.floor((s-a)/2+a);return n}function l(t,e){function a(t,e,a){for(var s,n,i,l,c=t.substring(a,a+Math.floor(t.length/4)),u=-1,d="";-1!=(u=e.indexOf(c,u+1));){var p=r(t.substring(a),e.substring(u)),m=o(t.substring(0,a),e.substring(0,u));d.length<m+p&&(d=e.substring(u-m,u)+e.substring(u,u+p),s=t.substring(0,a-m),n=t.substring(a+p),i=e.substring(0,u-m),l=e.substring(u+p))}return 2*d.length>=t.length?[s,n,i,l,d]:null}var s=t.length>e.length?t:e,n=t.length>e.length?e:t;if(s.length<4||2*n.length<s.length)return null;var i,l,c,u,d,p=a(s,n,Math.ceil(s.length/4)),m=a(s,n,Math.ceil(s.length/2));return p||m?(i=m?p&&p[4].length>m[4].length?p:m:p,t.length>e.length?(l=i[0],c=i[1],u=i[2],d=i[3]):(u=i[0],d=i[1],l=i[2],c=i[3]),[l,c,u,d,i[4]]):null}function c(t){t.push([_,""]);for(var e,a=0,s=0,n=0,i="",l="";a<t.length;)switch(t[a][0]){case f:n++,l+=t[a][1],a++;break;case h:s++,i+=t[a][1],a++;break;case _:s+n>1?(0!==s&&0!==n&&(e=r(l,i),0!==e&&(a-s-n>0&&t[a-s-n-1][0]==_?t[a-s-n-1][1]+=l.substring(0,e):(t.splice(0,0,[_,l.substring(0,e)]),a++),l=l.substring(e),i=i.substring(e)),0!==(e=o(l,i))&&(t[a][1]=l.substring(l.length-e)+t[a][1],l=l.substring(0,l.length-e),i=i.substring(0,i.length-e))),0===s?t.splice(a-n,s+n,[f,l]):0===n?t.splice(a-s,s+n,[h,i]):t.splice(a-s-n,s+n,[h,i],[f,l]),a=a-s-n+(s?1:0)+(n?1:0)+1):0!==a&&t[a-1][0]==_?(t[a-1][1]+=t[a][1],t.splice(a,1)):a++,n=0,s=0,i="",l=""}""===t[t.length-1][1]&&t.pop();var u=!1;for(a=1;a<t.length-1;)t[a-1][0]==_&&t[a+1][0]==_&&(t[a][1].substring(t[a][1].length-t[a-1][1].length)==t[a-1][1]?(t[a][1]=t[a-1][1]+t[a][1].substring(0,t[a][1].length-t[a-1][1].length),t[a+1][1]=t[a-1][1]+t[a+1][1],t.splice(a-1,1),u=!0):t[a][1].substring(0,t[a+1][1].length)==t[a+1][1]&&(t[a-1][1]+=t[a+1][1],t[a][1]=t[a][1].substring(t[a+1][1].length)+t[a+1][1],t.splice(a+1,1),u=!0)),a++;u&&c(t)}function u(t,e){if(0===e)return[_,t];for(var a=0,s=0;s<t.length;s++){var n=t[s];if(n[0]===h||n[0]===_){var i=a+n[1].length;if(e===i)return[s+1,t];if(e<i){t=t.slice();var r=e-a,o=[n[0],n[1].slice(0,r)],l=[n[0],n[1].slice(r)];return t.splice(s,1,o,l),[s+1,t]}a=i}}throw new Error("cursor_pos is out of bounds!")}function d(t,e){var a=u(t,e),s=a[1],n=a[0],i=s[n],r=s[n+1];if(null==i)return t;if(i[0]!==_)return t;if(null!=r&&i[1]+r[1]===r[1]+i[1])return s.splice(n,2,r,i),m(s,n,2);if(null!=r&&0===r[1].indexOf(i[1])){s.splice(n,2,[r[0],i[1]],[0,i[1]]);var o=r[1].slice(i[1].length);return o.length>0&&s.splice(n+2,0,[r[0],o]),m(s,n,3)}return t}function p(t){for(var e=!1,a=function(t){return t.charCodeAt(0)>=56320&&t.charCodeAt(0)<=57343},s=2;s<t.length;s+=1)t[s-2][0]===_&&function(t){return t.charCodeAt(t.length-1)>=55296&&t.charCodeAt(t.length-1)<=56319}(t[s-2][1])&&t[s-1][0]===h&&a(t[s-1][1])&&t[s][0]===f&&a(t[s][1])&&(e=!0,t[s-1][1]=t[s-2][1].slice(-1)+t[s-1][1],t[s][1]=t[s-2][1].slice(-1)+t[s][1],t[s-2][1]=t[s-2][1].slice(0,-1));if(!e)return t;var n=[];for(s=0;s<t.length;s+=1)t[s][1].length>0&&n.push(t[s]);return n}function m(t,e,a){for(var s=e+a-1;s>=0&&s>=e-1;s--)if(s+1<t.length){var n=t[s],i=t[s+1];n[0]===i[1]&&t.splice(s,2,[n[0],n[1]+i[1]])}return t}var h=-1,f=1,_=0,g=a;g.INSERT=f,g.DELETE=h,g.EQUAL=_,t.exports=g},function(t,e){function a(t){var e=[];for(var a in t)e.push(a);return e}e=t.exports="function"==typeof Object.keys?Object.keys:a,e.shim=a},function(t,e){function a(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function s(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}var n="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();e=t.exports=n?a:s,e.supported=a,e.unsupported=s},function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}function n(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){return Object.keys(e).reduce((function(a,s){return null==t[s]||(e[s]===t[s]?a[s]=e[s]:Array.isArray(e[s])?e[s].indexOf(t[s])<0&&(a[s]=e[s].concat([t[s]])):a[s]=[e[s],t[s]]),a}),{})}function o(t){return t.reduce((function(t,e){if(1===e.insert){var a=(0,S.default)(e.attributes);return delete a.image,t.insert({image:e.attributes.image},a)}if(null==e.attributes||!0!==e.attributes.list&&!0!==e.attributes.bullet||(e=(0,S.default)(e),e.attributes.list?e.attributes.list="ordered":(e.attributes.list="bullet",delete e.attributes.bullet)),"string"==typeof e.insert){var s=e.insert.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return t.insert(s,e.attributes)}return t.push(e)}),new p.default)}Object.defineProperty(e,"__esModule",{value:!0});var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c=function(){function t(t,e){var a=[],s=!0,n=!1,i=void 0;try{for(var r,o=t[Symbol.iterator]();!(s=(r=o.next()).done)&&(a.push(r.value),!e||a.length!==e);s=!0);}catch(t){n=!0,i=t}finally{try{!s&&o.return&&o.return()}finally{if(n)throw i}}return a}return function(e,a){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),d=a(4),p=s(d),m=a(20),h=s(m),f=a(0),_=s(f),g=a(13),v=s(g),y=a(31),b=s(y),w=a(3),O=s(w),E=a(14),C=s(E),N=a(21),S=s(N),A=a(12),D=s(A),M=a(2),x=s(M),T=/^[ -~]*$/,U=function(){function t(e){i(this,t),this.scroll=e,this.delta=this.getDelta()}return u(t,[{key:"applyDelta",value:function(t){var e=this,a=!1;this.scroll.update();var s=this.scroll.length();return this.scroll.batchStart(),t=o(t),t.reduce((function(t,n){var i=n.retain||n.delete||n.insert.length||1,r=n.attributes||{};if(null!=n.insert){if("string"==typeof n.insert){var o=n.insert;o.endsWith("\n")&&a&&(a=!1,o=o.slice(0,-1)),t>=s&&!o.endsWith("\n")&&(a=!0),e.scroll.insertAt(t,o);var u=e.scroll.line(t),d=c(u,2),p=d[0],m=d[1],f=(0,x.default)({},(0,w.bubbleFormats)(p));if(p instanceof O.default){var g=p.descendant(_.default.Leaf,m),v=c(g,1),y=v[0];f=(0,x.default)(f,(0,w.bubbleFormats)(y))}r=h.default.attributes.diff(f,r)||{}}else if("object"===l(n.insert)){var b=Object.keys(n.insert)[0];if(null==b)return t;e.scroll.insertAt(t,b,n.insert[b])}s+=i}return Object.keys(r).forEach((function(a){e.scroll.formatAt(t,i,a,r[a])})),t+i}),0),t.reduce((function(t,a){return"number"==typeof a.delete?(e.scroll.deleteAt(t,a.delete),t):t+(a.retain||a.insert.length||1)}),0),this.scroll.batchEnd(),this.update(t)}},{key:"deleteText",value:function(t,e){return this.scroll.deleteAt(t,e),this.update((new p.default).retain(t).delete(e))}},{key:"formatLine",value:function(t,e){var a=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.scroll.update(),Object.keys(s).forEach((function(n){if(null==a.scroll.whitelist||a.scroll.whitelist[n]){var i=a.scroll.lines(t,Math.max(e,1)),r=e;i.forEach((function(e){var i=e.length();if(e instanceof v.default){var o=t-e.offset(a.scroll),l=e.newlineIndex(o+r)-o+1;e.formatAt(o,l,n,s[n])}else e.format(n,s[n]);r-=i}))}})),this.scroll.optimize(),this.update((new p.default).retain(t).retain(e,(0,S.default)(s)))}},{key:"formatText",value:function(t,e){var a=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object.keys(s).forEach((function(n){a.scroll.formatAt(t,e,n,s[n])})),this.update((new p.default).retain(t).retain(e,(0,S.default)(s)))}},{key:"getContents",value:function(t,e){return this.delta.slice(t,t+e)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce((function(t,e){return t.concat(e.delta())}),new p.default)}},{key:"getFormat",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=[],s=[];0===e?this.scroll.path(t).forEach((function(t){var e=c(t,1),n=e[0];n instanceof O.default?a.push(n):n instanceof _.default.Leaf&&s.push(n)})):(a=this.scroll.lines(t,e),s=this.scroll.descendants(_.default.Leaf,t,e));var n=[a,s].map((function(t){if(0===t.length)return{};for(var e=(0,w.bubbleFormats)(t.shift());Object.keys(e).length>0;){var a=t.shift();if(null==a)return e;e=r((0,w.bubbleFormats)(a),e)}return e}));return x.default.apply(x.default,n)}},{key:"getText",value:function(t,e){return this.getContents(t,e).filter((function(t){return"string"==typeof t.insert})).map((function(t){return t.insert})).join("")}},{key:"insertEmbed",value:function(t,e,a){return this.scroll.insertAt(t,e,a),this.update((new p.default).retain(t).insert(n({},e,a)))}},{key:"insertText",value:function(t,e){var a=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e=e.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),this.scroll.insertAt(t,e),Object.keys(s).forEach((function(n){a.scroll.formatAt(t,e.length,n,s[n])})),this.update((new p.default).retain(t).insert(e,(0,S.default)(s)))}},{key:"isBlank",value:function(){if(0==this.scroll.children.length)return!0;if(this.scroll.children.length>1)return!1;var t=this.scroll.children.head;return t.statics.blotName===O.default.blotName&&!(t.children.length>1)&&t.children.head instanceof C.default}},{key:"removeFormat",value:function(t,e){var a=this.getText(t,e),s=this.scroll.line(t+e),n=c(s,2),i=n[0],r=n[1],o=0,l=new p.default;null!=i&&(o=i instanceof v.default?i.newlineIndex(r)-r+1:i.length()-r,l=i.delta().slice(r,r+o-1).insert("\n"));var u=this.getContents(t,e+o),d=u.diff((new p.default).insert(a).concat(l)),m=(new p.default).retain(t).concat(d);return this.applyDelta(m)}},{key:"update",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,s=this.delta;if(1===e.length&&"characterData"===e[0].type&&e[0].target.data.match(T)&&_.default.find(e[0].target)){var n=_.default.find(e[0].target),i=(0,w.bubbleFormats)(n),r=n.offset(this.scroll),o=e[0].oldValue.replace(b.default.CONTENTS,""),l=(new p.default).insert(o),c=(new p.default).insert(n.value());t=(new p.default).retain(r).concat(l.diff(c,a)).reduce((function(t,e){return e.insert?t.insert(e.insert,i):t.push(e)}),new p.default),this.delta=s.compose(t)}else this.delta=this.getDelta(),t&&(0,D.default)(s.compose(t),this.delta)||(t=s.diff(this.delta,a));return t}}]),t}();e.default=U},function(t,e){"use strict";function a(){}function s(t,e,a){this.fn=t,this.context=e,this.once=a||!1}function n(){this._events=new a,this._eventsCount=0}var i=Object.prototype.hasOwnProperty,r="~";Object.create&&(a.prototype=Object.create(null),(new a).__proto__||(r=!1)),n.prototype.eventNames=function(){var t,e,a=[];if(0===this._eventsCount)return a;for(e in t=this._events)i.call(t,e)&&a.push(r?e.slice(1):e);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(t)):a},n.prototype.listeners=function(t,e){var a=r?r+t:t,s=this._events[a];if(e)return!!s;if(!s)return[];if(s.fn)return[s.fn];for(var n=0,i=s.length,o=new Array(i);n<i;n++)o[n]=s[n].fn;return o},n.prototype.emit=function(t,e,a,s,n,i){var o=r?r+t:t;if(!this._events[o])return!1;var l,c,u=this._events[o],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,a),!0;case 4:return u.fn.call(u.context,e,a,s),!0;case 5:return u.fn.call(u.context,e,a,s,n),!0;case 6:return u.fn.call(u.context,e,a,s,n,i),!0}for(c=1,l=new Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var p,m=u.length;for(c=0;c<m;c++)switch(u[c].once&&this.removeListener(t,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,e);break;case 3:u[c].fn.call(u[c].context,e,a);break;case 4:u[c].fn.call(u[c].context,e,a,s);break;default:if(!l)for(p=1,l=new Array(d-1);p<d;p++)l[p-1]=arguments[p];u[c].fn.apply(u[c].context,l)}}return!0},n.prototype.on=function(t,e,a){var n=new s(e,a||this),i=r?r+t:t;return this._events[i]?this._events[i].fn?this._events[i]=[this._events[i],n]:this._events[i].push(n):(this._events[i]=n,this._eventsCount++),this},n.prototype.once=function(t,e,a){var n=new s(e,a||this,!0),i=r?r+t:t;return this._events[i]?this._events[i].fn?this._events[i]=[this._events[i],n]:this._events[i].push(n):(this._events[i]=n,this._eventsCount++),this},n.prototype.removeListener=function(t,e,s,n){var i=r?r+t:t;if(!this._events[i])return this;if(!e)return 0==--this._eventsCount?this._events=new a:delete this._events[i],this;var o=this._events[i];if(o.fn)o.fn!==e||n&&!o.once||s&&o.context!==s||(0==--this._eventsCount?this._events=new a:delete this._events[i]);else{for(var l=0,c=[],u=o.length;l<u;l++)(o[l].fn!==e||n&&!o[l].once||s&&o[l].context!==s)&&c.push(o[l]);c.length?this._events[i]=1===c.length?c[0]:c:0==--this._eventsCount?this._events=new a:delete this._events[i]}return this},n.prototype.removeAllListeners=function(t){var e;return t?(e=r?r+t:t,this._events[e]&&(0==--this._eventsCount?this._events=new a:delete this._events[e])):(this._events=new a,this._eventsCount=0),this},n.prototype.off=n.prototype.removeListener,n.prototype.addListener=n.prototype.on,n.prototype.setMaxListeners=function(){return this},n.prefixed=r,n.EventEmitter=n,void 0!==t&&(t.exports=n)},function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function o(t){return t instanceof _.default||t instanceof f.BlockEmbed}Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){var a=[],s=!0,n=!1,i=void 0;try{for(var r,o=t[Symbol.iterator]();!(s=(r=o.next()).done)&&(a.push(r.value),!e||a.length!==e);s=!0);}catch(t){n=!0,i=t}finally{try{!s&&o.return&&o.return()}finally{if(n)throw i}}return a}return function(e,a){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),u=function t(e,a,s){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,a);if(void 0===n){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,a,s)}if("value"in n)return n.value;var r=n.get;return void 0!==r?r.call(s):void 0},d=a(0),p=s(d),m=a(9),h=s(m),f=a(3),_=s(f),g=a(14),v=s(g),y=a(13),b=s(y),w=a(23),O=s(w),E=function(t){function e(t,a){n(this,e);var s=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return s.emitter=a.emitter,Array.isArray(a.whitelist)&&(s.whitelist=a.whitelist.reduce((function(t,e){return t[e]=!0,t}),{})),s.domNode.addEventListener("DOMNodeInserted",(function(){})),s.optimize(),s.enable(),s}return r(e,t),c(e,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(t,a){var s=this.line(t),n=l(s,2),i=n[0],r=n[1],o=this.line(t+a),c=l(o,1),d=c[0];if(u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"deleteAt",this).call(this,t,a),null!=d&&i!==d&&r>0){if(i instanceof f.BlockEmbed||d instanceof f.BlockEmbed)return void this.optimize();if(i instanceof b.default){var p=i.newlineIndex(i.length(),!0);if(p>-1&&(i=i.split(p+1))===d)return void this.optimize()}else if(d instanceof b.default){var m=d.newlineIndex(0);m>-1&&d.split(m+1)}var h=d.children.head instanceof v.default?null:d.children.head;i.moveChildren(d,h),i.remove()}this.optimize()}},{key:"enable",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.domNode.setAttribute("contenteditable",t)}},{key:"formatAt",value:function(t,a,s,n){(null==this.whitelist||this.whitelist[s])&&(u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"formatAt",this).call(this,t,a,s,n),this.optimize())}},{key:"insertAt",value:function(t,a,s){if(null==s||null==this.whitelist||this.whitelist[a]){if(t>=this.length())if(null==s||null==p.default.query(a,p.default.Scope.BLOCK)){var n=p.default.create(this.statics.defaultChild);this.appendChild(n),null==s&&a.endsWith("\n")&&(a=a.slice(0,-1)),n.insertAt(0,a,s)}else{var i=p.default.create(a,s);this.appendChild(i)}else u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertAt",this).call(this,t,a,s);this.optimize()}}},{key:"insertBefore",value:function(t,a){if(t.statics.scope===p.default.Scope.INLINE_BLOT){var s=p.default.create(this.statics.defaultChild);s.appendChild(t),t=s}u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertBefore",this).call(this,t,a)}},{key:"leaf",value:function(t){return this.path(t).pop()||[null,-1]}},{key:"line",value:function(t){return t===this.length()?this.line(t-1):this.descendant(o,t)}},{key:"lines",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;return function t(e,a,s){var n=[],i=s;return e.children.forEachAt(a,s,(function(e,a,s){o(e)?n.push(e):e instanceof p.default.Container&&(n=n.concat(t(e,a,i))),i-=s})),n}(this,t,e)}},{key:"optimize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!0!==this.batch&&(u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"optimize",this).call(this,t,a),t.length>0&&this.emitter.emit(h.default.events.SCROLL_OPTIMIZE,t,a))}},{key:"path",value:function(t){return u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"path",this).call(this,t).slice(1)}},{key:"update",value:function(t){if(!0!==this.batch){var a=h.default.sources.USER;"string"==typeof t&&(a=t),Array.isArray(t)||(t=this.observer.takeRecords()),t.length>0&&this.emitter.emit(h.default.events.SCROLL_BEFORE_UPDATE,a,t),u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this,t.concat([])),t.length>0&&this.emitter.emit(h.default.events.SCROLL_UPDATE,a,t)}}}]),e}(p.default.Scroll);E.blotName="scroll",E.className="ql-editor",E.tagName="DIV",E.defaultChild="block",E.allowedChildren=[_.default,f.BlockEmbed,O.default],e.default=E},function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}function n(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function l(t,e,a){return"object"===(void 0===e?"undefined":E(e))?Object.keys(e).reduce((function(t,a){return l(t,a,e[a])}),t):t.reduce((function(t,s){return s.attributes&&s.attributes[e]?t.push(s):t.insert(s.insert,(0,A.default)({},n({},e,a),s.attributes))}),new M.default)}function c(t){return t.nodeType!==Node.ELEMENT_NODE?{}:t["__ql-computed-style"]||(t["__ql-computed-style"]=window.getComputedStyle(t))}function u(t,e){for(var a="",s=t.ops.length-1;s>=0&&a.length<e.length;--s){var n=t.ops[s];if("string"!=typeof n.insert)break;a=n.insert+a}return a.slice(-1*e.length)===e}function d(t){return 0!==t.childNodes.length&&["block","list-item"].indexOf(c(t).display)>-1}function p(t,e,a){return t.nodeType===t.TEXT_NODE?a.reduce((function(e,a){return a(t,e)}),new M.default):t.nodeType===t.ELEMENT_NODE?[].reduce.call(t.childNodes||[],(function(s,n){var i=p(n,e,a);return n.nodeType===t.ELEMENT_NODE&&(i=e.reduce((function(t,e){return e(n,t)}),i),i=(n[Y]||[]).reduce((function(t,e){return e(n,t)}),i)),s.concat(i)}),new M.default):new M.default}function m(t,e,a){return l(a,t,!0)}function h(t,e){var a=T.default.Attributor.Attribute.keys(t),s=T.default.Attributor.Class.keys(t),n=T.default.Attributor.Style.keys(t),i={};return a.concat(s).concat(n).forEach((function(e){var a=T.default.query(e,T.default.Scope.ATTRIBUTE);null!=a&&(i[a.attrName]=a.value(t),i[a.attrName])||(a=K[e],null==a||a.attrName!==e&&a.keyName!==e||(i[a.attrName]=a.value(t)||void 0),null==(a=W[e])||a.attrName!==e&&a.keyName!==e||(a=W[e],i[a.attrName]=a.value(t)||void 0))})),Object.keys(i).length>0&&(e=l(e,i)),e}function f(t,e){var a=T.default.query(t);if(null==a)return e;if(a.prototype instanceof T.default.Embed){var s={},n=a.value(t);null!=n&&(s[a.blotName]=n,e=(new M.default).insert(s,a.formats(t)))}else"function"==typeof a.formats&&(e=l(e,a.blotName,a.formats(t)));return e}function _(t,e){return u(e,"\n")||e.insert("\n"),e}function g(){return new M.default}function v(t,e){var a=T.default.query(t);if(null==a||"list-item"!==a.blotName||!u(e,"\n"))return e;for(var s=-1,n=t.parentNode;!n.classList.contains("ql-clipboard");)"list"===(T.default.query(n)||{}).blotName&&(s+=1),n=n.parentNode;return s<=0?e:e.compose((new M.default).retain(e.length()-1).retain(1,{indent:s}))}function y(t,e){return u(e,"\n")||(d(t)||e.length()>0&&t.nextSibling&&d(t.nextSibling))&&e.insert("\n"),e}function b(t,e){if(d(t)&&null!=t.nextElementSibling&&!u(e,"\n\n")){var a=t.offsetHeight+parseFloat(c(t).marginTop)+parseFloat(c(t).marginBottom);t.nextElementSibling.offsetTop>t.offsetTop+1.5*a&&e.insert("\n")}return e}function w(t,e){var a={},s=t.style||{};return s.fontStyle&&"italic"===c(t).fontStyle&&(a.italic=!0),s.fontWeight&&(c(t).fontWeight.startsWith("bold")||parseInt(c(t).fontWeight)>=700)&&(a.bold=!0),Object.keys(a).length>0&&(e=l(e,a)),parseFloat(s.textIndent||0)>0&&(e=(new M.default).insert("\t").concat(e)),e}function O(t,e){var a=t.data;if("O:P"===t.parentNode.tagName)return e.insert(a.trim());if(0===a.trim().length&&t.parentNode.classList.contains("ql-clipboard"))return e;if(!c(t.parentNode).whiteSpace.startsWith("pre")){var s=function(t,e){return e=e.replace(/[^\u00a0]/g,""),e.length<1&&t?" ":e};a=a.replace(/\r\n/g," ").replace(/\n/g," "),a=a.replace(/\s\s+/g,s.bind(s,!0)),(null==t.previousSibling&&d(t.parentNode)||null!=t.previousSibling&&d(t.previousSibling))&&(a=a.replace(/^\s+/,s.bind(s,!1))),(null==t.nextSibling&&d(t.parentNode)||null!=t.nextSibling&&d(t.nextSibling))&&(a=a.replace(/\s+$/,s.bind(s,!1)))}return e.insert(a)}Object.defineProperty(e,"__esModule",{value:!0}),e.matchText=e.matchSpacing=e.matchNewline=e.matchBlot=e.matchAttributor=e.default=void 0;var E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C=function(){function t(t,e){var a=[],s=!0,n=!1,i=void 0;try{for(var r,o=t[Symbol.iterator]();!(s=(r=o.next()).done)&&(a.push(r.value),!e||a.length!==e);s=!0);}catch(t){n=!0,i=t}finally{try{!s&&o.return&&o.return()}finally{if(n)throw i}}return a}return function(e,a){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),N=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),S=a(2),A=s(S),D=a(4),M=s(D),x=a(0),T=s(x),U=a(6),k=s(U),R=a(10),L=s(R),I=a(7),P=s(I),B=a(34),j=a(35),F=a(13),q=s(F),$=a(24),H=a(36),G=a(37),z=a(38),V=(0,L.default)("quill:clipboard"),Y="__ql-matcher",J=[[Node.TEXT_NODE,O],[Node.TEXT_NODE,y],["br",_],[Node.ELEMENT_NODE,y],[Node.ELEMENT_NODE,f],[Node.ELEMENT_NODE,b],[Node.ELEMENT_NODE,h],[Node.ELEMENT_NODE,w],["li",v],["b",m.bind(m,"bold")],["i",m.bind(m,"italic")],["style",g]],K=[B.AlignAttribute,H.DirectionAttribute].reduce((function(t,e){return t[e.keyName]=e,t}),{}),W=[B.AlignStyle,j.BackgroundStyle,$.ColorStyle,H.DirectionStyle,G.FontStyle,z.SizeStyle].reduce((function(t,e){return t[e.keyName]=e,t}),{}),X=function(t){function e(t,a){i(this,e);var s=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,a));return s.quill.root.addEventListener("paste",s.onPaste.bind(s)),s.container=s.quill.addContainer("ql-clipboard"),s.container.setAttribute("contenteditable",!0),s.container.setAttribute("tabindex",-1),s.matchers=[],J.concat(s.options.matchers).forEach((function(t){var e=C(t,2),n=e[0],i=e[1];(a.matchVisual||i!==b)&&s.addMatcher(n,i)})),s}return o(e,t),N(e,[{key:"addMatcher",value:function(t,e){this.matchers.push([t,e])}},{key:"convert",value:function(t){if("string"==typeof t)return this.container.innerHTML=t.replace(/\>\r?\n +\</g,"><"),this.convert();var e=this.quill.getFormat(this.quill.selection.savedRange.index);if(e[q.default.blotName]){var a=this.container.innerText;return this.container.innerHTML="",(new M.default).insert(a,n({},q.default.blotName,e[q.default.blotName]))}var s=this.prepareMatching(),i=C(s,2),r=i[0],o=i[1],l=p(this.container,r,o);return u(l,"\n")&&null==l.ops[l.ops.length-1].attributes&&(l=l.compose((new M.default).retain(l.length()-1).delete(1))),V.log("convert",this.container.innerHTML,l),this.container.innerHTML="",l}},{key:"dangerouslyPasteHTML",value:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k.default.sources.API;if("string"==typeof t)this.quill.setContents(this.convert(t),e),this.quill.setSelection(0,k.default.sources.SILENT);else{var s=this.convert(e);this.quill.updateContents((new M.default).retain(t).concat(s),a),this.quill.setSelection(t+s.length(),k.default.sources.SILENT)}}},{key:"onPaste",value:function(t){var e=this;if(!t.defaultPrevented&&this.quill.isEnabled()){var a=this.quill.getSelection(),s=(new M.default).retain(a.index),n=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(k.default.sources.SILENT),setTimeout((function(){s=s.concat(e.convert()).delete(a.length),e.quill.updateContents(s,k.default.sources.USER),e.quill.setSelection(s.length()-a.length,k.default.sources.SILENT),e.quill.scrollingContainer.scrollTop=n,e.quill.focus()}),1)}}},{key:"prepareMatching",value:function(){var t=this,e=[],a=[];return this.matchers.forEach((function(s){var n=C(s,2),i=n[0],r=n[1];switch(i){case Node.TEXT_NODE:a.push(r);break;case Node.ELEMENT_NODE:e.push(r);break;default:[].forEach.call(t.container.querySelectorAll(i),(function(t){t[Y]=t[Y]||[],t[Y].push(r)}))}})),[e,a]}}]),e}(P.default);X.DEFAULTS={matchers:[],matchVisual:!0},e.default=X,e.matchAttributor=h,e.matchBlot=f,e.matchNewline=y,e.matchSpacing=b,e.matchText=O},function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function o(t){var e=t.ops[t.ops.length-1];return null!=e&&(null!=e.insert?"string"==typeof e.insert&&e.insert.endsWith("\n"):null!=e.attributes&&Object.keys(e.attributes).some((function(t){return null!=d.default.query(t,d.default.Scope.BLOCK)})))}function l(t){var e=t.reduce((function(t,e){return t+(e.delete||0)}),0),a=t.length()-e;return o(t)&&(a-=1),a}Object.defineProperty(e,"__esModule",{value:!0}),e.getLastChangeIndex=e.default=void 0;var c=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),u=a(0),d=s(u),p=a(6),m=s(p),h=a(7),f=s(h),_=function(t){function e(t,a){n(this,e);var s=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,a));return s.lastRecorded=0,s.ignoreChange=!1,s.clear(),s.quill.on(m.default.events.EDITOR_CHANGE,(function(t,e,a,n){t!==m.default.events.TEXT_CHANGE||s.ignoreChange||(s.options.userOnly&&n!==m.default.sources.USER?s.transform(e):s.record(e,a))})),s.quill.keyboard.addBinding({key:"Z",shortKey:!0},s.undo.bind(s)),s.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},s.redo.bind(s)),/Win/i.test(navigator.platform)&&s.quill.keyboard.addBinding({key:"Y",shortKey:!0},s.redo.bind(s)),s}return r(e,t),c(e,[{key:"change",value:function(t,e){if(0!==this.stack[t].length){var a=this.stack[t].pop();this.stack[e].push(a),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(a[t],m.default.sources.USER),this.ignoreChange=!1;var s=l(a[t]);this.quill.setSelection(s)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(t,e){if(0!==t.ops.length){this.stack.redo=[];var a=this.quill.getContents().diff(e),s=Date.now();if(this.lastRecorded+this.options.delay>s&&this.stack.undo.length>0){var n=this.stack.undo.pop();a=a.compose(n.undo),t=n.redo.compose(t)}else this.lastRecorded=s;this.stack.undo.push({redo:t,undo:a}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(t){this.stack.undo.forEach((function(e){e.undo=t.transform(e.undo,!0),e.redo=t.transform(e.redo,!0)})),this.stack.redo.forEach((function(e){e.undo=t.transform(e.undo,!0),e.redo=t.transform(e.redo,!0)}))}},{key:"undo",value:function(){this.change("undo","redo")}}]),e}(f.default);_.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1},e.default=_,e.getLastChangeIndex=l},function(t,e,a){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.IndentClass=void 0;var r=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),o=function t(e,a,s){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,a);if(void 0===n){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,a,s)}if("value"in n)return n.value;var r=n.get;return void 0!==r?r.call(s):void 0},l=a(0),c=function(t){return t&&t.__esModule?t:{default:t}}(l),u=function(t){function e(){return s(this,e),n(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return i(e,t),r(e,[{key:"add",value:function(t,a){if("+1"===a||"-1"===a){var s=this.value(t)||0;a="+1"===a?s+1:s-1}return 0===a?(this.remove(t),!0):o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"add",this).call(this,t,a)}},{key:"canAdd",value:function(t,a){return o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"canAdd",this).call(this,t,a)||o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"canAdd",this).call(this,t,parseInt(a))}},{key:"value",value:function(t){return parseInt(o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"value",this).call(this,t))||void 0}}]),e}(c.default.Attributor.Class),d=new u("indent","ql-indent",{scope:c.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});e.IndentClass=d},function(t,e,a){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=a(3),o=function(t){return t&&t.__esModule?t:{default:t}}(r),l=function(t){function e(){return s(this,e),n(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return i(e,t),e}(o.default);l.blotName="blockquote",l.tagName="blockquote",e.default=l},function(t,e,a){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),o=a(3),l=function(t){return t&&t.__esModule?t:{default:t}}(o),c=function(t){function e(){return s(this,e),n(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return i(e,t),r(e,null,[{key:"formats",value:function(t){return this.tagName.indexOf(t.tagName)+1}}]),e}(l.default);c.blotName="header",c.tagName=["H1","H2","H3","H4","H5","H6"],e.default=c},function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}function n(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.ListItem=void 0;var l=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),c=function t(e,a,s){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,a);if(void 0===n){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,a,s)}if("value"in n)return n.value;var r=n.get;return void 0!==r?r.call(s):void 0},u=a(0),d=s(u),p=a(3),m=s(p),h=a(23),f=s(h),_=function(t){function e(){return i(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),l(e,[{key:"format",value:function(t,a){t!==g.blotName||a?c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"format",this).call(this,t,a):this.replaceWith(d.default.create(this.statics.scope))}},{key:"remove",value:function(){null==this.prev&&null==this.next?this.parent.remove():c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(t,a){return this.parent.isolate(this.offset(this.parent),this.length()),t===this.parent.statics.blotName?(this.parent.replaceWith(t,a),this):(this.parent.unwrap(),c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"replaceWith",this).call(this,t,a))}}],[{key:"formats",value:function(t){return t.tagName===this.tagName?void 0:c(e.__proto__||Object.getPrototypeOf(e),"formats",this).call(this,t)}}]),e}(m.default);_.blotName="list-item",_.tagName="LI";var g=function(t){function e(t){i(this,e);var a=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),s=function(e){if(e.target.parentNode===t){var s=a.statics.formats(t),n=d.default.find(e.target);"checked"===s?n.format("list","unchecked"):"unchecked"===s&&n.format("list","checked")}};return t.addEventListener("touchstart",s),t.addEventListener("mousedown",s),a}return o(e,t),l(e,null,[{key:"create",value:function(t){var a="ordered"===t?"OL":"UL",s=c(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this,a);return"checked"!==t&&"unchecked"!==t||s.setAttribute("data-checked","checked"===t),s}},{key:"formats",value:function(t){return"OL"===t.tagName?"ordered":"UL"===t.tagName?t.hasAttribute("data-checked")?"true"===t.getAttribute("data-checked")?"checked":"unchecked":"bullet":void 0}}]),l(e,[{key:"format",value:function(t,e){this.children.length>0&&this.children.tail.format(t,e)}},{key:"formats",value:function(){return n({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(t,a){if(t instanceof _)c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertBefore",this).call(this,t,a);else{var s=null==a?this.length():a.offset(this),n=this.split(s);n.parent.insertBefore(t,n)}}},{key:"optimize",value:function(t){c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"optimize",this).call(this,t);var a=this.next;null!=a&&a.prev===this&&a.statics.blotName===this.statics.blotName&&a.domNode.tagName===this.domNode.tagName&&a.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(a.moveChildren(this),a.remove())}},{key:"replace",value:function(t){if(t.statics.blotName!==this.statics.blotName){var a=d.default.create(this.statics.defaultChild);t.moveChildren(a),this.appendChild(a)}c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"replace",this).call(this,t)}}]),e}(f.default);g.blotName="list",g.scope=d.default.Scope.BLOCK_BLOT,g.tagName=["OL","UL"],g.defaultChild="list-item",g.allowedChildren=[_],e.ListItem=_,e.default=g},function(t,e,a){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=a(39),o=function(t){return t&&t.__esModule?t:{default:t}}(r),l=function(t){function e(){return s(this,e),n(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return i(e,t),e}(o.default);l.blotName="italic",l.tagName=["EM","I"],e.default=l},function(t,e,a){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),o=function t(e,a,s){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,a);if(void 0===n){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,a,s)}if("value"in n)return n.value;var r=n.get;return void 0!==r?r.call(s):void 0},l=a(5),c=function(t){return t&&t.__esModule?t:{default:t}}(l),u=function(t){function e(){return s(this,e),n(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return i(e,t),r(e,null,[{key:"create",value:function(t){return"super"===t?document.createElement("sup"):"sub"===t?document.createElement("sub"):o(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this,t)}},{key:"formats",value:function(t){return"SUB"===t.tagName?"sub":"SUP"===t.tagName?"super":void 0}}]),e}(c.default);u.blotName="script",u.tagName=["SUB","SUP"],e.default=u},function(t,e,a){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=a(5),o=function(t){return t&&t.__esModule?t:{default:t}}(r),l=function(t){function e(){return s(this,e),n(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return i(e,t),e}(o.default);l.blotName="strike",l.tagName="S",e.default=l},function(t,e,a){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=a(5),o=function(t){return t&&t.__esModule?t:{default:t}}(r),l=function(t){function e(){return s(this,e),n(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return i(e,t),e}(o.default);l.blotName="underline",l.tagName="U",e.default=l},function(t,e,a){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),o=function t(e,a,s){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,a);if(void 0===n){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,a,s)}if("value"in n)return n.value;var r=n.get;return void 0!==r?r.call(s):void 0},l=a(0),c=function(t){return t&&t.__esModule?t:{default:t}}(l),u=a(15),d=["alt","height","width"],p=function(t){function e(){return s(this,e),n(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return i(e,t),r(e,[{key:"format",value:function(t,a){d.indexOf(t)>-1?a?this.domNode.setAttribute(t,a):this.domNode.removeAttribute(t):o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"format",this).call(this,t,a)}}],[{key:"create",value:function(t){var a=o(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this,t);return"string"==typeof t&&a.setAttribute("src",this.sanitize(t)),a}},{key:"formats",value:function(t){return d.reduce((function(e,a){return t.hasAttribute(a)&&(e[a]=t.getAttribute(a)),e}),{})}},{key:"match",value:function(t){return/\.(jpe?g|gif|png)$/.test(t)||/^data:image\/.+;base64/.test(t)}},{key:"sanitize",value:function(t){return(0,u.sanitize)(t,["http","https","data"])?t:"//:0"}},{key:"value",value:function(t){return t.getAttribute("src")}}]),e}(c.default.Embed);p.blotName="image",p.tagName="IMG",e.default=p},function(t,e,a){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),o=function t(e,a,s){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,a);if(void 0===n){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,a,s)}if("value"in n)return n.value;var r=n.get;return void 0!==r?r.call(s):void 0},l=a(3),c=a(15),u=function(t){return t&&t.__esModule?t:{default:t}}(c),d=["height","width"],p=function(t){function e(){return s(this,e),n(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return i(e,t),r(e,[{key:"format",value:function(t,a){d.indexOf(t)>-1?a?this.domNode.setAttribute(t,a):this.domNode.removeAttribute(t):o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"format",this).call(this,t,a)}}],[{key:"create",value:function(t){var a=o(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this,t);return a.setAttribute("frameborder","0"),a.setAttribute("allowfullscreen",!0),a.setAttribute("src",this.sanitize(t)),a}},{key:"formats",value:function(t){return d.reduce((function(e,a){return t.hasAttribute(a)&&(e[a]=t.getAttribute(a)),e}),{})}},{key:"sanitize",value:function(t){return u.default.sanitize(t)}},{key:"value",value:function(t){return t.getAttribute("src")}}]),e}(l.BlockEmbed);p.blotName="video",p.className="ql-video",p.tagName="IFRAME",e.default=p},function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.FormulaBlot=void 0;var o=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),l=function t(e,a,s){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,a);if(void 0===n){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,a,s)}if("value"in n)return n.value;var r=n.get;return void 0!==r?r.call(s):void 0},c=a(33),u=s(c),d=a(6),p=s(d),m=a(7),h=s(m),f=function(t){function e(){return n(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return r(e,t),o(e,null,[{key:"create",value:function(t){var a=l(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this,t);return"string"==typeof t&&(window.katex.render(t,a,{throwOnError:!1,errorColor:"#f00"}),a.setAttribute("data-value",t)),a}},{key:"value",value:function(t){return t.getAttribute("data-value")}}]),e}(u.default);f.blotName="formula",f.className="ql-formula",f.tagName="SPAN";var _=function(t){function e(){n(this,e);var t=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if(null==window.katex)throw new Error("Formula module requires KaTeX.");return t}return r(e,t),o(e,null,[{key:"register",value:function(){p.default.register(f,!0)}}]),e}(h.default);e.FormulaBlot=f,e.default=_},function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.CodeToken=e.CodeBlock=void 0;var o=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),l=function t(e,a,s){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,a);if(void 0===n){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,a,s)}if("value"in n)return n.value;var r=n.get;return void 0!==r?r.call(s):void 0},c=a(0),u=s(c),d=a(6),p=s(d),m=a(7),h=s(m),f=a(13),_=s(f),g=function(t){function e(){return n(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return r(e,t),o(e,[{key:"replaceWith",value:function(t){this.domNode.textContent=this.domNode.textContent,this.attach(),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"replaceWith",this).call(this,t)}},{key:"highlight",value:function(t){var e=this.domNode.textContent;this.cachedText!==e&&((e.trim().length>0||null==this.cachedText)&&(this.domNode.innerHTML=t(e),this.domNode.normalize(),this.attach()),this.cachedText=e)}}]),e}(_.default);g.className="ql-syntax";var v=new u.default.Attributor.Class("token","hljs",{scope:u.default.Scope.INLINE}),y=function(t){function e(t,a){n(this,e);var s=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,a));if("function"!=typeof s.options.highlight)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var r=null;return s.quill.on(p.default.events.SCROLL_OPTIMIZE,(function(){clearTimeout(r),r=setTimeout((function(){s.highlight(),r=null}),s.options.interval)})),s.highlight(),s}return r(e,t),o(e,null,[{key:"register",value:function(){p.default.register(v,!0),p.default.register(g,!0)}}]),o(e,[{key:"highlight",value:function(){var t=this;if(!this.quill.selection.composing){this.quill.update(p.default.sources.USER);var e=this.quill.getSelection();this.quill.scroll.descendants(g).forEach((function(e){e.highlight(t.options.highlight)})),this.quill.update(p.default.sources.SILENT),null!=e&&this.quill.setSelection(e,p.default.sources.SILENT)}}}]),e}(h.default);y.DEFAULTS={highlight:function(){return null==window.hljs?null:function(t){return window.hljs.highlightAuto(t).value}}(),interval:1e3},e.CodeBlock=g,e.CodeToken=v,e.default=y},function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}function n(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function l(t,e,a){var s=document.createElement("button");s.setAttribute("type","button"),s.classList.add("ql-"+e),null!=a&&(s.value=a),t.appendChild(s)}function c(t,e){Array.isArray(e[0])||(e=[e]),e.forEach((function(e){var a=document.createElement("span");a.classList.add("ql-formats"),e.forEach((function(t){if("string"==typeof t)l(a,t);else{var e=Object.keys(t)[0],s=t[e];Array.isArray(s)?u(a,e,s):l(a,e,s)}})),t.appendChild(a)}))}function u(t,e,a){var s=document.createElement("select");s.classList.add("ql-"+e),a.forEach((function(t){var e=document.createElement("option");!1!==t?e.setAttribute("value",t):e.setAttribute("selected","selected"),s.appendChild(e)})),t.appendChild(s)}Object.defineProperty(e,"__esModule",{value:!0}),e.addControls=e.default=void 0;var d=function(){function t(t,e){var a=[],s=!0,n=!1,i=void 0;try{for(var r,o=t[Symbol.iterator]();!(s=(r=o.next()).done)&&(a.push(r.value),!e||a.length!==e);s=!0);}catch(t){n=!0,i=t}finally{try{!s&&o.return&&o.return()}finally{if(n)throw i}}return a}return function(e,a){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),p=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),m=a(4),h=s(m),f=a(0),_=s(f),g=a(6),v=s(g),y=a(10),b=s(y),w=a(7),O=s(w),E=(0,b.default)("quill:toolbar"),C=function(t){function e(t,a){i(this,e);var s,n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,a));if(Array.isArray(n.options.container)){var o=document.createElement("div");c(o,n.options.container),t.container.parentNode.insertBefore(o,t.container),n.container=o}else"string"==typeof n.options.container?n.container=document.querySelector(n.options.container):n.container=n.options.container;return n.container instanceof HTMLElement?(n.container.classList.add("ql-toolbar"),n.controls=[],n.handlers={},Object.keys(n.options.handlers).forEach((function(t){n.addHandler(t,n.options.handlers[t])})),[].forEach.call(n.container.querySelectorAll("button, select"),(function(t){n.attach(t)})),n.quill.on(v.default.events.EDITOR_CHANGE,(function(t,e){t===v.default.events.SELECTION_CHANGE&&n.update(e)})),n.quill.on(v.default.events.SCROLL_OPTIMIZE,(function(){var t=n.quill.selection.getRange(),e=d(t,1),a=e[0];n.update(a)})),n):(s=E.error("Container required for toolbar",n.options),r(n,s))}return o(e,t),p(e,[{key:"addHandler",value:function(t,e){this.handlers[t]=e}},{key:"attach",value:function(t){var e=this,a=[].find.call(t.classList,(function(t){return 0===t.indexOf("ql-")}));if(a){if(a=a.slice("ql-".length),"BUTTON"===t.tagName&&t.setAttribute("type","button"),null==this.handlers[a]){if(null!=this.quill.scroll.whitelist&&null==this.quill.scroll.whitelist[a])return void E.warn("ignoring attaching to disabled format",a,t);if(null==_.default.query(a))return void E.warn("ignoring attaching to nonexistent format",a,t)}var s="SELECT"===t.tagName?"change":"click";t.addEventListener(s,(function(s){var i=void 0;if("SELECT"===t.tagName){if(t.selectedIndex<0)return;var r=t.options[t.selectedIndex];i=!r.hasAttribute("selected")&&(r.value||!1)}else i=!t.classList.contains("ql-active")&&(t.value||!t.hasAttribute("value")),s.preventDefault();e.quill.focus();var o=e.quill.selection.getRange(),l=d(o,1),c=l[0];if(null!=e.handlers[a])e.handlers[a].call(e,i);else if(_.default.query(a).prototype instanceof _.default.Embed){if(!(i=prompt("Enter "+a)))return;e.quill.updateContents((new h.default).retain(c.index).delete(c.length).insert(n({},a,i)),v.default.sources.USER)}else e.quill.format(a,i,v.default.sources.USER);e.update(c)})),this.controls.push([a,t])}}},{key:"update",value:function(t){var e=null==t?{}:this.quill.getFormat(t);this.controls.forEach((function(a){var s=d(a,2),n=s[0],i=s[1];if("SELECT"===i.tagName){var r=void 0;if(null==t)r=null;else if(null==e[n])r=i.querySelector("option[selected]");else if(!Array.isArray(e[n])){var o=e[n];"string"==typeof o&&(o=o.replace(/\"/g,'\\"')),r=i.querySelector('option[value="'+o+'"]')}null==r?(i.value="",i.selectedIndex=-1):r.selected=!0}else if(null==t)i.classList.remove("ql-active");else if(i.hasAttribute("value")){var l=e[n]===i.getAttribute("value")||null!=e[n]&&e[n].toString()===i.getAttribute("value")||null==e[n]&&!i.getAttribute("value");i.classList.toggle("ql-active",l)}else i.classList.toggle("ql-active",null!=e[n])}))}}]),e}(O.default);C.DEFAULTS={},C.DEFAULTS={container:null,handlers:{clean:function(){var t=this,e=this.quill.getSelection();if(null!=e)if(0==e.length){var a=this.quill.getFormat();Object.keys(a).forEach((function(e){null!=_.default.query(e,_.default.Scope.INLINE)&&t.quill.format(e,!1)}))}else this.quill.removeFormat(e,v.default.sources.USER)},direction:function(t){var e=this.quill.getFormat().align;"rtl"===t&&null==e?this.quill.format("align","right",v.default.sources.USER):t||"right"!==e||this.quill.format("align",!1,v.default.sources.USER),this.quill.format("direction",t,v.default.sources.USER)},indent:function(t){var e=this.quill.getSelection(),a=this.quill.getFormat(e),s=parseInt(a.indent||0);if("+1"===t||"-1"===t){var n="+1"===t?1:-1;"rtl"===a.direction&&(n*=-1),this.quill.format("indent",s+n,v.default.sources.USER)}},link:function(t){!0===t&&(t=prompt("Enter link URL:")),this.quill.format("link",t,v.default.sources.USER)},list:function(t){var e=this.quill.getSelection(),a=this.quill.getFormat(e);"check"===t?"checked"===a.list||"unchecked"===a.list?this.quill.format("list",!1,v.default.sources.USER):this.quill.format("list","unchecked",v.default.sources.USER):this.quill.format("list",t,v.default.sources.USER)}}},e.default=C,e.addControls=c},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(t,e){t.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(t,e){t.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(t,e){t.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(t,e){t.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.BubbleTooltip=void 0;var o=function t(e,a,s){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,a);if(void 0===n){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,a,s)}if("value"in n)return n.value;var r=n.get;return void 0!==r?r.call(s):void 0},l=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),c=a(2),u=s(c),d=a(9),p=s(d),m=a(44),h=s(m),f=a(22),_=a(26),g=s(_),v=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],y=function(t){function e(t,a){n(this,e),null!=a.modules.toolbar&&null==a.modules.toolbar.container&&(a.modules.toolbar.container=v);var s=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,a));return s.quill.container.classList.add("ql-bubble"),s}return r(e,t),l(e,[{key:"extendToolbar",value:function(t){this.tooltip=new b(this.quill,this.options.bounds),this.tooltip.root.appendChild(t.container),this.buildButtons([].slice.call(t.container.querySelectorAll("button")),g.default),this.buildPickers([].slice.call(t.container.querySelectorAll("select")),g.default)}}]),e}(h.default);y.DEFAULTS=(0,u.default)(!0,{},h.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(t){t?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var b=function(t){function e(t,a){n(this,e);var s=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,a));return s.quill.on(p.default.events.EDITOR_CHANGE,(function(t,e,a,n){if(t===p.default.events.SELECTION_CHANGE)if(null!=e&&e.length>0&&n===p.default.sources.USER){s.show(),s.root.style.left="0px",s.root.style.width="",s.root.style.width=s.root.offsetWidth+"px";var i=s.quill.getLines(e.index,e.length);if(1===i.length)s.position(s.quill.getBounds(e));else{var r=i[i.length-1],o=s.quill.getIndex(r),l=Math.min(r.length()-1,e.index+e.length-o),c=s.quill.getBounds(new f.Range(o,l));s.position(c)}}else document.activeElement!==s.textbox&&s.quill.hasFocus()&&s.hide()})),s}return r(e,t),l(e,[{key:"listen",value:function(){var t=this;o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",(function(){t.root.classList.remove("ql-editing")})),this.quill.on(p.default.events.SCROLL_OPTIMIZE,(function(){setTimeout((function(){if(!t.root.classList.contains("ql-hidden")){var e=t.quill.getSelection();null!=e&&t.position(t.quill.getBounds(e))}}),1)}))}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(t){var a=o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"position",this).call(this,t),s=this.root.querySelector(".ql-tooltip-arrow");if(s.style.marginLeft="",0===a)return a;s.style.marginLeft=-1*a-s.offsetWidth/2+"px"}}]),e}(m.BaseTooltip);b.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),e.BubbleTooltip=b,e.default=y},function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){var a=[],s=!0,n=!1,i=void 0;try{for(var r,o=t[Symbol.iterator]();!(s=(r=o.next()).done)&&(a.push(r.value),!e||a.length!==e);s=!0);}catch(t){n=!0,i=t}finally{try{!s&&o.return&&o.return()}finally{if(n)throw i}}return a}return function(e,a){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function t(e,a,s){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,a);if(void 0===n){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,a,s)}if("value"in n)return n.value;var r=n.get;return void 0!==r?r.call(s):void 0},c=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),u=a(2),d=s(u),p=a(9),m=s(p),h=a(44),f=s(h),_=a(15),g=s(_),v=a(22),y=a(26),b=s(y),w=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],O=function(t){function e(t,a){n(this,e),null!=a.modules.toolbar&&null==a.modules.toolbar.container&&(a.modules.toolbar.container=w);var s=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,a));return s.quill.container.classList.add("ql-snow"),s}return r(e,t),c(e,[{key:"extendToolbar",value:function(t){t.container.classList.add("ql-snow"),this.buildButtons([].slice.call(t.container.querySelectorAll("button")),b.default),this.buildPickers([].slice.call(t.container.querySelectorAll("select")),b.default),this.tooltip=new E(this.quill,this.options.bounds),t.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},(function(e,a){t.handlers.link.call(t,!a.format.link)}))}}]),e}(f.default);O.DEFAULTS=(0,d.default)(!0,{},f.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(t){if(t){var e=this.quill.getSelection();if(null==e||0==e.length)return;var a=this.quill.getText(e);/^\S+@\S+\.\S+$/.test(a)&&0!==a.indexOf("mailto:")&&(a="mailto:"+a),this.quill.theme.tooltip.edit("link",a)}else this.quill.format("link",!1)}}}}});var E=function(t){function e(t,a){n(this,e);var s=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,a));return s.preview=s.root.querySelector("a.ql-preview"),s}return r(e,t),c(e,[{key:"listen",value:function(){var t=this;l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",(function(e){t.root.classList.contains("ql-editing")?t.save():t.edit("link",t.preview.textContent),e.preventDefault()})),this.root.querySelector("a.ql-remove").addEventListener("click",(function(e){if(null!=t.linkRange){var a=t.linkRange;t.restoreFocus(),t.quill.formatText(a,"link",!1,m.default.sources.USER),delete t.linkRange}e.preventDefault(),t.hide()})),this.quill.on(m.default.events.SELECTION_CHANGE,(function(e,a,s){if(null!=e){if(0===e.length&&s===m.default.sources.USER){var n=t.quill.scroll.descendant(g.default,e.index),i=o(n,2),r=i[0],l=i[1];if(null!=r){t.linkRange=new v.Range(e.index-l,r.length());var c=g.default.formats(r.domNode);return t.preview.textContent=c,t.preview.setAttribute("href",c),t.show(),void t.position(t.quill.getBounds(t.linkRange))}}else delete t.linkRange;t.hide()}}))}},{key:"show",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),e}(h.BaseTooltip);E.TEMPLATE=['<a class="ql-preview" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),e.default=O}]).default}))}).call(this,a("ce44").Buffer)},"155a":function(t,e,a){"use strict";a("3a9c")},"16e4":function(t,e,a){"use strict";a("b428")},"17d0":function(t,e,a){"use strict";a("f5b4")},"17e19":function(t,e,a){},1901:function(t,e,a){"use strict";a("13f5")},"1de3":function(t,e,a){"use strict";a("bba5")},"1e8d":function(t,e,a){},"1f85":function(t,e,a){"use strict";a("7379")},2051:function(t,e,a){t.exports={"row-fluid":"formbuilder_row-fluid_1_FRK","control-group":"formbuilder_control-group_25KA8",fabrikElementContainer:"formbuilder_fabrikElementContainer_3Urmr",fabrikLabel:"formbuilder_fabrikLabel_GywiO","control-label":"formbuilder_control-label_7ELCw",fabrikTip:"formbuilder_fabrikTip_2Sgca","icon-star":"formbuilder_icon-star_ZpyzP",small:"formbuilder_small_31_V_"}},"20a9":function(t,e,a){},"21cc":function(t,e,a){"use strict";a("3e48")},"222f":function(t){t.exports=JSON.parse('[{"id":1,"value":"personal_details","icon":"recent_actors","name":"COM_EMUNDUS_ONBOARD_SECTIONS_PERSONAL_DETAILS","labels":{"fr":"Informations personnelles","en":"Personal details"},"published":true,"elements":[{"value":"radiobutton","labels":{"fr":"Civilit","en":"Title"},"options":[{"value":"Monsieur","labels":{"fr":"Monsieur","en":"Mr"}},{"value":"Madame","labels":{"fr":"Madame","en":"Mrs"}}]},{"value":"nom"},{"value":"prenom"},{"value":"field","labels":{"fr":"Date de naissance","en":"Date of birth"},"params":{"text_input_mask":"99/99/9999"}},{"value":"field","labels":{"fr":"Ville de naissance","en":"Place of birth"}},{"value":"databasejoin","labels":{"fr":"Pays de naissance","en":"Country of birth"},"params":{"join_db_name":"data_country","join_key_column":"id","join_val_column":"label_fr","join_val_column_concat":"{thistable}.label_{shortlang}"}},{"value":"databasejoin","labels":{"fr":"Nationalit","en":"Nationality"},"params":{"join_db_name":"data_nationality","join_key_column":"id","join_val_column":"label_fr","join_val_column_concat":"{thistable}.label_{shortlang}"}}]},{"id":2,"value":"address","icon":"home","name":"COM_EMUNDUS_ONBOARD_SECTIONS_ADRESS","labels":{"fr":"Adresse et coordonnes","en":"Adress"},"published":true,"elements":[{"value":"field","labels":{"fr":"Adresse","en":"Adress"}},{"value":"field","labels":{"fr":"Code postal","en":"Postal code"}},{"value":"field","labels":{"fr":"Ville","en":"City"}},{"value":"databasejoin","labels":{"fr":"Pays","en":"Country"},"params":{"join_db_name":"data_country","join_key_column":"id","join_val_column":"label_fr","join_val_column_concat":"{thistable}.label_{shortlang}"}},{"value":"emundus_phonenumber","labels":{"fr":"Tlphone","en":"Phone"}}]}]')},2351:function(t,e,a){"use strict";a("6653")},"23e8":function(t,e,a){"use strict";a("7c8c")},"2a41":function(t,e,a){"use strict";a("f0a4")},"2b0c":function(t,e,a){"use strict";a("2f53")},"2d78":function(t,e,a){},"2f53":function(t,e,a){},3208:function(t){t.exports=JSON.parse('{"field":[{"label":"COM_EMUNDUS_ONBOARD_BUILDER_FIELD_TYPE","name":"password","type":"dropdown","options":[{"value":0,"label":"COM_EMUNDUS_ONBOARD_BUILDER_FIELD_TYPE_TEXT"},{"value":5,"label":"COM_EMUNDUS_ONBOARD_BUILDER_FIELD_TYPE_LINK"}],"helptext":"","placeholder":"","published":true,"sysadmin_only":false},{"label":"COM_EMUNDUS_ONBOARD_BUILDER_PLACEHOLDER","name":"placeholder","type":"text","helptext":"","placeholder":"","published":true,"sysadmin_only":false},{"label":"COM_EMUNDUS_ONBOARD_BUILDER_HELPTEXT","name":"rollover","type":"text","helptext":"","placeholder":"","published":true,"sysadmin_only":false},{"label":"COM_EMUNDUS_ONBOARD_BUILDER_MAXLENGTH","name":"maxlength","type":"number","helptext":"","placeholder":"","published":true,"sysadmin_only":false},{"label":"COM_EMUNDUS_ONBOARD_BUILDER_INPUT_MASK_TITLE","name":"text_input_mask","type":"text","helptext":"COM_EMUNDUS_ONBOARD_BUILDER_INPUT_MASK_HINT","placeholder":"COM_EMUNDUS_ONBOARD_BUILDER_INPUT_MASK_PLACEHOLDER","published":true,"sysadmin_only":false}],"textarea":[{"label":"COM_EMUNDUS_ONBOARD_BUILDER_TEXTAREA_DISPLAY_LABEL","name":"textarea_showlabel","type":"dropdown","options":[{"value":0,"label":"JNO"},{"value":1,"label":"JYES"}],"helptext":"","placeholder":"","published":false,"sysadmin_only":false},{"label":"COM_EMUNDUS_ONBOARD_BUILDER_PLACEHOLDER","name":"textarea_placeholder","type":"text","helptext":"","placeholder":"","published":true,"sysadmin_only":false},{"label":"COM_EMUNDUS_ONBOARD_BUILDER_TEXTAREA_WYSIWIG","name":"use_wysiwyg","type":"dropdown","options":[{"value":0,"label":"JNO"},{"value":1,"label":"JYES"}],"helptext":"","placeholder":"","published":true,"sysadmin_only":false},{"label":"COM_EMUNDUS_ONBOARD_BUILDER_TEXTAREA_LIMIT","name":"textarea-maxlength","type":"number","helptext":"","placeholder":"","published":true,"sysadmin_only":false},{"label":"COM_EMUNDUS_ONBOARD_BUILDER_TEXTAREA_SHOWMAX_LIMIT","name":"textarea-showmax","type":"dropdown","options":[{"value":0,"label":"JNO"},{"value":1,"label":"JYES"}],"helptext":"","placeholder":"","published":true,"sysadmin_only":false},{"label":"COM_EMUNDUS_ONBOARD_BUILDER_TEXTAREA_LIMIT_TYPE","name":"textarea_limit_type","type":"dropdown","options":[{"value":"char","label":"COM_EMUNDUS_ONBOARD_BUILDER_TEXTAREA_LIMIT_TYPE_CHARACTERS"},{"value":"word","label":"COM_EMUNDUS_ONBOARD_BUILDER_TEXTAREA_LIMIT_TYPE_WORDS"}],"helptext":"","placeholder":"","published":true,"sysadmin_only":false},{"label":"COM_EMUNDUS_ONBOARD_BUILDER_HELPTEXT","name":"rollover","type":"text","helptext":"","placeholder":"","published":true,"sysadmin_only":false}],"dropdown":[{"label":"COM_EMUNDUS_ONBOARD_BUILDER_HELPTEXT","name":"rollover","type":"text","helptext":"","placeholder":"","published":true,"sysadmin_only":false}],"checkbox":[{"label":"COM_EMUNDUS_ONBOARD_BUILDER_CHECKBOX_OPTIONS_PER_ROW","name":"ck_options_per_row","type":"number","helptext":"","placeholder":"","published":true,"sysadmin_only":true},{"label":"COM_EMUNDUS_ONBOARD_BUILDER_HELPTEXT","name":"rollover","type":"text","helptext":"","placeholder":"","published":true,"sysadmin_only":false}],"radiobutton":[{"label":"COM_EMUNDUS_ONBOARD_BUILDER_RADIOBUTTON_OPTIONS_PER_ROW","name":"options_per_row","type":"number","helptext":"","placeholder":"","published":true,"sysadmin_only":true},{"label":"COM_EMUNDUS_ONBOARD_BUILDER_HELPTEXT","name":"rollover","type":"text","helptext":"","placeholder":"","published":true,"sysadmin_only":false}],"birthday":[{"label":"COM_EMUNDUS_ONBOARD_BUILDER_BIRTHDAY_ADVANCED","name":"advanced_behavior","type":"dropdown","options":[{"value":0,"label":"JNO"},{"value":1,"label":"JYES"}],"helptext":"","placeholder":"","published":false,"sysadmin_only":false},{"label":"COM_EMUNDUS_ONBOARD_BUILDER_BIRTHDAY_LIST_METHOD","name":"birthday_yearopt","type":"dropdown","options":[{"value":"number","label":"COM_EMUNDUS_ONBOARD_BUILDER_BIRTHDAY_LIST_METHOD_YEARS_NUMBER"},{"value":"since","label":"COM_EMUNDUS_ONBOARD_BUILDER_BIRTHDAY_LIST_METHOD_SINCE_YEAR"}],"helptext":"","placeholder":"","published":true,"sysadmin_only":false},{"label":"COM_EMUNDUS_ONBOARD_BUILDER_BIRTHDAY_LIST_METHOD_NUMBER","name":"birthday_yearstart","type":"number","helptext":"COM_EMUNDUS_ONBOARD_BUILDER_BIRTHDAY_LIST_METHOD_NUMBER_TIP","placeholder":"","published":true,"sysadmin_only":false},{"label":"COM_EMUNDUS_ONBOARD_BUILDER_BIRTHDAY_YEARS_FUTURE_PAST","name":"birthday_forward","type":"number","helptext":"COM_EMUNDUS_ONBOARD_BUILDER_BIRTHDAY_YEARS_FUTURE_PAST_TIP","placeholder":"","published":true,"sysadmin_only":false},{"label":"COM_EMUNDUS_ONBOARD_BUILDER_BIRTHDAY_FORMAT","name":"list_date_format","type":"dropdown","options":[{"value":"d.m.Y","label":"21.12.2022"},{"value":"m.d.Y","label":"12.21.2022"},{"value":"d/m/Y","label":"21/12/2022"},{"value":"d m","label":"COM_EMUNDUS_ONBOARD_BUILDER_BIRTHDAY_FORMAT_D_M"}],"helptext":"","placeholder":"","published":true,"sysadmin_only":false},{"label":"COM_EMUNDUS_ONBOARD_BUILDER_HELPTEXT","name":"rollover","type":"text","helptext":"","placeholder":"","published":true,"sysadmin_only":false}],"yesno":[{"label":"COM_EMUNDUS_ONBOARD_BUILDER_YESNO_DEFAULT_VALUE","name":"yesno_default","type":"dropdown","options":[{"value":0,"label":"JNO"},{"value":1,"label":"JYES"}],"helptext":"","placeholder":"","published":true,"sysadmin_only":false},{"label":"COM_EMUNDUS_ONBOARD_BUILDER_HELPTEXT","name":"rollover","type":"text","helptext":"","placeholder":"","published":true,"sysadmin_only":false}],"calc":[{"label":"COM_EMUNDUS_ONBOARD_BUILDER_CALC_VALUE","name":"calc_calculation","type":"textarea","helptext":"","placeholder":"","published":true,"sysadmin_only":true}],"databasejoin":[{"label":"COM_EMUNDUS_ONBOARD_BUILDER_DATABASEJOIN_DISPLAY_TYPE","name":"database_join_display_type","type":"dropdown","options":[{"value":"dropdown","label":"COM_EMUNDUS_ONBOARD_BUILDER_DATABASEJOIN_DISPLAY_TYPE_DROPDOWN"},{"value":"radio","label":"COM_EMUNDUS_ONBOARD_BUILDER_DATABASEJOIN_DISPLAY_TYPE_RADIO"},{"value":"auto-complete","label":"COM_EMUNDUS_ONBOARD_BUILDER_DATABASEJOIN_DISPLAY_TYPE_AUTOCOMPLETE"}],"helptext":"","placeholder":"","published":true,"sysadmin_only":false},{"label":"COM_EMUNDUS_ONBOARD_BUILDER_DATABASEJOIN_TABLE","name":"join_db_name","type":"databasejoin","helptext":"","placeholder":"","published":true,"sysadmin_only":false},{"label":"COM_EMUNDUS_ONBOARD_BUILDER_DATABASEJOIN_VALUE","name":"join_key_column","type":"databasejoin_cascade","helptext":"","placeholder":"","published":true,"sysadmin_only":true},{"label":"COM_EMUNDUS_ONBOARD_BUILDER_DATABASEJOIN_LABEL","name":"join_val_column","type":"databasejoin_cascade","helptext":"","placeholder":"","published":true,"sysadmin_only":true},{"label":"COM_EMUNDUS_ONBOARD_BUILDER_DATABASEJOIN_LABEL_CONCAT","name":"join_val_column_concat","type":"textarea","helptext":"","placeholder":"","published":true,"sysadmin_only":true},{"label":"COM_EMUNDUS_ONBOARD_BUILDER_DATABASEJOIN_SHOW_PLEASE_SELECT","name":"database_join_show_please_select","type":"dropdown","options":[{"value":0,"label":"JNO"},{"value":1,"label":"JYES"}],"helptext":"","placeholder":"","published":true,"sysadmin_only":false},{"label":"COM_EMUNDUS_ONBOARD_BUILDER_DATABASEJOIN_WHERE","name":"database_join_where_sql","type":"textarea","helptext":"","placeholder":"","published":true,"sysadmin_only":true},{"label":"COM_EMUNDUS_ONBOARD_BUILDER_DATABASEJOIN_WHERE_AJAX","name":"databasejoin_where_ajax","type":"dropdown","options":[{"value":0,"label":"JNO"},{"value":1,"label":"JYES"}],"helptext":"","placeholder":"","published":true,"sysadmin_only":true},{"label":"COM_EMUNDUS_ONBOARD_BUILDER_HELPTEXT","name":"rollover","type":"text","helptext":"","placeholder":"","published":true,"sysadmin_only":false}],"date":[{"label":"COM_EMUNDUS_ONBOARD_BUILDER_CALENDAR_DEFAULT_TODAY","name":"date_defaulttotoday","type":"dropdown","options":[{"value":0,"label":"JNO"},{"value":1,"label":"JYES"}],"helptext":"","placeholder":"","published":true,"sysadmin_only":false},{"label":"COM_EMUNDUS_ONBOARD_BUILDER_CALENDAR_FIRST_DAY","name":"date_firstday","type":"dropdown","options":[{"value":0,"label":"COM_EMUNDUS_ONBOARD_BUILDER_CALENDAR_SUNDAY"},{"value":1,"label":"COM_EMUNDUS_ONBOARD_BUILDER_CALENDAR_MONDAY"}],"helptext":"","placeholder":"","published":true,"sysadmin_only":false},{"label":"COM_EMUNDUS_ONBOARD_BUILDER_HELPTEXT","name":"rollover","type":"text","helptext":"","placeholder":"","published":true,"sysadmin_only":false}],"emundus_geolocalisation":[{"label":"COM_EMUNDUS_FORM_BUILDER_GEOLOC_DEFAULT_LNG","name":"default_lng","type":"text","helptext":"","placeholder":"","published":true,"sysadmin_only":false},{"label":"COM_EMUNDUS_FORM_BUILDER_GEOLOC_DEFAULT_LAT","name":"default_lat","type":"text","helptext":"","placeholder":"","published":true,"sysadmin_only":false},{"label":"COM_EMUNDUS_FORM_BUILDER_GEOLOC_DEFAULT_ZOOM","name":"default_zoom","type":"number","minlength":1,"maxlength":20,"helptext":"","placeholder":"","published":true,"sysadmin_only":false},{"label":"COM_EMUNDUS_FORM_BUILDER_GEOLOC_GET_LOCATION","name":"get_location","type":"dropdown","options":[{"value":0,"label":"JNO"},{"value":1,"label":"JYES"}],"helptext":"","placeholder":"","published":true,"sysadmin_only":false}],"emundus_phonenumber":[{"label":"COM_EMUNDUS_ONBOARD_BUILDER_HELPTEXT","name":"rollover","type":"text","helptext":"","placeholder":"","published":true,"sysadmin_only":false},{"label":"COM_EMUNDUS_ONBOARD_BUILDER_PHONENUMBER_DEFAULT_COUNTRY","name":"default_country","type":"sqldropdown","table":"data_country","key":"iso2","value":"label","translate":true,"helptext":"","placeholder":"","published":true,"sysadmin_only":false,"options":[]}],"panel":[{"label":"COM_EMUNDUS_FORM_BUILDER_PANEL_TYPE","name":"type","type":"dropdown","options":[{"value":1,"label":"COM_EMUNDUS_FORM_BUILDER_PANEL_TYPE_INFORMATION"},{"value":2,"label":"COM_EMUNDUS_FORM_BUILDER_PANEL_TYPE_WARNING"},{"value":3,"label":"COM_EMUNDUS_FORM_BUILDER_PANEL_TYPE_ERROR"},{"value":4,"label":"COM_EMUNDUS_FORM_BUILDER_PANEL_TYPE_NONE"}],"helptext":"","placeholder":"","published":true,"sysadmin_only":false},{"label":"COM_EMUNDUS_FORM_BUILDER_PANEL_ACCORDION","name":"accordion","type":"dropdown","options":[{"value":0,"label":"JNO"},{"value":1,"label":"JYES"}],"helptext":"","placeholder":"","published":true,"sysadmin_only":false},{"label":"COM_EMUNDUS_FORM_BUILDER_PANEL_ACCORDION_TITLE","name":"title","type":"text","helptext":"","placeholder":"","published":true,"sysadmin_only":false}],"currency":[{"label":"COM_EMUNDUS_FORM_BUILDER_CURRENCY_CURRENCIES","name":"all_currencies_options","type":"repeatable","published":true,"fields":[{"label":"COM_EMUNDUS_FORM_BUILDER_CURRENCY_CURRENCIES_ISO","name":"iso3","type":"dropdown","options":[{"value":"EUR","label":"Euro ( EUR)"},{"value":"USD","label":"United States dollar ($ USD)"},{"value":"JPY","label":"Japanese yen ( JPY)"},{"value":"GBP","label":"British pound ( GBP)"}],"helptext":"","placeholder":"","published":true,"sysadmin_only":false},{"label":"COM_EMUNDUS_FORM_BUILDER_CURRENCY_CURRENCIES_MIN","name":"minimal_value","type":"number","helptext":"","placeholder":"","published":true,"sysadmin_only":false},{"label":"COM_EMUNDUS_FORM_BUILDER_CURRENCY_CURRENCIES_MAX","name":"maximal_value","type":"number","helptext":"","placeholder":"","published":true,"sysadmin_only":false},{"label":"COM_EMUNDUS_FORM_BUILDER_CURRENCY_CURRENCIES_THOUSAND_SEPARATOR","name":"thousand_separator","type":"dropdown","options":[{"value":" ","label":"COM_EMUNDUS_FORM_BUILDER_CURRENCY_CURRENCIES_THOUSAND_SEPARATOR_BLANK_SPACE"},{"value":",","label":"COM_EMUNDUS_FORM_BUILDER_CURRENCY_CURRENCIES_THOUSAND_SEPARATOR_COMMA"},{"value":".","label":"COM_EMUNDUS_FORM_BUILDER_CURRENCY_CURRENCIES_THOUSAND_SEPARATOR_DOT"}],"helptext":"","placeholder":"","published":true,"sysadmin_only":false},{"label":"COM_EMUNDUS_FORM_BUILDER_CURRENCY_CURRENCIES_DECIMAL_SEPARATOR","name":"decimal_separator","type":"dropdown","options":[{"value":" ","label":"COM_EMUNDUS_FORM_BUILDER_CURRENCY_CURRENCIES_THOUSAND_SEPARATOR_BLANK_SPACE"},{"value":",","label":"COM_EMUNDUS_FORM_BUILDER_CURRENCY_CURRENCIES_THOUSAND_SEPARATOR_COMMA"},{"value":".","label":"COM_EMUNDUS_FORM_BUILDER_CURRENCY_CURRENCIES_THOUSAND_SEPARATOR_DOT"}],"helptext":"","placeholder":"","published":true,"sysadmin_only":false},{"label":"COM_EMUNDUS_FORM_BUILDER_CURRENCY_CURRENCIES_DECIMAL_NUMBERS","name":"decimal_numbers","type":"number","helptext":"","placeholder":"","published":true,"sysadmin_only":false}]}]}')},"347c":function(t,e,a){"use strict";a("74d7")},"34b0":function(t,e,a){},"34d6":function(t,e,a){"use strict";a("c341")},"34f4":function(t,e,a){"use strict";a("52e6")},"351d":function(t,e,a){},"367a":function(t,e,a){t.exports={app:"messenger_app_1_wpb",messages__vue:"messenger_messages__vue_wc18U","vm--container":"messenger_vm--container_1-Y1-",scrollable:"messenger_scrollable_1lv4s","vm--modal":"messenger_vm--modal_YInqZ","messages__campaigns-list-select":"messenger_messages__campaigns-list-select_2s7nD","messages__campaigns-list":"messenger_messages__campaigns-list_1WqUA","drag-window":"messenger_drag-window_LsA3E",messages__block:"messenger_messages__block_1fPjJ","messages__campaign-block":"messenger_messages__campaign-block_2gRfr","messages__active-campaign":"messenger_messages__active-campaign_1q1D4",messages__list:"messenger_messages__list_3Pvcg","messages__list-block":"messenger_messages__list-block_1ldNN","messages__bottom-input":"messenger_messages__bottom-input_2unUJ","messages__bottom-input-actions":"messenger_messages__bottom-input-actions_2YlSw",messages__input_text:"messenger_messages__input_text_5cjRs","messages__send-icon":"messenger_messages__send-icon_QYqff",messages__current_user:"messenger_messages__current_user_1v2DR",messages__other_user:"messenger_messages__other_user_FC20o","messages__message-item":"messenger_messages__message-item_2znU8","messages__message-item-block":"messenger_messages__message-item-block_1OiIb","messages__message-item-span":"messenger_messages__message-item-span_1Uaw3","messages__message-item-span_current-user":"messenger_messages__message-item-span_current-user_iYFdF","messages__message-item-span_other-user":"messenger_messages__message-item-span_other-user_3vS4G","messages__message-item-from":"messenger_messages__message-item-from_3Fd7t",messages__campaigns_title:"messenger_messages__campaigns_title_2OFiR",messages__campaigns_fnum:"messenger_messages__campaigns_fnum_1SjD1","messages__campaigns_folder-icon":"messenger_messages__campaigns_folder-icon_3ZWHH","messages__text-align-right":"messenger_messages__text-align-right_2NZ1L","messages__text-align-left":"messenger_messages__text-align-left_2VyzM",message__header:"messenger_message__header_1NcqQ",messages_action_container:"messenger_messages_action_container_1uCbo",messages__send_button:"messenger_messages__send_button_3PsfC","btn-primary":"messenger_btn-primary_3Fx2F",messages__actions_bar:"messenger_messages__actions_bar_eS_Ia","material-icons-outlined":"messenger_material-icons-outlined_2fXtv",loader:"messenger_loader_2s1lH",spin:"messenger_spin_3BMjc",pointer:"messenger_pointer_1Vxlz","messages__date-section":"messenger_messages__date-section_dI2fV",messages__attach_content:"messenger_messages__attach_content_1jCCU",messages__attach_actions_tabs:"messenger_messages__attach_actions_tabs_3qEDY",messages__attach_action:"messenger_messages__attach_action_3j70e",messages__attach_action__current:"messenger_messages__attach_action__current_22fvD",messages__button_send:"messenger_messages__button_send_lHsB5",messages__download_icon:"messenger_messages__download_icon_2ICtv",messages__attach_applicant_doc:"messenger_messages__attach_applicant_doc_1_Kkl",customdropzone_messenger:"messenger_customdropzone_messenger_p3pr1","dz-preview":"messenger_dz-preview_2tFq3","dz-image":"messenger_dz-image_fsVk4","dz-details":"messenger_dz-details_3Y3u9","dz-success-mark":"messenger_dz-success-mark_3nxKc","dz-default":"messenger_dz-default_1Ztvs","dz-message":"messenger_dz-message_p7095","dz-error-mark":"messenger_dz-error-mark_3jKgf","slide-fade-enter-active":"messenger_slide-fade-enter-active_2G13G","slide-fade-leave-active":"messenger_slide-fade-leave-active__OQGC","slide-fade-enter":"messenger_slide-fade-enter_xhzOu","slide-right-enter-active":"messenger_slide-right-enter-active_2vzUN","slide-right-leave-active":"messenger_slide-right-leave-active_rnJdy","slide-right-enter":"messenger_slide-right-enter_4FLGS","slide-right-leave-to":"messenger_slide-right-leave-to_6cMAc","slide-down-enter-active":"messenger_slide-down-enter-active_2baMB","slide-down-leave-active":"messenger_slide-down-leave-active_3m48j","slide-down-enter":"messenger_slide-down-enter_NVuAn","slide-down-leave-to":"messenger_slide-down-leave-to_2I3cK","slide-up-enter-active":"messenger_slide-up-enter-active_3FLho","slide-up-leave-active":"messenger_slide-up-leave-active_1W0jE","slide-up-enter":"messenger_slide-up-enter_346xg","slide-up-leave-to":"messenger_slide-up-leave-to_3yqPj","move-right-enter-active":"messenger_move-right-enter-active_3YPOY","move-right-leave-active":"messenger_move-right-leave-active_f3kNx","move-right-enter":"messenger_move-right-enter_35zVk","move-right-leave-to":"messenger_move-right-leave-to_3Wmlg","move-left-enter-active":"messenger_move-left-enter-active_3-Muk","move-left-leave-active":"messenger_move-left-leave-active_1l_j1","move-left-enter":"messenger_move-left-enter_2ioo-","move-left-leave-to":"messenger_move-left-leave-to_2Mfsb","little-move-right-enter-active":"messenger_little-move-right-enter-active_guPN7","little-move-right-leave-active":"messenger_little-move-right-leave-active_3RHqI","little-move-right-enter":"messenger_little-move-right-enter_CynDI","little-move-right-leave-to":"messenger_little-move-right-leave-to_1dwJw","little-move-left-enter-active":"messenger_little-move-left-enter-active_fGMd_","little-move-left-leave-active":"messenger_little-move-left-leave-active_2CE77","little-move-left-enter":"messenger_little-move-left-enter_DbHzM","little-move-left-leave-to":"messenger_little-move-left-leave-to_1ZwJR"}},"3a9c":function(t,e,a){},"3abc":function(t,e,a){"use strict";a("f1a1")},"3c60":function(t,e,a){},"3dd0":function(t,e,a){},"3e48":function(t,e,a){},"411f":function(t,e,a){},4389:function(t,e,a){"use strict";a("0bd7")},4640:function(t,e,a){"use strict";a("6f1d")},4726:function(t,e,a){},"4a74":function(t,e,a){"use strict";a("d2bf")},"4c13":function(t){t.exports=JSON.parse('{"parameters":[{"label":"COM_EMUNDUS_ONBOARD_BUILDER_SECTIONS_INTRO","name":"intro","type":"textarea","helptext":"","placeholder":"","published":true,"sysadmin_only":false},{"label":"COM_EMUNDUS_ONBOARD_BUILDER_SECTIONS_OUTRO","name":"outro","type":"textarea","helptext":"","placeholder":"","published":true,"sysadmin_only":false},{"label":"COM_EMUNDUS_ONBOARD_BUILDER_SECTIONS_REPEAT","name":"repeat_group_button","type":"dropdown","options":[{"value":0,"label":"JNO"},{"value":1,"label":"JYES"}],"helptext":"","placeholder":"","published":true,"sysadmin_only":false},{"label":"COM_EMUNDUS_ONBOARD_BUILDER_SECTIONS_REPEAT_MIN","name":"repeat_min","type":"number","helptext":"","placeholder":"","published":true,"sysadmin_only":false},{"label":"COM_EMUNDUS_ONBOARD_BUILDER_SECTIONS_REPEAT_MAX","name":"repeat_max","type":"number","helptext":"","placeholder":"","published":true,"sysadmin_only":false}]}')},"4c38":function(t,e,a){"use strict";a("a961")},"4d2f":function(t,e,a){},"4f4d":function(t,e,a){},5151:function(t,e,a){},"52e6":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);var s=a("e832"),n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"com_emundus_vue em-flex-col-center"},["attachments"===t.component?e("Attachments",{attrs:{fnum:t.data.fnum,user:t.data.user,defaultAttachments:t.data.attachments?t.data.attachments:null,columns:t.data.columns}}):"files"===t.component?e("Files",{attrs:{type:t.data.type,user:t.data.user,ratio:t.data.ratio}}):"application"===t.component?e("ApplicationSingle",{attrs:{file:t.data.fnum,type:t.data.type,user:t.data.user,ratio:t.data.ratio,context:t.data.context||""}}):e("transition",{attrs:{name:"slide-right"}},[e(t.$props.component,{tag:"component"})],1)],1)},i=[],r=a("4e22"),o=a.n(r),l=function(){var t=this,e=t._self._c;return e("div",{staticClass:"tw-w-full",attrs:{id:"em-attachments"}},[e("div",{staticClass:"wrapper",class:{loading:t.loading}},[e("section",{staticClass:"tw-flex tw-items-center tw-justify-between",attrs:{id:"filters"}},[e("div",{staticClass:"tw-flex tw-items-center"},[e("div",{staticClass:"tw-flex tw-items-center searchbar-wrapper"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],ref:"searchbar",attrs:{id:"searchbar",type:"text",placeholder:t.translate("COM_EMUNDUS_ACTIONS_SEARCH")},domProps:{value:t.search},on:{input:[function(e){e.target.composing||(t.search=e.target.value)},t.onSearch],keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSearchKeyup.apply(null,arguments)}}}),e("span",{staticClass:"material-icons-outlined search"},[t._v("search")]),e("span",{staticClass:"material-icons-outlined clear tw-cursor-pointer",on:{click:function(e){t.search=""}}},[t._v("clear")])]),t.columns.includes("category")&&Object.entries(t.displayedAttachmentCategories).length>0?e("select",{directives:[{name:"model",rawName:"v-model",value:t.category,expression:"category"}],staticClass:"category-select em-ml-16",attrs:{name:"category"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.category=e.target.multiple?a:a[0]}}},[e("option",{attrs:{value:"all"}},[t._v(t._s(t.translate("COM_EMUNDUS_ATTACHMENTS_SELECT_CATEGORY")))]),t._l(t.displayedAttachmentCategories,(function(a,s){return e("option",{key:s,domProps:{value:s}},[t._v(t._s(a)+" ")])}))],2):t._e()]),e("div",{staticClass:"actions tw-flex tw-items-center"},[t.canExport?e("div",{staticClass:"btn-icon-text",class:{disabled:t.checkedAttachments.length<1},on:{click:t.exportAttachments}},[e("span",{staticClass:"material-icons-outlined export tw-mr-2"},[t._v("file_upload")]),e("span",[t._v(t._s(t.translate("COM_EMUNDUS_EXPORTS_EXPORT")))])]):t._e(),t.sync&&t.canSync?e("div",{staticClass:"btn-icon-text",class:{disabled:t.checkedAttachments.length<1},on:{click:function(e){return t.synchronizeAttachments(t.checkedAttachments)}}},[e("span",{staticClass:"material-icons cloud_sync",attrs:{title:t.translate("COM_EMUNDUS_ATTACHMENTS_SYNC_TITLE")}},[t._v(" cloud_sync ")]),e("span",[t._v(t._s(t.translate("COM_EMUNDUS_ATTACHMENTS_SYNC_TITLE")))])]):t._e(),e("span",{staticClass:"material-icons-outlined refresh tw-cursor-pointer",attrs:{title:t.translate("COM_EMUNDUS_ATTACHMENTS_REFRESH_TITLE")},on:{click:function(e){return t.refreshAttachments(!0)}}},[t._v(" autorenew ")]),t.canDelete?e("span",{staticClass:"material-icons-outlined delete",class:{disabled:t.checkedAttachments.length<1},attrs:{title:t.translate("COM_EMUNDUS_ATTACHMENTS_DELETE_TITLE")},on:{click:t.confirmDeleteAttachments}},[t._v(" delete_outlined ")]):t._e()])]),t.exportLink?e("div",{staticClass:"tw-mt-4 tw-mb-4"},[e("a",{attrs:{href:t.exportLink,target:"_blank"},on:{click:function(e){t.exportLink=""}}},[t._v(" "+t._s(t.translate("COM_EMUNDUS_ATTACHMENTS_EXPORT_LINK"))+" ")])]):t._e(),t.attachments.length?e("section",{staticClass:"table-wrapper tw-w-full"},[e("table",{class:{loading:t.loading},attrs:{"aria-describedby":"Table of attachments information"}},[e("thead",[e("tr",[t.columns.includes("check")?e("th",{attrs:{id:"check-th"}},[e("input",{staticClass:"attachment-check",attrs:{type:"checkbox"},on:{change:t.updateAllCheckedAttachments}})]):t._e(),t.columns.includes("name")?e("th",{attrs:{id:"name"},on:{click:function(e){return t.orderBy("value")}}},[e("span",[t._v(t._s(t.translate("COM_EMUNDUS_ATTACHMENTS_NAME")))]),"value"===t.sort.orderBy&&"asc"===t.sort.order?e("span",{staticClass:"material-icons-outlined tw-text-base"},[t._v("arrow_upward")]):t._e(),"value"===t.sort.orderBy&&"desc"===t.sort.order?e("span",{staticClass:"material-icons-outlined tw-text-base"},[t._v("arrow_downward")]):t._e()]):t._e(),t.columns.includes("date")?e("th",{staticClass:"date",attrs:{id:"date"},on:{click:function(e){return t.orderBy("timedate")}}},[e("span",[t._v(t._s(t.translate("COM_EMUNDUS_ATTACHMENTS_SEND_DATE")))]),"timedate"===t.sort.orderBy&&"asc"===t.sort.order?e("span",{staticClass:"material-icons-outlined tw-text-base"},[t._v("arrow_upward")]):t._e(),"timedate"===t.sort.orderBy&&"desc"===t.sort.order?e("span",{staticClass:"material-icons-outlined tw-text-base"},[t._v("arrow_downward")]):t._e()]):t._e(),t.columns.includes("desc")?e("th",{staticClass:"desc",attrs:{id:"desc"},on:{click:function(e){return t.orderBy("upload_description")}}},[e("span",[t._v(t._s(t.translate("COM_EMUNDUS_ATTACHMENTS_DESCRIPTION")))]),"upload_description"===t.sort.orderBy&&"asc"===t.sort.order?e("span",{staticClass:"material-icons-outlined tw-text-base"},[t._v("arrow_upward")]):t._e(),"upload_description"===t.sort.orderBy&&"desc"===t.sort.order?e("span",{staticClass:"material-icons-outlined tw-text-base"},[t._v("arrow_downward")]):t._e()]):t._e(),t.columns.includes("category")?e("th",{staticClass:"category",attrs:{id:"category"},on:{click:function(e){return t.orderBy("category")}}},[e("span",[t._v(t._s(t.translate("COM_EMUNDUS_ATTACHMENTS_CATEGORY")))]),"category"===t.sort.orderBy&&"asc"===t.sort.order?e("span",{staticClass:"material-icons-outlined tw-text-base"},[t._v("arrow_upward")]):t._e(),"category"===t.sort.orderBy&&"desc"===t.sort.order?e("span",{staticClass:"material-icons-outlined tw-text-base"},[t._v("arrow_downward")]):t._e()]):t._e(),t.columns.includes("status")?e("th",{staticClass:"status",attrs:{id:"status"},on:{click:function(e){return t.orderBy("is_validated")}}},[e("span",[t._v(t._s(t.translate("COM_EMUNDUS_ATTACHMENTS_CHECK")))]),"is_validated"===t.sort.orderBy&&"asc"===t.sort.order?e("span",{staticClass:"material-icons-outlined tw-text-base"},[t._v("arrow_upward")]):t._e(),"is_validated"===t.sort.orderBy&&"desc"===t.sort.order?e("span",{staticClass:"material-icons-outlined tw-text-base"},[t._v("arrow_downward")]):t._e()]):t._e(),t.canSee&&t.columns.includes("user")?e("th",{attrs:{id:"user"},on:{click:function(e){return t.orderBy("user_id")}}},[e("span",[t._v(t._s(t.translate("COM_EMUNDUS_ATTACHMENTS_UPLOADED_BY")))]),"user_id"===t.sort.orderBy&&"asc"===t.sort.order?e("span",{staticClass:"material-icons-outlined tw-text-base"},[t._v("arrow_upward")]):t._e(),"user_id"===t.sort.orderBy&&"desc"===t.sort.order?e("span",{staticClass:"material-icons-outlined tw-text-base"},[t._v("arrow_downward")]):t._e()]):t._e(),t.canSee&&t.columns.includes("modified_by")?e("th",{attrs:{id:"modified_by"},on:{click:function(e){return t.orderBy("modified_by")}}},[e("span",[t._v(t._s(t.translate("COM_EMUNDUS_ATTACHMENTS_MODIFIED_BY")))]),"modified_by"===t.sort.orderBy&&"asc"===t.sort.order?e("span",{staticClass:"material-icons-outlined tw-text-base"},[t._v("arrow_upward")]):t._e(),"modified_by"===t.sort.orderBy&&"desc"===t.sort.order?e("span",{staticClass:"material-icons-outlined tw-text-base"},[t._v("arrow_downward")]):t._e()]):t._e(),t.columns.includes("modified")?e("th",{staticClass:"date",attrs:{id:"modified"},on:{click:function(e){return t.orderBy("modified")}}},[e("span",[t._v(t._s(t.translate("COM_EMUNDUS_ATTACHMENTS_MODIFICATION_DATE")))]),"modified"===t.sort.orderBy&&"asc"===t.sort.order?e("span",{staticClass:"material-icons-outlined tw-text-base"},[t._v("arrow_upward")]):t._e(),"modified"===t.sort.orderBy&&"desc"===t.sort.order?e("span",{staticClass:"material-icons-outlined tw-text-base"},[t._v("arrow_downward")]):t._e()]):t._e(),t.columns.includes("permissions")?e("th",{staticClass:"permissions",attrs:{id:"permissions"}},[t._v(" "+t._s(t.translate("COM_EMUNDUS_ATTACHMENTS_PERMISSIONS"))+" ")]):t._e(),t.sync&&t.columns.includes("sync")?e("th",{staticClass:"sync",attrs:{id:"sync"},on:{click:function(e){return t.orderBy("sync")}}},[e("span",[t._v(t._s(t.translate("COM_EMUNDUS_ATTACHMENTS_SYNC")))])]):t._e()])]),e("tbody",t._l(t.displayedAttachments,(function(a){return e("AttachmentRow",{key:a.aid,attrs:{attachment:a,checkedAttachmentsProp:t.checkedAttachments,canUpdate:t.canUpdate,sync:t.sync,canSee:t.canSee,columns:t.$props.columns},on:{"open-modal":function(e){return t.openModal(a)},"update-checked-attachments":t.updateCheckedAttachments,"update-status":t.updateStatus,"change-permission":t.changePermission}})})),1)])]):e("p",[t._v(" "+t._s(t.translate("COM_EMUNDUS_ATTACHMENTS_NO_ATTACHMENTS_FOUND"))+" ")])]),e("modal",{attrs:{id:"edit-modal",name:"edit",resizable:!0,draggable:!0,styles:"display:flex;flex-direction:column;justify-content:center;align-items:center;"}},[e("div",{staticClass:"modal-head tw-w-full tw-flex tw-items-center tw-justify-between"},[e("div",{staticClass:"tw-flex tw-items-center tw-justify-start",attrs:{id:"actions-left"}},[e("span",[t._v(t._s(t.selectedAttachment.filename))])]),e("div",{staticClass:"tw-flex tw-items-center",attrs:{id:"actions-right"}},[t.sync&&t.syncSelectedPreview?e("a",{staticClass:"download btn-icon-text tw-mr-6",attrs:{href:t.syncSelectedPreview,target:"_blank"}},[e("span",{staticClass:"material-icons-outlined"},[t._v("open_in_new")]),e("span",[t._v(t._s(t.translate("COM_EMUNDUS_ATTACHMENTS_OPEN_IN_GED")))])]):t._e(),t.canDownload?e("a",{staticClass:"download btn-icon-text tw-mr-6",attrs:{download:"",href:t.attachmentPath}},[e("span",{staticClass:"material-icons"},[t._v(" file_download ")]),e("span",[t._v(t._s(t.translate("COM_EMUNDUS_ATTACHMENTS_LINK_TO_DOWNLOAD")))])]):t._e(),e("div",{staticClass:"prev-next-attachments tw-flex tw-items-center tw-justify-between tw-mr-2"},[e("div",{staticClass:"prev tw-flex tw-items-center tw-mr-1",class:{active:t.selectedAttachmentPosition>0},on:{click:function(e){return t.changeAttachment(t.selectedAttachmentPosition-1,!0)}}},[e("span",{staticClass:"material-icons"},[t._v(" navigate_before ")])]),e("span",{staticClass:"lvl"},[t._v(t._s(t.selectedAttachmentPosition+1)+" /"+t._s(t.displayedAttachments.length))]),e("div",{staticClass:"next tw-flex tw-items-center tw-ml-1",class:{active:t.selectedAttachmentPosition<t.displayedAttachments.length-1},on:{click:function(e){return t.changeAttachment(t.selectedAttachmentPosition+1)}}},[e("span",{staticClass:"material-icons"},[t._v(" navigate_next ")])])]),e("span",{staticClass:"material-icons tw-cursor-pointer",on:{click:t.closeModal}},[t._v("close")])])]),e("transition",{attrs:{name:t.slideTransition},on:{"before-leave":t.beforeLeaveSlide}},[!t.modalLoading&&t.displayedUser.user_id&&t.displayedFnum?e("div",{staticClass:"modal-body tw-flex tw-items-center",class:{"only-preview":t.onlyPreview}},[e("AttachmentPreview",{attrs:{user:t.displayedUser.user_id},on:{fileNotFound:function(e){t.canDownload=!1},canDownload:function(e){t.canDownload=!0}}}),t.displayEdit?e("AttachmentEdit",{attrs:{fnum:t.displayedFnum,"is-displayed":!t.onlyPreview},on:{closeModal:t.closeModal,saveChanges:t.updateAttachment,"update-displayed":t.toggleOnlyPreview}}):t._e()],1):t._e()])],1),t.loading?e("div",{staticClass:"vue-em-loader em-loader"}):t._e()],1)},c=[],u=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"em-attachment-preview"}},[e("div",{ref:"a-preview",staticClass:"attachment-preview",class:{"tw-overflow-x":t.overflowX,"tw-overflow-y":t.overflowY,"tw-hidden":!t.needShadowDOM}}),t.needShadowDOM?t._e():e("div",{staticClass:"attachment-preview",domProps:{innerHTML:t._s(t.preview)}}),e("div",{class:{active:t.msg&&t.openMsg},attrs:{id:"msg"}},[e("p",[t._v(t._s(t.msg))])])])},d=[],p=a("7338"),m=a.n(p);const h="undefined"!=typeof Joomla&&null!==Joomla?Joomla.getOptions("system.paths"):{base:""};m.a.defaults.baseURL=void 0!==h.base&&""!==h.base?h.base:"/";var f=(t={"Content-Type":"application/json","Cache-Control":"no-cache"})=>m.a.create({timeout:3e4,headers:t,responseType:"json",withCredentials:!0}),_={async getAttachmentProgress(t){try{const e=await f().get("index.php?option=com_emundus&controller=files&task=getattachmentprogress",{params:{fnum:t}});return e.data}catch(e){return{status:!1,msg:e.message}}},async getAttachmentsByUser(t){try{const e=await f().get("index.php?option=com_emundus&controller=application&task=getuserattachments",{params:{user_id:t}});return e.data}catch(e){return{status:!1,msg:e.message}}},async getAttachmentsByFnum(t){try{const e=await f().get("index.php?option=com_emundus&controller=application&task=getattachmentsbyfnum",{params:{fnum:t}});return e.data.status&&("string"===typeof e.data.attachments&&(e.data.attachments=JSON.parse(e.data.attachments)),"object"===typeof e.data.attachments&&(e.data.attachments=Object.values(e.data.attachments)),e.data.attachments.forEach(t=>{null===t.is_validated&&(t.is_validated=-2),null!==t.upload_description&&"string"===typeof t.upload_description||(t.upload_description=""),t.show=!0})),e.data}catch(e){return{status:!1,msg:e.message}}},async getAttachmentCategories(){try{const t=await f().get("index.php?option=com_emundus&controller=files&task=getattachmentcategories");return t.data}catch(t){return{status:!1,msg:t.message}}},async deleteAttachments(t,e,a){try{const s=new FormData;return s.append("ids",JSON.stringify(a)),await f().post(`index.php?option=com_emundus&controller=application&task=deleteattachement&fnum=${t}&student_id=${e}`,s,{headers:{"Content-Type":"multipart/form-data"}})}catch(s){return{status:!1,msg:s.message}}},async updateAttachment(t){try{const e=await f().post("index.php?option=com_emundus&controller=application&task=updateattachment",t,{headers:{"Content-Type":"multipart/form-data"}});return e.data}catch(e){return{status:!1,msg:e.message}}},async getPreview(t,e){try{const a=await f().get("index.php?option=com_emundus&controller=application&task=getattachmentpreview",{params:{user:t,filename:e}});return a.data}catch(a){return{status:!1,msg:a.message}}},exportAttachments(t,e,a){const s=new FormData;return s.append("attachments_only",!0),s.append("student_id",t),s.append("fnum",e),a.forEach(t=>{s.append("ids[]",t)}),f().post("index.php?option=com_emundus&controller=application&task=exportpdf",s,{headers:{"Content-Type":"multipart/form-data"}})},async getProfileAttachments(){try{const t=await f().get("index.php?option=com_emundus&controller=users&task=getprofileattachments");return t.data}catch(t){return{status:!1,msg:t.message}}},async getProfileAttachmentsAllowed(){try{const t=await f().get("index.php?option=com_emundus&controller=users&task=getprofileattachmentsallowed");return t.data}catch(t){return{status:!1,msg:t.message}}},async deleteProfileAttachment(t,e){try{const a=await f().delete("index.php?option=com_emundus&controller=users&task=deleteprofileattachment",{params:{id:t,filename:e}});return a.data}catch(a){return{status:!1,msg:a.message}}},async isExpiresDateDisplayed(){try{const t=await f().get("index.php?option=com_emundus&controller=settings&task=isexpiresdatedisplayed");return t.data}catch(t){return{status:!1,msg:t.message}}}},g={props:{user:{type:Number,required:!0}},data(){return{attachment:this.$store.state.attachment.selectedAttachment,preview:"",overflowX:!1,overflowY:!1,style:"",msg:"",openMsg:!1,needShadowDOM:!1}},mounted(){"function"===typeof this.$refs["a-preview"].attachShadow&&this.$refs["a-preview"].attachShadow({mode:"open"}),this.attachment=this.$store.state.attachment.selectedAttachment,this.getPreview()},methods:{async getPreview(){let t;switch(this.$store.state.attachment.previews[this.attachment.aid]?t=this.$store.state.attachment.previews[this.attachment.aid]:(t=await _.getPreview(this.user,this.attachment.filename),t.status&&this.$store.commit("attachment/setPreview",{preview:t,id:this.attachment.aid})),this.$emit("canDownload"),t.status?(this.preview=t.content,this.overflowX=t.overflowX,this.overflowY=t.overflowY,this.style=t.style,t.msg&&(this.msg=t.msg,this.openMsg=!0,setTimeout(()=>{this.openMsg=!1},3e3))):("file_not_found"===t.error&&this.$emit("fileNotFound"),this.overflowX=!1,this.overflowY=!1,this.preview=t.content,this.msg=""),this.style){case"sheet":case"presentation":case"word":this.needShadowDOM=!0;break;default:this.needShadowDOM=!1;break}this.needShadowDOM?(this.$refs["a-preview"].shadowRoot.innerHTML=null!=this.preview?this.preview:"","sheet"==this.style?this.addSheetStyles():"presentation"==this.style?this.addPresentationStyles():"word"==this.style&&this.addWordStyles()):this.$refs["a-preview"].shadowRoot.innerHTML=""},addSheetStyles(){const t=this.$refs["a-preview"].shadowRoot.querySelectorAll("div");t.forEach((t,e)=>{t.style.width="fit-content",t.style.margin="20px auto",t.style.boxShadow="0px 0px 10px rgba(0, 0, 0, 0.1)",e>0&&(t.style.display="none")});const e=this.$refs["a-preview"].shadowRoot.querySelector(".navigation");e&&(e.style.display="flex",e.style.flexDirection="row",e.style.justifyContent="flex-start",e.style.alignItems="center",e.querySelectorAll("li").forEach((e,a)=>{e.style.listStyleType="none",e.style.margin="0 10px",e.addEventListener("click",()=>{t.forEach((t,e)=>{t.style.display=e==a?"block":"none"})})}))},addPresentationStyles(){const t=this.$refs["a-preview"].shadowRoot.querySelectorAll(".slide");t.forEach(t=>{t.style.padding="16px",t.style.margin="20px",t.style.width="calc(100% - 72px)",t.style.boxShadow="0px 0px 10px rgba(0, 0, 0, 0.1)",t.style.borderRadius="8px",t.style.backgroundColor="white"})},addWordStyles(){const t=this.$refs["a-preview"].shadowRoot.querySelector(".wrapper");t&&(t.style.border="var(--border-color)",t.style.boxShadow="var(--box-shadow)",t.style.backgroundColor="white",t.style.padding="20px",t.style.margin="16px",t.style.overflow="hidden")}},watch:{"$store.state.attachment.selectedAttachment":function(){const t=Object.keys(this.$store.state.attachment.selectedAttachment);0!==t.length&&(this.attachment=this.$store.state.attachment.selectedAttachment,this.openMsg=!1,this.getPreview())}}},v=g,y=(a("a7ea"),a("17e1")),b=Object(y["a"])(v,u,d,!1,null,null,null),w=b.exports,O=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"attachment-edit"}},[e("div",{staticClass:"wrapper"},[e("h2",{staticClass:"title"},[t._v(t._s(t.attachment.value))]),e("div",{staticClass:"editable-data"},[e("div",{staticClass:"input-group"},[e("label",{attrs:{for:"description"}},[t._v(t._s(t.translate("DESCRIPTION")))]),"video"!==t.attachment.allowed_types?e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.attachmentDescription,expression:"attachmentDescription"}],attrs:{name:"description",id:"description",type:"text",disabled:!t.canUpdate},domProps:{value:t.attachmentDescription},on:{focusout:t.saveChanges,input:function(e){e.target.composing||(t.attachmentDescription=e.target.value)}}}):e("span",{domProps:{innerHTML:t._s(t.attachmentDescription)}})]),e("div",{staticClass:"input-group valid-state",class:{success:1==t.attachmentIsValidated,warning:2==t.attachmentIsValidated,error:0==t.attachmentIsValidated}},[e("label",{attrs:{for:"status"}},[t._v(t._s(t.translate("COM_EMUNDUS_ATTACHMENTS_CHECK")))]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.attachmentIsValidated,expression:"attachmentIsValidated"}],attrs:{name:"status",disabled:!t.canUpdate},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.attachmentIsValidated=e.target.multiple?a:a[0]},t.updateAttachmentStatus]}},[e("option",{attrs:{value:"1"}},[t._v(t._s(t.translate("VALID")))]),e("option",{attrs:{value:"0"}},[t._v(t._s(t.translate("INVALID")))]),e("option",{attrs:{value:"2"}},[t._v(t._s(t.translate("COM_EMUNDUS_ATTACHMENTS_WARNING")))]),e("option",{attrs:{value:"-2"}},[t._v(t._s(t.translate("COM_EMUNDUS_ATTACHMENTS_WAITING")))])])]),t.canUpdate?e("div",{staticClass:"input-group"},[e("label",{attrs:{for:"replace"}},[t._v(t._s(t.translate("COM_EMUNDUS_ATTACHMENTS_REPLACE")))]),e("input",{attrs:{type:"file",name:"replace",accept:t.allowedType},on:{change:t.updateFile}})]):t._e(),t.attachment.profiles&&t.attachment.profiles.length>0?e("div",{staticClass:"input-group"},[e("label",{attrs:{for:"can_be_viewed"}},[t._v(t._s(t.translate("COM_EMUNDUS_ATTACHMENTS_CAN_BE_VIEWED")))]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.attachmentCanBeViewed,expression:"attachmentCanBeViewed"}],attrs:{type:"checkbox",name:"can_be_viewed",disabled:!t.canUpdate},domProps:{checked:Array.isArray(t.attachmentCanBeViewed)?t._i(t.attachmentCanBeViewed,null)>-1:t.attachmentCanBeViewed},on:{click:t.saveChanges,change:function(e){var a=t.attachmentCanBeViewed,s=e.target,n=!!s.checked;if(Array.isArray(a)){var i=null,r=t._i(a,i);s.checked?r<0&&(t.attachmentCanBeViewed=a.concat([i])):r>-1&&(t.attachmentCanBeViewed=a.slice(0,r).concat(a.slice(r+1)))}else t.attachmentCanBeViewed=n}}})]):t._e(),t.attachment.profiles&&t.attachment.profiles.length>0?e("div",{staticClass:"input-group"},[e("label",{attrs:{for:"can_be_deleted"}},[t._v(t._s(t.translate("COM_EMUNDUS_ATTACHMENTS_CAN_BE_DELETED")))]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.attachmentCanBeDeleted,expression:"attachmentCanBeDeleted"}],attrs:{type:"checkbox",name:"can_be_deleted",disabled:!t.canUpdate},domProps:{checked:Array.isArray(t.attachmentCanBeDeleted)?t._i(t.attachmentCanBeDeleted,null)>-1:t.attachmentCanBeDeleted},on:{click:t.saveChanges,change:function(e){var a=t.attachmentCanBeDeleted,s=e.target,n=!!s.checked;if(Array.isArray(a)){var i=null,r=t._i(a,i);s.checked?r<0&&(t.attachmentCanBeDeleted=a.concat([i])):r>-1&&(t.attachmentCanBeDeleted=a.slice(0,r).concat(a.slice(r+1)))}else t.attachmentCanBeDeleted=n}}})]):t._e()]),e("div",{staticClass:"non-editable-data"},[e("div",[e("span",[t._v(t._s(t.translate("COM_EMUNDUS_ATTACHMENTS_SEND_DATE")))]),e("span",{staticClass:"tw-text-right"},[t._v(t._s(t.formattedDate(t.attachment.timedate)))])]),t.attachment.user_id&&t.canSee?e("div",[e("span",[t._v(t._s(t.translate("COM_EMUNDUS_ATTACHMENTS_UPLOADED_BY")))]),e("span",{staticClass:"tw-text-right"},[t._v(t._s(t.getUserNameById(t.attachment.user_id)))])]):t._e(),t.attachment.category?e("div",[e("span",[t._v(t._s(t.translate("COM_EMUNDUS_ATTACHMENTS_CATEGORY")))]),e("span",{staticClass:"tw-text-right"},[t._v(t._s(this.categories[t.attachment.category]))])]):t._e(),t.attachment.modified_by&&t.canSee?e("div",[e("span",[t._v(t._s(t.translate("COM_EMUNDUS_ATTACHMENTS_MODIFIED_BY")))]),e("span",{staticClass:"tw-text-right"},[t._v(t._s(t.getUserNameById(t.attachment.modified_by)))])]):t._e(),t.attachment.modified?e("div",[e("span",[t._v(t._s(t.translate("COM_EMUNDUS_ATTACHMENTS_MODIFICATION_DATE")))]),e("span",{staticClass:"tw-text-right"},[t._v(t._s(t.formattedDate(t.attachment.modified)))])]):t._e()])]),e("div",{staticClass:"tw-w-full tw-flex tw-items-center tw-justify-between"},[e("div",{attrs:{id:"toggle-display"}},[t.displayed?e("span",{staticClass:"material-icons-outlined displayed tw-cursor-pointer",on:{click:function(e){return t.toggleDisplay(!1)}}},[t._v(" chevron_right ")]):e("span",{staticClass:"material-icons-outlined not-displayed tw-cursor-pointer",on:{click:function(e){return t.toggleDisplay(!0)}}},[t._v(" menu_open ")])])]),t.error?e("div",{staticClass:"error-msg"},[t._v(t._s(t.errorMessage))]):t._e()])},E=[],C={async getUserById(t){try{const e=await f().get("index.php?option=com_emundus&controller=users&task=getuserbyid",{params:{id:t}});return e.data}catch(e){return{status:!1,msg:e.message}}},async getUserNameById(t){try{const e=await f().get("index.php?option=com_emundus&controller=users&task=getUserNameById",{params:{id:t}});return e.data}catch(e){return{status:!1,msg:e.message}}},async getAccessRights(t,e){try{const a=await f().get("index.php?option=com_emundus&controller=users&task=getattachmentaccessrights",{params:{id:t,fnum:e}});return a.data}catch(a){return{status:!1,msg:a.message}}}},N={mimeTypes:{aac:"audio/aac",abw:"application/x-abiword",arc:"application/octet-stream",avi:"video/x-msvideo",azw:"application/vnd.amazon.ebook",bin:"application/octet-stream",bmp:"image/bmp",bz:"application/x-bzip",bz2:"application/x-bzip2",csh:"application/x-csh",css:"text/css",csv:"text/csv",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",eot:"application/vnd.ms-fontobject",epub:"application/epub+zip",gif:"image/gif",html:"text/html",ico:"image/x-icon",ics:"text/calendar",jar:"application/java-archive",jpeg:"image/jpeg",jpg:"image/jpeg",js:"application/javascript",json:"application/json",mid:"audio/midi",midi:"audio/midi",mpeg:"video/mpeg",mpkg:"application/vnd.apple.installer+xml",odp:"application/vnd.oasis.opendocument.presentation",ods:"application/vnd.oasis.opendocument.spreadsheet",odt:"application/vnd.oasis.opendocument.text",oga:"audio/ogg",ogv:"video/ogg",ogx:"application/ogg",otf:"font/otf",png:"image/png",pdf:"application/pdf",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",rar:"application/x-rar-compressed",rtf:"application/rtf",sh:"application/x-sh",svg:"image/svg+xml",swf:"application/x-shockwave-flash",tar:"application/x-tar",tiff:"image/tiff",ts:"application/typescript",ttf:"font/ttf",vsd:"application/vnd.visio",wav:"audio/x-wav",weba:"audio/webm",webm:"video/webm",webp:"image/webp",woff:"font/woff",woff2:"font/woff2",xhtml:"application/xhtml+xml",xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xml:"application/xml",xul:"application/vnd.mozilla.xul+xml",zip:"application/zip",mp4:"video/mp4",mov:"video/mov"}},S={methods:{formattedDate:function(t="",e="LLLL",a=null){let s="";if(null!==t)if(null===a&&(a=this.$store.state.global.offset),""!==t){let n=t.substring(0,4),i=t.substring(5,7),r=t.substring(8,10),l=t.substring(11,13),c=t.substring(14,16),u=t.substring(17,19);const d=n+"-"+i+"-"+r+"T"+l+":"+c+":"+u+"+00:00";s=o()(d).utcOffset(a).format(e)}else s=o()().utcOffset(a).format(e);return s},strippedHtml:function(t){return null===t||void 0===t?"":t.replace(/<(?:.|\n)*?>/gm,"")},getUserNameById:function(t){let e="";if(t=parseInt(t),t>0){const a=this.$store.state.user.users[t];a?e=a.firstname+" "+a.lastname:C.getUserNameById(t).then(a=>{a.status&&a.user.user_id==t&&(e=a.user.firstname+" "+a.user.lastname,this.$store.dispatch("user/setUsers",[a.user]))})}return e},async getAttachmentCategories(){const t=await _.getAttachmentCategories();return!0===t.status?(Object.entries(t.categories).forEach(([e,a])=>{t.categories[e]=this.translate(a)}),delete t.categories[""],this.$store.dispatch("attachment/setCategories",t.categories),t.categories):{}},async asyncForEach(t,e){for(let a=0;a<t.length;a++)await e(t[a],a,t)},getMimeTypeFromExtension(t){return!!N.mimeTypes.hasOwnProperty(t)&&N.mimeTypes[t]},checkMaxMinlength(t,e,a=null){t.target.textContent.length>=e&&8!=t.keyCode&&t.preventDefault(),null!==a&&t.target.textContent.length<=a&&8==t.keyCode&&t.preventDefault()},differencesBetweenObjetcs(t,e,a=null){let s=[];if(null===a){const s=Object.getOwnPropertyNames(t),n=Object.getOwnPropertyNames(e);a=Array.from(new Set(s.concat(n)))}return a=a.filter(t=>"__ob__"!==t),a.forEach(a=>{(void 0===typeof t[a]||void 0===typeof e[a]||t[a]!=e[a]&&("object"!=typeof t[a]||"object"==typeof t[a]&&JSON.stringify(t[a])!==JSON.stringify(e[a])))&&s.push(a)}),s},tip(t,e="",a="Information"){this.$notify({group:t,title:""+a,text:e,duration:3e3})}}},A=S,D={name:"AttachmentEdit",props:{fnum:{type:String,required:!0},isDisplayed:{type:Boolean,default:!0}},mixins:[A],data(){return{displayed:!0,attachment:{},categories:{},file:null,canUpdate:!1,canSee:!0,error:!1,errorMessage:"",attachmentIsValidated:"-2",attachmentCanBeViewed:!1,attachmentCanBeDeleted:!1,attachmentDescription:""}},mounted(){this.displayed=this.isDisplayed,this.canUpdate=!!this.$store.state.user.rights[this.fnum]&&this.$store.state.user.rights[this.fnum].canUpdate,this.canSee=!this.$store.state.global.anonyme,this.attachment=this.$store.state.attachment.selectedAttachment,this.categories=this.$store.state.attachment.categories,this.attachmentCanBeViewed="1"==this.attachment.can_be_viewed,this.attachmentCanBeDeleted="1"==this.attachment.can_be_deleted,this.attachmentDescription=null!=this.attachment.upload_description?this.attachment.upload_description:"",this.attachmentIsValidated=this.attachment.is_validated},methods:{async saveChanges(){let t=new FormData;const e=this.attachmentCanBeViewed?"1":"0",a=this.attachmentCanBeDeleted?"1":"0";t.append("fnum",this.fnum),t.append("user",this.$store.state.user.currentUser),t.append("id",this.attachment.aid),t.append("description",this.attachmentDescription),t.append("is_validated",this.attachmentIsValidated),t.append("can_be_viewed",e),t.append("can_be_deleted",a),this.file&&t.append("file",this.file);const s=await _.updateAttachment(t);if(s.status.update){if(this.attachment.modified_by=this.$store.state.user.currentUser,this.attachment.upload_description=null!=this.attachmentDescription?this.attachmentDescription:"",this.attachment.is_validated=this.attachmentIsValidated,this.attachment.can_be_viewed=this.attachmentCanBeViewed,this.attachment.can_be_deleted=this.attachmentCanBeDeleted,this.$store.dispatch("attachment/updateAttachmentOfFnum",{fnum:this.fnum,attachment:this.attachment}),s.status.file_update){const t=await _.getPreview(this.$store.state.user.displayedUser,this.attachment.filename);this.$store.dispatch("attachment/setPreview",{preview:t,id:this.attachment.aid})}}else this.showError(s.msg)},updateFile(t){this.file=t.target.files[0],this.saveChanges()},updateAttachmentStatus(t){this.attachmentIsValidated=t.target.value,this.saveChanges()},showError(t){this.error=!0,this.errorMessage=t,setTimeout(()=>{this.error=!1,this.errorMessage=""},3e3)},toggleDisplay(t){this.displayed=t,this.$emit("update-displayed",this.displayed)}},computed:{allowedType(){let t="";return this.attachment.filename&&(t="."+this.attachment.filename.split(".").pop()),t}},watch:{"$store.state.attachment.selectedAttachment":function(){const t=Object.keys(this.$store.state.attachment.selectedAttachment);t.length>0&&(this.attachment=this.$store.state.attachment.selectedAttachment)}}},M=D,x=(a("7bc0"),Object(y["a"])(M,O,E,!1,null,null,null)),T=x.exports,U=function(){var t=this,e=t._self._c;return e("tr",{key:t.attachment.aid,staticClass:"attachment-row",class:{checked:t.checkedAttachments.includes(t.attachment.aid)}},[t.columns.includes("check")?e("td",[e("input",{staticClass:"attachment-check",attrs:{type:"checkbox"},domProps:{checked:t.checkedAttachments.includes(t.attachment.aid)},on:{change:function(e){return t.updateCheckedAttachments(t.attachment.aid)}}})]):t._e(),t.columns.includes("name")?e("td",{staticClass:"td-document",on:{click:t.openModal}},[t.attachment.existsOnServer?t._e():e("span",{staticClass:"material-icons-outlined warning file-not-found tw-mr-4",attrs:{title:t.translate("COM_EMUNDUS_ATTACHMENTS_FILE_NOT_FOUND")}},[t._v("warning")]),e("span",{attrs:{title:t.attachment.value}},[t._v(t._s(t.attachment.value))])]):t._e(),t.columns.includes("date")?e("td",{staticClass:"date"},[t._v(t._s(t.formattedDate(t.attachment.timedate)))]):t._e(),t.columns.includes("desc")?e("td",{staticClass:"desc"},[t._v(" "+t._s(t.strippedHtml(t.attachment.upload_description)))]):t._e(),t.columns.includes("category")?e("td",{staticClass:"category"},[t._v(" "+t._s(t.category)+" ")]):t._e(),t.columns.includes("status")?e("td",{staticClass:"status valid-state",class:{success:1==t.attachment.is_validated,warning:2==t.attachment.is_validated,error:0==t.attachment.is_validated}},[e("select",{attrs:{disabled:!1===t.canUpdate},on:{change:e=>t.updateStatus(e)}},[e("option",{attrs:{value:"1"},domProps:{selected:1==t.attachment.is_validated}},[t._v(t._s(t.translate("VALID")))]),e("option",{attrs:{value:"0"},domProps:{selected:0==t.attachment.is_validated}},[t._v(t._s(t.translate("INVALID")))]),e("option",{attrs:{value:"2"},domProps:{selected:2==t.attachment.is_validated}},[t._v(t._s(t.translate("COM_EMUNDUS_ATTACHMENTS_WARNING"))+" ")]),e("option",{attrs:{value:"-2"},domProps:{selected:-2==t.attachment.is_validated||null===t.attachment.is_validated}},[t._v(" "+t._s(t.translate("COM_EMUNDUS_ATTACHMENTS_WAITING"))+" ")])])]):t._e(),t.canSee&&t.columns.includes("user")?e("td",[t._v(t._s(t.getUserNameById(t.attachment.user_id)))]):t._e(),t.canSee&&t.columns.includes("modified_by")?e("td",[t._v(t._s(t.getUserNameById(t.attachment.modified_by)))]):t._e(),t.columns.includes("modified")?e("td",{staticClass:"date"},[t._v(t._s(t.formattedDate(t.attachment.modified)))]):t._e(),t.columns.includes("permissions")?e("td",{staticClass:"permissions"},[t.attachment.profiles.length>0?e("span",{staticClass:"material-icons-outlined visibility-permission tw-cursor-pointer",class:{active:"1"==t.attachment.can_be_viewed},attrs:{title:t.translate("COM_EMUNDUS_ATTACHMENTS_PERMISSION_VIEW")},on:{click:function(e){return t.changePermission("can_be_viewed",t.attachment)}}},[t._v("visibility")]):t._e(),t.attachment.profiles.length>0?e("span",{staticClass:"material-icons-outlined delete-permission tw-cursor-pointer",class:{active:"1"==t.attachment.can_be_deleted},attrs:{title:t.translate("COM_EMUNDUS_ATTACHMENTS_PERMISSION_DELETE")},on:{click:function(e){return t.changePermission("can_be_deleted",t.attachment)}}},[t._v("delete_outlined")]):t._e()]):t._e(),t.sync&&t.columns.includes("sync")?e("td",[t.attachment.sync>0?e("div",["write"!=t.attachment.sync_method||t.syncLoading?"read"!=t.attachment.sync_method||t.syncLoading?t._e():e("span",{staticClass:"material-icons sync tw-cursor-pointer",class:{success:1==t.synchronizeState,error:1!=t.synchronizeState},attrs:{title:t.translate("COM_EMUNDUS_ATTACHMENTS_SYNC_READ")},on:{click:function(e){return t.synchronizeAttachments(t.attachment.aid)}}},[t._v(" cloud_download ")]):e("span",{staticClass:"material-icons sync tw-cursor-pointer",class:{success:1==t.synchronizeState,error:1!=t.synchronizeState},attrs:{title:t.translate("COM_EMUNDUS_ATTACHMENTS_SYNC_WRITE")},on:{click:function(e){return t.synchronizeAttachments(t.attachment.aid)}}},[t._v(" cloud_upload ")]),t.syncLoading?e("div",{staticClass:"sync-loader em-loader"}):t._e()]):t._e()]):t._e()])},k=[],R={async isSyncModuleActive(){try{const t=await f().get("index.php?option=com_emundus&controller=sync&task=issyncmoduleactive");return t.data}catch(t){return{status:!1,msg:t.message}}},async getSyncType(t){try{const e=await f().get("index.php?option=com_emundus&controller=sync&task=getsynctype",{params:{upload_id:t}});return e.data}catch(e){return{status:!1,msg:e.message}}},async getSynchronizeState(t){try{const e=await f().get("index.php?option=com_emundus&controller=sync&task=getsynchronizestate",{params:{upload_id:t}});return e.data}catch(e){return{status:!1,msg:e.message}}},async synchronizeAttachments(t){try{const e=new FormData;e.append("upload_ids",JSON.stringify(t));const a=await f().post("index.php?option=com_emundus&controller=sync&task=synchronizeattachments",e,{headers:{"Content-Type":"multipart/form-data"}});return a.data}catch(e){return{status:!1,msg:e.message}}},async deleteAttachments(t){try{const e=new FormData;e.append("upload_ids",JSON.stringify(t));const a=await f().post("index.php?option=com_emundus&controller=sync&task=deleteattachments",e,{headers:{"Content-Type":"multipart/form-data"}});return a.data}catch(e){return{status:!1,msg:e.message}}},async checkAttachmentsExists(t){try{const e=new FormData;e.append("upload_ids",JSON.stringify(t));const a=await f().post("index.php?option=com_emundus&controller=sync&task=checkattachmentsexists",e,{headers:{"Content-Type":"multipart/form-data"}});return a.data}catch(e){return{status:!1,msg:e.message}}},async saveConfig(t,e){try{const a=new FormData;return a.append("config",JSON.stringify(t)),a.append("type",e),await f().post("index.php?option=com_emundus&controller=sync&task=saveconfig",a,{headers:{"Content-Type":"multipart/form-data"}})}catch(a){return{status:!1,msg:a.message}}},async getConfig(t){try{return await f().get("index.php?option=com_emundus&controller=sync&task=getconfig",{params:{type:t}})}catch(e){return{status:!1,msg:e.message}}},async getAttachmentAspectsConfig(t){try{const e=await f().get("index.php?option=com_emundus&controller=sync&task=getattachmentaspectsconfig",{params:{attachmentId:t}});return e.data}catch(e){return{status:!1,msg:e.message}}},saveAttachmentAspectsConfig(t,e){try{const a=new FormData;return a.append("attachmentId",t),a.append("config",JSON.stringify(e)),f().post("index.php?option=com_emundus&controller=sync&task=saveattachmentaspectsconfig",a,{headers:{"Content-Type":"multipart/form-data"}})}catch(a){return{status:!1,msg:a.message}}},async getAspects(){try{return await f().get("index.php?option=com_emundus&controller=sync&task=getaspects")}catch(t){return{status:!1,msg:t.message}}},async uploadAspectFile(t){try{const e=new FormData;return e.append("file",t),await f().post("index.php?option=com_emundus&controller=sync&task=uploadaspectfile",e,{headers:{"Content-Type":"multipart/form-data"}})}catch(e){return{status:!1,msg:e.message}}},async updateAspectListFromFile(t){try{const e=new FormData;return e.append("file",t),await f().post("index.php?option=com_emundus&controller=sync&task=updateaspectlistfromfile",e,{headers:{"Content-Type":"multipart/form-data"}})}catch(e){return{status:!1,msg:e.message}}},async getDocuments(){try{return await f().get("index.php?option=com_emundus&controller=sync&task=getdocuments")}catch(t){return{status:!1,msg:t.message}}},async getEmundusTags(){try{return await f().get("index.php?option=com_emundus&controller=sync&task=getemundustags")}catch(t){return{status:!1,msg:t.message}}},async updateSync(t,e){try{const a=new FormData;return a.append("did",t),a.append("sync",e),await f().post("index.php?option=com_emundus&controller=sync&task=updatedocumentsync",a,{headers:{"Content-Type":"multipart/form-data"}})}catch(a){return{status:!1,msg:a.message}}},async updateSyncMethod(t,e){try{const a=new FormData;return a.append("did",t),a.append("sync_method",e),await f().post("index.php?option=com_emundus&controller=sync&task=updatedocumentsyncmethod",a,{headers:{"Content-Type":"multipart/form-data"}})}catch(a){return{status:!1,msg:a.message}}},async getSetupTags(){try{const t=await f().get("index.php?option=com_emundus&controller=sync&task=getsetuptags");return t.data}catch(t){return{status:!1,msg:t.message}}},async getAttachmentSyncNodeId(t){let e=null;if("undefined"!=typeof t&&null!==t)try{const a=await f().get("index.php?option=com_emundus&controller=sync&task=getnodeid",{params:{uploadId:t}});a.status&&a.data.status&&(e=a.data.data)}catch(a){console.log("Error occurred trying to get upload sync node id "+t)}return e}},I={name:"AttachmentRow",props:{attachment:{type:Object,required:!0},checkedAttachmentsProp:{type:Array,required:!0},canUpdate:{type:Boolean,default:!1},sync:{type:Boolean,default:!1},canSee:{type:Boolean,default:!0},columns:{type:Array,default(){return["name","date","desc","category","status","user","modified_by","modified","permissions","sync"]}}},mixins:[A],data(){return{categories:{},category:"",checkedAttachments:[],synchronizeState:!1,syncLoading:!1}},mounted(){this.categories=this.$store.state.attachment.categories,Object.entries(this.categories).length>0&&(this.category=this.categories[this.attachment.category]?this.categories[this.attachment.category]:""),this.checkedAttachments=this.checkedAttachmentsProp,this.sync&&this.getSynchronizeState(this.attachment.aid).then(t=>{this.synchronizeState=t}).catch(t=>{this.synchronizeState=!1})},methods:{updateCheckedAttachments(t){this.checkedAttachments.includes(t)?this.checkedAttachments.splice(this.checkedAttachments.indexOf(t),1):this.checkedAttachments.push(t),this.$emit("update-checked-attachments",this.checkedAttachments)},openModal(){this.$emit("open-modal",this.attachment)},updateStatus(t){this.canUpdate&&this.$emit("update-status",t,this.attachment)},changePermission(t,e){this.canUpdate&&this.$emit("change-permission",t,e)},async getSynchronizeState(t){const e=await R.checkAttachmentsExists([t]);return!!e.status&&e.data[0]},synchronizeAttachments(t){t.length>0&&(this.syncLoading=!0,R.synchronizeAttachments([t]).then(e=>{e&&!1===e.status||this.getSynchronizeState(t).then(t=>{this.synchronizeState=t,this.syncLoading=!1}).catch(t=>{this.synchronizeState=!1,this.syncLoading=!1})}))}},watch:{"$store.state.attachment.checkedAttachments":function(){this.checkedAttachments=this.$store.state.attachment.checkedAttachments},"$store.state.attachment.categories":function(){this.categories=this.$store.state.attachment.categories,this.category=this.categories[this.attachment.category]?this.categories[this.attachment.category]:""}}},P=I,B=(a("347c"),Object(y["a"])(P,U,k,!1,null,null,null)),j=B.exports,F={async getFnums(){try{const t=await f().get("index.php?option=com_emundus&controller=files&task=getallfnums");return t.data}catch(t){return!1}},async getFnumInfos(t){try{const e=await f().get("index.php?option=com_emundus&controller=files&task=getfnuminfos",{params:{fnum:t}});return e.data}catch(e){return!1}},async isDataAnonymized(){try{const t=await f().get("index.php?option=com_emundus&controller=files&task=isdataanonymized");return t.data}catch(t){return{status:!1,message:t.message}}}},q=a("ac68"),$=a.n(q),H={name:"Attachments",components:{AttachmentPreview:w,AttachmentEdit:T,AttachmentRow:j},props:{user:{type:String,required:!0},fnum:{type:String,required:!0},defaultAttachments:{type:Array,default:null},defaultRights:{type:Object,default:null},columns:{type:Array,default(){return["check","name","date","desc","category","status","user","modified_by","modified","permissions","sync"]}},displayEdit:{type:Boolean,default:!0}},mixins:[A],data(){return{loading:!0,attachments:[],categories:{},fnums:[],users:[],displayedUser:{},displayedFnum:this.fnum,checkedAttachments:[],selectedAttachment:{},progress:"",sort:{last:"",order:"",orderBy:""},canSee:!0,canExport:!1,canDelete:!1,canDownload:!0,canUpdate:!1,canSync:!1,modalLoading:!1,slideTransition:"slide-fade",onlyPreview:!1,changeFileEvent:null,sync:!1,syncSelectedPreview:null,exportLink:"",search:"",category:"all"}},created(){this.canSee=!this.$store.state.global.anonyme,this.$store.dispatch("user/setCurrentUser",this.user),R.isSyncModuleActive().then(t=>{this.sync=t.data}).catch(t=>{console.log(t),this.sync=!1})},mounted(){this.loading=!0,this.setDisplayedUser().then(()=>{null!==this.defaultAttachments?this.getAttachmentCategories().then(t=>{this.categories=t||{},this.attachments=this.defaultAttachments,this.$store.dispatch("attachment/setAttachmentsOfFnum",{fnum:[this.displayedFnum],attachments:this.attachments}),this.setAccessRights().then(()=>{this.loading=!1})}):this.getAttachments().then(()=>{this.setAccessRights().then(()=>{this.loading=!1})}).catch(t=>{this.loading=!1,this.displayErrorMessage(t)})}),this.addEvents()},methods:{async setDisplayedUser(){const t=await F.getFnumInfos(this.displayedFnum);if(t&&t.fnumInfos){const e=!(!this.users||!this.users.length)&&this.users.find(e=>e.user_id==t.fnumInfos.applicant_id);if(e)this.displayedUser=e,this.$store.dispatch("user/setDisplayedUser",this.displayedUser.user_id),this.$store.dispatch("user/setUsers",[e]);else{const e=await C.getUserNameById(t.fnumInfos.applicant_id);e.status?(this.users.push(e.user),this.displayedUser=e.user,this.$store.dispatch("user/setDisplayedUser",this.displayedUser.user_id),this.$store.dispatch("user/setUsers",[e.user])):this.displayErrorMessage(this.translate("COM_EMUNDUS_ATTACHMENTS_USER_NOT_FOUND"))}}else this.displayErrorMessage(this.translate("COM_EMUNDUS_ATTACHMENTS_USER_NOT_FOUND"))},async getAttachments(){this.$store.state.attachment.attachments[this.displayedFnum]?(this.attachments=this.$store.state.attachment.attachments[this.displayedFnum],this.categories=this.$store.state.attachment.categories):await this.refreshAttachments()},async refreshAttachments(t=!1){!0===t&&(this.loading=!0),this.resetOrder(),this.checkedAttachments=[],this.$refs["searchbar"].value="";const e=await _.getAttachmentsByFnum(this.displayedFnum);if(e.status){this.attachments=e.attachments,this.$store.dispatch("attachment/setAttachmentsOfFnum",{fnum:[this.displayedFnum],attachments:this.attachments});const t=await this.getAttachmentCategories();this.categories=t||{}}else this.displayErrorMessage(this.translate("COM_EMUNDUS_ATTACHMENTS_ERROR_GETTING_ATTACHMENTS"));!0===t&&(this.loading=!1)},updateAttachment(){this.resetOrder(),this.getAttachments(),this.selectedAttachment={},this.checkedAttachments=[]},updateStatus(t,e){if(this.canUpdate){if(this.attachments.length<1)return;this.attachments.forEach((a,s)=>{if(a.aid==e.aid){this.resetOrder(),this.attachments[s].is_validated=t.target.value;let e=new FormData;e.append("fnum",this.displayedFnum),e.append("user",this.$store.state.user.currentUser),e.append("id",this.attachments[s].aid),e.append("is_validated",this.attachments[s].is_validated),_.updateAttachment(e).then(t=>{t&&!1===t.status&&this.displayErrorMessage(t.msg)}).catch(t=>{this.displayErrorMessage(t)})}})}},changePermission(t,e){this.canUpdate?this.attachments.forEach((a,s)=>{if(a.aid==e.aid){this.resetOrder(),this.attachments[s][t]="1"===this.attachments[s][t]?"0":"1";let e=new FormData;e.append("fnum",this.displayedFnum),e.append("user",this.$store.state.user.currentUser),e.append("id",this.attachments[s].aid),e.append(t,this.attachments[s][t]),_.updateAttachment(e).then(t=>{t.status||this.displayErrorMessage(t.msg)})}}):this.displayErrorMessage(this.translate("COM_EMUNDUS_ATTACHMENTS_UNAUTHORIZED_ACTION"))},synchronizeAttachments(t){let e=!1;return this.sync&&t.length>0&&R.synchronizeAttachments(t).then(t=>{t&&!1===t.status?this.displayErrorMessage(t.msg):(this.refreshAttachments(!0),e=!0)}),e},async setAccessRights(){if(!this.$store.state.user.rights[this.displayedFnum]){const t=await C.getAccessRights(this.$store.state.user.currentUser,this.displayedFnum);!0===t.status&&this.$store.dispatch("user/setAccessRights",{fnum:this.displayedFnum,rights:t.rights})}this.canExport=!!this.$store.state.user.rights[this.displayedFnum]&&this.$store.state.user.rights[this.displayedFnum].canExport,this.canDelete=!!this.$store.state.user.rights[this.displayedFnum]&&this.$store.state.user.rights[this.displayedFnum].canDelete,this.canUpdate=!!this.$store.state.user.rights[this.displayedFnum]&&this.$store.state.user.rights[this.displayedFnum].canUpdate},async exportAttachments(){this.canExport&&_.exportAttachments(this.displayedUser.user_id,this.displayedFnum,this.checkedAttachments).then(t=>{!0===t.data.status?(window.open(t.data.link,"_blank"),this.exportLink=t.data.link):this.displayErrorMessage(t.data.msg)})},confirmDeleteAttachments(){if(this.canDelete){let t="<p>"+this.translate("CONFIRM_DELETE_SELETED_ATTACHMENTS")+"</p><br>",e="";this.checkedAttachments.forEach(t=>{this.attachments.forEach(a=>{a.aid==t&&(e+=a.value+", ")})}),e=e.substring(0,e.length-2),t+="<p>"+e+"</p>",$.a.fire({title:this.translate("DELETE_SELECTED_ATTACHMENTS"),html:t,type:"warning",showCancelButton:!0,confirmButtonText:this.translate("JYES"),cancelButtonText:this.translate("JNO"),reverseButtons:!0,customClass:{title:"em-swal-title",cancelButton:"em-swal-cancel-button",confirmButton:"em-swal-confirm-button"}}).then(t=>{t.value&&this.deleteAttachments()})}else this.displayErrorMessage(this.translate("YOU_NOT_HAVE_PERMISSION_TO_DELETE_ATTACHMENTS"))},async deleteAttachments(){if(this.canDelete){this.attachments=this.attachments.filter(t=>!this.checkedAttachments.includes(t.aid));let t=null;this.sync?R.deleteAttachments(this.checkedAttachments).then(async e=>{!1===e.status&&""!==e.msg&&this.displayErrorMessage(e.msg),t=await _.deleteAttachments(this.displayedFnum,this.displayedUser.user_id,this.checkedAttachments)}):t=await _.deleteAttachments(this.displayedFnum,this.displayedUser.user_id,this.checkedAttachments),!1===t.status&&""!==t.msg&&this.displayErrorMessage(t.msg)}else this.displayErrorMessage(this.translate("YOU_NOT_HAVE_PERMISSION_TO_DELETE_ATTACHMENTS"))},changeAttachment(t,e=!1){this.slideTransition=e?"slide-fade-reverse":"slide-fade",this.modalLoading=!0,this.selectedAttachment=this.displayedAttachments[t],this.$store.dispatch("attachment/setSelectedAttachment",this.selectedAttachment),setTimeout(()=>{this.modalLoading=!1},500)},resetOrder(){this.sort={last:"",order:"",orderBy:""}},orderBy(t){this.sort.last===t?(this.sort.order="asc"===this.sort.order?"desc":"asc",this.attachments.reverse()):(this.attachments.sort((e,a)=>e[t]<a[t]?-1:e[t]>a[t]?1:0),this.sort.order="asc"),this.sort.orderBy=t,this.sort.last=t},updateAllCheckedAttachments(t){t.target.checked?this.checkedAttachments=this.displayedAttachments.map(t=>t.aid):this.checkedAttachments=[]},updateCheckedAttachments(t){Array.isArray(t)?this.checkedAttachments=t:(console.warn("updateCheckedAttachments() expects an array as argument"),this.displayErrorMessage("Something went wrong while updating the checked attachments"),this.checkedAttachments=[])},filterCheckedAttachments(){this.checkedAttachments=this.checkedAttachments.filter(t=>this.displayedAttachments.some(e=>e.aid==t))},onSearch(){this.filterCheckedAttachments()},onSearchKeyup(t){t.stopPropagation(),t.preventDefault(),this.onSearch()},openModal(t){this.displayedUser.user_id&&this.displayedFnum&&(this.$modal.show("edit"),this.selectedAttachment=t,this.$store.dispatch("attachment/setSelectedAttachment",t))},closeModal(){this.$modal.hide("edit"),this.selectedAttachment={},this.$store.dispatch("attachment/setSelectedAttachment",{})},displayErrorMessage(t){$.a.fire({title:this.translate("ERROR"),text:t,type:"error",confirmButtonColor:"#3085d6",confirmButtonText:this.translate("COM_EMUNDUS_ATTACHMENTS_CLOSE")})},beforeLeaveSlide(t){"slide-fade"===this.slideTransition&&(t.style.transform="translateX(-100%)"),t.setAttribute("class","modal-body "+this.slideTransition+"-leave-active "+this.slideTransition+"-leave-to")},toggleOnlyPreview(t){this.onlyPreview=!t},addEvents(){window.addEventListener("message",function(t){"addFileToFnum"===t.data&&this.refreshAttachments(!0)}.bind(this))}},computed:{fnumPosition(){return this.fnums.indexOf(this.displayedFnum)},selectedAttachmentPosition(){return this.displayedAttachments.indexOf(this.selectedAttachment)},attachmentPath(){return"/index.php?option=com_emundus&task=getfile&u="+this.$store.state.attachment.attachmentPath+this.displayedUser.user_id+"/"+this.selectedAttachment.filename},displayedAttachmentCategories(){let t={};if(Object.entries(this.categories).length>0)for(let e in this.categories)for(let a in this.attachments)this.attachments[a].category==e&&(t[e]=this.categories[e]);return t},displayedAttachments(){const t=this.search.toLowerCase();return"undefined"!==typeof this.attachments&&null!==this.attachments?this.attachments.filter(e=>(null===e.upload_description&&(e.upload_description=""),(e.upload_description.toLowerCase().includes(t)||e.value.toLowerCase().includes(t))&&("all"===this.category||e.category===this.category))):[]}},watch:{"$store.state.global.anonyme":function(){this.canSee=!this.$store.state.global.anonyme},selectedAttachment:function(){this.syncSelectedPreview=null,R.getAttachmentSyncNodeId(this.selectedAttachment.aid).then(t=>{this.syncSelectedPreview=t})},checkedAttachments:function(){this.$store.dispatch("attachment/setCheckedAttachments",this.checkedAttachments)},categories:function(){const t=localStorage.getItem("vue-attachment-category");t&&this.displayedAttachmentCategories[t]&&(this.category=t)},category:function(){"all"!==this.category?localStorage.setItem("vue-attachment-category",this.category):localStorage.removeItem("vue-attachment-category"),this.filterCheckedAttachments()}}},G=H,z=(a("7334"),Object(y["a"])(G,l,c,!1,null,null,null)),V=z.exports,Y=function(){var t=this,e=t._self._c;return e("div",{staticClass:"tw-ml-8 em-files"},[t.currentFile?e("Application",{attrs:{file:t.currentFile,type:t.$props.type,user:t.$props.user,ratio:t.$props.ratio},on:{getFiles:function(e){return t.getFiles(!0)}}}):t._e(),e("div",{staticClass:"tw-mb-4 tw-flex tw-items-center tw-justify-between"},[e("h4",[t._v(t._s(t.translate("COM_EMUNDUS_FILES_"+t.type.toUpperCase())))])]),t.error.displayed?e("div",{staticClass:"alert"},[e("p",[t._v(t._s(t.error.message))])]):t._e(),t.files?e("div",[e("div",{staticClass:"tw-flex tw-items-center tw-justify-between tw-mb-4"},[e("div",{staticClass:"tw-flex tw-items-center"},[e("div",{staticClass:"tw-flex tw-items-center"},[e("span",[t._v(t._s(t.translate("COM_EMUNDUS_FILES_TOTAL")))]),e("span",{staticClass:"tw-ml-1"},[t._v(t._s(t.total_count))])]),e("span",{staticClass:"tw-ml-3 tw-mr-3"},[t._v("|")]),e("div",{staticClass:"tw-flex tw-items-center"},[e("span",[t._v(t._s(t.translate("COM_EMUNDUS_FILES_DISPLAY_PAGE")))]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.limit,expression:"limit"}],staticClass:"em-select-no-border tw-ml-3",staticStyle:{width:"max-content",height:"fit-content"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.limit=e.target.multiple?a:a[0]}}},[e("option",[t._v("10")]),e("option",[t._v("25")]),e("option",[t._v("50")]),e("option",[t._v("100")])])])]),null!==t.pages?[t.pages.length>1?e("div",{staticClass:"tw-flex tw-items-center"},[e("span",[t._v(t._s(t.translate("COM_EMUNDUS_FILES_PAGE")))]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.page,expression:"page"}],staticClass:"em-select-no-border tw-ml-3",staticStyle:{width:"40px"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.page=e.target.multiple?a:a[0]}}},t._l(t.pages,(function(a){return e("option",{domProps:{value:a}},[t._v(t._s(t.displayPage(a)))])})),0),e("span",{staticClass:"tw-ml-3"},[t._v(t._s(t.translate("COM_EMUNDUS_FILES_PAGE_ON")))]),e("span",{staticClass:"tw-ml-3 tw-mr-3"},[t._v(t._s(t.pages.length))])]):t._e()]:t._e()],2)]):t._e(),t.files?e("div",["evaluation"===t.$props.type?e("tabs",{attrs:{tabs:t.tabs},on:{updateTab:t.updateTab}}):t._e(),e("hr"),t.filtersLoading?e("div",{staticClass:"tw-flex tw-items-center tw-justify-between tw-mb-4"},[e("skeleton",{staticClass:"tw-rounded-coordinator",attrs:{height:"40px",width:"96px"}}),e("skeleton",{staticClass:"tw-rounded-coordinator",attrs:{height:"40px",width:"120px"}})],1):e("div",{staticClass:"tw-flex tw-justify-between tw-items-start tw-mb-4"},[e("div",{staticClass:"tw-flex tw-flex-col",attrs:{id:"filters"}},[t.defaultFilters.length>0?e("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.onDefaultFiltersClickOutside,expression:"onDefaultFiltersClickOutside"}],staticClass:"tw-mb-4",attrs:{id:"default-filters"}},[e("div",{staticClass:"em-tabs tw-cursor-pointer tw-flex tw-items-center md:tw-justify-center",on:{click:function(e){t.openedFilters=!t.openedFilters}}},[e("span",[t._v(t._s(t.translate("COM_EMUNDUS_FILES_FILTER")))]),e("span",{staticClass:"material-icons-outlined tw-ml-3"},[t._v("filter_list")])]),e("ul",{class:{"tw-hidden":!t.openedFilters,"em-input":!0}},t._l(t.defaultFilters,(function(a){return e("li",{key:a.id,staticClass:"tw-cursor-pointer",on:{click:function(e){return t.addFilter(a)}}},[t._v(" "+t._s(a.label)+" ")])})),0)]):t._e(),t.filters.length>0?e("div",{staticClass:"tw-flex tw-items-center",attrs:{id:"applied-filters"}},t._l(t.filters,(function(a){return e("div",{key:a.key,staticClass:"applied-filter tw-ml-3 tw-flex tw-items-center"},[e("label",{staticClass:"filter-label tw-mr-3",attrs:{for:a.id+"-"+a.key,title:a.label}},[t._v(t._s(a.label))]),e("select",{directives:[{name:"model",rawName:"v-model",value:a.selectedOperator,expression:"filter.selectedOperator"}],staticClass:"tw-mr-3",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(a,"selectedOperator",e.target.multiple?s:s[0])}}},t._l(a.operators,(function(a){return e("option",{key:a.value,domProps:{value:a.value}},[t._v(" "+t._s(a.label)+" ")])})),0),"field"==a.type?e("input",{directives:[{name:"model",rawName:"v-model",value:a.selectedValue,expression:"filter.selectedValue"}],attrs:{name:a.id+"-"+a.key,type:"text",placeholder:a.label},domProps:{value:a.selectedValue},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.applyFilters.apply(null,arguments)},input:function(e){e.target.composing||t.$set(a,"selectedValue",e.target.value)}}}):"date"==a.type?e("input",{directives:[{name:"model",rawName:"v-model",value:a.selectedValue,expression:"filter.selectedValue"}],attrs:{name:a.id+"-"+a.key,type:"date"},domProps:{value:a.selectedValue},on:{input:function(e){e.target.composing||t.$set(a,"selectedValue",e.target.value)}}}):"select"==a.type?e("multiselect",{attrs:{label:"label","track-by":"value",options:a.values,multiple:!0,taggable:!1,"select-label":"",placeholder:a.label,"selected-label":"","deselect-label":"","close-on-select":!0,"clear-on-select":!1,searchable:!0,"allow-empty":!0,width:"250px"},model:{value:a.selectedValue,callback:function(e){t.$set(a,"selectedValue",e)},expression:"filter.selectedValue"}},[e("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v(t._s(t.translate("COM_EMUNDUS_FILES_FILTER_NO_ELEMENTS_FOUND")))])]):t._e(),e("span",{staticClass:"material-icons-outlined tw-cursor-pointer tw-text-red-500 tw-ml-3",on:{click:function(e){return t.removeFilter(a)}}},[t._v("close")])],1)})),0):t._e()]),t.defaultFilters.length>0?e("div",{staticClass:"tw-flex tw-items-center"},[e("span",{staticClass:"material-icons-outlined tw-mr-4 tw-text-red-500",class:{"tw-cursor-pointer":t.filters.length>0,"tw-cursor-pointer-disbabled":t.filters.length<1},attrs:{alt:t.translate("COM_EMUNDUS_FILES_RESET_FILTERS")},on:{click:t.resetFilters}},[t._v("filter_alt_off")]),e("button",{staticClass:"em-primary-button tw-cusor-pointer",on:{click:t.applyFilters}},[t._v(" "+t._s(t.translate("COM_EMUNDUS_FILES_APPLY_FILTER"))+" ")])]):t._e()])],1):t._e(),t.files&&t.columns&&t.files.length>0?e("div",{key:t.reloadFiles,staticClass:"tw-flex tw-items-center tw-items-start"},[e("div",{staticClass:"table-columns-move tw-flex tw-flex-col tw-mr-1",class:t.moveRight?"":"em-disabled-state",attrs:{id:"table_columns_move_right"},on:{click:t.scrollToRight}},[e("span",{staticClass:"material-icons-outlined tw-cursor-pointer",staticStyle:{"font-size":"16px"}},[t._v("arrow_back")])]),e("el-table",{key:t.reloadFiles,ref:"tableFiles",staticStyle:{width:"100%"},attrs:{height:"calc(100vh - 250px)",data:t.files,"default-sort":{prop:"file",order:"ascending"}},on:{"select-all":t.selectRow,select:t.selectRow}},[e("el-table-column",{attrs:{type:"selection",width:"55"}}),e("el-table-column",{attrs:{label:t.translate("COM_EMUNDUS_ONBOARD_FILE"),width:"270",prop:"file",sortable:"","sort-method":(e,a)=>t.sortBy(e,a,"file")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"tw-cursor-pointer",on:{click:function(e){return t.openApplication(a.row)}}},[e("p",{staticClass:"tw-font-medium"},[t._v(" "+t._s(a.row.applicant_name.charAt(0).toUpperCase()+a.row.applicant_name.slice(1)))]),e("span",{staticClass:"tw-text-neutral-500 tw-text-sm"},[t._v(t._s(a.row.fnum))])])]}}],null,!1,752872227)}),t._l(t.columns,(function(a){return 1==a.show_in_list_summary?["status"===a.name?e("el-table-column",{attrs:{prop:"status",sortable:"","min-width":"180"},scopedSlots:t._u([{key:"header",fn:function(a){return[e("span",{staticClass:"tw-text-neutral-700",attrs:{title:t.translate("COM_EMUNDUS_ONBOARD_STATUS")}},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_STATUS")))])]}},{key:"default",fn:function(a){return[e("p",{staticClass:"em-status",class:"label label-"+a.row.status_color},[t._v(t._s(a.row.status))])]}}],null,!0)}):"assocs"===a.name?e("el-table-column",{attrs:{"min-width":"180"},scopedSlots:t._u([{key:"header",fn:function(a){return[e("span",{staticClass:"tw-text-neutral-700",attrs:{title:t.translate("COM_EMUNDUS_FILES_ASSOCS")}},[t._v(t._s(t.translate("COM_EMUNDUS_FILES_ASSOCS")))])]}},{key:"default",fn:function(a){return[e("div",{staticClass:"em-group-assoc-column"},t._l(a.row.assocs,(function(a){return e("span",{staticClass:"em-status tw-mb-1",class:a.class},[t._v(t._s(a.label))])})),0)]}}],null,!0)}):"tags"===a.name?e("el-table-column",{attrs:{"min-width":"180"},scopedSlots:t._u([{key:"header",fn:function(a){return[e("span",{staticClass:"tw-text-neutral-700",attrs:{title:t.translate("COM_EMUNDUS_FILES_TAGS")}},[t._v(t._s(t.translate("COM_EMUNDUS_FILES_TAGS")))])]}},{key:"default",fn:function(a){return[e("div",{staticClass:"em-group-assoc-column"},t._l(a.row.tags,(function(a){return e("span",{staticClass:"em-status tw-mb-1",class:a.class},[t._v(t._s(a.label))])})),0)]}}],null,!0)}):e("el-table-column",{attrs:{"min-width":"180",prop:a.name,sortable:"","sort-method":(e,s)=>t.sortBy(e,s,a.name)},scopedSlots:t._u([{key:"header",fn:function(s){return[e("span",{staticClass:"tw-text-neutral-700",attrs:{title:a.label}},[t._v(t._s(a.label))])]}},{key:"default",fn:function(s){return[e("p",{domProps:{innerHTML:t._s(t.formatter(s.row[a.name],a))}})]}}],null,!0)})]:t._e()}))],2),t.moveLeft?e("div",{staticClass:"table-columns-move tw-flex tw-flex-col tw-ml-1",attrs:{id:"table_columns_move_left"},on:{click:t.scrollToLeft}},[e("span",{staticClass:"material-icons-outlined tw-cursor-pointer",staticStyle:{"font-size":"16px"}},[t._v("arrow_forward")])]):t._e()],1):t._e(),t.files&&t.columns&&0===t.files.length?e("div",[e("h6",[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_NOFILES")))])]):t._e(),t.rows_selected.length>0?e("div",{staticClass:"selected-rows-tip"},[e("div",{staticClass:"selected-rows-tip__content tw-flex tw-items-center"},[1===t.rows_selected.length?e("span",[t._v(t._s(t.rows_selected.length)+" "+t._s(t.translate("COM_EMUNDUS_FILES_ELEMENT_SELECTED"))+" :")]):t.rows_selected.length>1?e("span",[t._v(t._s(t.rows_selected.length)+" "+t._s(t.translate("COM_EMUNDUS_FILES_ELEMENTS_SELECTED"))+" :")]):t._e(),e("a",{staticClass:"tw-cursor-pointer em-ml-16",on:{click:function(e){return t.toggleSelection()}}},[t._v(t._s(t.translate("COM_EMUNDUS_FILES_UNSELECT")))]),e("a",{staticClass:"tw-cursor-pointer em-ml-16",on:{click:function(e){return t.openInNewTab()}}},[t._v(t._s(t.translate("COM_EMUNDUS_FILES_OPEN_IN_NEW_TAB")))])])]):t._e(),t.loading?e("div",{staticClass:"em-page-loader"}):t._e()],1)},J=[],K=function(){var t=this,e=t._self._c;return e("div",{staticClass:"tw-flex tw-items-center tw-gap-2"},t._l(t.$props.tabs,(function(a){return e("div",{staticClass:"em-tabs tw-cursor-pointer",class:t.selected===a.name?"em-selected-tab":"",on:{click:function(e){t.selected=a.name,t.$emit("updateTab",a.name)}}},[e("p",[t._v(t._s(t.translate(a.label))+" ("+t._s(a.total)+")")])])})),0)},W=[],X={name:"Tabs",props:{tabs:Array},data:()=>({selected:""}),created(){this.$props.tabs.forEach(t=>{t.selected&&(this.selected=t.name)})}},Z=X,Q=Object(y["a"])(Z,K,W,!1,null,"4e2e56f6",null),tt=Q.exports,et=a("cca1"),at={async getFiles(t="default",e=!1,a=25,s=0){try{const a=await f().get("index.php?option=com_emundus&controller=file&task=getfiles",{params:{type:t,refresh:e}});return a.data}catch(n){return!1}},async getColumns(t="default"){try{const e=await f().get("index.php?option=com_emundus&controller=file&task=getcolumns",{params:{type:t}});return e.data}catch(e){return!1}},async getEvaluationFormByFnum(t,e){try{const a=await f().get("index.php?option=com_emundus&controller=file&task=getevaluationformbyfnum",{params:{fnum:t,type:e}});return a.data}catch(a){return!1}},async getMyEvaluation(t){try{const e=await f().get("index.php?option=com_emundus&controller=file&task=getmyevaluation",{params:{fnum:t}});return e.data}catch(e){return!1}},async checkAccess(t){try{const e=await f().get("index.php?option=com_emundus&controller=file&task=checkaccess",{params:{fnum:t}});return e.data}catch(e){return!1}},async getLimit(t="default"){try{const e=await f().get("index.php?option=com_emundus&controller=file&task=getlimit",{params:{type:t}});return e.data}catch(e){return!1}},async getPage(t="default"){try{const e=await f().get("index.php?option=com_emundus&controller=file&task=getpage",{params:{type:t}});return e.data}catch(e){return!1}},async updateLimit(t){try{const e=await f().get("index.php?option=com_emundus&controller=file&task=updatelimit",{params:{limit:t}});return e.data}catch(e){return!1}},async updatePage(t){try{const e=await f().get("index.php?option=com_emundus&controller=file&task=updatepage",{params:{page:t}});return e.data}catch(e){return!1}},async getSelectedTab(t){try{const e=await f().get("index.php?option=com_emundus&controller=file&task=getselectedtab",{params:{type:t}});return e.data}catch(e){return!1}},async setSelectedTab(t,e="evaluation"){try{const a=await f().get("index.php?option=com_emundus&controller=file&task=setselectedtab",{params:{tab:t,type:e}});return a.data}catch(a){return!1}},async getFile(t,e="default"){try{const a=await f().get("index.php?option=com_emundus&controller=file&task=getfile",{params:{fnum:t,type:e}});return a.data}catch(a){return!1}},async getFilters(){try{const t=await f().get("index.php?option=com_emundus&controller=file&task=getfilters");return t.data}catch(t){return!1}},async applyFilters(t){const e=new FormData;e.append("filters",JSON.stringify(t));try{const t=await f().post("index.php?option=com_emundus&controller=file&task=applyfilters",e);return t.data}catch(a){return!1}},async getComments(t){try{const e=await f().get("index.php?option=com_emundus&controller=file&task=getcomments",{params:{fnum:t}});if(Array.isArray(e.data.data)){const t=e.data.data.every(t=>!!t.hasOwnProperty("id"));return t?e.data:{data:[],status:!1,msg:"Invalid response"}}return{data:[],status:!1,msg:"Invalid response"}}catch(e){return{status:!1,msg:e.message}}},async saveComment(t,e){const a=new FormData;a.append("fnum",t),Object.keys(e).forEach(t=>{a.append(t,e[t])});try{const t=await f().post("index.php?option=com_emundus&controller=file&task=savecomment",a);return t.data}catch(s){return{status:!1,msg:s.message}}},async deleteComment(t){const e=new FormData;e.append("cid",t);try{const t=await f().post("index.php?option=com_emundus&controller=file&task=deletecomment",e);return t.data}catch(a){return{status:!1,msg:a.message}}}},st={methods:{async displayError(t,e,a="error",s=!1,n="COM_EMUNDUS_OK",i="COM_EMUNDUS_ACTIONS_CANCEL",r=!1,o=null){let l={title:this.translate(t),text:this.translate(e),type:a,showCancelButton:s,confirmButtonText:this.translate(n),reverseButtons:!0,customClass:{title:"em-swal-title",confirmButton:"em-swal-confirm-button",header:"tw-flex tw-justify-center tw-items-center tw-w-full"}};return s?(l.cancelButtonText=this.translate(i),l.customClass.cancelButton="em-swal-cancel-button"):l.customClass.actions="em-swal-single-action",r?l.html=e:l.text=this.translate(e),$.a.fire(l).then(t=>!!t.value&&(null!=o&&o(),!0))}}},nt=st,it=function(){var t=this,e=t._self._c;return e("modal",{attrs:{id:"application-modal",name:"application-modal",height:"100vh",width:"100vw",styles:"display:flex;flex-direction:column;justify-content:center;align-items:center;"},on:{"before-open":t.beforeOpen,"before-close":function(e){return t.updateURL()},closed:function(e){return t.$emit("getFiles")}}},[e("div",{staticClass:"em-modal-header tw-w-full tw-h-2/4 tw-px-3 tw-py-4 tw-bg-main-900 tw-flex tw-items-center"},[e("div",{staticClass:"tw-flex tw-items-center tw-cursor-pointer tw-gap-2",attrs:{id:"evaluation-modal-close"}},[e("div",{staticClass:"tw-w-max tw-flex tw-items-center",on:{click:function(e){return t.$modal.hide("application-modal")}}},[e("span",{staticClass:"material-icons-outlined tw-text-base",staticStyle:{color:"white"}},[t._v("arrow_back")])]),e("span",{staticClass:"tw-text-neutral-500"},[t._v("|")]),""!=t.file.applicant_name?e("p",{staticClass:"tw-text-sm",staticStyle:{color:"white"}},[t._v(" "+t._s(t.file.applicant_name)+" - "+t._s(t.file.fnum)+" ")]):e("p",{staticClass:"tw-text-sm",staticStyle:{color:"white"}},[t._v(" "+t._s(t.file.fnum)+" ")])])]),t.access?e("div",{staticClass:"modal-grid",style:"grid-template-columns:"+this.ratioStyle},[e("div",{attrs:{id:"modal-applicationform"}},[e("div",{staticClass:"scrollable"},[e("div",{staticClass:"tw-flex tw-items-center tw-justify-center tw-gap-4 tw-border-b tw-border-neutral-300 sticky-tab"},t._l(t.tabs,(function(a){return t.access[a.access].r?e("div",{staticClass:"em-light-tabs tw-cursor-pointer",class:t.selected===a.name?"em-light-selected-tab":"",on:{click:function(e){t.selected=a.name}}},[e("span",{staticClass:"tw-text-sm"},[t._v(t._s(t.translate(a.label)))])]):t._e()})),0),"application"===t.selected?e("div",{domProps:{innerHTML:t._s(t.applicationform)}}):t._e(),"attachments"===t.selected?e("Attachments",{attrs:{fnum:t.file.fnum,user:t.$props.user,columns:["check","name","date","category","status"],displayEdit:!1}}):t._e(),"comments"===t.selected?e("Comments",{attrs:{fnum:t.file.fnum,user:t.$props.user,access:t.access["10"]}}):t._e()],1)]),e("div",{attrs:{id:"modal-evaluationgrid"}},[t.loading?t._e():e("div",{staticClass:"tw-flex tw-flex-col",staticStyle:{width:"40px",height:"40px",margin:"24px 0 12px 24px"}},[e("div",{staticClass:"em-circle-main-100 tw-flex tw-flex-col",staticStyle:{width:"40px"}},[e("div",{staticClass:"em-circle-main-200 tw-flex tw-flex-col",staticStyle:{width:"24px"}},[e("span",{staticClass:"material-icons-outlined tw-text-main-400",staticStyle:{"font-size":"14px"}},[t._v("troubleshoot")])])])]),t.url?e("iframe",{staticClass:"iframe-evaluation",attrs:{src:t.url,id:"iframe-evaluation",title:"Evaluation form"},on:{load:function(e){return t.iframeLoaded(e)}}}):t._e(),t.loading?e("div",{staticClass:"em-page-loader"}):t._e()])]):t._e()])},rt=[],ot=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"comments"}},[e("div",{staticClass:"tw-flex tw-flex-col tw-justify-center tw-mt-6 tw-items-center"},t._l(t.comments,(function(a){return e("div",{key:a.id,staticClass:"em-input-card tw-w-2/4 tw-mb-4"},[e("div",{staticClass:"tw-flex tw-items-center tw-justify-between"},[e("div",[e("p",[t._v(t._s(a.user))]),e("span",{staticClass:"tw-text-neutral-500"},[t._v(t._s(t.formattedDate(a.date,"LLLL","+0200")))])]),e("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.hideOptions,expression:"hideOptions"}]},[e("span",{staticClass:"material-icons-outlined tw-cursor-pointer",on:{click:function(e){t.show_options=a.id}}},[t._v("more_vert")]),t.show_options===a.id?e("div",{staticClass:"em-comment-option"},[t.$props.access.d||t.$props.access.c&&a.user_id==t.$props.user?e("span",{staticClass:"tw-cursor-pointer comment-delete",on:{click:function(e){return t.deleteComment(a.id)}}},[t._v(t._s(t.translate("COM_EMUNDUS_FILES_COMMENT_DELETE")))]):t._e()]):t._e()])]),e("hr"),e("div",{staticClass:"comment-content"},[e("strong",{staticClass:"tw-mb-2"},[t._v(t._s(a.reason))]),e("p",{staticStyle:{"word-break":"break-all"}},[t._v(t._s(a.comment_body))])])])})),0),t.adding_comment?e("div",{staticClass:"tw-flex tw-items-center tw-justify-center tw-mt-6"},[e("div",{staticClass:"em-input-card tw-w-2/4"},[e("div",[e("span",{staticClass:"material-icons-outlined tw-cursor-pointer tw-float-right tw-mb-1",on:{click:function(e){t.adding_comment=!1}}},[t._v("close")])]),e("div",{staticClass:"tw-mb-2"},[e("label",{attrs:{for:"reason"}},[t._v(t._s(t.translate("COM_EMUNDUS_FILES_COMMENT_TITLE")))]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.comment.reason,expression:"comment.reason"}],staticClass:"tw-w-full",attrs:{id:"reason",type:"text"},domProps:{value:t.comment.reason},on:{input:function(e){e.target.composing||t.$set(t.comment,"reason",e.target.value)}}})]),e("div",[e("label",{staticClass:"tw-mb-1",attrs:{for:"body"}},[t._v(t._s(t.translate("COM_EMUNDUS_FILES_COMMENT_BODY")))]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment.comment_body,expression:"comment.comment_body"}],attrs:{id:"body"},domProps:{value:t.comment.comment_body},on:{input:function(e){e.target.composing||t.$set(t.comment,"comment_body",e.target.value)}}})]),e("div",{staticClass:"tw-mt-2"},[e("button",{staticClass:"em-primary-button !tw-w-auto tw-float-right",on:{click:t.saveComment}},[t._v(" "+t._s(t.translate("COM_EMUNDUS_FILES_VALIDATE_COMMENT"))+" ")])])])]):t._e(),t.$props.access.c&&!t.adding_comment?e("div",{staticClass:"tw-flex tw-items-center tw-justify-center tw-mt-8"},[e("button",{staticClass:"em-primary-button !tw-w-auto",on:{click:function(e){t.adding_comment=!0}}},[t._v(" "+t._s(t.translate("COM_EMUNDUS_FILES_ADD_COMMENT"))+" ")])]):t._e(),t.loading?e("div",{staticClass:"em-page-loader"}):t._e()])},lt=[],ct={name:"Comments",props:{user:{type:String,required:!0},fnum:{type:String,required:!0},access:{type:Object,required:!0}},mixins:[A,nt],data:()=>({comments:[],comment:{reason:"",comment_body:""},loading:!1,adding_comment:!1,show_options:!1}),created(){this.getComments()},methods:{getComments(){this.loading=!0,at.getComments(this.$props.fnum).then(t=>{1==t.status?(this.comments=t.data,this.loading=!1):(this.displayError("COM_EMUNDUS_FILES_CANNOT_GET_COMMENTS","COM_EMUNDUS_FILES_CANNOT_GET_COMMENTS_DESC"),this.loading=!1)})},saveComment(){this.loading=!0,at.saveComment(this.$props.fnum,this.comment).then(t=>{1==t.status?(this.comments.push(t.data),this.comment={reason:"",comment_body:""},this.adding_comment=!1,this.loading=!1):(this.displayError("COM_EMUNDUS_FILES_CANNOT_SAVE_COMMENT",t.msg),this.loading=!1)})},deleteComment(t){let e=!1;return(this.access.d||this.access.c&&comment.user_id==this.user)&&null!==t&&t>0&&(this.loading=!0,at.deleteComment(t).then(a=>{1==a.status?(e=!0,this.comments.splice(this.comments.findIndex(e=>e.id===t),1),this.loading=!1):(this.displayError("COM_EMUNDUS_FILES_CANNOT_GET_COMMENTS","COM_EMUNDUS_FILES_CANNOT_GET_COMMENTS_DESC"),this.loading=!1)})),e},hideOptions(){this.show_options=!1}}},ut=ct,dt=(a("4a74"),Object(y["a"])(ut,ot,lt,!1,null,"a4ae5f88",null)),pt=dt.exports,mt={name:"Application",components:{Comments:pt,Attachments:V},props:{file:Object|String,type:String,user:{type:String,required:!0},ratio:{type:String,default:"66/33"}},mixins:[nt],data:()=>({applicationform:"",selected:"application",tabs:[{label:"COM_EMUNDUS_FILES_APPLICANT_FILE",name:"application",access:"1"},{label:"COM_EMUNDUS_FILES_ATTACHMENTS",name:"attachments",access:"4"},{label:"COM_EMUNDUS_FILES_COMMENTS",name:"comments",access:"10"}],evaluation_form:0,url:null,access:null,student_id:null,loading:!1}),methods:{beforeOpen(){document.querySelector("body.layout-evaluation").style.overflow="hidden";var t=document.querySelector(":root");let e=this.$props.ratio.split("/");t.style.setProperty("--attachment-width",e[0]+"%"),this.loading=!0;let a="";a="string"==typeof this.$props.file?this.$props.file:this.$props.file.fnum,"string"==typeof this.$props.file?at.getFile(a).then(t=>{1==t.status?(this.$props.file=t.data,this.access=t.rights,this.updateURL(this.$props.file.fnum),this.getApplicationForm(),"evaluation"===this.$props.type&&this.getEvaluationForm()):this.displayError("COM_EMUNDUS_FILES_CANNOT_ACCESS","COM_EMUNDUS_FILES_CANNOT_ACCESS_DESC").then(t=>{!0===t&&this.$modal.hide("application-modal")})}):at.checkAccess(a).then(t=>{1==t.status?(this.access=t.data,this.updateURL(this.$props.file.fnum),this.access["1"].r?this.getApplicationForm():this.access["4"].r?this.selected="attachments":this.access["10"].r&&(this.selected="comments"),"evaluation"===this.$props.type&&this.getEvaluationForm()):this.displayError("COM_EMUNDUS_FILES_CANNOT_ACCESS","COM_EMUNDUS_FILES_CANNOT_ACCESS_DESC").then(t=>{!0===t&&this.$modal.hide("application-modal")})})},getApplicationForm(){m()({method:"get",url:"index.php?option=com_emundus&view=application&format=raw&layout=form&fnum="+this.file.fnum}).then(t=>{this.applicationform=t.data,"evaluation"!==this.$props.type&&(this.loading=!1)})},getEvaluationForm(){null!=this.$props.file.id&&(this.rowid=this.$props.file.id),"undefined"!=typeof this.$props.file.applicant_id?this.student_id=this.$props.file.applicant_id:this.student_id=this.$props.file.student_id;let t="form";at.getEvaluationFormByFnum(this.$props.file.fnum).then(e=>{0!==e.data&&("undefined"===typeof this.$props.file.id?at.getMyEvaluation(this.$props.file.fnum).then(a=>{this.rowid=a.data,null==this.rowid&&(this.rowid=""),this.url="index.php?option=com_fabrik&c=form&view="+t+"&formid="+e.data+"&rowid="+this.rowid+"&jos_emundus_evaluations___student_id[value]="+this.student_id+"&jos_emundus_evaluations___campaign_id[value]="+this.$props.file.campaign+"&jos_emundus_evaluations___fnum[value]="+this.$props.file.fnum+"&student_id="+this.student_id+"&tmpl=component&iframe=1"}):this.url="index.php?option=com_fabrik&c=form&view="+t+"&formid="+e.data+"&rowid="+this.rowid+"&jos_emundus_evaluations___student_id[value]="+this.student_id+"&jos_emundus_evaluations___campaign_id[value]="+this.$props.file.campaign+"&jos_emundus_evaluations___fnum[value]="+this.$props.file.fnum+"&student_id="+this.student_id+"&tmpl=component&iframe=1")})},iframeLoaded(t){this.loading=!1},updateURL(t=""){let e=window.location.href;e=e.split("#"),""===t?window.history.pushState("","",e[0]):window.history.pushState("","",e[0]+"#"+t)}},computed:{ratioStyle(){let t=this.$props.ratio.split("/");return t[0]+"% "+t[1]+"%"}}},ht=mt,ft=(a("87ec"),Object(y["a"])(ht,it,rt,!1,null,null,null)),_t=ft.exports,gt=a("e191"),vt=a.n(gt),yt=function(){var t=this,e=t._self._c;return e("span",{staticClass:"em-skeleton",class:t.classes,style:{height:t.height,width:t.width}})},bt=[],wt={name:"Skeleton.vue",props:{height:{type:String,default:"auto"},width:{type:String,default:"auto"},classes:{type:String,default:""}}},Ot=wt,Et=(a("b317"),Object(y["a"])(Ot,yt,bt,!1,null,"62ff3266",null)),Ct=Et.exports,Nt={name:"Files",components:{Skeleton:Ct,Application:_t,Tabs:tt,"el-table":et["Table"],"el-table-column":et["TableColumn"],multiselect:vt.a},props:{type:{String:String,default:""},ratio:{type:String,default:"66/33"},user:{type:String,required:!0}},mixins:[nt],data:()=>({loading:!1,filtersLoading:!1,moveRight:!1,moveLeft:!0,scrolling:null,reloadFiles:0,total_count:0,tabs:[{label:"COM_EMUNDUS_FILES_TO_EVALUATE",name:"to_evaluate",total:0,selected:!1},{label:"COM_EMUNDUS_FILES_EVALUATED",name:"evaluated",total:0,selected:!1},{label:"COM_EMUNDUS_FILES_ALL",name:"all",total:0,selected:!1}],selected_tab:0,files:null,columns:null,page:null,pages:null,limit:null,defaultFilters:[],filters:[],openedFilters:!1,currentFile:null,rows_selected:[],error:{displayed:!1,message:""}}),created(){this.addKeyupEnterEventlistener(),this.getLimit(),this.getPage(),"evaluation"===this.$props.type&&at.getSelectedTab(this.$props.type).then(t=>{this.tabs.forEach((e,a)=>{e.name===t.data&&(this.tabs[a].selected=!0,this.selected_tab=a)}),this.getFiles()})},methods:{formatter(t,e){return"string"==typeof t?t.charAt(0).toUpperCase()+t.slice(1):t},sortBy(t,e,a){if("file"===a){if(t.applicant_name.toUpperCase()<e.applicant_name.toUpperCase())return-1;if(t.applicant_name.toUpperCase()>e.applicant_name.toUpperCase())return 1}if("string"===typeof t[a]){if(t[a].toUpperCase()<e[a].toUpperCase())return-1;if(t[a].toUpperCase()>e[a].toUpperCase())return 1}return t[a]<e[a]?-1:t[a]>e[a]?1:void 0},addKeyupEnterEventlistener(){window.document.addEventListener("keyup",t=>{"Enter"===t.key&&(t.preventDefault(),t.stopPropagation())})},getLimit(){at.getLimit(this.$props.type).then(t=>{1==t.status?this.limit=t.data:this.displayError("COM_EMUNDUS_ERROR_OCCURED",t.msg)})},getPage(){at.getPage(this.$props.type).then(t=>{1==t.status?this.page=t.data:this.displayError("COM_EMUNDUS_ERROR_OCCURED",t.msg)})},getFiles(t=!1){document.querySelector("body.layout-evaluation").style.overflow="visible",this.loading=!0,this.error.displayed=!1,this.error.message="";let e=window.location.href.split("#")[1];"undefined"==typeof e&&(e=""),"evaluation"===this.$props.type&&at.getFiles(this.$props.type,t,this.limit,this.page).then(t=>{1==t.status?(this.total_count=t.total,"undefined"!==typeof t.data.all?this.files=t.data.all:this.files=[],this.tabs.forEach((e,a)=>{t[e.name]&&(this.tabs[a].total=t[e.name].total)}),at.getColumns(this.$props.type).then(t=>{this.columns=t.data,""!==e&&this.openModal(e),this.getFilters(),this.loading=!1,this.reloadFiles++;let a=Math.ceil(this.tabs[this.selected_tab].total/this.limit);this.pages=Array.from(Array(a).keys())})):(this.loading=!1,this.displayError("COM_EMUNDUS_ERROR_OCCURED",t.msg),this.error.displayed=!0,this.error.message=t.msg)})},getFilters(){this.filtersLoading=!0,at.getFilters().then(t=>{1==t.status?(0==this.filters.length&&t.data.applied_filters.length>0&&t.data.applied_filters.forEach(e=>{const a=t.data.default_filters.find(t=>t.id==e.id);this.addFilter(a,e.selectedValue,e.selectedOperator)}),this.defaultFilters=t.data.default_filters,this.filtersLoading=!1):(this.displayError("COM_EMUNDUS_ERROR_OCCURED",t.msg),this.filtersLoading=!1)})},addFilter(t,e=null,a=null){this.filters.push({id:t.id,key:Math.random(),type:t.type,values:t.values,label:t.label,selectedValue:e,operators:t.operators,selectedOperator:null===a?t.operators[0].value:a})},removeFilter(t){this.filters.find((e,a)=>{e.key==t.key&&this.filters.splice(a,1)})},resetFilters(){this.filters.length>0&&(this.filters=[],at.applyFilters(this.filters).then(t=>{this.getFiles(!0)}))},applyFilters(){const t=this.filters.map(t=>{if(null!==t.selectedValue)return{id:t.id,type:t.type,selectedValue:t.selectedValue,selectedOperator:t.selectedOperator}});at.applyFilters(t).then(t=>{this.getFiles(!0)})},updateLimit(t){this.loading=!0,at.updateLimit(t).then(t=>{1==t.status?(this.page=0,this.getFiles(!0)):(this.loading=!1,this.displayError("COM_EMUNDUS_ERROR_OCCURED",t.msg))})},prevPage(){this.page--,this.updatePage()},nextPage(){this.page++,this.updatePage()},updatePage(t){at.updatePage(t).then(t=>{1==t.status?this.getFiles(!0):(this.loading=!1,this.displayError("COM_EMUNDUS_ERROR_OCCURED",t.msg))})},openModal(t){this.currentFile=t,setTimeout(()=>{this.$modal.show("application-modal")},500)},updateTab(t){this.selected_tab=this.tabs.map(t=>t.name).indexOf(t),at.setSelectedTab(t).then(()=>{this.getLimit(),this.getPage(),this.getFiles(!0)})},openApplication(t){this.openModal(t)},selectRow(t,e){this.rows_selected=t},toggleSelection(){this.$refs.tableFiles.clearSelection(),this.rows_selected=[]},openInNewTab(){this.rows_selected.forEach(t=>{window.open(window.location.href+"#"+t.fnum,"_blank")})},scrollToLeft(){this.moveRight=!0;let t=document.getElementsByClassName("el-table__body-wrapper")[0];t.scrollLeft+=180},scrollToRight(){let t=document.getElementsByClassName("el-table__body-wrapper")[0];t.scrollLeft-=180,0==t.scrollLeft&&(this.moveRight=!1)},stopScrolling(){clearInterval(this.scrolling),this.scrolling=null},displayPage(t){return t+1},onDefaultFiltersClickOutside(){this.openedFilters&&(this.openedFilters=!1)}},watch:{limit:function(t,e){null===e||this.loading||this.updateLimit(t)},page:function(t,e){null===e||this.loading||this.updatePage(t)}}},St=Nt,At=(a("9e88"),Object(y["a"])(St,Y,J,!1,null,"e417f44c",null)),Dt=At.exports,Mt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"tw-w-full",attrs:{id:"onboarding_list"}},[t.loading.lists?e("skeleton",{staticClass:"tw-mb-4 tw-mt-4 tw-rounded-lg",attrs:{height:"40px",width:"100%"}}):e("div",{staticClass:"head tw-flex tw-items-center tw-justify-between"},[e("h2",[t._v(t._s(t.translate(t.currentList.title)))]),t.addAction?e("a",{staticClass:"em-primary-button tw-w-auto tw-cursor-pointer",attrs:{id:"add-action-btn"},on:{click:function(e){return t.onClickAction(t.addAction)}}},[t._v(t._s(t.translate(t.addAction.label)))]):t._e()]),e("hr",{staticClass:"tw-w-full tw-mt-1.5 tw-mb-4"}),t.loading.tabs?e("div",{attrs:{id:"tabs-loading"}},[e("div",{staticClass:"tw-flex tw-justify-between"},[e("skeleton",{staticClass:"tw-mb-4 tw-rounded-lg",attrs:{height:"40px",width:"20%"}}),e("skeleton",{staticClass:"tw-mb-4 tw-rounded-lg",attrs:{height:"40px",width:"5%"}})],1),e("div",{class:{"skeleton-grid":"blocs"===t.viewType,"tw-flex tw-flex-col":"list"===t.viewType},staticStyle:{"flex-wrap":"wrap"}},t._l(9,(function(t){return e("skeleton",{key:t,staticClass:"tw-rounded-lg skeleton-item"})})),1)]):e("div",{staticClass:"list tw-mt-4"},[t.currentList.tabs.length>1?e("nav",{attrs:{id:"list-nav"}},[e("ul",{staticClass:"tw-flex",staticStyle:{"list-style-type":"none","margin-left":"0","padding-left":"0"}},t._l(t.currentList.tabs,(function(a){return e("li",{key:a.key,staticClass:"tw-cursor-pointer tw-font-normal",class:{"em-light-tabs em-light-selected-tab":t.selectedListTab===a.key,"em-light-tabs ":t.selectedListTab!==a.key},on:{click:function(e){return t.onSelectTab(a.key)}}},[t._v(" "+t._s(t.translate(a.title))+" ")])})),0)]):t._e(),e("section",{staticClass:"tw-flex tw-justify-between tw-mt-4 tw-mb-4",attrs:{id:"actions"}},[e("section",{attrs:{id:"tab-actions"}},t._l(t.filters[t.selectedListTab],(function(a){return e("select",{directives:[{name:"model",rawName:"v-model",value:a.value,expression:"filter.value"}],key:t.selectedListTab+"-"+a.key,staticClass:"tw-mr-2",on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(a,"value",e.target.multiple?s:s[0])},function(e){return t.onChangeFilter(a)}]}},t._l(a.options,(function(a){return e("option",{key:a.value,domProps:{value:a.value}},[t._v(" "+t._s(t.translate(a.label))+" ")])})),0)})),0),e("section",{staticClass:"tw-flex",attrs:{id:"default-actions"}},[e("div",{staticClass:"tw-flex tw-items-center"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searches[t.selectedListTab].search,expression:"searches[selectedListTab].search"}],staticClass:"tw-rounded-lg",class:{"em-disabled-events":t.items[this.selectedListTab].length<1&&""===t.searches[t.selectedListTab].search},staticStyle:{margin:"0"},attrs:{name:"search",type:"text",placeholder:t.translate("COM_EMUNDUS_ONBOARD_SEARCH"),disabled:t.items[this.selectedListTab].length<1&&""===t.searches[t.selectedListTab].search},domProps:{value:t.searches[t.selectedListTab].search},on:{change:t.searchItems,keyup:t.searchItems,input:function(e){e.target.composing||t.$set(t.searches[t.selectedListTab],"search",e.target.value)}}}),e("span",{staticClass:"material-icons-outlined tw-mr-2 tw-cursor-pointer",staticStyle:{"margin-left":"-32px"},on:{click:t.searchItems}},[t._v(" search ")])]),e("div",{staticClass:"view-type tw-flex tw-items-center"},t._l(t.viewTypeOptions,(function(a){return e("span",{key:a.value,staticClass:"material-icons-outlined tw-ml-2 tw-cursor-pointer",class:{"active em-main-500-color em-border-main-500":a.value===t.viewType,"em-neutral-600-color em-border-neutral-600":a.value!==t.viewType},staticStyle:{padding:"4px","border-radius":"calc(var(--em-default-br)/2)",display:"flex",height:"38px",width:"38px","align-items":"center","justify-content":"center",background:"var(--neutral-0)"},on:{click:function(e){return t.changeViewType(a)}}},[t._v(t._s(a.icon))])})),0)])]),this.items[this.selectedListTab].length>0?e("section",{staticClass:"tw-flex tw-justify-end tw-items-center tw-mb-3",attrs:{id:"pagination-wrapper"}},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.numberOfItemsToDisplay,expression:"numberOfItemsToDisplay"}],attrs:{name:"numberOfItemsToDisplay"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.numberOfItemsToDisplay=e.target.multiple?a:a[0]},function(e){return t.getListItems()}]}},[e("option",{attrs:{value:"10"}},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_RESULTS"))+" 10")]),e("option",{attrs:{value:"25"}},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_RESULTS"))+" 25")]),e("option",{attrs:{value:"50"}},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_RESULTS"))+" 50")]),e("option",{attrs:{value:"all"}},[t._v(t._s(t.translate("ALL")))])]),void 0!==typeof t.currentTab.pagination&&t.currentTab.pagination&&t.currentTab.pagination.total>1?e("div",{staticClass:"tw-text-center",attrs:{id:"pagination"}},[e("ul",{staticClass:"tw-flex tw-list-none tw-gap-1"},[e("span",{staticClass:"material-icons-outlined tw-cursor-pointer tw-mr-2 tw-items-center",class:{"tw-text-neutral-600 em-disabled-events":1===t.currentTab.pagination.current},staticStyle:{display:"flex"},on:{click:function(e){return t.getListItems(t.currentTab.pagination.current-1,t.selectedListTab)}}},[t._v(" chevron_left ")]),t._l(t.currentTab.pagination.total,(function(a){return e("li",{key:a,staticClass:"tw-cursor-pointer em-square-button",class:{active:a===t.currentTab.pagination.current},on:{click:function(e){return t.getListItems(a,t.selectedListTab)}}},[t._v(" "+t._s(a)+" ")])})),e("span",{staticClass:"material-icons-outlined tw-cursor-pointer tw-ml-2 tw-items-center",class:{"tw-text-neutral-600 em-disabled-events":t.currentTab.pagination.current===t.currentTab.pagination.total},staticStyle:{display:"flex"},on:{click:function(e){return t.getListItems(t.currentTab.pagination.current+1,t.selectedListTab)}}},[t._v(" chevron_right ")])],2)]):t._e()]):t._e(),t.loading.items?e("div",{class:{"skeleton-grid":"blocs"===t.viewType,"tw-flex tw-flex-col tw-mb-4":"list"===t.viewType},staticStyle:{"flex-wrap":"wrap"},attrs:{id:"items-loading"}},t._l(9,(function(t){return e("skeleton",{key:t,staticClass:"tw-rounded-lg skeleton-item"})})),1):e("div",[t.displayedItems.length>0?e("div",{attrs:{id:"list-items"}},[e("table",{class:{blocs:"blocs"===t.viewType},attrs:{id:"list-table"}},[e("thead",[e("tr",[e("th",[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_LABEL")))]),t._l(t.additionalColumns,(function(a){return e("th",{key:a},[t._v(" "+t._s(a))])})),t.tabActionsPopover&&t.tabActionsPopover.length>0?e("th",[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_ACTIONS"))+" ")]):t._e()],2)]),e("tbody",t._l(t.displayedItems,(function(a){return e("tr",{key:a.id,staticClass:"em-border-cards table-row",class:{"em-card-neutral-100 em-card-shadow em-p-24":"blocs"===t.viewType}},[e("td",{staticClass:"tw-cursor-pointer",on:{click:function(e){return t.onClickAction(t.editAction,a.id)}}},[e("span",{class:{"tw-font-semibold tw-mb-4 tw-text-ellipsis tw-overflow-hidden":"blocs"===t.viewType},attrs:{title:a.label[t.params.shortlang]}},[t._v(t._s(a.label[t.params.shortlang]))])]),t._l(a.additional_columns,(function(a){return a.display===t.viewType||"all"===a.display?e("td",{key:a.key,staticClass:"columns"},["tags"===a.type?e("div",{staticClass:"tw-flex tw-items-center tw-flex-wrap tw-gap-2",class:a.classes},t._l(a.values,(function(a){return e("span",{key:a.key,staticClass:"tw-mr-2 tw-h-max",class:a.classes,domProps:{innerHTML:t._s(a.value)}})})),0):a.hasOwnProperty("long_value")?e("div",[e("span",{staticClass:"tw-mt-2 tw-mb-2",class:a.classes,domProps:{innerHTML:t._s(a.value)},on:{click:function(e){return t.displayLongValue(a.long_value)}}})]):e("span",{staticClass:"tw-mt-2 tw-mb-2",class:a.classes,domProps:{innerHTML:t._s(a.value)}})]):t._e()})),e("div",["blocs"===t.viewType?e("hr",{staticClass:"tw-w-full tw-mt-1.5 tw-mb-3"}):t._e(),e("td",{staticClass:"actions"},["blocs"===t.viewType&&t.editAction?e("a",{staticClass:"em-primary-button tw-text-sm tw-cursor-pointer tw-w-auto",on:{click:function(e){return t.onClickAction(t.editAction,a.id)}}},[t._v(" "+t._s(t.translate(t.editAction.label))+" ")]):t._e(),e("div",{staticClass:"tw-flex tw-items-center tw-gap-2"},[t.previewAction?e("span",{staticClass:"material-icons-outlined tw-cursor-pointer",on:{click:function(e){return t.onClickPreview(a)}}},[t._v("visibility")]):t._e(),t._l(t.iconActions,(function(s){return e("span",{key:s.name,staticClass:"tw-cursor-pointer",class:{"material-icons-outlined":s.iconOutlined,"material-icons":!s.iconOutlined,"tw-hidden":!("undefined"===typeof s.showon||t.evaluateShowOn(a,s.showon))},on:{click:function(e){return t.onClickAction(s,a.id)}}},[t._v(" "+t._s(s.icon)+" ")])})),t.tabActionsPopover&&t.tabActionsPopover.length>0&&t.filterShowOnActions(t.tabActionsPopover,a).length?e("v-popover",{attrs:{popoverArrowClass:"custom-popover-arrow"}},[e("span",{staticClass:"tooltip-target b3 material-icons"},[t._v("more_vert")]),e("template",{slot:"popover"},[e("ul",{staticStyle:{"list-style-type":"none",margin:"0",padding:"0"}},t._l(t.tabActionsPopover,(function(s){return e("li",{key:s.name,staticClass:"tw-cursor-pointer tw-p-2 tw-text-base",class:{"tw-hidden":!("undefined"===typeof s.showon||t.evaluateShowOn(a,s.showon))},on:{click:function(e){return t.onClickAction(s,a.id)}}},[t._v(" "+t._s(t.translate(s.label))+" ")])})),0)])],2):t._e()],2)])])],2)})),0)])]):e("div",{staticClass:"tw-mt-6",attrs:{id:"empty-list"}},[e("div",{staticClass:"noneDiscover tw-text-center tw-mb-4",domProps:{innerHTML:t._s(t.noneDiscoverTranslation)}}),e("div",{staticClass:"no-result tw-bg-no-repeat tw-w-64 tw-h-64 tw-my-0 tw-mx-auto"})])])])],1)},xt=[],Tt={async getActiveLanguages(){try{return await f().get("index.php?option=com_emundus&controller=settings&task=getactivelanguages")}catch(t){return{status:!1,error:t}}},async removeParameter(t){try{const e=await f().post("index.php?option=com_emundus&controller=settings&task=removeparam",{param:t});return e}catch(e){return{status:!1,error:e}}},async checkFirstDatabaseJoin(){try{const t=await f().get("index.php?option=com_emundus&controller=settings&task=checkfirstdatabasejoin");return t}catch(t){return{status:!1,message:t.message}}},async getEmundusParams(){try{return await f().get("index.php?option=com_emundus&controller=settings&task=getemundusparams")}catch(t){return!1}},async getOnboardingLists(){try{return await f().get("index.php?option=com_emundus&controller=settings&task=getonboardinglists")}catch(t){return!1}},async getOffset(){try{return await f().get("index.php?option=com_emundus&controller=settings&task=getOffset")}catch(t){return!1}},async redirectJRoute(t){let e=new FormData;e.append("link",t),fetch(window.location.origin+"/index.php?option=com_emundus&controller=settings&task=redirectjroute",{method:"POST",body:e}).then(t=>{if(t.ok)return t.json();throw new Error(Joomla.JText._("COM_EMUNDUS_ERROR_OCCURED"))}).then(t=>{t.status&&(window.location.href=window.location.origin+"/"+t.data)})}},Ut={name:"list_v2",components:{Skeleton:Ct},props:{defaultLists:{type:String,default:null},defaultType:{type:String,default:null}},data(){return{loading:{lists:!1,tabs:!1,items:!1},numberOfItemsToDisplay:25,lists:{},type:"forms",params:{},currentList:{title:"",tabs:[]},selectedListTab:0,items:{},title:"",viewType:"table",viewTypeOptions:[{value:"table",icon:"dehaze"},{value:"blocs",icon:"grid_view"}],searches:{},filters:{}}},created(){if(this.loading.lists=!0,this.loading.tabs=!0,null!==this.defaultType)this.params={type:this.defaultType};else{const t=this.$store.getters["global/datas"];this.params=Object.assign({},...Array.from(t).map(({name:t,value:e})=>({[t]:e})))}this.type=this.params.type,this.viewType=localStorage.getItem("tchooz_view_type/"+document.location.hostname),(null===this.viewType||"undefined"===typeof this.viewType||"blocs"!==this.viewType&&"table"!==this.viewType)&&(this.viewType="blocs",localStorage.setItem("tchooz_view_type/"+document.location.hostname,"blocs"));const t=localStorage.getItem("tchooz_number_of_items_to_display/"+document.location.hostname);null!==t&&(this.numberOfItemsToDisplay="all"!==t?parseInt(t):t),this.initList()},methods:{initList(){if(null!==this.defaultLists){if(this.lists=JSON.parse(atob(this.defaultLists)),"undefined"===typeof this.lists[this.type]&&(console.error("List type "+this.type+" does not exist"),window.location.href="/"),this.currentList=this.lists[this.type],this.params.hasOwnProperty("tab"))this.onSelectTab(this.params.tab);else{const t=sessionStorage.getItem("tchooz_selected_tab/"+document.location.hostname);null!==t&&"undefined"!==typeof this.currentList.tabs.find(e=>e.key===t)?this.onSelectTab(t):this.onSelectTab(this.currentList.tabs[0].key)}this.loading.lists=!1,this.getListItems()}else this.getLists()},getLists(){Tt.getOnboardingLists().then(t=>{if(t.data.status){if(this.lists=t.data.data,"undefined"===typeof this.lists[this.type]&&(console.error("List type "+this.type+" does not exist"),window.location.href="/"),this.currentList=this.lists[this.type],this.params.hasOwnProperty("tab"))this.onSelectTab(this.params.tab);else{const t=sessionStorage.getItem("tchooz_selected_tab/"+document.location.hostname);null!==t&&"undefined"!==typeof this.currentList.tabs.find(e=>e.key===t)?this.onSelectTab(t):this.onSelectTab(this.currentList.tabs[0].key)}this.loading.lists=!1,this.getListItems()}else console.error("Error while getting onboarding lists"),this.loading.lists=!1})},getListItems(t=1,e=null){null===e?(this.loading.tabs=!0,this.items=s["default"].observable(Object.assign({},...this.currentList.tabs.map(t=>({[t.key]:[]}))))):this.loading.items=!0;const a=null===e?this.currentList.tabs:[this.currentTab];a.length>0?a.forEach(e=>{"undefined"===typeof this.searches[e.key]&&(this.searches[e.key]={search:"",lastSearch:"",debounce:null});const a=sessionStorage.getItem("tchooz_filter_"+this.selectedListTab+"_search/"+document.location.hostname);if(null!==a&&(this.searches[this.selectedListTab].search=a),this.setTabFilters(e),"undefined"!==typeof e.getter){let a="index.php?option=com_emundus&controller="+e.controller+"&task="+e.getter+"&lim="+this.numberOfItemsToDisplay+"&page="+t;""!==this.searches[e.key].search&&(a+="&recherche="+this.searches[e.key].search),"undefined"!==typeof this.filters[e.key]&&this.filters[e.key].forEach(t=>{""!==t.value&&"all"!==t.value&&(a+="&"+t.key+"="+t.value)});try{f().get(a).then(a=>{!0===a.data.status?"undefined"!==typeof a.data.data.datas&&(this.items[e.key]=a.data.data.datas,e.pagination={current:t,total:Math.ceil(a.data.data.count/this.numberOfItemsToDisplay)}):console.error("Failed to get data : "+a.data.data.msg),this.loading.tabs=!1,this.loading.items=!1}).catch(t=>{console.error(t),this.loading.tabs=!1,this.loading.items=!1})}catch(s){console.error(s),this.loading.tabs=!1,this.loading.items=!1}}else this.loading.tabs=!1,this.loading.items=!1}):(this.loading.tabs=!1,this.loading.items=!1)},setTabFilters(t){"undefined"!==typeof t.filters&&t.filters.length>0&&"undefined"===typeof this.filters[t.key]&&(this.filters[t.key]=[],t.filters.forEach(e=>{let a=sessionStorage.getItem("tchooz_filter_"+this.selectedListTab+"_"+e.key+"/"+document.location.hostname);if(null==a&&(a=e.default?e.default:"all"),null===e.values){if(e.getter){const s="undefined"!==typeof e.controller?e.controller:t.controller;f().get("index.php?option=com_emundus&controller="+s+"&task="+e.getter).then(s=>{if(!0===s.data.status){let n=s.data.data;"string"===typeof n[0]&&(n=n.map(t=>({value:t,label:t}))),n.unshift({value:"all",label:this.translate(e.label)}),this.filters[t.key].push({key:e.key,value:a,options:n})}})}}else this.filters[t.key].push({key:e.key,value:a,options:e.values})}))},searchItems(){null!==this.searches[this.selectedListTab].searchDebounce&&clearTimeout(this.searches[this.selectedListTab].searchDebounce),""===this.searches[this.selectedListTab].search?sessionStorage.removeItem("tchooz_filter_"+this.selectedListTab+"_search/"+document.location.hostname):sessionStorage.setItem("tchooz_filter_"+this.selectedListTab+"_search/"+document.location.hostname,this.searches[this.selectedListTab].search),this.searches[this.selectedListTab].searchDebounce=setTimeout(()=>{this.searches[this.selectedListTab].search!==this.searches[this.selectedListTab].lastSearch&&(this.searches[this.selectedListTab].lastSearch=this.searches[this.selectedListTab].search,this.getListItems(1,this.selectedListTab))},500)},onClickAction(t,e=null){if(null===t||"object"!==typeof t)return!1;let a=null;if(null!==e&&(a=this.items[this.selectedListTab].find(t=>t.id===e)),"redirect"===t.type){let e=t.action;null!==a&&Object.keys(a).forEach(t=>{e=e.replace("%"+t+"%",a[t])}),Tt.redirectJRoute(e)}else{let s="index.php?option=com_emundus&controller="+t.controller+"&task="+t.action;if(null!==e)if(t.parameters){let e=t.parameters;null!==a&&Object.keys(a).forEach(t=>{e=e.replace("%"+t+"%",a[t])}),s+=e}else s+="&id="+e;t.hasOwnProperty("confirm")?$.a.fire({type:"warning",title:t.label,text:t.confirm,showCancelButton:!0,confirmButtonText:this.translate("COM_EMUNDUS_ONBOARD_OK"),cancelButtonText:this.translate("COM_EMUNDUS_ONBOARD_CANCEL"),reverseButtons:!0,customClass:{title:"em-swal-title",confirmButton:"em-swal-confirm-button",cancelButton:"em-swal-cancel-button",actions:"em-swal-double-action"}}).then(t=>{t.value&&this.executeAction(s)}):this.executeAction(s)}},executeAction(t){this.loading.items=!0,f().get(t).then(t=>{!0===t.data.status||1===t.data.status?(t.data.redirect&&(window.location.href=t.data.redirect),this.getListItems()):t.data.msg&&$.a.fire({type:"error",title:this.translate(t.data.msg),reverseButtons:!0,customClass:{title:"em-swal-title",confirmButton:"em-swal-confirm-button",actions:"em-swal-single-action"}}),this.loading.items=!1}).catch(t=>{console.error(t),this.loading.items=!1})},onClickPreview(t){this.previewAction&&(this.previewAction.title||this.previewAction.content)&&$.a.fire({title:t[this.previewAction.title],html:'<div style="text-align: left;">'+t[this.previewAction.content]+"</div>",reverseButtons:!0,customClass:{title:"em-swal-title",confirmButton:"em-swal-confirm-button",actions:"em-swal-single-action"}})},onChangeFilter(t){sessionStorage.setItem("tchooz_filter_"+this.selectedListTab+"_"+t.key+"/"+document.location.hostname,t.value),this.getListItems(1,this.selectedListTab)},onSelectTab(t){let e=!1;return this.selectedListTab!==t&&"undefined"!==typeof this.currentList.tabs.find(e=>e.key===t)&&(this.selectedListTab=t,sessionStorage.setItem("tchooz_selected_tab/"+document.location.hostname,t),e=!0),e},changeViewType(t){this.viewType=t.value,localStorage.setItem("tchooz_view_type/"+document.location.hostname,t.value)},filterShowOnActions(t,e){return t.filter(t=>!t.hasOwnProperty("showon")||this.evaluateShowOn(e,t.showon))},evaluateShowOn(t,e){let a=!0;switch(e.operator){case"==":case"=":a=t[e.key]==e.value;break;case"!=":a=t[e.key]!=e.value;break;case">":a=t[e.key]>e.value;break;case"<":a=t[e.key]<e.value;break;case">=":a=t[e.key]>=e.value;break;case"<=":a=t[e.key]<=e.value;break;default:a=!0}return a},displayLongValue(t){$.a.fire({html:'<div style="text-align: left;">'+t+"</div>",reverseButtons:!0,customClass:{title:"em-swal-title",confirmButton:"em-swal-confirm-button",actions:"em-swal-single-action"}})}},computed:{currentTab(){return this.currentList.tabs.find(t=>t.key===this.selectedListTab)},tabActionsPopover(){return"undefined"!==typeof this.currentTab.actions?this.currentTab.actions.filter(t=>!["add","edit","preview"].includes(t.name)&&!t.hasOwnProperty("icon")):[]},editAction(){return"undefined"!==typeof this.currentTab&&"undefined"!==typeof this.currentTab.actions&&this.currentTab.actions.find(t=>"edit"===t.name)},addAction(){return"undefined"!==typeof this.currentTab&&"undefined"!==typeof this.currentTab.actions&&this.currentTab.actions.find(t=>"add"===t.name)},previewAction(){return"undefined"!==typeof this.currentTab&&"undefined"!==typeof this.currentTab.actions&&this.currentTab.actions.find(t=>"preview"===t.name)},iconActions(){return"undefined"!==typeof this.currentTab.actions?this.currentTab.actions.filter(t=>!["add","edit","preview"].includes(t.name)&&t.hasOwnProperty("icon")):[]},displayedItems(){let t="undefined"!==typeof this.items[this.selectedListTab]?this.items[this.selectedListTab]:[];return t.filter(t=>t.label[this.params.shortlang].toLowerCase().includes(this.searches[this.selectedListTab].search.toLowerCase()))},additionalColumns(){let t=[],e="undefined"!==typeof this.items[this.selectedListTab]?this.items[this.selectedListTab]:[];return e.length>0&&"undefined"!==typeof e[0].additional_columns&&e[0].additional_columns.forEach(e=>{"all"!==e.display&&e.display!==this.viewType||t.push(e.key)}),t},noneDiscoverTranslation(){return"campaigns"===this.type?"programs"===this.currentTab.key?this.translate("COM_EMUNDUS_ONBOARD_NOPROGRAM"):this.translate("COM_EMUNDUS_ONBOARD_NOCAMPAIGN"):"emails"===this.type?this.translate("COM_EMUNDUS_ONBOARD_NOEMAIL"):"forms"===this.type?this.translate("COM_EMUNDUS_ONBOARD_NOFORM"):void 0}},watch:{numberOfItemsToDisplay(){localStorage.setItem("tchooz_number_of_items_to_display/"+document.location.hostname,this.numberOfItemsToDisplay)}}},kt=Ut,Rt=(a("ed79"),Object(y["a"])(kt,Mt,xt,!1,null,null,null)),Lt=Rt.exports,It=function(){var t=this,e=t._self._c;return e("div",{staticClass:"campaigns__add-campaign"},["undefined"==typeof t.campaignId||0==t.campaignId?e("div",[e("div",{staticClass:"tw-flex tw-items-center tw-cursor-pointer",on:{click:function(e){return t.redirectJRoute("index.php?option=com_emundus&view=campaigns")}}},[e("span",{staticClass:"material-icons-outlined"},[t._v("navigate_before")]),e("span",{staticClass:"tw-ml-2 tw-text-neutral-900"},[t._v(t._s(t.translate("BACK")))])]),e("h1",{staticClass:"tw-mt-4"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_ADD_CAMPAIGN")))]),e("p",{staticClass:"tw-mt-4"},[t._v(t._s(t.translate("COM_EMUNDUS_GLOBAL_INFORMATIONS_DESC")))]),e("hr",{staticClass:"tw-mt-1.5 tw-mb-1.5"})]):t._e(),e("div",[t.ready?e("form",{staticClass:"emundus-form fabrikForm",on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[e("div",[e("div",{staticClass:"tw-text-red-500 tw-mb-2"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_REQUIRED_FIELDS_INDICATE")))]),e("div",{staticClass:"tw-mb-4",attrs:{id:"campaign-label-wrapper"}},[e("label",{attrs:{for:"campLabel"}},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_ADDCAMP_CAMPNAME"))+" "),e("span",{staticClass:"tw-text-red-500"},[t._v("*")])]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.label[t.actualLanguage],expression:"form.label[actualLanguage]"}],staticClass:"tw-mt-2 form-control fabrikinput tw-w-full",class:{"is-invalid":t.errors.label},attrs:{id:"campLabel",type:"text",required:""},domProps:{value:t.form.label[t.actualLanguage]},on:{focusout:function(e){return t.onFormChange()},input:function(e){e.target.composing||t.$set(t.form.label,t.actualLanguage,e.target.value)}}}),t.errors.label?e("span",{staticClass:"tw-text-red-500 tw-mb-2",attrs:{id:"error-campaign-name"}},[t._v(" "+t._s(t.translate("COM_EMUNDUS_ONBOARD_FORM_REQUIRED_NAME"))+" ")]):t._e()]),e("div",{staticClass:"tw-grid tw-grid-cols-2 tw-mb-4 tw-gap-1.5"},[e("div",[e("div",[e("label",{attrs:{for:"startDate"}},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_ADDCAMP_STARTDATE"))+" "),e("span",{staticClass:"tw-text-red-500"},[t._v("*")])]),e("datetime",{staticClass:"tw-mt-2 tw-w-full",attrs:{id:"startDate",type:"datetime",format:"",placeholder:t.translate("COM_EMUNDUS_ONBOARD_ADDCAMP_STARTDATE"),"input-id":"start_date",phrases:{ok:t.translate("COM_EMUNDUS_ONBOARD_OK"),cancel:t.translate("COM_EMUNDUS_ONBOARD_CANCEL")}},on:{focusout:function(e){return t.onFormChange()}},model:{value:t.form.start_date,callback:function(e){t.$set(t.form,"start_date",e)},expression:"form.start_date"}})],1)]),e("div",[e("div",[e("label",{attrs:{for:"endDate"}},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_ADDCAMP_ENDDATE"))+" "),e("span",{staticClass:"tw-text-red-500"},[t._v("*")])]),e("datetime",{staticClass:"tw-mt-2 tw-w-full",attrs:{id:"endDate",type:"datetime",format:"",placeholder:t.translate("COM_EMUNDUS_ONBOARD_ADDCAMP_ENDDATE")+" *","input-id":"end_date","min-datetime":t.minDate,phrases:{ok:t.translate("COM_EMUNDUS_ONBOARD_OK"),cancel:t.translate("COM_EMUNDUS_ONBOARD_CANCEL")}},on:{focusout:function(e){return t.onFormChange()}},model:{value:t.form.end_date,callback:function(e){t.$set(t.form,"end_date",e)},expression:"form.end_date"}})],1)])]),e("div",{staticClass:"tw-mb-4"},[e("label",{attrs:{for:"year"}},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_ADDCAMP_PICKYEAR"))+" "),e("span",{staticClass:"tw-text-red-500"},[t._v("*")])]),e("autocomplete",{attrs:{id:"year",items:this.session,year:t.form.year,name:"2020 - 2021"},on:{searched:t.onSearchYear}})],1),e("div",{staticClass:"tw-mb-4 tw-flex tw-items-center"},[e("div",{staticClass:"em-toggle"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.published,expression:"form.published"}],staticClass:"tw-mt-2 em-toggle-check",attrs:{type:"checkbox","true-value":"1","false-value":"0",id:"published",name:"published"},domProps:{checked:Array.isArray(t.form.published)?t._i(t.form.published,null)>-1:t._q(t.form.published,"1")},on:{click:function(e){return t.onFormChange()},change:function(e){var a=t.form.published,s=e.target,n=s.checked?"1":"0";if(Array.isArray(a)){var i=null,r=t._i(a,i);s.checked?r<0&&t.$set(t.form,"published",a.concat([i])):r>-1&&t.$set(t.form,"published",a.slice(0,r).concat(a.slice(r+1)))}else t.$set(t.form,"published",n)}}}),e("strong",{staticClass:"b em-toggle-switch"}),e("strong",{staticClass:"b em-toggle-track"})]),e("span",{staticClass:"tw-ml-2",attrs:{for:"published"}},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_FILTER_PUBLISH")))])]),e("div",{staticClass:"tw-mb-4 tw-flex tw-items-center"},[e("div",{staticClass:"em-toggle"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.pinned,expression:"form.pinned"}],staticClass:"tw-mt-2 em-toggle-check",attrs:{type:"checkbox","true-value":"1","false-value":"0",id:"pinned",name:"pinned"},domProps:{checked:Array.isArray(t.form.pinned)?t._i(t.form.pinned,null)>-1:t._q(t.form.pinned,"1")},on:{click:function(e){return t.onFormChange()},change:function(e){var a=t.form.pinned,s=e.target,n=s.checked?"1":"0";if(Array.isArray(a)){var i=null,r=t._i(a,i);s.checked?r<0&&t.$set(t.form,"pinned",a.concat([i])):r>-1&&t.$set(t.form,"pinned",a.slice(0,r).concat(a.slice(r+1)))}else t.$set(t.form,"pinned",n)}}}),e("strong",{staticClass:"b em-toggle-switch"}),e("strong",{staticClass:"b em-toggle-track"})]),e("span",{staticClass:"tw-ml-2 tw-flex tw-items-center",attrs:{for:"pinned"}},[t._v(t._s(t.translate("COM_EMUNDUS_CAMPAIGNS_PIN"))+" "),e("span",{staticClass:"material-icons-outlined tw-ml-1 tw-text-base tw-cursor-pointer",on:{click:t.displayPinnedCampaignTip}},[t._v("help_outline")])])])]),e("hr"),e("div",{staticClass:"tw-mb-4"},[e("div",{staticClass:"tw-mb-4"},[e("h3",[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_ADDCAMP_INFORMATION")))])]),e("div",{staticClass:"tw-mb-4"},[e("label",{staticStyle:{top:"5em"}},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_ADDCAMP_RESUME"))+" "),e("span",{staticClass:"tw-text-red-500"},[t._v("*")])]),e("editor-quill",{key:t.editorResumeKey,staticStyle:{height:"25em"},attrs:{text:t.form.short_description,enable_variables:!1,placeholder:t.translate("COM_EMUNDUS_ONBOARD_ADDCAMP_RESUME"),id:"campResume",limit:500,toolbar:"light"},on:{focusout:t.onFormChange},model:{value:t.form.short_description,callback:function(e){t.$set(t.form,"short_description",e)},expression:"form.short_description"}})],1),e("label",{staticClass:"tw-mt-4"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_ADDCAMP_DESCRIPTION")))]),"undefined"!=typeof t.form.description?e("div",{staticClass:"tw-mb-4"},[e("editor-quill",{key:t.editorKey,staticStyle:{height:"25em"},attrs:{text:t.form.description,enable_variables:!1,placeholder:t.translate("COM_EMUNDUS_ONBOARD_ADDCAMP_DESCRIPTION"),id:"campaign_description"},on:{focusout:t.onFormChange},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1):t._e()]),e("hr",{staticClass:"tw-mt-16"}),e("div",{staticClass:"tw-mt-8"},[e("div",{staticClass:"tw-mb-4"},[e("h2",[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_ADDCAMP_PROGRAM")))])]),e("div",{staticClass:"tw-mb-4"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_PROGRAM_INTRO_DESC"))),e("span",{staticClass:"tw-text-red-500"},[t._v("*")])]),e("div",{staticClass:"tw-flex tw-items-center tw-mb-4"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.form.training,expression:"form.training"}],staticClass:"tw-mt-2 form-control fabrikinput tw-w-full",attrs:{id:"select_prog",disabled:this.programs.length<=0},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.form,"training",e.target.multiple?a:a[0])},t.setCategory]}},[e("option",{attrs:{value:""}},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_ADDCAMP_CHOOSEPROG")))]),t._l(t.programs,(function(a,s){return e("option",{key:s,attrs:{"data-category":a.programmes},domProps:{value:a.code}},[t._v(" "+t._s(a.label&&null!==a.label[t.actualLanguage]&&"undefined"!=typeof a.label[t.actualLanguage]?a.label[t.actualLanguage]:a.label)+" ")])}))],2),0!=t.coordinatorAccess?e("button",{staticClass:"tw-ml-2 tw-bg-transparent",attrs:{title:t.translate("COM_EMUNDUS_ONBOARD_ADDPROGRAM"),type:"button",id:"add-program"},on:{click:t.displayProgram}},[e("span",{staticClass:"material-icons-outlined em-main-500-color"},[t._v("add_circle_outline")])]):t._e()]),e("transition",{attrs:{name:"slide-fade"}},[t.isHiddenProgram?e("div",[e("div",[e("div",{staticClass:"tw-mb-4"},[e("label",{attrs:{for:"prog_label"}},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_PROGNAME"))+" "),e("span",{staticClass:"tw-text-red-500"},[t._v("*")])]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.programForm.label,expression:"programForm.label"}],staticClass:"tw-mt-2 form-control fabrikinput tw-w-full",class:{"is-invalid":t.errors.progLabel},attrs:{type:"text",id:"prog_label",placeholder:" "},domProps:{value:t.programForm.label},on:{input:function(e){e.target.composing||t.$set(t.programForm,"label",e.target.value)}}})]),t.errors.progLabel?e("p",{staticClass:"tw-text-red-500 tw-mb-2"},[e("span",{staticClass:"tw-text-red-500"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_PROG_REQUIRED_LABEL")))])]):t._e(),e("div",{staticClass:"tw-mb-4",staticStyle:{display:"none"}},[e("label",{attrs:{for:"prog_color"}},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_PROGCOLOR")))]),e("div",{staticClass:"tw-flex"},t._l(t.colors,(function(a,s){return e("div",[e("div",{staticClass:"em-color-round tw-cursor-pointer tw-flex tw-justify-center",class:0!=s?"ml-2":"",style:t.selectedColor==a.text?"background-color:"+a.text+";border: 2px solid "+a.background:"background-color:"+a.text,on:{click:function(e){t.programForm.color=a.text,t.selectedColor=a.text}}},[t.selectedColor==a.text?e("span",{staticClass:"material-icons-outlined",staticStyle:{"font-weight":"bold",color:"black",filter:"invert(1)"}},[t._v("done")]):t._e()])])})),0)])])]):t._e()])],1),e("hr",{staticClass:"tw-mt-1.5 tw-mb-1.5"}),e("div",{staticClass:"tw-flex tw-justify-between tw-float-right tw-mb-4"},[e("button",{staticClass:"em-primary-button tw-w-auto",attrs:{id:"save-btn",type:"button"},on:{click:function(e){t.quit=1,t.submit()}}},[t._v(" "+t._s(t.translate("COM_EMUNDUS_ONBOARD_ADD_CONTINUER"))+" ")])])]):t._e()]),t.submitted||!t.ready?e("div",{staticClass:"em-page-loader"}):t._e()])},Pt=[],Bt=a("0065"),jt=a("aaac"),Ft=function(){var t=this,e=t._self._c;return e("div",{staticClass:"autocomplete tw-mt-2"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"tw-w-full",class:""!==t.year?"":"placeholder",attrs:{type:"text",id:t.id,placeholder:""!==t.year?t.year:t.name},domProps:{value:t.search},on:{input:[function(e){e.target.composing||(t.search=e.target.value)},t.onChange],keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?null:t.onArrowDown.apply(null,arguments)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?null:t.onArrowUp.apply(null,arguments)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onEnter.apply(null,arguments)}]}}),e("ul",{directives:[{name:"show",rawName:"v-show",value:t.isOpen,expression:"isOpen"}],staticClass:"autocomplete-results"},t._l(t.results,(function(a,s){return e("li",{key:s,staticClass:"autocomplete-result",class:{"is-active":s===t.arrowCounter},on:{click:function(e){return t.setResult(a)}}},[t._v(" "+t._s(a)+" ")])})),0)])},qt=[],$t={name:"autocomplete",props:{items:{type:Array,required:!1,default:()=>[]},name:String,year:String,id:String},data(){return{search:"",results:[],isOpen:!1,sLoading:!1,arrowCounter:-1}},created(){const t=t=>new Promise(e=>setTimeout(e,t));t(2e3).then(()=>{this.search=this.year})},methods:{onSearching(t){this.$emit("searched",this.search)},onChange(){this.isOpen=!0,this.filterResults(),this.onSearching()},filterResults(){this.results=this.items.filter(t=>t.toLowerCase().indexOf(this.search.toLowerCase())>-1)},setResult(t){this.search=t,this.isOpen=!1,this.onSearching()},onArrowDown(){this.arrowCounter<this.results.length&&(this.arrowCounter=this.arrowCounter+1)},onArrowUp(){this.arrowCounter>0&&(this.arrowCounter=this.arrowCounter-1)},onEnter(){this.search=this.results[this.arrowCounter],this.isOpen=!1,this.arrowCounter=-1,this.onSearching()},handleClickOutside(t){this.$el.contains(t.target)||(this.isOpen=!1,this.arrowCounter=-1)}},mounted(){document.addEventListener("click",this.handleClickOutside)},destroyed(){document.removeEventListener("click",this.handleClickOutside)}},Ht=$t,Gt=(a("4c38"),Object(y["a"])(Ht,Ft,qt,!1,null,"48f4d47e",null)),zt=Gt.exports,Vt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"translation"},[e("transition",{attrs:{name:"slide-down",type:"transition"}},[e("div",{staticClass:"inlineflex",staticStyle:{margin:"25px"}},[e("label",{staticClass:"translate-label"},[t._v(t._s(t.TranslateIn))]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.currentLangTranslation,expression:"currentLangTranslation"}],staticClass:"dropdown-toggle ml-10px",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.currentLangTranslation=e.target.multiple?a:a[0]}}},t._l(t.languages,(function(a){return e("option",{key:a.sef,domProps:{value:a.sef}},[t._v(t._s(a.title_native)+" ")])})),0)])]),e("transition",{attrs:{name:"slide-down",type:"transition"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.label[t.currentLangTranslation],expression:"label[currentLangTranslation]"}],staticClass:"form__input field-general w-input",attrs:{type:"text",id:"label_"+t.currentLangTranslation},domProps:{value:t.label[t.currentLangTranslation]},on:{input:function(e){e.target.composing||t.$set(t.label,t.currentLangTranslation,e.target.value)}}})])],1)},Yt=[],Jt={name:"translation",props:{label:Object,actualLanguage:String},data(){return{currentLangTranslation:"en",languages:[],TranslateIn:this.translate("COM_EMUNDUS_ONBOARD_TRANSLATE_IN")}},created(){this.getLanguages()},methods:{getLanguages(){m()({method:"get",url:"index.php?option=com_emundus&controller=settings&task=getactivelanguages"}).then(t=>{this.languages=t.data.data,this.languages.forEach((t,e)=>{t.sef==this.actualLanguage&&this.languages.splice(e,1)}),this.currentLangTranslation=this.languages[0].sef})}},mounted(){document.addEventListener("click",this.handleClickOutside)},destroyed(){document.removeEventListener("click",this.handleClickOutside)}},Kt=Jt,Wt=Object(y["a"])(Kt,Vt,Yt,!1,null,"1f007359",null),Xt=Wt.exports,Zt={async updateDocument(t,e=!1){const a=new FormData;Object.keys(t).forEach(e=>{a.append(e,t[e])});const s=e?"createdocument":"updatedocument";try{const t=await f().post("index.php?option=com_emundus&controller=campaign&task="+s,a);return t.data}catch(n){return{status:!1,msg:n.message}}},async setDocumentMandatory(t){const e=new FormData;Object.keys(t).forEach(a=>{e.append(a,t[a])});try{const t=await f().post("index.php?option=com_emundus&controller=campaign&task=updatedocumentmandatory",e);return t.data}catch(a){return{status:!1,msg:a.message}}},async getAllCampaigns(t="",e="DESC",a="",s=9999,n=0,i="all"){try{const r=await f().get("index.php?option=com_emundus&controller=campaign&task=getallcampaign",{params:{filter:t,sort:e,recherche:a,lim:s,page:n,program:i}});return r.data}catch(r){return{status:!1,msg:r.message}}},async createCampaign(t){if(!t.label||!t.start_date||!t.end_date)return{status:!1,msg:"Label, start date and end date are required"};try{const e=new FormData;return e.append("label",JSON.stringify(t.label)),e.append("start_date",t.start_date),e.append("end_date",t.end_date),e.append("short_description",t.short_description),e.append("description",t.description),e.append("training",t.training),e.append("year",t.year),e.append("published",t.published),e.append("is_limited",t.is_limited),e.append("profile_id",t.profile_id),e.append("limit",t.limit),e.append("limit_status",t.limit_status),await f().post("index.php?option=com_emundus&controller=campaign&task=createcampaign",e,{headers:{"Content-Type":"multipart/form-data"}})}catch(e){return{status:!1,msg:e.message}}},async pinCampaign(t){if(t<1)return{status:!1,msg:"Invalid campaign ID"};try{const e=new FormData;return e.append("cid",t),await f().post("index.php?option=com_emundus&controller=campaign&task=pincampaign",e,{headers:{"Content-Type":"multipart/form-data"}})}catch(e){return{status:!1,msg:e.message}}},async getCampaignMoreFormUrl(t){if(t<1)return{status:!1,msg:"Invalid campaign ID"};try{const e=await f().get("/index.php?option=com_emundus&controller=campaign&task=getcampaignmoreformurl&cid="+t);return e.data}catch(e){return{status:!1,msg:e.message}}}},Qt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"tw-mt-2"},[e("div",{class:"editor_"+this.$attrs.id})])},te=[],ee=a("1474"),ae=a.n(ee),se=ae.a.import("attributors/attribute/direction");ae.a.register(se,!0);var ne=ae.a.import("attributors/class/align");ae.a.register(ne,!0);var ie=ae.a.import("attributors/class/background");ae.a.register(ie,!0);var re=ae.a.import("attributors/class/color");ae.a.register(re,!0);var oe=ae.a.import("attributors/class/direction");ae.a.register(oe,!0);var le=ae.a.import("attributors/class/font");ae.a.register(le,!0);var ce=ae.a.import("attributors/class/size");ae.a.register(ce,!0);var ue=ae.a.import("attributors/style/align");ae.a.register(ue,!0);var de=ae.a.import("attributors/style/background");ae.a.register(de,!0);var pe=ae.a.import("attributors/style/color");ae.a.register(pe,!0);var me=ae.a.import("attributors/style/direction");ae.a.register(me,!0);var he=ae.a.import("attributors/style/font");ae.a.register(he,!0);var fe=ae.a.import("attributors/style/size");ae.a.register(fe,!0);var _e={name:"editorQuill",components:{},props:{placeholder:String,text:String,enable_variables:{type:Boolean,default:!1},limit:{type:Number,default:null},toolbar:{type:String,default:"complete"}},data:()=>({editor:null,toolbarOptions:{complete:[["bold","italic","underline","strike"],["link"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],[{size:["small",!1,"large","huge"]}],[{color:[]}],[{align:[]}]],light:[["bold","italic","underline","strike"]]},formats:["background","bold","color","font","code","italic","link","size","strike","script","underline","blockquote","header","indent","list","align","direction","code-block","formula","mention"]}),mounted(){m()({method:"get",url:"index.php?option=com_emundus&controller=settings&task=geteditorvariables"}).then(t=>{this.variables=t.data.data});var t={modules:{toolbar:this.toolbarOptions[this.$props.toolbar],mention:null},placeholder:this.$props.placeholder,theme:"snow",formats:this.formats};if(this.$props.enable_variables&&(t.modules.mention={allowedChars:/^[A-Za-z\s]*$/,mentionDenotationChars:["/"],source:(t,e,a)=>{let s;if("/"===a&&(s=this.variables),0===t.length)e(s,t);else{const a=[];for(let e=0;e<s.length;e++)~s[e].value.toLowerCase().indexOf(t.toLowerCase())&&a.push(s[e]);e(a,t)}},onSelect:(t,e)=>{e({denotationChar:"",id:t.id,value:"["+t.value+"]"},!0)},renderItem:(t,e)=>`<div><p>${t.value}</p><p class="tw-text-xs">${t.description}</p></div>`}),this.editor=new ae.a(".editor_"+this.$attrs.id,t),""!==this.text&&null!==this.text&&"undefined"!==typeof this.text){let t=this.editor.clipboard.convert(this.text);this.editor.setContents(t)}this.editor.on("editor-change",(t,...e)=>{"text-change"===t&&(this.$props.limit&&this.editor.getLength()>this.$props.limit&&this.editor.deleteText(this.$props.limit,this.editor.getLength()),null===this.editor.root.innerHTML&&(this.editor.root.innerHTML=""),this.$emit("input",this.editor.root.innerHTML))}),this.editor.on("selection-change",(t,e,a)=>{t&&(t.length||this.$emit("focusout"))})},methods:{async imageHandler(){const t=document.createElement("input");t.setAttribute("type","file"),t.setAttribute("accept","image/*"),t.click(),t.onchange=async()=>{var e=t.files[0],a=new FormData;a.append("image",e);var s=e.name;await this.uploadFiles(e,s)}},async uploadFiles(t,e){try{const e=new FormData;e.append("image",t),await f().post("index.php?option=com_emundus&controller=settings&task=uploadimagetocustomfolder",e,{headers:{"Content-Type":"multipart/form-data"}}).then(t=>{const e=this.editor.getSelection();this.editor.insertEmbed(e.index,"image",t.data.file)})}catch(a){return{status:!1,msg:a.message}}}}},ge=_e,ve=(a("1f85"),Object(y["a"])(ge,Qt,te,!1,null,null,null)),ye=ve.exports;const be=a("bef5");var we={name:"addCampaign",components:{EditorQuill:ye,Datetime:Bt["Datetime"],Autocomplete:zt,Translation:Xt},directives:{focus:{inserted:function(t){t.focus()}}},props:{campaign:Number},data:()=>({campaignId:0,actualLanguage:"",coordinatorAccess:0,quit:1,isHiddenProgram:!1,minDate:"",programs:[],years:[],status:[],languages:[],session:[],old_training:"",old_program_form:"",editorKey:0,editorResumeKey:0,form:{label:{},start_date:"",end_date:"",short_description:"",description:null,training:"",year:"",published:1,is_limited:0,profile_id:9,limit:50,limit_status:[],pinned:0},programForm:{code:"",label:"",notes:"",programmes:"",published:1,apply_online:1,color:"#1C6EF2"},year:{label:"",code:"",schoolyear:"",published:1,profile_id:"",programmes:""},errors:{label:!1,progCode:!1,progLabel:!1,short_description:!1,limit_files_number:!1,limit_status:!1},colors:[{text:"#1C6EF2",background:"#79B6FB"},{text:"#20835F",background:"#87D4B8"},{text:"#DB333E",background:"#FBABAB"},{text:"#FFC633",background:"#FEEBA1"}],selectedColor:"#1C6EF2",submitted:!1,ready:!1}),created(){""==this.$props.campaign?this.campaignId=this.$store.getters["global/datas"].campaign?this.$store.getters["global/datas"].campaign.value:0:this.campaignId=this.$props.campaign?this.$props.campaign:0,this.actualLanguage=this.$store.getters["global/shortLang"],this.coordinatorAccess=this.$store.getters["global/coordinatorAccess"],jt["Settings"].defaultLocale=this.actualLanguage;let t=new Date;this.form.start_date=jt["DateTime"].local(t.getFullYear(),t.getMonth()+1,t.getDate(),0,0,0).toISO(),this.getLanguages().then(()=>{this.getCampaignById()})},methods:{displayPinnedCampaignTip(){$.a.fire({title:this.translate("COM_EMUNDUS_ONBOARD_PINNED_CAMPAIGN_TIP"),text:this.translate("COM_EMUNDUS_ONBOARD_PINNED_CAMPAIGN_TIP_TEXT"),showCancelButton:!1,confirmButtonText:this.translate("COM_EMUNDUS_SWAL_OK_BUTTON"),reverseButtons:!0,customClass:{title:"em-swal-title",confirmButton:"em-swal-confirm-button",actions:"em-swal-single-action"}})},getCampaignById(){"undefined"!==typeof this.campaignId&&""!==this.campaignId&&this.campaignId>0?m.a.get("index.php?option=com_emundus&controller=campaign&task=getcampaignbyid&id="+this.campaignId).then(t=>{let e=t.data.data.campaign.label;this.form=t.data.data.campaign,this.$emit("getInformations",this.form),this.programForm=t.data.data.program,this.form.label=t.data.data.label,this.languages.forEach(t=>{""!==this.form.label[t.sef]&&null!=this.form.label[t.sef]||(this.form.label[t.sef]=e)}),this.form.start_date=jt["DateTime"].fromSQL(this.form.start_date).toISO(),this.form.end_date=jt["DateTime"].fromSQL(this.form.end_date).toISO(),"0000-00-00T00:00:00.000Z"===this.form.end_date&&(this.form.end_date=""),"undefined"!=typeof t.data.data.campaign.status?(this.form.limit_status=[],this.form.is_limited=1,Object.values(t.data.data.campaign.status).forEach(t=>{this.form.limit_status[parseInt(t.limit_status)]=!0})):this.form.limit_status=[],this.ready=!0}).catch(t=>{console.log(t)}):this.ready=!0,this.getAllPrograms()},getAllPrograms(){m.a.get("index.php?option=com_emundus&controller=programme&task=getallprogram").then(t=>{t.data.status?(this.programs=t.data.data.datas,0!==Object.keys(this.programs).length&&this.programs.sort((t,e)=>t.id-e.id)):this.programs=[]}).catch(t=>{console.log(t)}),this.getYears()},getYears(){m.a.get("index.php?option=com_emundus&controller=campaign&task=getyears").then(t=>{this.years=t.data.data,this.years.forEach(t=>{this.session.push(t.schoolyear)})}).catch(t=>{console.log(t)}),this.getStatus()},async getLanguages(){const t=await m()({method:"get",url:"index.php?option=com_emundus&controller=settings&task=getactivelanguages"});return t&&(this.languages=t.data.data),t},setCategory(t){this.year.programmes=t.target.options[t.target.options.selectedIndex].dataset.category,this.programForm=this.programs.find(t=>t.code==this.form.training)},getStatus(){m.a.get("index.php?option=com_emundus&controller=settings&task=getstatus").then(t=>{this.status=t.data.data})},createCampaign(t){Zt.createCampaign(t).then(t=>{this.campaignId=t.data.data,this.quitFunnelOrContinue(this.quit)})},createCampaignWithNoExistingProgram(t){m()({method:"post",url:"index.php?option=com_emundus&controller=programme&task=createprogram",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:be.stringify({body:t})}).then(t=>{t.data.status?(this.form.progid=t.data.data.programme_id,this.form.training=t.data.data.programme_code,this.form.start_date=jt["DateTime"].fromISO(this.form.start_date).toISO(),this.form.end_date=jt["DateTime"].fromISO(this.form.end_date).toISO(),this.createCampaign(this.form)):($.a.fire({title:this.translate(t.data.msg),text:t.data.data,type:"error",confirmButtonText:this.translate("OK"),customClass:{title:"em-swal-title",confirmButton:"tw-justify-center"}}),this.submitted=!1)})},submit(){if(this.$store.dispatch("campaign/setUnsavedChanges",!0),this.errors={label:!1,progCode:!1,progLabel:!1,short_description:!1,limit_files_number:!1,limit_status:!1},""===this.form.label[this.actualLanguage]||null==this.form.label[this.actualLanguage]||"undefined"===typeof this.form.label[this.actualLanguage])return window.scrollTo({top:0,behavior:"smooth"}),this.errors.label=!0,0;if(""==this.form.end_date||"0000-00-00 00:00:00"==this.form.end_date){window.scrollTo({top:0,behavior:"smooth"});const t=document.getElementById("end_date");return t&&t.focus(),0}if(""==this.form.start_date||"0000-00-00 00:00:00"==this.form.start_date){window.scrollTo({top:0,behavior:"smooth"});const t=document.getElementById("start_date");return t&&t.focus(),0}if(""==this.form.year){window.scrollTo({top:0,behavior:"smooth"});const t=document.getElementById("year");return t&&t.focus(),0}if(1==this.form.is_limited){let t=this.form.limit_status.every(t=>!1===t);if(""==this.form.limit)return window.scrollTo({top:0,behavior:"smooth"}),this.errors.limit_files_number=!0,0;if(0==this.form.limit_status.length||t)return window.scrollTo({top:0,behavior:"smooth"}),this.errors.limit_status=!0,0}if(""==this.form.training){if(!this.isHiddenProgram)return document.getElementById("select_prog").focus(),0;if(""==this.programForm.label)return this.errors.progLabel=!0,document.getElementById("prog_label").focus(),0;{const t=this.programs.find(t=>t.label==this.programForm.label);if(void 0!=t)return this.errors.progLabel=!0,document.getElementById("prog_label").focus(),0}}this.year.label=this.form.label,this.year.code=this.form.training,this.year.schoolyear=this.form.year,this.year.published=this.form.published,this.year.profile_id=this.form.profile_id,""!=this.form.label.en&&null!=this.form.label.en&&"undefined"!=typeof this.form.label.en||(this.form.label.en=this.form.label.fr),this.submitted=!0,"undefined"!==typeof this.campaignId&&null!==this.campaignId&&""!==this.campaignId&&0!==this.campaignId?""!=this.form.training?this.updateCampaign():m()({method:"post",url:"index.php?option=com_emundus&controller=programme&task=createprogram",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:be.stringify({body:this.programForm})}).then(t=>{this.programForm.code=t.data.data.programme_code,this.form.progid=t.data.data.programme_id,this.updateCampaign()}).catch(t=>{console.log(t)}):""!==this.form.training?(this.programForm=this.programs.find(t=>t.code==this.form.training),this.form.training=this.programForm.code,this.form.start_date=jt["DateTime"].fromISO(this.form.start_date).toISO(),this.form.end_date=jt["DateTime"].fromISO(this.form.end_date).toISO(),this.createCampaign(this.form)):this.createCampaignWithNoExistingProgram(this.programForm)},updateCampaign(){this.form.training=this.programForm.code,this.form.start_date=jt["DateTime"].fromISO(this.form.start_date).toISO(),this.form.end_date=jt["DateTime"].fromISO(this.form.end_date).toISO(),m()({method:"post",url:"index.php?option=com_emundus&controller=campaign&task=updatecampaign",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:be.stringify({body:this.form,cid:this.campaignId})}).then(t=>{if(!t.status)return $.a.fire({type:"error",title:this.translate("COM_EMUNDUS_ADD_CAMPAIGN_ERROR"),reverseButtons:!0,customClass:{title:"em-swal-title",confirmButton:"em-swal-confirm-button",actions:"em-swal-single-action"}}),this.submitted=!1,0;this.$emit("nextSection"),this.$emit("updateHeader",this.form)}).catch(t=>{console.log(t)})},quitFunnelOrContinue(t){0===t?this.redirectJRoute("index.php?option=com_emundus&view=campaigns"):1===t&&(document.cookie="campaign_"+this.campaignId+"_menu = 1; expires=Session; path=/",this.redirectJRoute("index.php?option=com_emundus&view=campaigns&layout=addnextcampaign&cid="+this.campaignId+"&index=0"))},redirectJRoute(t){Tt.redirectJRoute(t)},onSearchYear(t){this.form.year=t},onFormChange(){this.$store.dispatch("campaign/setUnsavedChanges",!0)},displayProgram(){this.isHiddenProgram?(document.getElementById("add-program").style="transform: rotate(0)",this.form.training=this.old_training,this.programForm=this.old_program_form,document.getElementById("select_prog").removeAttribute("disabled")):(this.old_training=this.form.training,this.old_program_form=this.programForm,this.form.training="",this.programForm={code:"",label:"",notes:"",programmes:"",published:1,apply_online:1},document.getElementById("add-program").style="transform: rotate(135deg)",document.getElementById("select_prog").setAttribute("disabled","disabled")),this.isHiddenProgram=!this.isHiddenProgram}},watch:{"form.start_date":function(t){this.minDate=jt["DateTime"].fromISO(t).plus({days:1}).toISO(),""==this.form.end_date&&(this.form.end_date=jt["DateTime"].fromISO(t).plus({days:1}).toISO())}}},Oe=we,Ee=(a("5c3c"),Object(y["a"])(Oe,It,Pt,!1,null,"17dc6cd0",null)),Ce=Ee.exports,Ne=function(){var t=this,e=t._self._c;return e("div",{staticClass:"emails__add-email"},[e("notifications",{attrs:{group:"foo-velocity",position:"bottom left","animation-type":"velocity",speed:500,classes:"vue-notification-custom"}}),e("div",[e("form",{staticClass:"fabrikForm emundus-form",on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[e("div",[e("div",{staticClass:"tw-mb-4"},[e("h1",{staticClass:"tw-mb-2"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_ADD_EMAIL")))]),e("span",{staticClass:"tw-text-red-500 tw-mb-2"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_REQUIRED_FIELDS_INDICATE")))])]),e("div",[e("div",{staticClass:"tw-mb-4"},[e("label",[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_ADDEMAIL_NAME"))+" "),e("span",{staticStyle:{color:"#E5283B"}},[t._v("*")])]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.subject,expression:"form.subject"}],staticClass:"tw-w-full tw-mt-2",class:{"is-invalid":t.errors.subject},attrs:{type:"text"},domProps:{value:t.form.subject},on:{input:function(e){e.target.composing||t.$set(t.form,"subject",e.target.value)}}})]),t.errors.subject?e("span",{staticClass:"tw-text-red-500 tw-mb-2"},[e("span",{staticClass:"tw-text-red-500"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_SUBJECT_REQUIRED")))])]):t._e(),e("div",{staticClass:"tw-mb-4"},[e("label",[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_ADDEMAIL_BODY"))+" "),e("span",{staticStyle:{color:"#E5283B"}},[t._v("*")])]),e("editor-quill",{key:t.dynamicComponent,class:{"is-invalid":t.errors.message},staticStyle:{height:"30em"},attrs:{text:t.form.message,enable_variables:!0,placeholder:t.translate("COM_EMUNDUS_ONBOARD_ADDEMAIL_RESUME"),id:"email"},model:{value:t.form.message,callback:function(e){t.$set(t.form,"message",e)},expression:"form.message"}}),e("div",{staticClass:"tw-mt-12"},[e("a",{staticClass:"em-main-500-color em-hover-main-600 em-text-underline",attrs:{href:"/component/emundus/?view=export_select_columns&format=html&layout=all_programs&Itemid=1173",target:"_blank"}},[t._v(t._s(t.translate("COM_EMUNDUS_EMAIL_SHOW_TAGS")))])])],1),t.errors.message?e("p",{staticClass:"tw-text-red-500 tw-mb-2"},[e("span",{staticClass:"tw-text-red-500"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_BODY_REQUIRED")))])]):t._e(),e("div",{staticClass:"form-group"},[e("label",[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_CHOOSECATEGORY")))]),t.categories.length>0?e("incremental-select",{attrs:{options:this.categoriesList,defaultValue:t.incSelectDefaultValue,locked:"create"!=t.mode},on:{"update-value":t.updateCategorySelectedValue}}):t._e()],1)])]),e("hr"),e("div",{staticClass:"em-container-accordeon"},[e("div",{staticClass:"tw-flex tw-items-center tw-gap-1 tw-justify-between"},[e("h3",{staticClass:"tw-cursor-pointer !tw-mb-0",on:{click:t.displayAdvanced}},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_ADVANCED_CUSTOMING")))]),e("button",{directives:[{name:"show",rawName:"v-show",value:!t.displayAdvancedParameters,expression:"!displayAdvancedParameters"}],staticClass:"tw-bg-transparent tw-flex tw-flex-col",attrs:{title:t.translate("COM_EMUNDUS_ONBOARD_ADVANCED_CUSTOMING"),type:"button"},on:{click:t.displayAdvanced}},[e("span",{staticClass:"material-icons-outlined em-main-500-color"},[t._v("add_circle_outline")])]),e("button",{directives:[{name:"show",rawName:"v-show",value:t.displayAdvancedParameters,expression:"displayAdvancedParameters"}],staticClass:"tw-bg-transparent tw-flex tw-flex-col",attrs:{title:t.translate("COM_EMUNDUS_ONBOARD_ADVANCED_CUSTOMING"),type:"button"},on:{click:t.displayAdvanced}},[e("span",{staticClass:"material-icons-outlined em-main-500-color"},[t._v("remove_circle_outline")])])]),t.displayAdvancedParameters?e("div",{staticClass:"tw-mt-4",attrs:{id:"email-advanced-parameters"}},[e("div",{staticClass:"form-group tw-mb-4"},[e("label",[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_ADDEMAIL_SENDER_EMAIL")))]),e("p",{staticClass:"tw-mt-2"},[t._v(t._s(t.email_sender))])]),e("div",{staticClass:"form-group tw-mb-4"},[e("label",[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_ADDEMAIL_RECEIVER")))]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name,expression:"form.name"}],staticClass:"tw-w-full fabrikinput tw-mt-2",attrs:{type:"text"},domProps:{value:t.form.name},on:{input:function(e){e.target.composing||t.$set(t.form,"name",e.target.value)}}})]),e("div",{staticClass:"form-group tw-mb-4"},[e("label",[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_ADDEMAIL_ADDRESS")))]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.emailfrom,expression:"form.emailfrom"}],staticClass:"tw-w-full fabrikinput tw-mt-2",attrs:{type:"text",placeholder:"reply-to@tchooz.io"},domProps:{value:t.form.emailfrom},on:{input:function(e){e.target.composing||t.$set(t.form,"emailfrom",e.target.value)}}}),e("p",{staticClass:"tw-text-xs tw-text-neutral-700"},[t._v(" "+t._s(t.translate("COM_EMUNDUS_ONBOARD_ADDEMAIL_ADDRESTIP")))])]),e("div",{staticClass:"form-group tw-mb-4",attrs:{id:"receivers_cc"}},[e("label",[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_RECEIVER_CC_TAGS")))]),e("multiselect",{class:"tw-mt-2",attrs:{label:"email","track-by":"email",options:t.receivers_cc,multiple:!0,searchable:!0,taggable:!0,"select-label":"","selected-label":"","deselect-label":"","close-on-select":!1,"clear-on-select":!1},on:{tag:t.addNewCC},model:{value:t.selectedReceiversCC,callback:function(e){t.selectedReceiversCC=e},expression:"selectedReceiversCC"}})],1),e("div",{staticClass:"form-group tw-mb-4",attrs:{id:"receivers_bcc"}},[e("label",[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_RECEIVER_BCC_TAGS")))]),e("multiselect",{class:"tw-mt-2",attrs:{label:"email","track-by":"email",options:t.receivers_bcc,multiple:!0,searchable:!0,taggable:!0,"select-label":"","selected-label":"","deselect-label":"","close-on-select":!1,"clear-on-select":!1},on:{tag:t.addNewBCC},model:{value:t.selectedReceiversBCC,callback:function(e){t.selectedReceiversBCC=e},expression:"selectedReceiversBCC"}})],1),t.attached_letters?e("div",{staticClass:"form-group tw-mb-4",attrs:{id:"attached_letters"}},[e("label",[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_EMAIL_DOCUMENT")))]),e("multiselect",{class:"tw-mt-2",attrs:{label:"value","track-by":"id",options:t.attached_letters,multiple:!0,taggable:!0,"select-label":"","selected-label":"","deselect-label":"",placeholder:t.translate("COM_EMUNDUS_ONBOARD_PLACEHOLDER_EMAIL_DOCUMENT"),"close-on-select":!1,"clear-on-select":!1},model:{value:t.selectedLetterAttachments,callback:function(e){t.selectedLetterAttachments=e},expression:"selectedLetterAttachments"}})],1):t._e(),t.tags?e("div",{staticClass:"form-group tw-mb-4"},[e("label",[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_EMAIL_TAGS")))]),e("multiselect",{class:"tw-mt-2",attrs:{label:"label","track-by":"id",options:t.action_tags,multiple:!0,taggable:!0,"select-label":"","selected-label":"","deselect-label":"",placeholder:t.translate("COM_EMUNDUS_ONBOARD_PLACEHOLDER_EMAIL_TAGS"),"close-on-select":!1,"clear-on-select":!1},model:{value:t.selectedTags,callback:function(e){t.selectedTags=e},expression:"selectedTags"}})],1):t._e(),e("div",{staticClass:"form-group tw-mb-4"},[e("label",[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_CANDIDAT_ATTACHMENTS")))]),e("multiselect",{class:"tw-mt-2",attrs:{label:"value","track-by":"id",options:t.candidate_attachments,multiple:!0,taggable:!0,"select-label":"","selected-label":"","deselect-label":"",placeholder:t.translate("COM_EMUNDUS_ONBOARD_PLACEHOLDER_CANDIDAT_ATTACHMENTS"),"close-on-select":!1,"clear-on-select":!1},model:{value:t.selectedCandidateAttachments,callback:function(e){t.selectedCandidateAttachments=e},expression:"selectedCandidateAttachments"}})],1)]):t._e()]),e("div",{staticClass:"tw-flex tw-justify-between tw-mt-4"},[e("button",{staticClass:"em-secondary-button !tw-w-auto",attrs:{type:"button",onclick:"history.back()"}},[t._v(" "+t._s(t.translate("COM_EMUNDUS_ONBOARD_ADD_RETOUR"))+" ")]),e("button",{staticClass:"em-primary-button !tw-w-auto",attrs:{type:"submit"}},[t._v(" "+t._s(t.translate("COM_EMUNDUS_ONBOARD_ADD_CONTINUER"))+" ")])])])]),t.loading||t.submitted?e("div",{staticClass:"em-page-loader"}):t._e()],1)},Se=[],Ae=function(){var t=this,e=t._self._c;return e("div",{staticClass:"tw-mt-2",attrs:{id:"incremental-selector"}},[e("div",{staticClass:"tw-w-full tw-flex tw-items-center tw-mb-4"},[t.isNewVal?e("div",{staticClass:"tw-w-full",attrs:{id:"new-value"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.newValue.label,expression:"newValue.label"}],staticClass:"tw-w-full !tw-mb-0",attrs:{type:"text"},domProps:{value:t.newValue.label},on:{focusin:function(e){t.showOptions=!0},keyup:t.emitValueChanges,input:function(e){e.target.composing||t.$set(t.newValue,"label",e.target.value)}}}),e("i",{staticClass:"em-main-500-color"},[t._v("("+t._s(t.translate("COM_EMUNDUS_FORM_BUILDER_NEW_VALUE"))+")")])]):t._e(),t.isNewVal?t._e():e("div",{staticClass:"tw-w-full",attrs:{id:"existing-value"}},[e("div",{staticClass:"tw-w-full tw-flex tw-items-center tw-justify-between"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.newExistingLabel,expression:"newExistingLabel"}],staticClass:"tw-w-full !tw-mb-0 em-border-main-500 important",attrs:{type:"text"},domProps:{value:t.newExistingLabel},on:{keyup:t.emitValueChanges,input:function(e){e.target.composing||(t.newExistingLabel=e.target.value)}}}),t.locked?t._e():e("span",{staticClass:"material-icons-outlined tw-cursor-pointer",on:{click:t.unselectExistingValue,mouseenter:function(e){t.hoverUnselect=!0},mouseleave:function(e){t.hoverUnselect=!1}}},[t._v("close")])]),e("i",{staticClass:"em-main-500-color"},[t._v("("+t._s(t.translate("COM_EMUNDUS_FORM_BUILDER_EXISTING_VALUE"))+")")])])]),t.existingValues&&t.showOptions?e("ul",{staticClass:"em-custom-selector em-border-neutral-300 tw-w-full",on:{mouseenter:function(e){t.hoverOptions=!0},mouseleave:function(e){t.hoverOptions=!1}}},t._l(t.displayedOptions,(function(a){return e("li",{key:a.id,staticClass:"em-custom-selector-option tw-cursor-pointer em-p-8",attrs:{value:a.id,selected:t.selectedExistingValue==a.id},on:{click:function(e){return t.onSelectValue(a.id)}}},[t._v(" "+t._s(a.label)+" ")])})),0):t._e()])},De=[],Me={props:{options:{type:Array,required:!0},defaultValue:{type:Number,required:!1},locked:{type:Boolean,default:!1}},data(){return{originalOptions:[],newValue:{id:0,label:""},existingValues:[],newExistingLabel:"",selectedExistingValue:-1,isNewVal:!0,showOptions:!1,hoverOptions:!1,hoverUnselect:!1}},beforeMount(){this.originalOptions=JSON.parse(JSON.stringify(this.options)),this.existingValues=this.options},mounted(){null!=this.defaultValue&&this.onSelectValue(this.defaultValue)},methods:{updateDefaultValue(){this.onSelectValue(this.defaultValue)},onSelectValue(t){if(this.selectedExistingValue=t,-1===this.selectedExistingValue)this.unselectExistingValue();else{this.isNewVal=!1;let t=this.existingValues.find(t=>t.id===this.selectedExistingValue);t?(t=JSON.parse(JSON.stringify(t)),this.newExistingLabel=t.label,this.newValue=t,this.emitValueChanges()):this.unselectExistingValue()}this.showOptions=!1},unselectExistingValue(){this.isNewVal=!0;let t=this.existingValues.find(t=>t.id==this.selectedExistingValue);this.newExistingLabel=t?t.label:"",this.selectedExistingValue=-1,this.newValue.label="",this.newValue.id=0,this.existingValues=JSON.parse(JSON.stringify(this.originalOptions)),this.showOptions=!1,this.hoverOptions=!1,this.hoverUnselect=!1,this.emitValueChanges()},emitValueChanges(t=null){if(!this.hoverUnselect)if(this.showOptions&&!this.hoverOptions&&(this.showOptions=!1),this.isNewVal)this.$emit("update-value",this.newValue);else{const t=this.existingValues.find(t=>t.id===this.selectedExistingValue);t.label!==this.newExistingLabel&&(t.label=this.newExistingLabel),this.$emit("update-value",t)}}},computed:{displayedOptions(){return this.isNewVal?this.existingValues.filter(t=>-1===t.id||t.label.toLowerCase().includes(this.newValue.label.toLowerCase())):this.existingValues}},watch:{defaultValue:{handler(t){this.updateDefaultValue()}}}},xe=Me,Te=(a("1de3"),Object(y["a"])(xe,Ae,De,!1,null,null,null)),Ue=Te.exports;const ke=a("bef5");var Re={name:"addEmail",components:{IncrementalSelect:Ue,EditorQuill:ye,Autocomplete:zt,Multiselect:vt.a},props:{mode:{type:String,default:"create"}},data:()=>({email:0,actualLanguage:"",langue:0,dynamicComponent:!1,displayAdvancedParameters:!1,categories:[],enableTip:!1,searchTerm:"",selectall:!1,tags:[],documents:[],selectedTags:[],selectedCandidateAttachments:[],selectedCategory:0,form:{lbl:"",subject:"",name:"",emailfrom:"",message:"",type:2,category:"",published:1},errors:{subject:!1,message:!1},submitted:!1,loading:!1,selectedReceiversCC:[],selectedReceiversBCC:[],selectedLetterAttachments:[],receivers_cc:[],receivers_bcc:[],attached_letters:[],action_tags:[],candidate_attachments:[],email_sender:""}),created(){this.loading=!0,this.getEmailSender(),this.getAllAttachments(),this.getAllTags(),this.getAllDocumentLetter(),this.actualLanguage=this.$store.getters["global/shortLang"],m.a.get("index.php?option=com_emundus&controller=email&task=getemailcategories").then(t=>{this.categories=t.data.data,this.email=this.$store.getters["global/datas"].email.value,"undefined"!==typeof this.email&&0!==this.email&&""!==this.email?this.getEmailById(this.email):(this.dynamicComponent=!0,this.loading=!1)}).catch(t=>{console.log(t)}),setTimeout(()=>{this.enableVariablesTip()},2e3)},mounted(){"en"===this.actualLanguage&&(this.langue=1)},methods:{getEmailById(){m.a.get("index.php?option=com_emundus&controller=email&task=getemailbyid&id="+this.email).then(t=>{!1!==t.data.data&&0!=t.data.status?(this.form=t.data.data.email,this.dynamicComponent=!0,this.selectedLetterAttachments=t.data.data.letter_attachment?t.data.data.letter_attachment:[],this.selectedCandidateAttachments=t.data.data.candidate_attachment?t.data.data.candidate_attachment:[],this.selectedTags=t.data.data.tags?t.data.data.tags:[],null!==t.data.data.receivers&&void 0!==t.data.data.receivers&&""!==t.data.data.receivers&&this.setEmailReceivers(t.data.data.receivers),this.loading=!1):this.runError(void 0,t.data.msg)}).catch(t=>{console.log(t),this.runError(void 0,t.data.msg)})},setEmailReceivers(t){let e=[],a=[];for(let i=0;i<t.length;i++)e[i]={},a[i]={},"receiver_cc_email"===t[i].type||"receiver_cc_fabrik"===t[i].type?(e[i]["id"]=t[i].id,e[i]["email"]=t[i].receivers):"receiver_bcc_email"!==t[i].type&&"receiver_bcc_fabrik"!==t[i].type||(a[i]["id"]=t[i].id,a[i]["email"]=t[i].receivers);const s=e.filter(t=>null!==t["id"]&&void 0!==t["id"]),n=a.filter(t=>null!==t["id"]&&void 0!==t["id"]);this.selectedReceiversCC=s,this.selectedReceiversBCC=n},displayAdvanced(){this.displayAdvancedParameters=!this.displayAdvancedParameters},addNewCC(t){const e={email:t,id:t.substring(0,2)+Math.floor(1e7*Math.random())};this.receivers_cc.push(e),this.selectedReceiversCC.push(e)},addNewBCC(t){const e={email:t,id:t.substring(0,2)+Math.floor(1e7*Math.random())};this.receivers_bcc.push(e),this.selectedReceiversBCC.push(e)},getEmailSender(){m.a.get("index.php?option=com_emundus&controller=settings&task=getemailsender").then(t=>{this.email_sender=t.data.data})},submit(){return this.errors={subject:!1,message:!1},""==this.form.subject?(this.errors.subject=!0,0):""==this.form.message?(this.errors.message=!0,0):(this.submitted=!0,void(""!==this.email?m()({method:"post",url:"index.php?option=com_emundus&controller=email&task=updateemail",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:ke.stringify({body:this.form,code:this.email,selectedReceiversCC:this.selectedReceiversCC,selectedReceiversBCC:this.selectedReceiversBCC,selectedLetterAttachments:this.selectedLetterAttachments,selectedCandidateAttachments:this.selectedCandidateAttachments,selectedTags:this.selectedTags})}).then(()=>{history.back()}).catch(t=>{console.log(t)}):m()({method:"post",url:"index.php?option=com_emundus&controller=email&task=createemail",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:ke.stringify({body:this.form,selectedReceiversCC:this.selectedReceiversCC,selectedReceiversBCC:this.selectedReceiversBCC,selectedLetterAttachments:this.selectedLetterAttachments,selectedCandidateAttachments:this.selectedCandidateAttachments,selectedTags:this.selectedTags})}).then(t=>{this.redirectJRoute("index.php?option=com_emundus&view=emails")}).catch(t=>{console.log(t)})))},onSearchCategory(t){this.form.category=t},enableVariablesTip(){this.enableTip||(this.enableTip=!0,this.tip())},redirectJRoute(t){Tt.redirectJRoute(t)},tip:function(){this.show("foo-velocity",this.translate("COM_EMUNDUS_ONBOARD_VARIABLESTIP")+' <strong style="font-size: 16px">/</strong>',this.translate("COM_EMUNDUS_ONBOARD_TIP"))},show(t,e="",a="Information"){this.$notify({group:t,title:""+a,text:e,duration:1e4})},clean(t){this.$notify({group:t,clean:!0})},getAllTags:function(){m()({method:"post",url:"index.php?option=com_emundus&controller=settings&task=gettags",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(t=>{this.action_tags=t.data.data}).catch(t=>{console.log(t)})},getAllDocumentLetter:function(){m()({method:"post",url:"index.php?option=com_emundus&controller=messages&task=getalldocumentsletters",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(t=>{this.attached_letters=t.data.documents}).catch(t=>{console.log(t)})},getAllAttachments:function(){m()({method:"get",url:"index.php?option=com_emundus&controller=messages&task=getallattachments",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(t=>{this.candidate_attachments=t.data.attachments}).catch(t=>{console.log(t)})},updateCategorySelectedValue(t){t.label?this.form.category=t.label:(this.selectedCategory=null,this.form.category="")}},computed:{categoriesList(){return this.categories.map((t,e)=>({id:e+1,label:t}))},incSelectDefaultValue(){let t=null;return this.form&&this.form.category&&this.categories.forEach((e,a)=>{e===this.form.category&&(t=a+1)}),t}}},Le=Re,Ie=(a("8a8e"),Object(y["a"])(Le,Ne,Se,!1,null,"1366923c",null)),Pe=Ie.exports,Be=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"edit-campaign"}},[e("div",{staticClass:"em-w-custom"}),e("div",[e("ModalWarningFormBuilder",{attrs:{pid:t.getProfileId,cid:t.campaignId}}),e("div",[e("div",{staticClass:"tw-flex tw-items-center tw-cursor-pointer",on:{click:function(e){return t.redirectJRoute("index.php?option=com_emundus&view=campaigns")}}},[e("span",{staticClass:"material-icons-outlined"},[t._v("navigate_before")]),e("span",{staticClass:"tw-ml-2 tw-text-neutral-900"},[t._v(t._s(t.translate("BACK")))])]),e("div",{staticClass:"tw-flex tw-items-center tw-mt-4"},[e("h1",[t._v(t._s(t.translate(t.selectedMenuItem.label)))])]),e("p",{domProps:{innerHTML:t._s(t.translate(t.selectedMenuItem.description))}}),e("hr"),e("div",{staticClass:"tw-flex tw-items-center tw-mb-8"},[e("p",[e("b",{staticStyle:{color:"var(--em-profile-color)","font-weight":"700 !important"}},[t._v(" "+t._s(t.form.label))]),t._v(" "+t._s(t.translate("COM_EMUNDUS_ONBOARD_FROM"))+" "),e("strong",[t._v(t._s(t.form.start_date))]),t._v(" "+t._s(t.translate("COM_EMUNDUS_ONBOARD_TO"))+" "),e("strong",[t._v(t._s(t.form.end_date))])])]),e("ul",{staticClass:"tw-flex tw-items-center tw-gap-2 tw-list-none tw-mb-4 tw-pl-0 tw-border-b tw-border-neutral-400"},t._l(t.displayedMenus,(function(a){return e("li",{key:a.component,staticClass:"tw-border tw-border-transparent tw-flex tw-flex-col tw-rounded-t-lg hover:tw-border-neutral-300",class:{"tw-border tw-border-neutral-300 tw-bg-neutral-300":t.selectedMenu===a.component},on:{click:function(e){return t.selectMenu(a)}}},[e("span",{staticClass:"tw-cursor-pointer tw-p-2 tw-text-neutral-700"},[t._v(t._s(t.translate(a.label)))])])})),0),e("br"),"addEmail"===t.selectedMenu?e("div",{staticClass:"warning-message-program mb-1"},[e("p",{staticClass:"tw-text-red-500 flex flex-row"},[e("span",{staticClass:"material-icons-outlined tw-mr-2 tw-text-red-500"},[t._v("warning_amber")]),t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_PROGRAM_WARNING"))+" ")]),t.campaignsByProgram.length>0?e("ul",{staticClass:"tw-mt-2 tw-mb-8 em-pl-16"},t._l(t.campaignsByProgram,(function(a){return e("li",{key:"camp_progs_"+a.id},[t._v(t._s(a.label))])})),0):t._e()]):t._e(),e("transition",{attrs:{name:"fade"}},["addCampaign"===t.selectedMenu&&""!==t.campaignId?e("add-campaign",{attrs:{campaign:t.campaignId,coordinatorAccess:!0,actualLanguage:t.actualLanguage,manyLanguages:t.manyLanguages},on:{nextSection:t.next,getInformations:t.initInformations,updateHeader:t.updateHeader}}):"campaignMore"===t.selectedMenu&&""!==t.campaignId?e("campaign-more",{attrs:{campaignId:t.campaignId,defaultFormUrl:t.campaignMoreFormUrl}}):"addFormulaire"===t.selectedMenu?e("addFormulaire",{key:t.formReload,attrs:{profileId:t.profileId,campaignId:t.campaignId,profiles:t.profiles,visibility:null},on:{profileId:t.setProfileId}}):"addDocumentsDropfiles"===t.selectedMenu?e("add-documents-dropfiles",{attrs:{funnelCategorie:t.selectedMenuItem.label,profileId:t.getProfileId,campaignId:t.campaignId,langue:t.actualLanguage,manyLanguages:t.manyLanguages}}):"addEmail"===t.selectedMenu&&0!=t.program.id?e("add-email",{attrs:{prog:Number(t.program.id)}}):t._e()],1)],1),["addDocumentsDropfiles","addFormulaire"].includes(t.selectedMenu)?e("div",{staticClass:"tw-flex tw-items-center tw-justify-between tw-float-right"},[e("button",{staticClass:"em-primary-button tw-w-auto mb-4",attrs:{type:"button"},on:{click:t.next}},[t._v(" "+t._s(t.translate("COM_EMUNDUS_ONBOARD_ADD_CONTINUER"))+" ")])]):t._e(),t.loading?e("div",{staticClass:"em-page-loader"}):t._e()],1)])},je=[],Fe=function(){var t=this,e=t._self._c;return e("span",{attrs:{id:"modalWarningFormBuilder"}},[e("modal",{attrs:{name:"modalWarningFormBuilder",height:"auto",transition:"nice-modal-fade","min-width":200,"min-height":200,delay:100,adaptive:!0,clickToClose:!1},on:{closed:t.beforeClose,"before-open":t.beforeOpen}},[e("div",{staticClass:"fixed-header-modal"},[e("div",{staticClass:"topright"},[e("button",{staticClass:"btnCloseModal",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.$modal.hide("modalWarningFormBuilder")}}},[e("em",{staticClass:"fas fa-times"})])]),e("div",{staticClass:"update-field-header"},[e("h2",{staticClass:"update-title-header"},[t._v(" "+t._s(t.Warning)+" ")]),e("p",[t._v(" "+t._s(t.FormAffectedToFiles)+" ")])]),e("div",{staticClass:"modalC-content"},[e("div",{staticClass:"tw-flex tw-items-center tw-justify-between tw-mb-1"},[e("button",{staticClass:"bouton-sauvergarder-et-continuer w-retour",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.$modal.hide("modalWarningFormBuilder")}}},[t._v(" "+t._s(t.Retour)+" ")]),e("button",{staticClass:"bouton-sauvergarder-et-continuer tw-mr-1",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.formbuilder()}}},[t._v(" "+t._s(t.Update)+" ")])])])])])],1)},qe=[];a("bef5");var $e={name:"modalWarningFormBuilder",props:{pid:Number,cid:Number},data(){return{Warning:this.translate("COM_EMUNDUS_ONBOARD_WARNING"),FormAffectedToFiles:this.translate("COM_EMUNDUS_ONBOARD_FORM_AFFECTEDFILES"),Retour:this.translate("COM_EMUNDUS_ONBOARD_ADD_RETOUR"),Duplicate:this.translate("COM_EMUNDUS_ONBOARD_DUPLICATE"),Update:this.translate("COM_EMUNDUS_ONBOARD_MODIFY")}},methods:{beforeClose(t){},beforeOpen(t){},formbuilder(){window.location.replace("index.php?option=com_emundus&view=form&layout=formbuilder&prid="+this.pid+"&index=0&cid="+this.cid)}}},He=$e,Ge=(a("8e95"),Object(y["a"])(He,Fe,qe,!1,null,"347fb2cb",null)),ze=Ge.exports,Ve=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"documents-dropfiles"}},[e("div",{staticClass:"w-form"},[e("vue-dropzone",{ref:"dropzone",staticStyle:{width:"100%"},attrs:{id:"customdropzone","include-styling":!1,options:t.dropzoneOptions,useCustomSlot:!0},on:{"vdropzone-file-added":t.afterAdded,"vdropzone-removed-file":t.afterRemoved,"vdropzone-success":t.onComplete,"vdropzone-error":t.catchError}},[e("div",{staticClass:"dropzone-custom-content",attrs:{id:"dropzone-message"}},[t._v(" "+t._s(t.DropHere)+" ")])]),e("hr"),e("draggable",t._b({staticClass:"tw-flex tw-items-center",staticStyle:{margin:"0"},attrs:{handle:".handle","chosen-class":"em-grabbing"},on:{end:t.updateDocumentsOrder},model:{value:t.documents,callback:function(e){t.documents=e},expression:"documents"}},"draggable",t.dragOptions,!1),[e("transition-group",{staticClass:"tw-grid tw-grid-cols-3 tw-gap-6 tw-w-full handle",attrs:{type:"transition",value:t.drag?null:"flip-list"}},t._l(t.documents,(function(a,s){return e("div",{key:a.id,staticClass:"em-document-dropzone-card tw-cursor-grab",attrs:{id:"itemDoc"+a.id}},[e("button",{staticClass:"tw-float-right tw-bg-transparent",attrs:{type:"button"},on:{click:function(e){return t.deleteDoc(s,a.id)}}},[e("span",{staticClass:"material-icons-outlined"},[t._v("close")])]),e("div",{staticClass:"tw-flex tw-items-center tw-w-full tw-justify-center"},[e("div",{staticClass:"tw-flex tw-flex-col em-edit-cursor",on:{click:function(e){return t.editName(a)}}},["pdf"===a.ext?e("img",{staticClass:"em-filetype-icon",attrs:{src:"/media/com_emundus/images/icones/filetype/pdf.png",alt:"filetype"}}):["docx","doc","odf"].includes(a.ext)?e("img",{staticClass:"em-filetype-icon",attrs:{src:"/media/com_emundus/images/icones/filetype/doc.png",alt:"filetype"}}):["xls","xlsx","csv"].includes(a.ext)?e("img",{staticClass:"em-filetype-icon",attrs:{src:"/media/com_emundus/images/icones/filetype/excel.png",alt:"filetype"}}):["png","gif","jpg","jpeg"].includes(a.ext)?e("img",{staticClass:"em-filetype-icon",attrs:{src:"/media/com_emundus/images/icones/filetype/image.png",alt:"filetype"}}):["zip","rar"].includes(a.ext)?e("img",{staticClass:"em-filetype-icon",attrs:{src:"/media/com_emundus/images/icones/filetype/zip.png",alt:"filetype"}}):["svg"].includes(a.ext)?e("img",{staticClass:"em-filetype-icon",attrs:{src:"/media/com_emundus/images/icones/filetype/svg.png",alt:"filetype"}}):t._e(),e("div",{staticClass:"tw-mt-2"},[e("span",{staticClass:"em-overflow-ellipsis em-max-width-250 tw-mr-1"},[t._v(t._s(a.title))])])])]),e("hr"),e("div",[e("span",[e("strong",[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_FILE_SIZE"))+" : ")])]),e("span",[t._v(t._s(t.formatBytes(a.size)))])])])})),0)],1)],1),t.loading?e("div",{staticClass:"em-page-loader"}):t._e()])},Ye=[],Je=a("d9b7"),Ke=a.n(Je),We=a("ca98"),Xe=a.n(We);const Ze=a("bef5"),Qe=()=>'\n<div class="dz-preview dz-file-preview">\n  <div class="dz-image">\n    <div data-dz-thumbnail-bg></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark"><i class="fa fa-check"></i></div>\n  <div class="dz-error-mark"><i class="fa fa-close"></i></div>\n</div>\n';var ta={name:"addDocumentsDropfiles",components:{vueDropzone:Ke.a,draggable:Xe.a},props:{funnelCategorie:String,profileId:Number,campaignId:Number,langue:String,manyLanguages:Number},data(){return{dropzoneOptions:{url:window.location.origin+"/index.php?option=com_emundus&controller=settings&task=uploaddropfiledoc&cid="+this.campaignId,maxFilesize:10,maxFiles:1,autoProcessQueue:!0,addRemoveLinks:!0,thumbnailWidth:null,thumbnailHeight:null,acceptedFiles:"image/*,application/pdf,.doc,.csv,.xls,.xlsx,.docx,.odf,.zip",previewTemplate:Qe(),dictCancelUpload:this.translate("COM_EMUNDUS_ONBOARD_CANCEL_UPLOAD"),dictCancelUploadConfirmation:this.translate("COM_EMUNDUS_ONBOARD_CANCEL_UPLOAD_CONFIRMATION"),dictRemoveFile:this.translate("COM_EMUNDUS_ONBOARD_REMOVE_FILE"),dictInvalidFileType:this.translate("COM_EMUNDUS_ONBOARD_INVALID_FILE_TYPE"),dictFileTooBig:this.translate("COM_EMUNDUS_ONBOARD_FILE_TOO_BIG"),dictMaxFilesExceeded:this.translate("COM_EMUNDUS_ONBOARD_MAX_FILES_EXCEEDED"),uploadMultiple:!1},documents:[],Retour:this.translate("COM_EMUNDUS_ONBOARD_ADD_RETOUR"),Continuer:this.translate("COM_EMUNDUS_ONBOARD_ADD_CONTINUER"),DropHere:this.translate("COM_EMUNDUS_ONBOARD_DROP_FILE_HERE"),Error:this.translate("COM_EMUNDUS_ONBOARD_ERROR"),DocumentName:this.translate("COM_EMUNDUS_ONBOARD_DOCUMENT_NAME"),drag:!1,loading:!1}},methods:{getDocumentsDropfiles(){this.loading=!0,m()({method:"get",url:"index.php?option=com_emundus&controller=campaign&task=getdocumentsdropfiles",params:{cid:this.campaignId},paramsSerializer:t=>Ze.stringify(t)}).then(t=>{this.loading=!1,this.documents=t.data.documents})},updateDocumentsOrder(){this.documents.forEach((t,e)=>{t.ordering=e}),m()({method:"post",url:"index.php?option=com_emundus&controller=campaign&task=updateorderdropfiledocuments",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Ze.stringify({documents:this.documents})})},editName(t){$.a.fire({title:"",html:'<div class="form-group campaign-label"><label for="campLabel">'+this.DocumentName+'</label><input type="text" class="tw-mt-2" maxlength="200" id="label_'+t.id+'" value="'+t.title+'"/></div>',showCloseButton:!0,allowOutsideClick:!1,confirmButtonText:this.translate("COM_EMUNDUS_OK"),customClass:{title:"em-swal-title",confirmButton:"em-swal-confirm-button",actions:"em-swal-single-action",content:"text-start"}}).then(e=>{if(e){let e=document.getElementById("label_"+t.id).value;e.length>200&&(e=e.substring(0,200)),m()({method:"post",url:"index.php?option=com_emundus&controller=campaign&task=editdocumentdropfile",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Ze.stringify({did:t.id,name:e})}).then(()=>{t.title=e})}})},deleteDoc(t,e){this.documents.splice(t,1),m()({method:"post",url:"index.php?option=com_emundus&controller=campaign&task=deletedocumentdropfile",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Ze.stringify({did:e})})},formatBytes(t,e=2){if(0===t)return"0 Bytes";const a=1024,s=e<0?0:e,n=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],i=Math.floor(Math.log(t)/Math.log(a));return parseFloat((t/Math.pow(a,i)).toFixed(s))+" "+n[i]},afterAdded(){document.getElementById("dropzone-message").style.display="none"},afterRemoved(){0===this.$refs.dropzone.getAcceptedFiles().length&&(document.getElementById("dropzone-message").style.display="block")},onComplete:function(t){this.documents.push(JSON.parse(t.xhr.response)),this.$refs.dropzone.removeFile(t)},catchError:function(t,e){$.a.fire({title:this.translate("COM_EMUNDUS_ONBOARD_ERROR"),text:e,type:"error",showCancelButton:!1,showConfirmButton:!1,timer:3e3}),this.$refs.dropzone.removeFile(t)}},computed:{dragOptions(){return{animation:200,group:"description",disabled:!1,ghostClass:"ghost"}}},created(){this.getDocumentsDropfiles()}},ea=ta,aa=(a("ec3a"),Object(y["a"])(ea,Ve,Ye,!1,null,"aa9931f4",null)),sa=aa.exports,na=function(){var t=this,e=t._self._c;return e("div",[e("ModalAddTrigger",{key:"candidate"+t.candidate_trigger,attrs:{prog:this.prog,trigger:this.triggerSelected,triggerAction:"candidate"},on:{UpdateTriggers:t.getTriggers}}),e("ModalAddTrigger",{key:"manual-"+t.manual_trigger,attrs:{prog:this.prog,trigger:this.triggerSelected,triggerAction:"manual"},on:{UpdateTriggers:t.getTriggers}}),e("div",{staticClass:"tw-flex tw-items-center"},[e("h4",[t._v(t._s(t.CandidateAction))])]),e("p",[t._v(t._s(t.TheCandidateDescription))]),e("button",{staticClass:"em-primary-button tw-w-auto tw-mt-2",on:{click:function(e){t.$modal.show("modalAddTriggercandidate"),t.triggerSelected=null}}},[t._v(" "+t._s(t.addTrigger)+" ")]),e("transition-group",{staticClass:"em-grid-2 tw-m-4",staticStyle:{"margin-left":"0"},attrs:{name:"slide-down",type:"transition"}},t._l(t.candidateTriggers,(function(a){return e("div",{key:a.trigger_id,staticClass:"em-email-card"},[e("div",{staticClass:"tw-flex tw-items-center tw-items-start tw-justify-between tw-w-full"},[e("div",[e("span",{staticClass:"tw-mb-2"},[t._v(t._s(a.subject))]),e("div",{staticClass:"tw-mt-2 tw-mb-2"},[e("span",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(t.Target)+" : ")]),t._l(t.triggerUsersWithProfile(a),(function(s,n){return e("span",{key:"user_"+n},[t._v(" "+t._s(s.firstname)+" "+t._s(s.lastname)+" "),n!=Object.keys(a.users).length-1?e("span",[t._v(", ")]):t._e()])})),0==a.users.length&&5!=a.profile&&6!=a.profile?e("span",[t._v(t._s(t.TheCandidate))]):t._e(),5==a.profile?e("span",[t._v(t._s(t.Administrators))]):t._e(),6==a.profile?e("span",[t._v(t._s(t.Evaluators))]):t._e()],2),e("span",[t._v(t._s(t.Status)+" "+t._s(a.status))])]),e("div",{staticClass:"tw-flex tw-items-center em-flex-end"},[e("a",{staticClass:"tw-mr-2 tw-cursor-pointer",on:{click:function(e){return t.editTrigger(a)}}},[e("span",{staticClass:"material-icons-outlined"},[t._v("edit")])]),e("a",{staticClass:"tw-cursor-pointer",attrs:{title:t.removeTrig},on:{click:function(e){return t.removeTrigger(a.trigger_id)}}},[e("span",{staticClass:"material-icons-outlined tw-text-red-500"},[t._v("close")])])])])])})),0),e("div",{staticClass:"tw-flex tw-items-center"},[e("h4",{staticClass:"tw-mt-4"},[t._v(t._s(t.ManagerAction))])]),e("p",[t._v(t._s(t.ManualDescription))]),e("button",{staticClass:"em-primary-button tw-w-auto tw-mt-2",on:{click:function(e){t.$modal.show("modalAddTriggermanual"),t.triggerSelected=null}}},[t._v(" "+t._s(t.addTrigger)+" ")]),e("transition-group",{staticClass:"em-grid-2 tw-m-4",staticStyle:{"margin-left":"0"},attrs:{name:"slide-down",type:"transition"}},t._l(t.manualTriggers,(function(a){return e("div",{key:a.trigger_id,staticClass:"em-email-card"},[e("div",{staticClass:"tw-flex tw-items-center tw-items-start tw-justify-between tw-w-full"},[e("div",[e("span",{staticClass:"tw-mb-2"},[t._v(t._s(a.subject))]),e("div",{staticClass:"tw-mt-2 tw-mb-2"},[e("span",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(t.Target)+" : ")]),t._l(t.triggerUsersNoProfile(a),(function(s,n){return e("span",{key:"user_manual_"+n},[t._v(" "+t._s(s.firstname)+" "+t._s(s.lastname)+" "),n!=Object.keys(a.users).length-1?e("span",[t._v(", ")]):t._e()])})),0==a.users.length&&5!=a.profile&&6!=a.profile?e("span",[t._v(t._s(t.TheCandidate))]):t._e(),5==a.profile?e("span",[t._v(t._s(t.Administrators))]):t._e(),6==a.profile?e("span",[t._v(t._s(t.Evaluators))]):t._e()],2),e("p",[t._v(t._s(t.Status)+" "+t._s(a.status))])]),e("div",{staticClass:"tw-flex tw-items-center em-flex-end"},[e("a",{staticClass:"tw-cursor-pointer tw-mr-2",on:{click:function(e){return t.editTrigger(a)}}},[e("span",{staticClass:"material-icons-outlined"},[t._v("edit")])]),e("a",{staticClass:"tw-cursor-pointer",on:{click:function(e){return t.removeTrigger(a.trigger_id)}}},[e("span",{staticClass:"material-icons-outlined tw-text-red-500"},[t._v("close")])])])])])})),0),t.loading?e("div",{staticClass:"em-page-loader"}):t._e()],1)},ia=[],ra=function(){var t=this,e=t._self._c;return e("span",{attrs:{id:"modalAddTrigger"+t.triggerAction}},[e("modal",{attrs:{name:"modalAddTrigger"+t.triggerAction,height:"auto",transition:"nice-modal-fade","min-width":200,"min-height":200,delay:100,adaptive:!0,clickToClose:!1},on:{closed:t.beforeClose,"before-open":t.beforeOpen}},[e("ModalEmailPreview",{attrs:{model:this.form.model,models:this.models}}),e("div",{staticClass:"tw-flex tw-items-center tw-justify-between tw-mb-4"},[e("h4",[t._v(" "+t._s(t.addTrigger)+" ")]),e("button",{staticClass:"tw-cursor-pointer tw-bg-transparent",on:{click:function(e){return e.preventDefault(),t.$modal.hide("modalAddTrigger"+t.triggerAction)}}},[e("span",{staticClass:"material-icons-outlined"},[t._v("close")])])]),e("div",[e("div",{staticClass:"tw-mb-4"},[e("label",[t._v(t._s(t.Model)+"* :")]),e("div",{staticClass:"tw-flex tw-items-center"},[t.models.length>0?e("select",{directives:[{name:"model",rawName:"v-model",value:t.form.model,expression:"form.model"}],staticClass:"tw-w-full",class:{"is-invalid":t.errors.model},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.form,"model",e.target.multiple?a:a[0])}}},t._l(t.models,(function(a,s){return e("option",{key:s,domProps:{value:a.id}},[t._v(t._s(a.subject))])})),0):e("p",{staticClass:"tw-text-red-500"},[t._v(t._s(t.translate("COM_EMUNDUS_ADD_TRIGGER_MISSING_EMAIL_MODELS")))])]),t.errors.model?e("span",{staticClass:"tw-text-red-500 tw-mb-2"},[e("span",{staticClass:"tw-text-red-500"},[t._v(t._s(t.ModelRequired))])]):t._e()]),e("div",{staticClass:"tw-mb-4"},[e("label",[t._v(t._s(t.Status)+"* :")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.form.status,expression:"form.status"}],staticClass:"tw-w-full",class:{"is-invalid":t.errors.status},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.form,"status",e.target.multiple?a:a[0])}}},t._l(t.status,(function(a,s){return e("option",{key:s,domProps:{value:a.step}},[t._v(t._s(a.value))])})),0),t.errors.status?e("span",{staticClass:"tw-text-red-500 tw-mb-2"},[e("span",{staticClass:"tw-text-red-500"},[t._v(t._s(t.StatusRequired))])]):t._e()]),e("div",{staticClass:"tw-mb-4"},[e("label",[t._v(t._s(t.Target)+"* :")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.form.target,expression:"form.target"}],staticClass:"tw-w-full",class:{"is-invalid":t.errors.target},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.form,"target",e.target.multiple?a:a[0])}}},[e("option",{attrs:{value:"5"}},[t._v(t._s(t.Administrators))]),e("option",{attrs:{value:"6"}},[t._v(t._s(t.Evaluators))]),e("option",{attrs:{value:"1000"}},[t._v(t._s(t.Candidates))])]),t.errors.target?e("span",{staticClass:"tw-text-red-500 tw-mb-2"},[e("span",{staticClass:"tw-text-red-500"},[t._v(t._s(t.TargetRequired))])]):t._e()]),0==t.form.target?e("div",{staticClass:"tw-mb-4",staticStyle:{"align-items":"baseline"}},[e("label",[t._v(t._s(t.ChooseUsers)+"* :")]),e("div",{staticClass:"tw-flex tw-items-center"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchTerm,expression:"searchTerm"}],staticClass:"tw-w-full",attrs:{type:"text",placeholder:t.Search},domProps:{value:t.searchTerm},on:{keyup:t.searchUserByTerm,input:function(e){e.target.composing||(t.searchTerm=e.target.value)}}}),e("button",{staticClass:"tw-bg-transparent tw-ml-2",attrs:{type:"button"},on:{click:t.searchUserByTerm}},[e("span",{staticClass:"material-icons-outlined"},[t._v("search")])])]),e("div",{staticClass:"tw-flex tw-items-center"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.selectall,expression:"selectall"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.selectall)?t._i(t.selectall,null)>-1:t.selectall},on:{click:t.selectAllUsers,change:function(e){var a=t.selectall,s=e.target,n=!!s.checked;if(Array.isArray(a)){var i=null,r=t._i(a,i);s.checked?r<0&&(t.selectall=a.concat([i])):r>-1&&(t.selectall=a.slice(0,r).concat(a.slice(r+1)))}else t.selectall=n}}}),e("label",{staticClass:"tw-ml-2"},[t._v(" "+t._s(t.SelectAll)+" ")])]),e("div",{class:{"is-invalid":t.errors.selectedUsers}},t._l(t.users,(function(a,s){return e("div",{key:s},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedUsers[a.id],expression:"selectedUsers[user.id]"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.selectedUsers[a.id])?t._i(t.selectedUsers[a.id],null)>-1:t.selectedUsers[a.id]},on:{change:function(e){var s=t.selectedUsers[a.id],n=e.target,i=!!n.checked;if(Array.isArray(s)){var r=null,o=t._i(s,r);n.checked?o<0&&t.$set(t.selectedUsers,a.id,s.concat([r])):o>-1&&t.$set(t.selectedUsers,a.id,s.slice(0,o).concat(s.slice(o+1)))}else t.$set(t.selectedUsers,a.id,i)}}}),e("div",{staticClass:"tw-ml-2"},[e("p",[t._v(t._s(a.name))]),e("p",[t._v(t._s(a.email))])])])})),0),t.errors.selectedUsers?e("span",{staticClass:"tw-text-red-500 tw-mb-2"},[e("span",{staticClass:"tw-text-red-500"},[t._v(t._s(t.UsersRequired))])]):t._e()]):t._e()]),e("div",{staticClass:"tw-flex tw-items-center tw-justify-between tw-mb-2"},[e("button",{staticClass:"em-secondary-button !tw-w-auto",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.$modal.hide("modalAddTrigger"+t.triggerAction)}}},[t._v(t._s(t.Retour))]),e("button",{staticClass:"em-primary-button !tw-w-auto",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.createTrigger()}}},[t._v(t._s(t.Continuer))])])],1)],1)},oa=[],la=function(){var t=this,e=t._self._c;return e("span",{attrs:{id:"modalEmailPreview_"+t.model}},[e("modal",{attrs:{name:"modalEmailPreview_"+t.model,height:"auto",transition:"nice-modal-fade","min-width":200,"min-height":200,delay:100,adaptive:!0,clickToClose:!1},on:{"before-open":t.beforeOpen}},[e("div",{staticClass:"tw-flex tw-items-center tw-justify-between tw-mb-4"},[e("h4",[t._v(" "+t._s(t.ModelPreview)+" ")]),e("button",{staticClass:"tw-cursor-pointer tw-bg-transparent",on:{click:function(e){return e.preventDefault(),t.$modal.hide("modalEmailPreview_"+t.model)}}},[e("span",{staticClass:"material-icons-outlined"},[t._v("close")])])]),e("div",{staticClass:"tw-mb-4"},[null!=t.email?e("p",[e("span",{domProps:{innerHTML:t._s(t.email.message)}})]):t._e()])])],1)},ca=[];a("bef5");var ua={name:"modalEmailPreview",props:{model:String,models:Array},data(){return{email:null,ModelPreview:this.translate("COM_EMUNDUS_ONBOARD_EMAIL_PREVIEWMODEL")}},methods:{beforeOpen(){this.models.forEach(t=>{t.id==this.model&&(this.email=t)})}}},da=ua,pa=Object(y["a"])(da,la,ca,!1,null,"bde914a0",null),ma=pa.exports;const ha=a("bef5");var fa={name:"modalAddTrigger",components:{ModalEmailPreview:ma},props:{prog:Number,trigger:Number,triggerAction:String},data(){return{errors:{model:!1,status:!1,action_status:!1,target:!1,selectedUsers:!1},form:{model:-1,status:null,action_status:null,target:null,program:this.prog},users:[],selectedUsers:[],models:[],status:[],searchTerm:"",changes:!1,selectall:!1,addTrigger:this.translate("COM_EMUNDUS_ONBOARD_EMAIL_ADDTRIGGER"),Retour:this.translate("COM_EMUNDUS_ONBOARD_ADD_RETOUR"),Continuer:this.translate("COM_EMUNDUS_ONBOARD_ADD_CONTINUER"),Model:this.translate("COM_EMUNDUS_ONBOARD_TRIGGERMODEL"),ModelRequired:this.translate("COM_EMUNDUS_ONBOARD_TRIGGERMODEL_REQUIRED"),Status:this.translate("COM_EMUNDUS_ONBOARD_TRIGGERSTATUS"),StatusRequired:this.translate("COM_EMUNDUS_ONBOARD_TRIGGERSTATUS_REQUIRED"),Target:this.translate("COM_EMUNDUS_ONBOARD_TRIGGERTARGET"),TargetRequired:this.translate("COM_EMUNDUS_ONBOARD_TRIGGERTARGET_REQUIRED"),Administrators:this.translate("COM_EMUNDUS_ONBOARD_PROGRAM_ADMINISTRATORS"),Evaluators:this.translate("COM_EMUNDUS_ONBOARD_PROGRAM_EVALUATORS"),Candidates:this.translate("COM_EMUNDUS_ONBOARD_PROGRAM_CANDIDATES"),DefinedUsers:this.translate("COM_EMUNDUS_ONBOARD_PROGRAM_DEFINED_USERS"),ChooseUsers:this.translate("COM_EMUNDUS_ONBOARD_TRIGGER_CHOOSE_USERS"),UsersRequired:this.translate("COM_EMUNDUS_ONBOARD_TRIGGER_USERS_REQUIRED"),Search:this.translate("COM_EMUNDUS_ONBOARD_SEARCH_USERS"),ChangedActionStatus:this.translate("COM_EMUNDUS_ONBOARD_CHANGED_ACTION_STATUS"),TheCandidate:this.translate("COM_EMUNDUS_ONBOARD_THE_CANDIDATE"),Manual:this.translate("COM_EMUNDUS_ONBOARD_MANUAL"),SelectAll:this.translate("COM_EMUNDUS_ONBOARD_SELECT_ALL")}},methods:{beforeClose(t){this.trigger=null,this.form={model:-1,status:null,action_status:null,target:null,program:this.prog}},beforeOpen(t){this.searchTerm="",this.getUsers(),this.getEmailModels(),this.getStatus(),setTimeout(()=>{null!=this.trigger&&this.getTrigger()},200),"candidate"===this.triggerAction?this.form.action_status="to_current_user":this.form.action_status="to_applicant"},createTrigger(){return this.errors={model:!1,status:!1,action_status:!1,target:!1,selectedUsers:!1},-1===this.form.model?(this.errors.model=!0,0):null==this.form.status?(this.errors.status=!0,0):null==this.form.action_status?(this.errors.action_status=!0,0):null==this.form.target?(this.errors.target=!0,0):0==this.form.target&&0===this.selectedUsers.length?(this.errors.selectedUsers=!0,0):void(null!=this.trigger?m()({method:"post",url:"index.php?option=com_emundus&controller=email&task=updatetrigger",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:ha.stringify({tid:this.trigger,trigger:this.form,users:this.selectedUsers})}).then(t=>{this.selectedUsers=[],this.$emit("UpdateTriggers"),this.$modal.hide("modalAddTrigger"+this.triggerAction)}):m()({method:"post",url:"index.php?option=com_emundus&controller=email&task=createtrigger",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:ha.stringify({trigger:this.form,users:this.selectedUsers})}).then(t=>{this.selectedUsers=[],this.$emit("UpdateTriggers"),this.$modal.hide("modalAddTrigger"+this.triggerAction)}))},getUsers(){m.a.get("index.php?option=com_emundus&controller=programme&task=getuserswithoutapplicants").then(t=>{this.users=t.data.data})},searchUserByTerm(){m.a.get("index.php?option=com_emundus&controller=programme&task=searchuserbytermwithoutapplicants&term="+this.searchTerm).then(t=>{this.users=t.data.data})},getEmailModels(){m.a.get("index.php?option=com_emundus&controller=email&task=getallemail").then(t=>{t.data.status&&(this.models=t.data.data.datas)})},getStatus(){m.a.get("index.php?option=com_emundus&controller=email&task=getstatus").then(t=>{this.status=t.data.data})},getTrigger(){m.a.get("index.php?option=com_emundus&controller=email&task=gettriggerbyid&tid="+this.trigger).then(t=>{this.form.model=t.data.data.model,this.form.status=t.data.data.status,null==t.data.data.target&&0===t.data.data.to_current_user&&0===t.data.data.to_applicant?(this.form.target=0,t.data.data.users.forEach(t=>{this.selectedUsers[t.user_id]=!0})):5!=t.data.data.target&&6!=t.data.data.target||1===t.data.data.to_current_user?this.form.target=1e3:this.form.target=t.data.data.target})},selectAllUsers(){this.users.forEach(t=>{this.selectall?this.selectedUsers[t.id]=!1:this.selectedUsers[t.id]=!0}),this.$forceUpdate()}}},_a=fa,ga=(a("d622"),Object(y["a"])(_a,ra,oa,!1,null,"7a9873f0",null)),va=ga.exports;const ya=a("bef5");var ba={name:"addEmail",components:{ModalAddTrigger:va},props:{funnelCategorie:String,prog:Number},data(){return{triggers:[],triggerSelected:null,manual_trigger:0,candidate_trigger:0,loading:!1,addTrigger:this.translate("COM_EMUNDUS_ONBOARD_EMAIL_ADDTRIGGER"),removeTrig:this.translate("COM_EMUNDUS_ONBOARD_EMAIL_REMOVETRIGGER"),affectTriggers:this.translate("COM_EMUNDUS_ONBOARD_EMAIL_AFFECTTRIGGERS"),ChooseEmailTrigger:this.translate("COM_EMUNDUS_ONBOARD_CHOOSE_EMAIL_TRIGGER"),Target:this.translate("COM_EMUNDUS_ONBOARD_TRIGGERTARGET"),Status:this.translate("COM_EMUNDUS_ONBOARD_TRIGGERSTATUS"),Administrators:this.translate("COM_EMUNDUS_ONBOARD_PROGRAM_ADMINISTRATORS"),Evaluators:this.translate("COM_EMUNDUS_ONBOARD_PROGRAM_EVALUATORS"),TheCandidate:this.translate("COM_EMUNDUS_ONBOARD_THE_CANDIDATE"),Manual:this.translate("COM_EMUNDUS_ONBOARD_MANUAL"),TheCandidateDescription:this.translate("COM_EMUNDUS_ONBOARD_THE_CANDIDATE_DESCRIPTION"),ManualDescription:this.translate("COM_EMUNDUS_ONBOARD_MANUAL_DESCRIPTION"),CandidateAction:this.translate("COM_EMUNDUS_ONBOARD_CANDIDATE_ACTION"),ManagerAction:this.translate("COM_EMUNDUS_ONBOARD_MANAGER_ACTION")}},methods:{editTrigger(t){this.triggerSelected=t.trigger_id,this.manual_trigger+=1,this.candidate_trigger+=1,setTimeout(()=>{1==t.candidate?this.$modal.show("modalAddTriggercandidate"):this.$modal.show("modalAddTriggermanual")},500)},removeTrigger(t){m()({method:"post",url:"index.php?option=com_emundus&controller=email&task=removetrigger",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:ya.stringify({tid:t})}).then(()=>{this.getTriggers()})},getTriggers(){m.a.get("index.php?option=com_emundus&controller=email&task=gettriggersbyprogram&pid="+this.prog).then(t=>{this.triggers=t.data.data,this.loading=!1})},triggerUsersWithProfile(t){return null!==t.profile?t.users:[]},triggerUsersNoProfile(t){return null===t.profile&&t.users.length>0?t.users:[]}},computed:{candidateTriggers(){return this.triggers.filter(t=>1==t.candidate)},manualTriggers(){return this.triggers.filter(t=>1==t.manual)}},created(){this.loading=!0,this.getTriggers()}},wa=ba,Oa=(a("832a"),Object(y["a"])(wa,na,ia,!1,null,"5d5add86",null)),Ea=Oa.exports,Ca=function(){var t=this,e=t._self._c;return e("div",[e("a",{staticClass:"tw-cursor-pointer em-profile-color em-text-underline",on:{click:t.addNewForm}},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_NO_FORM_FOUND_ADD_FORM")))]),e("div",{staticClass:"tw-mb-1 tw-mt-4 em-text-color"},[t._v(t._s(t.ChooseForm)+" :")]),e("div",{staticClass:"tw-mb-1"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.$props.profileId,expression:"$props.profileId"}],attrs:{id:"select_profile"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.$props,"profileId",e.target.multiple?a:a[0])},t.updateProfileCampaign]}},t._l(t.profiles,(function(a,s){return e("option",{key:s,domProps:{value:a.id}},[t._v(" "+t._s(a.form_label)+" ")])})),0)]),e("a",{staticClass:"tw-cursor-pointer em-profile-color em-text-underline",on:{click:t.formbuilder}},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_EDIT_FORM")))]),e("hr"),e("h5",[t._v(t._s(t.translate("COM_EMUNDUS_FORM_PAGES_PREVIEW")))]),e("div",{staticClass:"tw-flex tw-items-center em-flex-wrap"},t._l(t.fabrikFormList,(function(t){return e("div",{key:t.id,staticClass:"card-wrapper em-mr-32",attrs:{title:t.label}},[e("form-builder-preview-form",{staticClass:"card em-shadow-cards model-preview",attrs:{form_id:Number(t.id),form_label:t.label}})],1)})),0),t.documentsList.length>0?e("div",[e("h5",{staticClass:"em-mt-12"},[t._v(t._s(t.translate("COM_EMUNDUS_FORM_ATTACHMENTS_PREVIEW")))]),e("div",{staticClass:"tw-flex tw-items-center"},t._l(t.documentsList,(function(t){return e("div",{key:t.id,staticClass:"card-wrapper em-mr-32",attrs:{title:t.label}},[e("form-builder-preview-attachments",{staticClass:"card em-shadow-cards model-preview",attrs:{document_id:Number(t.id),document_label:t.label}})],1)})),0)]):t._e(),t.loading?e("div",{staticClass:"em-page-loader"}):t._e()])},Na=[],Sa=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"tw-flex tw-items-center tw-justify-between tw-items-start"},[e("div",{staticClass:"tw-w-full"},[t.formLinkArray[t.indexHighlight]?e("FormViewer",{attrs:{link:t.formLinkArray[t.indexHighlight],visibility:this.visibility},on:{editPage:t.EditPage}}):t._e()],1),e("hr",{staticClass:"vertical-divider"}),e("div",{staticClass:"tw-flex tw-flex-col tw-items-start tw-mt-12"},[e("div",{staticClass:"tw-mb-4"},[e("h4",[e("span",{staticClass:"material-icons-outlined"},[t._v("article")]),t._v(" "+t._s(t.Form)+" ")]),t._l(t.formNameArray,(function(a,s){return e("div",{key:s,staticClass:"MenuForm tw-mb-2"},[e("a",{staticClass:"tw-cursor-pointer tw-text-neutral-900",class:t.indexHighlight==s?"MenuFormItem_current":"",domProps:{innerHTML:t._s(a.value)},on:{click:function(e){return t.ChangeIndex(s)}}},[t._v(t._s(a.value))])])}))],2),e("div",[e("h4",[e("span",{staticClass:"material-icons-outlined"},[t._v("folder")]),t._v(" "+t._s(t.Documents)+" ")]),t._l(t.documentsList,(function(a,s){return e("div",{key:s,staticClass:"MenuForm tw-mb-2"},[e("p",{staticClass:"tw-text-neutral-900"},[t._v(t._s(a.label))])])}))],2)])])])},Aa=[],Da=function(){var t=this,e=t._self._c;return e("div",{staticClass:"tw-mt-4 applicant-form",attrs:{id:"FormViewer"}},[t.object_json.show_page_heading?e("div",{class:t.object_json.show_page_heading.class,domProps:{innerHTML:t._s(t.object_json.show_page_heading.page_heading)}}):t._e(),e("div",{staticClass:"tw-flex tw-items-center tw-justify-between page-header"},[t.object_json.show_title?e("h1",{staticClass:"!tw-mt-0",domProps:{innerHTML:t._s(t.object_json.show_title.value)}}):t._e()]),t.object_json.intro_value?e("p",{staticClass:"tw-mt-4",domProps:{innerHTML:t._s(t.object_json.intro_value)}}):t._e(),e("form",{staticClass:"fabrikForm",attrs:{method:"post","object_json.attribs":"",id:"form_"+t.object_json.id}},[t.object_json.plugintop?e("div",{domProps:{innerHTML:t._s(t.object_json.plugintop)}}):t._e(),t._l(t.object_json.Groups,(function(a){return e("fieldset",{key:a.index,staticClass:"fabrikGroup",class:a.group_class,style:a.group_css,attrs:{id:"group"+a.group_id}},[a.group_showLegend?e("legend",{staticClass:"legend"},[t._v(" "+t._s(a.group_showLegend)+" ")]):t._e(),a.group_intro?e("div",{domProps:{innerHTML:t._s(a.group_intro)}}):t._e(),t._l(a.elements,(function(a){return e("div",{directives:[{name:"show",rawName:"v-show",value:!1===a.hidden,expression:"element.hidden === false"}],key:a.index,staticClass:"row-fluid",class:{unpublished:!a.publish}},[e("div",{staticClass:"control-group fabrikElementContainer span12",class:"plg-"+a.plugin},[e("span",{domProps:{innerHTML:t._s(a.label_value)}}),a.params.date_table_format?e("div",[e("date-picker",{attrs:{config:t.options},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1):0==a.labelsAbove?e("div",{staticClass:"controls"},[a.element?e("div",{class:a.errorClass,domProps:{innerHTML:t._s(a.element)}}):t._e(),a.tipSide?e("span",{domProps:{innerHTML:t._s(a.tipSide)}}):t._e()]):e("div",{staticClass:"fabrikElement",class:a.errorClass,domProps:{innerHTML:t._s(a.element)}}),a.tipSide?e("span",{domProps:{innerHTML:t._s(a.tipSide)}}):t._e(),a.tipBelow?e("span",{domProps:{innerHTML:t._s(a.tipBelow)}}):t._e()])])})),a.group_outro?e("div",{staticClass:"groupoutro",domProps:{innerHTML:t._s(t.group_outro)}}):t._e()],2)})),t.object_json.pluginbottom?e("div",{domProps:{innerHTML:t._s(t.object_json.pluginbottom)}}):t._e()],2),t.submitted?e("div",{staticClass:"em-page-loader"}):t._e()])},Ma=[],xa=a("f6f6"),Ta=a.n(xa),Ua=a("daef"),ka=a.n(Ua);const Ra=a("bef5");var La={name:"FormViewer",props:{link:{type:Object,default:{link:""}},visibility:Number},components:{datePicker:ka.a},data(){return{object_json:"",date:new Date,submitted:!1,options:{format:"DD/MM/YYYY",useCurrent:!1}}},methods:{splitProfileIdfromLabel(t){return t.split(/-(.+)/)[1]},formbuilder(){this.$emit("editPage")},getDataObject:Ta.a.debounce((function(){this.submitted=!0;let t=this.link.link.replace("fabrik","emundus");m.a.get(t+"&format=vue_jsonclean").then(t=>{this.object_json=t.data,null!=this.visibility&&m()({method:"get",url:"index.php?option=com_emundus&controller=formbuilder&task=checkconstraintgroup",params:{cid:this.visibility},paramsSerializer:t=>Ra.stringify(t)}).then(t=>{Object.keys(this.object_json.Groups).forEach(e=>{null!=t.data.data?m()({method:"get",url:"index.php?option=com_emundus&controller=formbuilder&task=checkvisibility",params:{group:this.object_json.Groups[e]["group_id"],cid:this.visibility},paramsSerializer:t=>Ra.stringify(t)}).then(t=>{parseInt(t.data.data)>0?this.object_json.Groups[e].visibility=!0:this.object_json.Groups[e].visibility=!1}):this.object_json.Groups[e].visibility=!0}),this.$forceUpdate()}),this.submitted=!1}).catch(t=>{console.log(t)})}),150),updateVisibility(t){this.object_json.Groups["group_"+t]["visibility"]=!this.object_json.Groups["group_"+t]["visibility"],m()({method:"post",url:"index.php?option=com_emundus&controller=programme&task=updatevisibility",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Ra.stringify({visibility:this.object_json.Groups["group_"+t]["visibility"],gid:t,cid:this.visibility})}).then(t=>{this.$forceUpdate()})}},created(){this.getDataObject()},watch:{link:function(){this.getDataObject()}}},Ia=La,Pa=(a("2b0c"),Object(y["a"])(Ia,Da,Ma,!1,null,"c07e04e6",null)),Ba=Pa.exports,ja=(a("2051"),{name:"FormCarrousel",props:{formList:Array,documentsList:Array,visibility:Number},components:{FormViewer:Ba},data(){return{indexHighlight:"0",formNameArray:[],formLinkArray:[],formArray:[],FormPage:this.translate("COM_EMUNDUS_ONBOARD_FORM_PAGE"),Form:this.translate("COM_EMUNDUS_ONBOARD_FORM"),Documents:this.translate("COM_EMUNDUS_ONBOARD_DOCUMENTS")}},methods:{splitProfileIdfromLabel(t){return t.split(/-(.+)/)[1]},ChangeIndex(t){this.indexHighlight=t},EditPage(){this.$emit("formbuilder",this.indexHighlight)},getDataObject:function(){this.formList.forEach(t=>{let e=t.link.replace("fabrik","emundus");m.a.get(e+"&format=vue_jsonclean").then(e=>{this.formNameArray.push({value:e.data.show_title.value,rgt:t.rgt}),this.formLinkArray.push({link:t.link,rgt:t.rgt})}).then(t=>{this.formNameArray.sort((t,e)=>t.rgt-e.rgt),this.formLinkArray.sort((t,e)=>t.rgt-e.rgt)}).catch(t=>{console.log(t)})})}},created(){this.getDataObject()}}),Fa=ja,qa=(a("cdba"),Object(y["a"])(Fa,Sa,Aa,!1,null,"04e5cd7e",null)),$a=qa.exports,Ha=function(){var t=this,e=t._self._c;return e("div",{staticClass:"tw-h-full tw-w-full",class:{loading:t.loading},attrs:{id:"form-builder-preview-form"}},[t.loading?e("skeleton",{attrs:{height:"100%",width:"100%"}}):e("div",[e("p",{staticClass:"tw-text-xs tw-w-full tw-text-end tw-mb-4"},[t._v(t._s(t.form_label))]),e("div",{staticClass:"preview-groups tw-flex tw-flex-col"},t._l(t.formData.groups,(function(a,s){return e("section",{key:a.id,staticClass:"tw-mb-2 form-builder-page-section"},[e("div",{staticClass:"section-card tw-flex tw-flex-col"},[e("div",{staticClass:"section-identifier tw-bg-main-500 tw-flex tw-items-center"},[e("span",{staticClass:"text-xxs"},[t._v(t._s(t.translate("COM_EMUNDUS_FORM_BUILDER_SECTION"))+" "+t._s(s+1)+" / "+t._s(t.formData.groups.length))])]),e("div",{staticClass:"section-content tw-w-full"},[e("p",{staticClass:"tw-text-xxs tw-w-full tw-text-end"},[t._v(t._s(a.label.replace("Model - ","")))])])])])})),0)])],1)},Ga=[];const za="index.php?option=com_emundus&controller=form";var Va={async updateFormLabel(t){const e=new FormData;Object.keys(t).forEach(a=>e.append(a,t[a]));try{const t=await f().post(za+"&task=updateformlabel",e);return t}catch(a){return{status:!1,error:a}}},async getFilesByForm(t){try{const e=await f().get(za+"&task=getfilesbyform&pid="+t);return e}catch(e){return{status:!1,error:e}}},async getSubmissionPage(t){try{const e=await f().get(za+"&task=getsubmittionpage",{params:{prid:t}});return e}catch(e){return{status:!1,error:e}}},async getFormsByProfileId(t){try{const e=await f().get(za+"&task=getFormsByProfileId",{params:{profile_id:t}});return e}catch(e){return{status:!1,error:e}}},async getFormByFabrikId(t){try{const e=await f().get(za+"&task=getFormByFabrikId",{params:{form_id:t}});return e}catch(e){return{status:!1,error:e}}},async getProfileLabelByProfileId(t){const e=new FormData;e.append("profile_id",t);try{const t=await f().post(za+"&task=getProfileLabelByProfileId",e);return t}catch(a){return{status:!1,error:a}}},async getDocuments(t){if(!(t>0))return{status:!1,msg:"Missing parameter"};try{const e=await f().get(za+"&task=getDocuments",{params:{pid:t}});return e.data}catch(e){return{status:!1,msg:e}}},async getDocumentModels(t=null){try{let e={status:!1};const a=await f().get(za+"&task=getAttachments");if(a.data.status)if(null!==t){const s=a.data.data.filter(e=>e.id===t);e=s.length>0?{status:!0,data:s[0]}:{status:!1,error:"Document not found"}}else e=a.data;return e}catch(e){return{status:!1,error:e}}},async getDocumentModelsUsage(t){const e=new FormData;e.append("documentIds",t);try{const t=await f().post(za+"&task=getdocumentsusage",e);return t.data}catch(a){return{status:!1,error:a}}},async getPageGroups(t){if(!("number"==typeof t&&t>0))return{status:!1,msg:"MISSING_PARAMS"};try{const e=await f().get(za+"&task=getpagegroups&form_id="+t);return e.data}catch(e){return{status:!1,error:e}}},async reorderDocuments(t){try{const e=new FormData;e.append("documents",JSON.stringify(t));const a=await f().post(za+"&task=reorderDocuments",e);return a}catch(e){return{status:!1,error:e}}},async addDocument(t){const e=new FormData;Object.keys(t).forEach(a=>e.append(a,t[a]));try{const t=await f().post(za+"&task=addDocument",e);return t}catch(a){return{status:!1,error:a}}},async getAssociatedCampaigns(t){try{const e=f().get(za+"&task=getassociatedcampaign",{params:{pid:t}});return e}catch(e){return{status:!1,error:e}}},async removeDocumentFromProfile(t){try{const e=await f().get(za+"&task=removeDocumentFromProfile",{params:{did:t}});return e}catch(e){return{status:!1,error:e}}},async getPageObject(t){try{const e=await f().get("index.php?option=com_emundus&view=form&formid="+t+"&format=vue_jsonclean");if("object"!==typeof e.data)throw"COM_EMUNDUS_FORM_BUILDER_FAILED_TO_LOAD_FORM";return e}catch(e){return{status:!1,msg:e}}},async checkIfDocumentCanBeDeletedForProfile(t,e){try{const a=await f().get(za+"&task=checkcandocbedeleted&docid="+t+"&prid="+e);return a.data}catch(a){return{status:!1,error:a}}}},Ya={name:"FormBuilderPreviewForm",components:{Skeleton:Ct},props:{form_id:{type:Number,required:!0},form_label:{type:String,default:""}},data(){return{loading:!0,formData:{}}},created(){Va.getPageGroups(this.form_id).then(t=>{t.status&&(t.data.groups=t.data.groups.filter(t=>1===Number(t.published)),this.formData=t.data),this.loading=!1})},methods:{}},Ja=Ya,Ka=(a("87d6"),Object(y["a"])(Ja,Ha,Ga,!1,null,null,null)),Wa=Ka.exports,Xa=function(){var t=this,e=t._self._c;return e("div",{staticClass:"tw-h-full tw-w-full",class:{loading:t.loading},attrs:{id:"form-builder-preview-attachment"}},[t.loading?e("skeleton",{attrs:{height:"100%",width:"100%"}}):e("div",{staticClass:"tw-text-center"},[e("img",{staticClass:"em-m-center",staticStyle:{width:"50px"},attrs:{src:"/media/com_emundus/images/icones/filetype/doc.png",alt:"filetype"}}),e("p",{staticClass:"tw-text-xs tw-w-full tw-mt-4"},[t._v(t._s(t.document_label))])])],1)},Za=[],Qa={name:"FormBuilderPreviewAttachments",components:{Skeleton:Ct},props:{document_id:{type:Number,required:!0},document_label:{type:String,default:""}},data(){return{loading:!1}},created(){},methods:{}},ts=Qa,es=(a("bd94"),Object(y["a"])(ts,Xa,Za,!1,null,null,null)),as=es.exports;const ss=a("bef5");var ns={name:"addFormulaire",props:{profileId:String,campaignId:Number,profiles:Array,formulaireEmundus:Number,visibility:Number},components:{FormBuilderPreviewAttachments:as,FormBuilderPreviewForm:Wa,FormCarrousel:$a},data(){return{ChooseForm:this.translate("COM_EMUNDUS_ONBOARD_CHOOSE_FORM"),AddForm:this.translate("COM_EMUNDUS_ONBOARD_ADD_FORM"),EmitIndex:"0",formList:[],documentsList:[],loading:!1,form:{label:"Nouveau formulaire",description:"",published:1},formdescription:this.translate("COM_EMUNDUS_ONBOARD_FORMDESCRIPTION")}},created(){this.getForms(this.profileId),this.getDocuments(this.profileId)},methods:{getEmitIndex(t){this.EmitIndex=t},getForms(t){this.loading=!0,m()({method:"get",url:"index.php?option=com_emundus&controller=form&task=getFormsByProfileId",params:{profile_id:t},paramsSerializer:t=>ss.stringify(t)}).then(t=>{this.formList=t.data.data,this.loading=!1}).catch(t=>{console.log(t)})},getDocuments(t){m()({method:"get",url:"index.php?option=com_emundus&controller=form&task=getDocuments",params:{pid:t},paramsSerializer:t=>ss.stringify(t)}).then(t=>{this.documentsList=t.data.data})},redirectJRoute(t){Tt.redirectJRoute(t)},addNewForm(){this.loading=!0,m()({method:"post",url:"index.php?option=com_emundus&controller=form&task=createform",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:ss.stringify({body:this.form})}).then(t=>{this.loading=!1,this.$props.profileId=t.data.data,window.location.href="/"+t.data.redirect}).catch(t=>{console.log(t)})},updateProfileCampaign(){m()({method:"post",url:"index.php?option=com_emundus&controller=campaign&task=updateprofile",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:ss.stringify({profile:this.profileId,campaign:this.campaignId})}).then(()=>{this.getForms(this.profileId),this.getDocuments(this.profileId),this.$emit("profileId",this.profileId)})},formbuilder(t){t=0,this.redirectJRoute("index.php?option=com_emundus&view=form&layout=formbuilder&prid="+this.profileId+"&index="+t+"&cid="+this.campaignId)}},computed:{fabrikFormList(){return this.formList.filter(t=>t.link.includes("fabrik"))}}},is=ns,rs=(a("937d"),Object(y["a"])(is,Ca,Na,!1,null,"43b3f720",null)),os=rs.exports,ls=function(){var t=this,e=t._self._c;return e("div",[t.formUrl.length>0?e("iframe",{attrs:{id:"more-form-iframe",src:t.formUrl,width:"100%"}}):t._e()])},cs=[],us={name:"CampaignMore",props:{campaignId:{type:Number,required:!0},defaultFormUrl:{type:String,required:!1,default:""}},data(){return{formUrl:""}},created(){this.defaultFormUrl.length>0?this.formUrl=this.defaultFormUrl:this.getFormUrl()},methods:{getFormUrl(){Zt.getCampaignMoreFormUrl(this.campaignId).then(t=>{t.status&&(this.formUrl=t.data)}).catch(t=>{console.error(t)})}}},ds=us,ps=(a("af58"),Object(y["a"])(ds,ls,cs,!1,null,"82b80bee",null)),ms=ps.exports;const hs=a("bef5");var fs={name:"CampaignEdition",components:{AddDocumentsDropfiles:sa,addCampaign:Ce,ModalWarningFormBuilder:ze,addFormulaire:os,addEmail:Ea,campaignMore:ms},props:{index:Number},mixins:[A],data:()=>({campaignId:0,actualLanguage:"",manyLanguages:0,prid:"",menus:[{label:"COM_EMUNDUS_GLOBAL_INFORMATIONS",description:"COM_EMUNDUS_GLOBAL_INFORMATIONS_DESC",icon:"info",component:"addCampaign",displayed:!0},{label:"COM_EMUNDUS_CAMPAIGN_MORE",description:"COM_EMUNDUS_CAMPAIGN_MORE_DESC",icon:"description",component:"campaignMore",displayed:!1},{label:"COM_EMUNDUS_DOCUMENTS_CAMPAIGNS",description:"COM_EMUNDUS_DOCUMENTS_CAMPAIGNS_DESC",icon:"description",component:"addDocumentsDropfiles",displayed:!0},{label:"COM_EMUNDUS_FORM_CAMPAIGN",description:"COM_EMUNDUS_FORM_CAMPAIGN_DESC",icon:"description",component:"addFormulaire",displayed:!0},{label:"COM_EMUNDUS_EMAILS",description:"COM_EMUNDUS_EMAILS_DESC",icon:"description",component:"addEmail",displayed:!0}],selectedMenu:"addCampaign",formReload:0,prog:0,loading:!1,closeSubmenu:!0,profileId:null,profiles:[],campaignsByProgram:[],form:{},campaignMoreFormUrl:"",program:{id:0,code:"",label:"",notes:"",programmes:[],tmpl_badge:"",published:0,apply_online:0,synthesis:"",tmpl_trombinoscope:""}}),created(){this.campaignId=parseInt(this.$store.getters["global/datas"].campaignId.value),this.actualLanguage=this.$store.getters["global/shortLang"],this.manyLanguages=parseInt(this.$store.getters["global/manyLanguages"]),this.getCampaignMoreForm(),this.getProgram(),"en"===this.actualLanguage&&(this.langue=1)},methods:{getCampaignMoreForm(){Zt.getCampaignMoreFormUrl(this.campaignId).then(t=>{t.status&&t.data.length>0&&(this.menus.forEach(t=>{"campaignMore"===t.component&&(t.displayed=!0)}),this.campaignMoreFormUrl=t.data)}).catch(t=>{console.error(t)})},initInformations(t){this.form.label=t.label,this.form.profile_id=t.profile_id,this.form.program_id=t.progid,this.initDates(t),m.a.get("index.php?option=com_emundus&controller=form&task=getallformpublished").then(t=>{this.profiles=t.data.data,null==this.form.profile_id?(0!=this.profiles.length?this.profileId=this.profiles[0].id:this.profileId=null,null!=this.profileId&&(this.formReload+=1)):(this.formReload+=1,this.profileId=this.form.profile_id),this.loading=!1;let e=this.getCookie("campaign_"+this.campaignId+"_menu");e&&(this.menuHighlight=e,document.cookie="campaign_"+this.campaignId+"_menu =; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;")})},updateHeader(t){this.form.label=t.label[this.actualLanguage],this.initDates(t)},initDates(t){this.form.start_date=t.start_date,this.form.end_date=t.end_date;let e=this.$store.getters["global/currentLanguage"];""!==e&&void 0!==e||(e="fr-FR");const a={dateStyle:"long",timeStyle:"short"},s=new Date(t.start_date);if(this.form.start_date=new Intl.DateTimeFormat(e,a).format(s),"0000-00-00 00:00:00"===this.form.end_date)this.form.end_date=null;else{const s=new Date(t.end_date);this.form.end_date=new Intl.DateTimeFormat(e,a).format(s)}},getProgram(){m.a.get("/index.php?option=com_emundus&controller=campaign&task=getProgrammeByCampaignID&campaign_id="+this.campaignId).then(t=>{this.program=t.data.data,m()({method:"get",url:"index.php?option=com_emundus&controller=programme&task=getcampaignsbyprogram",params:{pid:this.program.id},paramsSerializer:t=>hs.stringify(t)}).then(t=>{this.campaignsByProgram=t.data.campaigns})}).catch(t=>{})},selectMenu(t){this.selectedMenu=t.component},setProfileId(t){this.profileId=t},next(){let t=this.displayedMenus.findIndex(t=>t.component===this.selectedMenu);t<this.displayedMenus.length-1&&(this.selectedMenu=this.displayedMenus[t+1].component)},previous(){let t=this.displayedMenus.findIndex(t=>t.component===this.selectedMenu);t>0&&(this.selectedMenu=this.displayedMenus[t-1].component)},redirectJRoute(t){Tt.redirectJRoute(t)},getCookie(t){var e=t+"=",a=decodeURIComponent(document.cookie),s=a.split(";");for(let n of s){while(" "==n.charAt(0))n=n.substring(1);if(0==n.indexOf(e))return n.substring(e.length,n.length)}return""}},computed:{getProfileId(){return Number(this.profileId)},selectedMenuItem(){return this.menus.find(t=>t.component===this.selectedMenu)},displayedMenus(){return this.menus.filter(t=>t.displayed)}}},_s=fs,gs=(a("7b96"),Object(y["a"])(_s,Be,je,!1,null,"feae5d0a",null)),vs=gs.exports,ys=function(){var t=this,e=t._self._c;return e("div",{staticClass:"tw-w-full tw-h-full",attrs:{id:"formBuilder"}},[e("modal",{attrs:{name:"formBuilder",height:"auto",transition:"fade",delay:100,adaptive:!0,clickToClose:!1}},[e("notifications",{attrs:{group:"foo-velocity","animation-type":"velocity",speed:500,position:"bottom left",classes:"vue-notification-custom"}}),e("header",{staticClass:"tw-flex tw-items-center tw-justify-between"},[e("div",{staticClass:"right-actions tw-px-3 tw-py-4 tw-flex tw-items-center tw-cursor-pointer",on:{click:t.clickGoBack}},[e("span",{staticClass:"material-icons-outlined",attrs:{id:"go-back"}},[t._v(" navigate_before ")]),e("span",{staticClass:"tw-ml-2 tw-text-neutral-900"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_ADD_RETOUR")))])]),e("span",{ref:"formTitle",staticClass:"tw-text-sm tw-font-semibold editable-data",attrs:{contenteditable:"true"},on:{focusout:t.updateFormTitle,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.updateFormTitleKeyup.apply(null,arguments)}}},[t._v(" "+t._s(t.title)+" ")]),e("div",{staticClass:"left-actions tw-flex tw-items-center tw-justify-between tw-px-3 tw-py-4"},[t.lastSave?e("p",{staticClass:"tw-text-sm tw-text-main-500",attrs:{id:"saved-at"}},[t._v(" "+t._s(t.translate("COM_EMUNDUS_FORM_BUILDER_SAVED_AT"))+" "+t._s(t.lastSave)+" ")]):t._e()])]),"default"===t.principalContainer?e("div",{staticClass:"body tw-flex tw-items-center tw-justify-between"},[e("aside",{staticClass:"left-panel tw-flex tw-justify-start tw-h-full tw-relative"},[e("div",{staticClass:"tabs tw-flex tw-flex-col tw-justify-start tw-h-full"},t._l(t.displayedLeftPanels,(function(a,s){return e("div",{key:t.title+"_"+s,staticClass:"tab",class:{active:a.active}},[e("span",{staticClass:"material-icons-outlined tw-p-4",on:{click:function(e){a.url?t.goTo(a.url,"blank"):t.selectTab(a.title)}}},[t._v(" "+t._s(a.icon)+" ")])])})),0),e("div",{staticClass:"tab-content tw-justify-start tw-transition-all tw-duration-300",class:!0===t.minimizedLeft?"tw-max-w-0":"tw-max-w-md",on:{mouseover:function(e){t.showMinimizedLeft=!0},mouseleave:function(e){t.showMinimizedLeft=!1}}},[e("div",{},["Elements"===t.leftPanelActiveTab?e("form-builder-elements",{attrs:{form:t.currentPage},on:{"element-created":t.onElementCreated,"create-element-lastgroup":t.createElementLastGroup}}):"Documents"===t.leftPanelActiveTab?e("form-builder-document-formats",{attrs:{profile_id:t.profile_id},on:{"open-create-document":t.onEditDocument}}):t._e()],1)]),e("div",{staticClass:"tw-w-[16px]",on:{mouseover:function(e){t.showMinimizedLeft=!0},mouseleave:function(e){t.showMinimizedLeft=!1}}},[e("span",{directives:[{name:"show",rawName:"v-show",value:!0===t.showMinimizedLeft||t.minimizedLeft,expression:"showMinimizedLeft === true || minimizedLeft"}],staticClass:"material-icons-outlined tw-absolute tw-right-[-12px] tw-top-[14px] !tw-text-xl/5 tw-bg-neutral-400 tw-rounded-full tw-cursor-pointer",class:t.minimizedLeft?"tw-rotate-180":"",on:{click:function(e){return t.handleSidebarSize("left")}}},[t._v("chevron_left")])])]),e("section",{staticClass:"tw-flex tw-flex-col tw-w-full tw-h-full",attrs:{id:"center_content"}},[e("transition",{attrs:{name:"fade",mode:"out-in"}},[t.currentPage&&"page"===t.showInSection?e("form-builder-page",{key:t.currentPage.id,ref:"formBuilderPage",attrs:{profile_id:parseInt(t.profile_id),page:t.currentPage,mode:t.mode},on:{"open-element-properties":t.onOpenElementProperties,"open-section-properties":t.onOpenSectionProperties,"open-create-model":t.onOpenCreateModel,"update-page-title":function(e){return t.getPages(t.currentPage.id)}}}):"documents"===t.showInSection?e("form-builder-document-list",{ref:"formBuilderDocumentList",attrs:{profile_id:parseInt(t.profile_id),campaign_id:parseInt(t.campaign_id)},on:{"add-document":t.onOpenCreateDocument,"edit-document":t.onEditDocument,"delete-document":t.onDeleteDocument}}):t._e()],1)],1),e("transition",{attrs:{name:"slide-fade",mode:"out-in"}},[t.rightPanel.tabs.includes(t.showInRightPanel)?e("aside",{staticClass:"right-panel tw-h-full tw-flex tw-flex-col tw-relative",on:{mouseover:function(e){t.showMinimizedRight=!0},mouseleave:function(e){t.showMinimizedRight=!1}}},[e("div",{staticClass:"tw-w-[16px] !tw-h-0",on:{mouseover:function(e){t.showMinimizedRight=!0},mouseleave:function(e){t.showMinimizedRight=!1}}},[e("span",{directives:[{name:"show",rawName:"v-show",value:!0===t.showMinimizedRight||t.minimizedRight,expression:"showMinimizedRight === true || minimizedRight"}],staticClass:"material-icons-outlined tw-absolute tw-left-[-12px] tw-top-[14px] !tw-text-xl/5 tw-bg-neutral-400 tw-rounded-full tw-cursor-pointer",class:t.minimizedRight?"tw-rotate-180":"",on:{click:function(e){return t.handleSidebarSize("right")}}},[t._v("chevron_right")])]),e("transition",{attrs:{name:"fade",mode:"out-in"}},[e("div",{staticClass:"tw-transition-all tw-duration-300",class:!0===t.minimizedRight?"tw-max-w-0":"tw-max-w-md tw-min-w-[22rem]"},["hierarchy"===t.showInRightPanel&&t.rightPanel.tabs.includes("hierarchy")?e("div",{attrs:{id:"form-hierarchy"}},[e("form-builder-pages",{attrs:{pages:t.pages,selected:parseInt(t.selectedPage),profile_id:parseInt(t.profile_id)},on:{"select-page":function(e){return t.selectPage(e)},"add-page":function(e){return t.getPages(t.currentPage.id)},"delete-page":function(e){t.selectedPage=t.pages[0].id},"open-page-create":function(e){t.principalContainer="create-page"},"reorder-pages":t.onReorderedPages,"open-create-model":t.onOpenCreateModel}}),e("hr"),e("form-builder-documents",{ref:"formBuilderDocuments",attrs:{profile_id:parseInt(t.profile_id),campaign_id:parseInt(t.campaign_id)},on:{"show-documents":function(e){return t.setSectionShown("documents")},"open-create-document":t.onOpenCreateDocument}})],1):t._e(),"element-properties"===t.showInRightPanel?e("form-builder-element-properties",{attrs:{element:t.selectedElement,profile_id:parseInt(t.profile_id)},on:{close:t.onCloseElementProperties}}):t._e(),"section-properties"===t.showInRightPanel?e("form-builder-section-properties",{attrs:{section_id:t.selectedSection.group_id,profile_id:parseInt(t.profile_id)},on:{close:t.onCloseSectionProperties}}):t._e(),"create-model"===t.showInRightPanel?e("form-builder-create-model",{attrs:{page:t.selectedPage},on:{close:function(e){t.showInRightPanel="hierarchy"}}}):t._e(),"create-document"===t.showInRightPanel&&t.rightPanel.tabs.includes("create-document")?e("form-builder-create-document",{key:t.formBuilderCreateDocumentKey,ref:"formBuilderCreateDocument",attrs:{profile_id:parseInt(t.profile_id),current_document:t.selectedDocument?t.selectedDocument:null,mandatory:t.createDocumentMandatory,mode:t.createDocumentMode},on:{close:function(e){t.showInRightPanel="hierarchy"},"documents-updated":t.onUpdateDocument}}):t._e()],1)])],1):t._e()])],1):"create-page"===t.principalContainer?e("div",[e("form-builder-create-page",{attrs:{profile_id:parseInt(t.profile_id)},on:{close:t.onCloseCreatePage}})],1):t._e()],1)],1)},bs=[],ws=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"form-builder-elements"}},[e("div",{staticClass:"tw-flex tw-items-center tw-justify-around"},t._l(t.menus,(function(a){return e("div",{key:a.id,staticClass:"em-light-tabs tw-cursor-pointer",class:t.selected===a.id?"em-light-selected-tab":"",attrs:{id:"form-builder-elements-title"},on:{click:function(e){t.selected=a.id}}},[t._v(" "+t._s(t.translate(a.name))+" ")])})),0),1===t.selected?e("div",[e("draggable",{staticClass:"draggables-list",attrs:{group:{name:"form-builder-section-elements",pull:"clone",put:!1},sort:!1,clone:t.setCloneElement},on:{end:t.onDragEnd},model:{value:t.publishedElements,callback:function(e){t.publishedElements=e},expression:"publishedElements"}},[e("transition-group",t._l(t.publishedElements,(function(a){return e("div",{key:a.value,staticClass:"form-builder-element tw-flex tw-justify-between tw-items-start tw-gap-3 tw-p-3 tw-cursor-move",on:{mouseover:function(e){t.elementHovered=a.value},mouseleave:function(e){t.elementHovered=0}}},[e("span",{staticClass:"material-icons-outlined",staticStyle:{"font-size":"18px"}},[t._v(t._s(a.icon))]),e("p",{staticClass:"tw-w-full tw-flex tw-flex-col"},[t._v(" "+t._s(t.translate(a.name))+" "),e("span",{staticClass:"tw-text-neutral-600 tw-text-xs"},[t._v(t._s(t.translate(a.description)))])]),e("div",{staticClass:"tw-flex tw-items-center"},[e("span",{directives:[{name:"show",rawName:"v-show",value:t.elementHovered==a.value,expression:"elementHovered == element.value"}],staticClass:"material-icons-outlined tw-cursor-copy",staticStyle:{"font-size":"18px"},on:{click:function(e){return t.$emit("create-element-lastgroup",a)}}},[t._v("add_circle_outline")])])])})),0)],1)],1):t._e(),2===t.selected?e("div",t._l(t.publishedGroups,(function(a){return e("div",{key:a.id,staticClass:"draggables-list",on:{click:function(e){return t.addGroup(a)}}},[e("div",{staticClass:"form-builder-element tw-flex tw-items-center tw-px-3 tw-justify-between tw-cursor-pointer"},[e("span",{staticClass:"material-icons-outlined"},[t._v(t._s(a.icon))]),e("span",{staticClass:"tw-w-full tw-p-4"},[t._v(t._s(t.translate(a.name)))]),e("span",{staticClass:"material-icons-outlined"},[t._v("add_circle_outline")])])])})),0):t._e(),t.loading?e("div",{staticClass:"em-page-loader"}):t._e()])},Os=[],Es={async createSimpleElement(t){try{const e=new FormData;Object.keys(t).forEach(a=>{e.append(a,t[a])});const a=await f().post("index.php?option=com_emundus&controller=formbuilder&task=createsimpleelement",e);return a.data}catch(e){return{status:!1,msg:e.message}}},async createSectionSimpleElements(t){try{const e=new FormData;Object.keys(t).forEach(a=>{e.append(a,t[a])});const a=await f().post("index.php?option=com_emundus&controller=formbuilder&task=createsectionsimpleelements",e);return a}catch(e){return{status:!1,message:e.message}}},async createSimpleGroup(t,e,a){try{const s=new FormData;s.append("fid",t),s.append("mode",a),s.append("label",JSON.stringify(e));const n=await f().post("index.php?option=com_emundus&controller=formbuilder&task=createsimplegroup",s);return"object"!==typeof n.data?{status:!1,msg:"COM_EMUNDUS_FORM_BUILDER_REQUEST_ERROR"}:n.data}catch(s){return{status:!1,msg:s.message}}},async createTestingFile(t){try{const e=new FormData;e.append("cid",t);const a=await f().post("index.php?option=com_emundus&controller=formbuilder&task=createtestingfile",e);return a}catch(e){return{status:!1,message:e.message}}},async getElement(t,e){try{const a=await f().get("index.php?option=com_emundus&controller=formbuilder&task=getElement",{params:{gid:t,element:e}});return a}catch(a){return{status:!1,message:a.message}}},async getJTEXT(t){const e=new FormData;e.append("toJTEXT",t);try{const t=f().post("index.php?option=com_emundus&controller=formbuilder&task=getJTEXT",e);return t}catch(a){return{status:!1,message:a.message}}},async getJTEXTA(t){const e=new FormData;t.forEach((t,a)=>{e.append("toJTEXT["+a+"]",t)});try{const t=f().post("index.php?option=com_emundus&controller=formbuilder&task=getJTEXTA",e);return t}catch(a){return{status:!1,message:a.message}}},async getAllTranslations(t){const e=new FormData;e.append("toJTEXT",t);try{const t=f().post("index.php?option=com_emundus&controller=formbuilder&task=getalltranslations",e);return t}catch(a){return{status:!1,message:a.message}}},async getTestingParams(t){try{const e=await f().get("index.php?option=com_emundus&controller=formbuilder&task=gettestingparams",{params:{prid:t}});return e}catch(e){return{status:!1,message:e.message}}},async getDatabases(){try{const t=await f().get("index.php?option=com_emundus&controller=formbuilder&task=getdatabasesjoin");return t}catch(t){return{status:!1,message:t.message}}},getDatabaseJoinOrderColumns(t){try{const e=f().get("index.php?option=com_emundus&controller=formbuilder&task=getDatabaseJoinOrderColumns",{params:{database_name:t}});return e}catch(e){return{status:!1,message:e.message}}},async updateParams(t){const e=new FormData,a=JSON.stringify(t);e.append("element",a);try{const t=await f().post("index.php?option=com_emundus&controller=formbuilder&task=updateparams",e);return t}catch(s){return{status:!1,message:s.message}}},async updateGroupParams(t,e,a=null){const s=new FormData;s.append("group_id",t),s.append("params",JSON.stringify(e)),null!=a&&s.append("lang",a);try{const t=await f().post("index.php?option=com_emundus&controller=formbuilder&task=updategroupparams",s);return t}catch(n){return{status:!1,message:n.message}}},async updateOrder(t,e,a){const s=new FormData;if(s.append("elements",JSON.stringify(t)),s.append("group_id",e),s.append("moved_el",JSON.stringify(a)),0==a.length)return{status:!1,message:"No elements to update"};try{const t=await f().post("index.php?option=com_emundus&controller=formbuilder&task=updateOrder",s);return t}catch(n){return{status:!1,message:n.message}}},updateElementOrder(t,e,a){const s=new FormData;s.append("group_id",t),s.append("element_id",e),s.append("new_index",a);try{const t=f().post("index.php?option=com_emundus&controller=formbuilder&task=updateelementorder",s);return t}catch(n){return{status:!1,message:n.message}}},async updateDocument(t){if(void 0==t.document_id||void 0==t.profile_id||void 0==t.document)return{status:!1,msg:"Missing data"};const e=new FormData;e.append("document_id",t.document_id),e.append("profile_id",t.profile_id),e.append("document",t.document),e.append("types",t.types),e.append("file",t.sample),e.append("has_sample",t.has_sample);try{const t=await f().post("index.php?option=com_emundus&controller=formbuilder&task=updatedocument",e);return t}catch(a){return{status:!1,msg:a}}},async toggleElementPublishValue(t){const e=new FormData;e.append("element",t);try{const t=await f().post("index.php?option=com_emundus&controller=formbuilder&task=publishunpublishelement",e);return t}catch(a){return{status:!1,message:a.message}}},async toggleElementHiddenValue(t){const e=new FormData;e.append("element",t);try{const t=await f().post("index.php?option=com_emundus&controller=formbuilder&task=hiddenunhiddenelement",e);return t}catch(a){return{status:!1,message:a.message}}},async reorderMenu(t,e){const a=new FormData;a.append("menus",JSON.stringify(t)),a.append("profile",e);try{return await f().post("index.php?option=com_emundus&controller=formbuilder&task=reordermenu",a)}catch(s){return{status:!1,message:s.message}}},async reorderSections(t,e){const a=new FormData;a.append("groups",JSON.stringify(e)),a.append("fid",t);try{const t=await f().post("index.php?option=com_emundus&controller=formbuilder&task=reordergroups",a);return t}catch(s){return{status:!1,message:s.message}}},async addPage(t){if(!t.prid)return{status:!1,msg:"Missing prid"};const e=new FormData;Object.keys(t).forEach(a=>{e.append(a,JSON.stringify(t[a]))});try{return await f().post("index.php?option=com_emundus&controller=formbuilder&task=createMenu",e)}catch(a){return{status:!1,msg:a.message}}},async deletePage(t){if(!t)return{status:!1,message:"Missing page id"};const e=new FormData;e.append("mid",t);try{return await f().post("index.php?option=com_emundus&controller=formbuilder&task=deletemenu",e)}catch(a){return{status:!1,message:a.message}}},async updateTranslation(t,e,a){const s=new FormData;null!==t&&s.append(t.key,t.value),s.append("labelTofind",e),Object.keys(a).forEach(t=>{s.append("NewSubLabel["+t+"]",a[t])});try{const t=await f().post("index.php?option=com_emundus&controller=formbuilder&task=formsTrad",s);return t}catch(n){return{status:!1,message:n.message}}},async updateOption(t,e,a,s,n){const i=new FormData;i.append("element",t),i.append("options",JSON.stringify(e)),i.append("index",a),i.append("newTranslation",s),i.append("lang",n);try{const t=f().post("index.php?option=com_emundus&controller=formbuilder&task=updateElementOption",i);return t}catch(r){return{status:!1,message:r.message}}},addOption(t,e,a){const s=new FormData;s.append("element",t),s.append("newOption",e),s.append("lang",a);try{const t=f().post("index.php?option=com_emundus&controller=formbuilder&task=addElementSubOption",s);return t}catch(n){return{status:!1,message:n.message}}},deleteElementSubOption(t,e){const a=new FormData;a.append("element",t),a.append("index",e);try{const t=f().post("index.php?option=com_emundus&controller=formbuilder&task=deleteElementSubOption",a);return t}catch(s){return{status:!1,message:s.message}}},updateElementSubOptionsOrder(t,e,a){const s=new FormData;s.append("element",t),s.append("options_old_order",JSON.stringify(e)),s.append("options_new_order",JSON.stringify(a));try{const t=f().post("index.php?option=com_emundus&controller=formbuilder&task=updateElementSubOptionsOrder",s);return t}catch(n){return{status:!1,message:n.message}}},getElementSubOptions(t){try{const e=f().get("index.php?option=com_emundus&controller=formbuilder&task=getelementsuboptions",{params:{element:t}});return e}catch(e){return{status:!1,message:e.message}}},deleteElement(t){const e=new FormData;e.append("element",t);try{const t=f().post("index.php?option=com_emundus&controller=formbuilder&task=deleteElement",e);return t}catch(a){return{status:!1,message:a.message}}},deleteGroup(t){const e=new FormData;e.append("gid",t);try{const t=f().post("index.php?option=com_emundus&controller=formbuilder&task=deleteGroup",e);return t}catch(a){return{status:!1,message:a.message}}},async updateDefaultValue(t,e){const a=new FormData;a.append("eid",t),a.append("value",e);try{return f().post("index.php?option=com_emundus&controller=formbuilder&task=updatedefaultvalue",a)}catch(s){return{status:!1,message:s.message}}},async getAllDatabases(){try{const t=await f().get("index.php?option=com_emundus&controller=formbuilder&task=getalldatabases");return t}catch(t){return{status:!1,message:t.message}}},async getSection(t){try{const e=await f().get("index.php?option=com_emundus&controller=formbuilder&task=getsection",{params:{section:t}});return e}catch(e){return{status:!1,message:e.message}}},async getModels(){try{const t=await f().get("index.php?option=com_emundus&controller=formbuilder&task=getpagemodels");return t.data}catch(t){return{status:!1,message:t.message}}},async addFormModel(t,e){if(!(t>0))return{status:!1,message:"MISSING_PARAMS"};{const s=new FormData;s.append("form_id",t),s.append("label",e);try{const t=await f().post("index.php?option=com_emundus&controller=formbuilder&task=addformmodel",s);return t.data}catch(a){return{status:!1,message:a.message}}}},async deleteFormModel(t){if(!(t>0))return{status:!1,message:"MISSING_PARAMS"};{const a=new FormData;a.append("form_id",t);try{const t=await f().post("index.php?option=com_emundus&controller=formbuilder&task=deleteformmodel",a);return t.data}catch(e){return{status:!1,message:e.message}}}},async deleteFormModelFromId(t){if(!(t.length>0))return{status:!1,message:"MISSING_PARAMS"};{const a=new FormData;a.append("model_ids",JSON.stringify(t));try{const t=await f().post("index.php?option=com_emundus&controller=formbuilder&task=deleteformmodelfromids",a);return t.data}catch(e){return{status:!1,message:e.message}}}},async getDocumentSample(t,e){if(!(t>0&&e>0))return{status:!1,message:"MISSING_PARAMS"};try{const a=await f().get("index.php?option=com_emundus&controller=formbuilder&task=getdocumentsample",{params:{document_id:t,profile_id:e}});return a.data}catch(a){return{status:!1,message:a.message}}},async checkIfModelTableIsUsedInForm(t,e){let a={status:!1,msg:"MISSING_PARAMS"};if(t>0&&e>0)try{const s=await f().get("index.php?option=com_emundus&controller=formbuilder&task=checkifmodeltableisusedinform",{params:{model_id:t,profile_id:e}});a=s.data}catch(s){a.msg=s.message}return a},async getSqlDropdownOptions(t,e,a,s){let n={status:!1,msg:"MISSING_PARAMS"};if(t&&e&&a)try{const i=await f().get("index.php?option=com_emundus&controller=formbuilder&task=getsqldropdownoptions",{params:{table:t,key:e,value:a,translate:s}});n=i.data}catch(i){n.msg=i.message}return n}},Cs={methods:{updateLastSave(){o.a.locale("fr"),this.$store.dispatch("formBuilder/updateLastSave",o()().format("LT"))},async swalConfirm(t,e,a,s,n=null,i=!0,r=!1){let o={title:t,text:e,type:"warning",showCancelButton:i,confirmButtonText:a,cancelButtonText:s,reverseButtons:!0,customClass:{title:"em-swal-title",cancelButton:"em-swal-cancel-button",confirmButton:"em-swal-confirm-button"}};return r?o.html=e:o.text=e,$.a.fire(o).then(t=>!!t.value&&(null!=n&&n(),!0))}}},Ns={components:{draggable:Xe.a},mixins:[Cs,nt],props:{form:{type:Object,required:!1}},data(){return{selected:1,menus:[{id:1,name:"COM_EMUNDUS_FORM_BUILDER_ELEMENTS"},{id:2,name:"COM_EMUNDUS_FORM_BUILDER_SECTIONS"}],elements:[],groups:[],cloneElement:{},loading:!1,elementHovered:0}},created(){this.elements=this.getElements(),this.groups=this.getSections()},methods:{getElements(){return a("ef96")},getSections(){return a("222f")},setCloneElement(t){this.cloneElement=t},onDragEnd(t){this.loading=!0;const e=t.to;if(null===e)return void(this.loading=!1);const a=e.dataset.sid;if(!a)return void(this.loading=!1);const s=this.$store.getters["global/datas"],n="undefined"!==typeof s.mode?s.mode.value:"forms";Es.createSimpleElement({gid:a,plugin:this.cloneElement.value,mode:n}).then(e=>{e.status&&e.data>0?Es.updateElementOrder(a,e.data,t.newDraggableIndex).then(()=>{this.$emit("element-created",e.data),this.updateLastSave(),this.loading=!1}):(this.displayError(e.msg),this.loading=!1)}).catch(t=>{console.warn(t),this.loading=!1})},addGroup(t){this.loading=!0;const e=this.$store.getters["global/datas"],a="undefined"!==typeof e.mode?e.mode.value:"forms";Es.createSectionSimpleElements({gid:t.id,fid:this.form.id,mode:a}).then(t=>{console.log(t),t.status&&t.data.data.length>0?(this.$emit("element-created"),this.updateLastSave(),this.loading=!1):(this.displayError(t.msg),this.loading=!1)}).catch(t=>{console.warn(t),this.loading=!1})}},computed:{publishedElements(){return this.elements.filter(t=>t.published)},publishedGroups(){return this.groups.filter(t=>t.published)}}},Ss=Ns,As=(a("fabc"),Object(y["a"])(Ss,ws,Os,!1,null,null,null)),Ds=As.exports,Ms=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"form-builder-element-properties"}},[e("div",{staticClass:"tw-flex tw-items-center tw-justify-between tw-p-4 tw-items-start"},[e("div",[e("p",[t._v(t._s(t.translate("COM_EMUNDUS_FORM_BUILDER_ELEMENT_PROPERTIES")))]),e("span",{staticClass:"tw-text-sm tw-text-neutral-700"},[t._v(t._s(t.element.label[t.shortDefaultLang]))])]),e("span",{staticClass:"material-icons-outlined tw-cursor-pointer",on:{click:function(e){return t.$emit("close")}}},[t._v("close")])]),e("ul",{staticClass:"tw-flex tw-items-center tw-justify-between tw-p-4 tw-w-11/12",attrs:{id:"properties-tabs"}},t._l(t.publishedTabs,(function(a){return e("li",{key:a.id,staticClass:"tw-p-4 tw-cursor-pointer",class:{"is-active":a.active,"tw-w-2/4":2==t.publishedTabs.length,"tw-w-full":1==t.publishedTabs.length},on:{click:function(e){return t.selectTab(a)}}},[t._v(" "+t._s(t.translate(a.label))+" ")])})),0),e("div",{attrs:{id:"properties"}},[t.tabs[0].active?e("div",{staticClass:"tw-p-4",attrs:{id:"element-parameters"}},[e("label",{attrs:{for:"element-label"}},[t._v(t._s(t.translate("COM_EMUNDUS_FORM_BUILDER_ELEMENT_LABEL")))]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.element.label[t.shortDefaultLang],expression:"element.label[shortDefaultLang]"}],staticClass:"tw-w-full",attrs:{id:"element-label",name:"element-label",type:"text"},domProps:{value:t.element.label[t.shortDefaultLang]},on:{input:function(e){e.target.composing||t.$set(t.element.label,t.shortDefaultLang,e.target.value)}}}),e("div",{staticClass:"tw-flex tw-items-center tw-justify-between tw-w-full tw-pt-4 tw-pb-4"},[e("span",[t._v(t._s(t.translate("COM_EMUNDUS_FORM_BUILDER_ELEMENT_PROPERTIES_UNPUBLISH")))]),e("div",{staticClass:"em-toggle"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.isPublished,expression:"isPublished"}],staticClass:"em-toggle-check",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.isPublished)?t._i(t.isPublished,null)>-1:t.isPublished},on:{click:t.togglePublish,change:function(e){var a=t.isPublished,s=e.target,n=!!s.checked;if(Array.isArray(a)){var i=null,r=t._i(a,i);s.checked?r<0&&(t.isPublished=a.concat([i])):r>-1&&(t.isPublished=a.slice(0,r).concat(a.slice(r+1)))}else t.isPublished=n}}}),e("strong",{staticClass:"b em-toggle-switch"}),e("strong",{staticClass:"b em-toggle-track"})])]),e("div",{directives:[{name:"show",rawName:"v-show",value:!["display","panel"].includes(this.element.plugin),expression:"!['display','panel'].includes(this.element.plugin)"}],staticClass:"tw-flex tw-items-center tw-justify-between tw-w-full tw-pt-4 tw-pb-4"},[e("span",[t._v(t._s(t.translate("COM_EMUNDUS_FORM_BUILDER_ELEMENT_PROPERTIES_REQUIRED")))]),e("div",{staticClass:"em-toggle"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.element.FRequire,expression:"element.FRequire"}],staticClass:"em-toggle-check",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.element.FRequire)?t._i(t.element.FRequire,null)>-1:t.element.FRequire},on:{click:function(e){t.element.FRequire=!t.element.FRequire},change:function(e){var a=t.element.FRequire,s=e.target,n=!!s.checked;if(Array.isArray(a)){var i=null,r=t._i(a,i);s.checked?r<0&&t.$set(t.element,"FRequire",a.concat([i])):r>-1&&t.$set(t.element,"FRequire",a.slice(0,r).concat(a.slice(r+1)))}else t.$set(t.element,"FRequire",n)}}}),e("strong",{staticClass:"b em-toggle-switch"}),e("strong",{staticClass:"b em-toggle-track"})])]),e("div",{directives:[{name:"show",rawName:"v-show",value:"panel"==this.element.plugin,expression:"this.element.plugin == 'panel'"}],staticClass:"tw-flex tw-items-center tw-justify-between tw-w-full tw-pt-4 tw-pb-4"},[e("span",[t._v(t._s(t.translate("COM_EMUNDUS_FORM_BUILDER_ELEMENT_PROPERTIES_ADVANCED_FORMAT")))]),e("div",{staticClass:"em-toggle"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.element.eval,expression:"element.eval"}],staticClass:"em-toggle-check",attrs:{type:"checkbox","true-value":"1","false-value":"0"},domProps:{checked:Array.isArray(t.element.eval)?t._i(t.element.eval,null)>-1:t._q(t.element.eval,"1")},on:{click:function(e){1==t.element.eval?t.element.eval=0:t.element.eval=1},change:function(e){var a=t.element.eval,s=e.target,n=s.checked?"1":"0";if(Array.isArray(a)){var i=null,r=t._i(a,i);s.checked?r<0&&t.$set(t.element,"eval",a.concat([i])):r>-1&&t.$set(t.element,"eval",a.slice(0,r).concat(a.slice(r+1)))}else t.$set(t.element,"eval",n)}}}),e("strong",{staticClass:"b em-toggle-switch"}),e("strong",{staticClass:"b em-toggle-track"})])]),e("div",{directives:[{name:"show",rawName:"v-show",value:"panel"==this.element.plugin,expression:"this.element.plugin == 'panel'"}],staticClass:"tw-w-full tw-pt-4 tw-pb-4"},[e("label",{attrs:{for:"element-default"}},[t._v(t._s(t.translate("COM_EMUNDUS_FORM_BUILDER_ELEMENT_PROPERTIES_CONTENT")))]),0==t.element.eval?e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.element.default,expression:"element.default"}],staticClass:"tw-w-full tw-resize-y",attrs:{id:"element-default",name:"element-default"},domProps:{value:t.element.default},on:{input:function(e){e.target.composing||t.$set(t.element,"default",e.target.value)}}}):t._e(),1==t.element.eval?e("editor-quill",{attrs:{id:"element-default",text:t.element.default,height:"30em"},model:{value:t.element.default,callback:function(e){t.$set(t.element,"default",e)},expression:"element.default"}}):t._e()],1),t.sysadmin?e("div",{staticClass:"tw-flex tw-items-center tw-justify-between tw-w-full tw-pt-4 tw-pb-4"},[e("span",[t._v(t._s(t.translate("COM_EMUNDUS_FORM_BUILDER_ELEMENT_PROPERTIES_HIDDEN")))]),e("div",{staticClass:"em-toggle"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.isHidden,expression:"isHidden"}],staticClass:"em-toggle-check",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.isHidden)?t._i(t.isHidden,null)>-1:t.isHidden},on:{click:t.toggleHidden,change:function(e){var a=t.isHidden,s=e.target,n=!!s.checked;if(Array.isArray(a)){var i=null,r=t._i(a,i);s.checked?r<0&&(t.isHidden=a.concat([i])):r>-1&&(t.isHidden=a.slice(0,r).concat(a.slice(r+1)))}else t.isHidden=n}}}),e("strong",{staticClass:"b em-toggle-switch"}),e("strong",{staticClass:"b em-toggle-track"})])]):t._e()]):t._e(),t.tabs[1].active?e("div",{staticClass:"tw-p-4"},[e("FormBuilderElementParams",{key:t.element.id,attrs:{element:t.element,params:t.params,databases:t.databases}})],1):t._e()]),e("div",{staticClass:"tw-flex tw-items-center tw-justify-between actions tw-m-4"},[e("button",{staticClass:"em-primary-button",on:{click:function(e){return t.saveProperties()}}},[t._v(" "+t._s(t.translate("COM_EMUNDUS_FORM_BUILDER_ELEMENT_PROPERTIES_SAVE"))+" ")])]),t.loading?e("div",{staticClass:"em-page-loader"}):t._e()])},xs=[],Ts=a("3208"),Us=function(){var t=this,e=t._self._c;return e("div",[t._l(t.params,(function(a){return a.published&&!a.sysadmin_only||t.sysadmin&&a.sysadmin_only&&a.published?e("div",{staticClass:"form-group tw-mb-4"},[e("label",{class:"repeatable"===a.type?"tw-font-bold":""},[t._v(t._s(t.translate(a.label)))]),"dropdown"===a.type||"sqldropdown"===a.type?e("div",[""!==t.repeat_name&&a.options.length>0?e("select",{directives:[{name:"model",rawName:"v-model",value:t.element.params[t.repeat_name][t.index_name][a.name],expression:"element.params[repeat_name][index_name][param.name]"}],staticClass:"tw-w-full",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.element.params[t.repeat_name][t.index_name],a.name,e.target.multiple?s:s[0])}}},t._l(a.options,(function(a){return e("option",{domProps:{value:a.value}},[t._v(t._s(t.translate(a.label)))])})),0):a.options.length>0?e("select",{directives:[{name:"model",rawName:"v-model",value:t.element.params[a.name],expression:"element.params[param.name]"}],staticClass:"tw-w-full",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.element.params,a.name,e.target.multiple?s:s[0])}}},t._l(a.options,(function(a){return e("option",{domProps:{value:a.value}},[t._v(t._s(t.translate(a.label)))])})),0):t._e()]):"textarea"===a.type&&""!==t.repeat_name?e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.element.params[t.repeat_name][t.index_name][a.name],expression:"element.params[repeat_name][index_name][param.name]"}],staticClass:"tw-w-full",domProps:{value:t.element.params[t.repeat_name][t.index_name][a.name]},on:{input:function(e){e.target.composing||t.$set(t.element.params[t.repeat_name][t.index_name],a.name,e.target.value)}}}):"textarea"===a.type?e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.element.params[a.name],expression:"element.params[param.name]"}],staticClass:"tw-w-full",domProps:{value:t.element.params[a.name]},on:{input:function(e){e.target.composing||t.$set(t.element.params,a.name,e.target.value)}}}):"databasejoin"===a.type&&""!==t.repeat_name?e("div",[e("select",{directives:[{name:"model",rawName:"v-model",value:t.element.params[t.repeat_name][t.index_name][a.name],expression:"element.params[repeat_name][index_name][param.name]"}],key:t.reloadOptions,staticClass:"tw-w-full",class:t.databasejoin_description?"tw-mb-1":"",attrs:{id:a.name},on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.element.params[t.repeat_name][t.index_name],a.name,e.target.multiple?s:s[0])},t.updateDatabasejoinParams]}},t._l(a.options,(function(a){return e("option",{domProps:{value:a.database_name}},[t._v(t._s(a.label))])})),0),t.databasejoin_description?e("label",{staticStyle:{"font-size":"small"}},[t._v(t._s(t.databasejoin_description))]):t._e()]):"databasejoin"===a.type?e("div",[e("select",{directives:[{name:"model",rawName:"v-model",value:t.element.params[a.name],expression:"element.params[param.name]"}],key:t.reloadOptions,staticClass:"tw-w-full",class:t.databasejoin_description?"tw-mb-1":"",attrs:{id:a.name},on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.element.params,a.name,e.target.multiple?s:s[0])},t.updateDatabasejoinParams]}},t._l(a.options,(function(a){return e("option",{domProps:{value:a.database_name}},[t._v(t._s(a.label))])})),0),t.databasejoin_description?e("label",{staticStyle:{"font-size":"small"}},[t._v(t._s(t.databasejoin_description))]):t._e()]):"databasejoin_cascade"===a.type&&""!==t.repeat_name?e("div",[e("select",{directives:[{name:"model",rawName:"v-model",value:t.element.params[t.repeat_name][t.index_name][a.name],expression:"element.params[repeat_name][index_name][param.name]"}],key:t.reloadOptionsCascade,staticClass:"tw-w-full",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.element.params[t.repeat_name][t.index_name],a.name,e.target.multiple?s:s[0])}}},t._l(a.options,(function(a){return e("option",{domProps:{value:a.COLUMN_NAME}},[t._v(t._s(a.COLUMN_NAME))])})),0)]):"databasejoin_cascade"===a.type?e("div",[e("select",{directives:[{name:"model",rawName:"v-model",value:t.element.params[a.name],expression:"element.params[param.name]"}],key:t.reloadOptionsCascade,staticClass:"tw-w-full",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.element.params,a.name,e.target.multiple?s:s[0])}}},t._l(a.options,(function(a){return e("option",{domProps:{value:a.COLUMN_NAME}},[t._v(t._s(a.COLUMN_NAME))])})),0)]):"repeatable"===a.type?e("div",[t._l(Object.entries(t.element.params[a.name]),(function(s,n){return e("div",[e("hr"),e("div",{staticClass:"tw-flex tw-justify-between tw-items-center"},[e("label",[t._v("-- "+t._s(n+1)+" --")]),0!=n&&n+1==Object.entries(t.element.params[a.name]).length?e("button",{staticClass:"mt-2 w-auto",attrs:{type:"button"},on:{click:function(e){return t.removeRepeatableField(a.name,n)}}},[e("span",{staticClass:"material-icons-outlined tw-text-red-500"},[t._v("close")])]):t._e()]),e("form-builder-element-params",{key:a.name+n,attrs:{element:t.element,params:a.fields,repeat_name:a.name,index:n,databases:t.databases}})],1)})),e("div",{staticClass:"tw-flex tw-justify-end"},[e("button",{staticClass:"em-tertiary-button tw-mt-2 tw-w-auto",attrs:{type:"button"},on:{click:function(e){return t.addRepeatableField(a.name)}}},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_PARAMS_ADD_REPEATABLE")))])])],2):""!==t.repeat_name?"checkbox"===a.type?e("input",{directives:[{name:"model",rawName:"v-model",value:t.element.params[t.repeat_name][t.index_name][a.name],expression:"element.params[repeat_name][index_name][param.name]"}],staticClass:"tw-w-full",attrs:{placeholder:t.translate(a.placeholder),type:"checkbox"},domProps:{checked:Array.isArray(t.element.params[t.repeat_name][t.index_name][a.name])?t._i(t.element.params[t.repeat_name][t.index_name][a.name],null)>-1:t.element.params[t.repeat_name][t.index_name][a.name]},on:{change:function(e){var s=t.element.params[t.repeat_name][t.index_name][a.name],n=e.target,i=!!n.checked;if(Array.isArray(s)){var r=null,o=t._i(s,r);n.checked?o<0&&t.$set(t.element.params[t.repeat_name][t.index_name],a.name,s.concat([r])):o>-1&&t.$set(t.element.params[t.repeat_name][t.index_name],a.name,s.slice(0,o).concat(s.slice(o+1)))}else t.$set(t.element.params[t.repeat_name][t.index_name],a.name,i)}}}):"radio"===a.type?e("input",{directives:[{name:"model",rawName:"v-model",value:t.element.params[t.repeat_name][t.index_name][a.name],expression:"element.params[repeat_name][index_name][param.name]"}],staticClass:"tw-w-full",attrs:{placeholder:t.translate(a.placeholder),type:"radio"},domProps:{checked:t._q(t.element.params[t.repeat_name][t.index_name][a.name],null)},on:{change:function(e){return t.$set(t.element.params[t.repeat_name][t.index_name],a.name,null)}}}):e("input",{directives:[{name:"model",rawName:"v-model",value:t.element.params[t.repeat_name][t.index_name][a.name],expression:"element.params[repeat_name][index_name][param.name]"}],staticClass:"tw-w-full",attrs:{placeholder:t.translate(a.placeholder),type:a.type},domProps:{value:t.element.params[t.repeat_name][t.index_name][a.name]},on:{input:function(e){e.target.composing||t.$set(t.element.params[t.repeat_name][t.index_name],a.name,e.target.value)}}}):"checkbox"===a.type?e("input",{directives:[{name:"model",rawName:"v-model",value:t.element.params[a.name],expression:"element.params[param.name]"}],staticClass:"tw-w-full",attrs:{placeholder:t.translate(a.placeholder),type:"checkbox"},domProps:{checked:Array.isArray(t.element.params[a.name])?t._i(t.element.params[a.name],null)>-1:t.element.params[a.name]},on:{change:function(e){var s=t.element.params[a.name],n=e.target,i=!!n.checked;if(Array.isArray(s)){var r=null,o=t._i(s,r);n.checked?o<0&&t.$set(t.element.params,a.name,s.concat([r])):o>-1&&t.$set(t.element.params,a.name,s.slice(0,o).concat(s.slice(o+1)))}else t.$set(t.element.params,a.name,i)}}}):"radio"===a.type?e("input",{directives:[{name:"model",rawName:"v-model",value:t.element.params[a.name],expression:"element.params[param.name]"}],staticClass:"tw-w-full",attrs:{placeholder:t.translate(a.placeholder),type:"radio"},domProps:{checked:t._q(t.element.params[a.name],null)},on:{change:function(e){return t.$set(t.element.params,a.name,null)}}}):e("input",{directives:[{name:"model",rawName:"v-model",value:t.element.params[a.name],expression:"element.params[param.name]"}],staticClass:"tw-w-full",attrs:{placeholder:t.translate(a.placeholder),type:a.type},domProps:{value:t.element.params[a.name]},on:{input:function(e){e.target.composing||t.$set(t.element.params,a.name,e.target.value)}}}),""!==a.helptext?e("label",{staticStyle:{"font-size":"small"}},[t._v(t._s(t.translate(a.helptext)))]):t._e()]):t._e()})),t.loading?e("div",{staticClass:"em-page-loader"}):t._e()],2)},ks=[],Rs={name:"FormBuilderElementParams",components:{},props:{element:{type:Object,required:!1},params:{type:Array,required:!1},databases:{type:Array,required:!1},repeat_name:{type:String,required:!1,default:""},index:{type:Number,required:!1,default:0}},data:()=>({databasejoin_description:null,reloadOptions:0,reloadOptionsCascade:0,idElement:0,loading:!1}),created(){this.params.forEach(t=>{"databasejoin"===t.type&&(this.sysadmin?(this.loading=!0,Es.getAllDatabases().then(e=>{t.options=e.data.data,this.reloadOptions+=1,""!=this.element.params["join_db_name"]&&this.updateDatabasejoinParams(),this.loading=!1})):(t.options=this.databases,""!=this.element.params["join_db_name"]&&this.updateDatabasejoinParams())),"sqldropdown"===t.type&&(this.loading=!0,Es.getSqlDropdownOptions(t.table,t.key,t.value,t.translate).then(e=>{t.options=e.data,this.loading=!1}))})},methods:{updateDatabasejoinParams(){if(this.sysadmin)Es.getDatabaseJoinOrderColumns(this.element.params["join_db_name"]).then(t=>{let e=this.params.map(t=>t.name).indexOf("join_key_column");this.params[e].options=t.data.data,""==this.element.params["join_key_column"]&&(this.element.params["join_key_column"]=this.params[e].options[0].COLUMN_NAME),e=this.params.map(t=>t.name).indexOf("join_val_column"),this.params[e].options=t.data.data,""==this.element.params["join_val_column"]&&(this.element.params["join_val_column"]=this.params[e].options[0].COLUMN_NAME),this.reloadOptionsCascade+=1});else{const t=this.databases.map(t=>t.database_name).indexOf(this.element.params["join_db_name"]);if(-1!==t){let e=this.databases[t];this.element.params["join_key_column"]=e.join_column_id,this.element.params["database_join_where_sql"]="order by {thistable}."+e.join_column_id,1==e.translation?(this.element.params["join_val_column"]=e.join_column_val+"_fr",this.element.params["join_val_column_concat"]="{thistable}."+e.join_column_val+"_{shortlang}"):(this.element.params["join_val_column"]=e.join_column_val,this.element.params["join_val_column_concat"]=""),this.databasejoin_description=this.databases[t].description}else{let t=this.params.map(t=>t.name).indexOf("join_db_name"),e={label:this.element.params["join_db_name"],database_name:this.element.params["join_db_name"]};this.params[t].options.push(e),setTimeout(()=>{document.getElementById("join_db_name").disabled=!0},500)}}},addRepeatableField(t){let e=Object.entries(this.element.params[t]).length;this.element.params[t][t+e]={},this.$forceUpdate()},removeRepeatableField(t,e){delete this.element.params[t][t+e],this.$forceUpdate()}},computed:{sysadmin:function(){return parseInt(this.$store.state.global.sysadminAccess)},index_name:function(){return""!==this.repeat_name?this.repeat_name+this.index:""}}},Ls=Rs,Is=Object(y["a"])(Ls,Us,ks,!1,null,null,null),Ps=Is.exports,Bs={name:"FormBuilderElementProperties",components:{EditorQuill:ye,FormBuilderElementParams:Ps},props:{element:{type:Object,required:!0},profile_id:{type:Number,required:!0}},mixins:[Cs],data(){return{databases:[],params:[],elementsNeedingDb:["dropdown","checkbox","radiobutton","databasejoin"],tabs:[{id:0,label:"COM_EMUNDUS_FORM_BUILDER_ELEMENT_PROPERTIES_GENERAL",active:!0,published:!0},{id:1,label:"COM_EMUNDUS_FORM_BUILDER_ELEMENT_PROPERTIES_PARAMETERS",active:!1,published:!0}],loading:!1}},mounted(){this.getDatabases(),this.paramsAvailable()},methods:{getDatabases(){Es.getDatabases().then(t=>{t.status&&(this.databases=t.data.data)})},saveProperties(){this.loading=!0,Es.updateTranslation({value:this.element.id,key:"element"},this.element.label_tag,this.element.label),["radiobutton","checkbox","dropdown"].includes(this.element.plugin)?Es.getJTEXTA(this.element.params.sub_options.sub_labels).then(t=>{t&&(this.element.params.sub_options.sub_labels.forEach((e,a)=>{this.element.params.sub_options.sub_labels[a]=Object.values(t.data)[a]}),Es.updateParams(this.element).then(t=>{t.status&&(this.loading=!1,this.updateLastSave(),this.$emit("close"))}))}):Es.updateParams(this.element).then(t=>{t.status&&(this.loading=!1,this.updateLastSave(),this.$emit("close"))})},togglePublish(){this.element.publish=!this.element.publish,Es.toggleElementPublishValue(this.element.id).then(t=>{t.status||(this.element.publish=!this.element.publish)})},toggleHidden(){this.element.hidden=!this.element.hidden,Es.toggleElementHiddenValue(this.element.id).then(t=>{t.status||(this.element.hidden=!this.element.hidden)})},selectTab(t){this.tabs.forEach(t=>{t.active=!1}),t.active=!0},paramsAvailable(){"undefined"!==typeof Ts[this.element.plugin]?(this.tabs[1].published=!0,this.params=Ts[this.element.plugin]):(this.tabs[1].active=!1,this.tabs[0].active=!0,this.tabs[1].published=!1)}},computed:{componentType(){let t="";switch(this.element.plugin){case"databasejoin":t="radio"==this.element.params.database_join_display_type?"radiobutton":this.element.params.database_join_display_type;break;case"years":case"date":case"birthday":t="birthday";break;default:t=this.element.plugin;break}return t},isPublished(){return!this.element.publish},isHidden(){return this.element.hidden},sysadmin:function(){return parseInt(this.$store.state.global.sysadminAccess)},publishedTabs(){return this.tabs.filter(t=>t.published)}},watch:{"element.eval":function(t){0==t&&(this.element.default=this.element.default.replace(/<p>/g,"\n"),this.element.default=this.element.default.replace(/(<([^>]+)>)/gi,""))},"element.id":function(t){this.paramsAvailable()}}},js=Bs,Fs=(a("bc3e"),Object(y["a"])(js,Ms,xs,!1,null,null,null)),qs=Fs.exports,$s=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"form-builder-element-properties"}},[e("div",{staticClass:"tw-flex tw-items-center tw-justify-between tw-p-4"},[e("p",[t._v(t._s(t.translate("COM_EMUNDUS_FORM_BUILDER_SECTION_PROPERTIES")))]),e("span",{staticClass:"material-icons-outlined tw-cursor-pointer",on:{click:function(e){return t.$emit("close")}}},[t._v("close")])]),e("ul",{staticClass:"tw-flex tw-items-center tw-justify-between tw-p-4 tw-w-11/12",attrs:{id:"properties-tabs"}},t._l(t.publishedTabs,(function(a){return e("li",{key:a.id,staticClass:"tw-p-4 tw-cursor-pointer",class:{"is-active":a.active,"tw-w-2/4":"2"==t.publishedTabs.length,"tw-w-full":1==t.publishedTabs.length},on:{click:function(e){return t.selectTab(a)}}},[t._v(" "+t._s(t.translate(a.label))+" ")])})),0),e("div",{attrs:{id:"properties"}},[t.tabs[0].active?e("div",{staticClass:"tw-p-4",attrs:{id:"section-parameters"}},[e("label",{attrs:{for:"section-label"}},[t._v(t._s(t.translate("COM_EMUNDUS_FORM_BUILDER_SECTION_LABEL")))]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.section_tmp.label,expression:"section_tmp.label"}],staticClass:"tw-w-full",attrs:{id:"section-label",name:"section-label",type:"text"},domProps:{value:t.section_tmp.label},on:{input:function(e){e.target.composing||t.$set(t.section_tmp,"label",e.target.value)}}})]):t._e(),t.tabs[1].active?e("div",{staticClass:"tw-p-4"},[e("form-builder-section-params",{attrs:{params:t.params,section:t.section_tmp}})],1):t._e()]),e("div",{staticClass:"tw-flex tw-items-center tw-justify-between actions tw-m-4"},[e("button",{staticClass:"em-primary-button",on:{click:function(e){return t.saveProperties()}}},[t._v(" "+t._s(t.translate("COM_EMUNDUS_FORM_BUILDER_SECTION_PROPERTIES_SAVE"))+" ")])])])},Hs=[],Gs=a("4c13"),zs=function(){var t=this,e=t._self._c;return t.params.length>0?e("div",[t._l(t.displayedParams,(function(a){return e("div",{staticClass:"form-group tw-mb-4"},[e("label",[t._v(t._s(t.translate(a.label)))]),"dropdown"===a.type?e("div",[e("select",{directives:[{name:"model",rawName:"v-model",value:t.section.params[a.name],expression:"section.params[param.name]"}],staticClass:"tw-w-full",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.section.params,a.name,e.target.multiple?s:s[0])}}},t._l(a.options,(function(a){return e("option",{domProps:{value:a.value}},[t._v(t._s(t.translate(a.label)))])})),0)]):"textarea"===a.type?e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.section.params[a.name],expression:"section.params[param.name]"}],staticClass:"tw-w-full",domProps:{value:t.section.params[a.name]},on:{input:function(e){e.target.composing||t.$set(t.section.params,a.name,e.target.value)}}}):"checkbox"===a.type?e("input",{directives:[{name:"model",rawName:"v-model",value:t.section.params[a.name],expression:"section.params[param.name]"}],staticClass:"tw-w-full",attrs:{placeholder:t.translate(a.placeholder),type:"checkbox"},domProps:{checked:Array.isArray(t.section.params[a.name])?t._i(t.section.params[a.name],null)>-1:t.section.params[a.name]},on:{change:function(e){var s=t.section.params[a.name],n=e.target,i=!!n.checked;if(Array.isArray(s)){var r=null,o=t._i(s,r);n.checked?o<0&&t.$set(t.section.params,a.name,s.concat([r])):o>-1&&t.$set(t.section.params,a.name,s.slice(0,o).concat(s.slice(o+1)))}else t.$set(t.section.params,a.name,i)}}}):"radio"===a.type?e("input",{directives:[{name:"model",rawName:"v-model",value:t.section.params[a.name],expression:"section.params[param.name]"}],staticClass:"tw-w-full",attrs:{placeholder:t.translate(a.placeholder),type:"radio"},domProps:{checked:t._q(t.section.params[a.name],null)},on:{change:function(e){return t.$set(t.section.params,a.name,null)}}}):e("input",{directives:[{name:"model",rawName:"v-model",value:t.section.params[a.name],expression:"section.params[param.name]"}],staticClass:"tw-w-full",attrs:{placeholder:t.translate(a.placeholder),type:a.type},domProps:{value:t.section.params[a.name]},on:{input:function(e){e.target.composing||t.$set(t.section.params,a.name,e.target.value)}}}),""!==a.helptext?e("label",{staticStyle:{"font-size":"small"}},[t._v(t._s(t.translate(a.helptext)))]):t._e()])})),t.loading?e("div",{staticClass:"em-page-loader"}):t._e()],2):t._e()},Vs=[],Ys={name:"FormBuilderSectionParams",props:{section:{type:Object,required:!1},params:{type:Array,required:!1}},data:()=>({loading:!1}),computed:{sysadmin:function(){return parseInt(this.$store.state.global.sysadminAccess)},displayedParams(){return this.params.filter(t=>t.published&&!t.sysadmin_only||this.sysadmin&&t.sysadmin_only&&t.published)}}},Js=Ys,Ks=Object(y["a"])(Js,zs,Vs,!1,null,"1f4c7c6e",null),Ws=Ks.exports,Xs={name:"FormBuilderSectionProperties",components:{FormBuilderSectionParams:Ws},props:{section_id:{type:Number,required:!0},profile_id:{type:Number,required:!0}},data(){return{section_tmp:{},params:[],tabs:[{id:0,label:"COM_EMUNDUS_FORM_BUILDER_ELEMENT_PROPERTIES_GENERAL",active:!1,published:!1},{id:1,label:"COM_EMUNDUS_FORM_BUILDER_ELEMENT_PROPERTIES_PARAMETERS",active:!0,published:!0}]}},created(){this.paramsAvailable(),this.getSection()},methods:{saveProperties(){Es.updateGroupParams(this.section_tmp.id,this.section_tmp.params,this.shortDefaultLang).then(()=>{this.$emit("close")})},toggleHidden(){this.section_tmp.params.hidden=!this.section_tmp.hidden},selectTab(t){this.tabs.forEach(t=>{t.active=!1}),t.active=!0},paramsAvailable(){"undefined"!==typeof Gs["parameters"]?(this.tabs[1].published=!0,this.params=Gs["parameters"]):(this.tabs[1].active=!1,this.tabs[0].active=!0,this.tabs[1].published=!1)},getSection(){Es.getSection(this.$props.section_id).then(t=>{this.section_tmp=t.data.group})}},computed:{sysadmin:function(){return parseInt(this.$store.state.global.sysadminAccess)},publishedTabs(){return this.tabs.filter(t=>t.published)}},watch:{section:function(){this.paramsAvailable(),this.getSection()}}},Zs=Xs,Qs=(a("17d0"),Object(y["a"])(Zs,$s,Hs,!1,null,null,null)),tn=Qs.exports,en=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"form-builder-page"}},[e("div",{staticClass:"tw-flex tw-items-center tw-justify-between"},[e("span",{ref:"pageTitle",staticClass:"tw-text-2xl tw-font-semibold editable-data",attrs:{id:"page-title",contenteditable:"true",placeholder:t.translate("COM_EMUNDUS_FORM_BUILDER_ADD_PAGE_TITLE_ADD")},domProps:{innerHTML:t._s(t.translate(t.title))},on:{focusout:t.updateTitle,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.updateTitleKeyup.apply(null,arguments)},keydown:e=>t.checkMaxMinlength(e,50,0)}}),e("button",{staticClass:"em-secondary-button !tw-w-auto",attrs:{id:"add-page-modele"}},["forms"==t.mode?e("span",{staticClass:"material-icons-outlined tw-cursor-pointer",attrs:{title:t.translate("COM_EMUNDUS_FORM_BUILDER_SAVE_AS_MODEL_TITLE")},on:{click:function(e){return t.$emit("open-create-model",t.page.id)}}},[t._v("post_add")]):t._e(),t._v(" "+t._s(t.translate("COM_EMUNDUS_FORM_BUILDER_SAVE_AS_MODEL_TITLE"))+" ")])]),e("span",{ref:"pageDescription",staticClass:"description editable-data",attrs:{id:"pageDescription",contenteditable:"true",placeholder:t.translate("COM_EMUNDUS_FORM_BUILDER_ADD_PAGE_INTRO_ADD")},domProps:{innerHTML:t._s(t.description)},on:{focusout:t.updateDescription}}),e("div",{staticClass:"form-builder-page-sections tw-mt-2"},[t.sections.length>0?e("button",{staticClass:"em-primary-button tw-px-6 tw-py-3",attrs:{id:"add-section"},on:{click:function(e){return t.addSection()}}},[t._v(" "+t._s(t.translate("COM_EMUNDUS_FORM_BUILDER_ADD_SECTION"))+" ")]):t._e(),t._l(t.sections,(function(a,s){return e("form-builder-page-section",{key:a.group_id,ref:"section-"+a.group_id,refInFor:!0,attrs:{profile_id:parseInt(t.profile_id),page_id:parseInt(t.page.id),section:a,index:s+1,totalSections:t.sections.length},on:{"open-element-properties":function(e){return t.$emit("open-element-properties",e)},"move-element":t.updateElementsOrder,"delete-section":t.deleteSection,"update-element":t.getSections,"move-section":t.moveSection,"open-section-properties":function(e){return t.$emit("open-section-properties",a)}}})}))],2),e("button",{staticClass:"em-primary-button tw-px-6 tw-py-3",attrs:{id:"add-section"},on:{click:function(e){return t.addSection()}}},[t._v(" "+t._s(t.translate("COM_EMUNDUS_FORM_BUILDER_ADD_SECTION"))+" ")]),t.loading?e("div",{staticClass:"em-page-loader"}):t._e()])},an=[],sn=a("bef5"),nn=a.n(sn),rn={async checkSetup(){try{return await f().get("index.php?option=com_emundus&controller=translations&task=checksetup")}catch(t){return!1}},async configureSetup(){try{return await f().get("index.php?option=com_emundus&controller=translations&task=configuresetup")}catch(t){return!1}},async getAllLanguages(){try{const t=await f().get("index.php?option=com_emundus&controller=translations&task=getlanguages");return t.data}catch(t){return!1}},async getDefaultLanguage(){try{const t=await f().get("index.php?option=com_emundus&controller=translations&task=getdefaultlanguage");return t.data}catch(t){return!1}},async updateLanguage(t,e,a=0){try{const s=new FormData;return s.append("published",e),s.append("lang_code",t),s.append("default_lang",a),await f().post("index.php?option=com_emundus&controller=translations&task=updatelanguage",s,{headers:{"Content-Type":"multipart/form-data"}})}catch(s){return{status:!1,msg:s.message}}},async getObjects(){try{return await f().get("index.php?option=com_emundus&controller=translations&task=gettranslationsobjects")}catch(t){return{status:!1,msg:t.message}}},async getDatas(t,e,a,s){try{return await f().get("index.php?option=com_emundus&controller=translations&task=getdatas",{params:{table:t,reference_id:e,label:a,filters:s}})}catch(n){return{status:!1,msg:n.message}}},async getChildrens(t,e,a){try{return await f().get("index.php?option=com_emundus&controller=translations&task=getchildrens",{params:{table:t,reference_id:e,label:a}})}catch(s){return{status:!1,msg:s.message}}},async getTranslations(t,e,a,s="",n="",i=""){switch(t){case"falang":try{return await f().get("index.php?option=com_emundus&controller=translations&task=getfalangtranslations",{params:{default_lang:e,lang_to:a,reference_table:i,reference_id:s,fields:n}}).then(t=>t.data)}catch(r){return{status:!1,msg:r.message}}case"override":let t={default_lang:e,lang_to:a,reference_table:i,reference_id:s,fields:n},o=m.a.create({paramsSerializer:t=>nn.a.stringify(t)});try{return await o.get("index.php?option=com_emundus&controller=translations&task=gettranslations",{params:t})}catch(r){return{status:!1,msg:r.message}}break;default:}},async updateTranslations(t,e,a,s,n,i,r){switch(e){case"falang":try{const e=new FormData;return e.append("value",t),e.append("lang_to",a),e.append("field",n),e.append("reference_table",i),e.append("reference_id",s),await f().post("index.php?option=com_emundus&controller=translations&task=updatefalangtranslation",e,{headers:{"Content-Type":"multipart/form-data"}})}catch(o){return{status:!1,msg:o.message}}break;case"override":try{const e=new FormData;return e.append("value",t),e.append("lang_to",a),e.append("tag",n),e.append("reference_table",i),e.append("reference_id",s),e.append("reference_field",r),await f().post("index.php?option=com_emundus&controller=translations&task=updatetranslation",e,{headers:{"Content-Type":"multipart/form-data"}})}catch(o){return{status:!1,msg:o.message}}break;default:}},async insertTranslation(t,e,a,s,n,i){switch(e){case"override":try{const e=new FormData;return e.append("value",t),e.append("lang_to",a),e.append("tag",n),e.append("reference_table",i),e.append("reference_id",s),await f().post("index.php?option=com_emundus&controller=translations&task=inserttranslation",e,{headers:{"Content-Type":"multipart/form-data"}})}catch(r){return{status:!1,msg:r.message}}break;default:}},async getOrphelins(t,e){try{return await f().get("index.php?option=com_emundus&controller=translations&task=getorphelins",{params:{default_lang:t,lang_to:e}})}catch(a){return{status:!1,msg:a.message}}},async sendMailToInstallLanguage(t,e=""){try{const a=new FormData;return a.append("suggest_language",t),a.append("comment",e),await f().post("index.php?option=com_emundus&controller=translations&task=sendpurposenewlanguage",a,{headers:{"Content-Type":"multipart/form-data"}})}catch(a){return{status:!1,msg:a.message}}},async getJText(t){try{return await f().get("index.php?option=com_emundus&controller=formbuilder&task=getJTEXT",{params:{toJTEXT:t}})}catch(e){return{status:!1,msg:e.message}}}},on=function(){var t=this,e=t._self._c;return e("div",{staticClass:"form-builder-page-section tw-mt-8 tw-mb-8",attrs:{id:"form-builder-page-section-"+t.section.group_id}},[e("div",{staticClass:"section-card tw-flex tw-flex-col"},[e("div",{staticClass:"section-identifier tw-bg-main-500 tw-cursor-pointer tw-flex tw-items-center",on:{click:function(e){t.closedSection=!t.closedSection}}},[e("span",{directives:[{name:"show",rawName:"v-show",value:t.section.repeat_group,expression:"section.repeat_group"}],staticClass:"material-icons tw-mr-2 tw-text-white"},[t._v("library_add")]),t._v(" "+t._s(t.translate("COM_EMUNDUS_FORM_BUILDER_SECTION"))+" "+t._s(t.index)+" / "+t._s(t.totalSections)+" "),e("span",{directives:[{name:"show",rawName:"v-show",value:!t.closedSection,expression:"!closedSection"}],staticClass:"material-icons tw-ml-2 tw-text-white"},[t._v("unfold_less")]),e("span",{directives:[{name:"show",rawName:"v-show",value:t.closedSection,expression:"closedSection"}],staticClass:"material-icons tw-ml-2 tw-text-white"},[t._v("unfold_more")])]),e("div",{staticClass:"section-content tw-w-full em-p-32",class:{closed:t.closedSection}},[e("div",{staticClass:"tw-flex tw-items-center tw-justify-between tw-w-full"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.section.label[t.shortDefaultLang],expression:"section.label[shortDefaultLang]"}],staticClass:"editable-data tw-w-full",attrs:{id:"section-title",placeholder:t.translate("COM_EMUNDUS_FORM_BUILDER_ADD_PAGE_TITLE_ADD"),maxlength:"100"},domProps:{value:t.section.label[t.shortDefaultLang]},on:{focusout:t.updateTitle,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.blurElement("#section-title")},input:function(e){e.target.composing||t.$set(t.section.label,t.shortDefaultLang,e.target.value)}}}),e("div",{staticClass:"section-actions-wrapper"},[e("span",{staticClass:"material-icons-outlined tw-cursor-pointer hover-opacity",attrs:{title:"Move section upwards"},on:{click:function(e){return t.moveSection("up")}}},[t._v("keyboard_double_arrow_up")]),e("span",{staticClass:"material-icons-outlined tw-cursor-pointer hover-opacity",attrs:{title:"Move section downwards"},on:{click:function(e){return t.moveSection("down")}}},[t._v("keyboard_double_arrow_down")]),e("span",{staticClass:"material-icons-outlined tw-text-red-500 tw-cursor-pointer delete hover-opacity",on:{click:t.deleteSection}},[t._v("delete")]),e("span",{staticClass:"material-icons-outlined tw-cursor-pointer hover-opacity",on:{click:function(e){return t.$emit("open-section-properties")}}},[t._v("settings")])])]),e("transition",{attrs:{name:"slide-down"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.closedSection,expression:"!closedSection"}]},[e("p",{ref:"sectionIntro",staticClass:"editable-data",attrs:{id:"section-intro",contenteditable:"true"},domProps:{innerHTML:t._s(t.section.group_intro)},on:{focusout:t.updateIntro,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.blurElement("#section-intro")}}}),e("draggable",{staticClass:"draggables-list",attrs:{group:"form-builder-section-elements",sort:!0,handle:".handle"},on:{end:t.onDragEnd},model:{value:t.elements,callback:function(e){t.elements=e},expression:"elements"}},[e("transition-group",{attrs:{"data-prid":t.profile_id,"data-page":t.page_id,"data-sid":t.section.group_id}},t._l(t.elements,(function(a){return e("form-builder-page-section-element",{key:a.id,attrs:{element:a},on:{"open-element-properties":function(e){return t.$emit("open-element-properties",a)},"delete-element":t.deleteElement,"cancel-delete-element":t.cancelDeleteElement,"update-element":function(e){return t.$emit("update-element")}}})})),1)],1),t.publishedElements.length<1?e("div",{staticClass:"empty-section-element"},[e("draggable",{staticClass:"draggables-list",attrs:{list:t.emptySection,group:"form-builder-section-elements",sort:!1}},[e("transition-group",{attrs:{"data-prid":t.profile_id,"data-page":t.page_id,"data-sid":t.section.group_id}},t._l(t.emptySection,(function(a,s){return e("p",{key:s,staticClass:"tw-w-full tw-text-center"},[t._v(" "+t._s(t.translate(a.text))+" ")])})),0)],1)],1):t._e()],1)])],1)])])},ln=[],cn=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"show",rawName:"v-show",value:!t.element.hidden&&-2!==t.element.publish||t.element.hidden&&t.sysadmin,expression:"(!element.hidden && element.publish !== -2) || (element.hidden && sysadmin)"}],staticClass:"form-builder-page-section-element",class:{unpublished:!t.element.publish||t.element.hidden,"properties-active":t.propertiesOpened==t.element.id},attrs:{id:"element_"+t.element.id}},[e("div",{staticClass:"tw-flex tw-items-start tw-justify-between tw-w-full tw-mb-2"},[e("div",{staticClass:"tw-w-11/12"},[e("label",{staticClass:"tw-w-full tw-flex tw-items-center fabrikLabel control-label tw-mb-0",on:{click:t.triggerElementProperties}},[t.element.FRequire?e("span",{staticClass:"material-icons !tw-text-xs tw-text-red-500 tw-mr-0",staticStyle:{top:"-5px",position:"relative"}},[t._v("emergency")]):t._e(),t.element.label_value&&2!=t.element.labelsAbove?e("input",{directives:[{name:"model",rawName:"v-model",value:t.element.label[t.shortDefaultLang],expression:"element.label[shortDefaultLang]"}],ref:"element-label-"+t.element.id,staticClass:"tw-ml-2 element-title editable-data",attrs:{id:"element-label-"+t.element.id,name:"element-label-"+t.element.id,type:"text",placeholder:t.translate("COM_EMUNDUS_ONBOARD_TYPE_"+t.element.plugin.toUpperCase())},domProps:{value:t.element.label[t.shortDefaultLang]},on:{focusout:t.updateLabel,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.updateLabelKeyup.apply(null,arguments)},input:function(e){e.target.composing||t.$set(t.element.label,t.shortDefaultLang,e.target.value)}}}):t._e()]),e("span",{staticClass:"fabrikElementTip fabrikElementTipAbove"},[t._v(t._s(t.element.params.rollover.replace(/(<([^>]+)>)/gi,"")))])]),e("div",{staticClass:"tw-flex tw-items-end tw-mt-2",attrs:{id:"element-action-icons"}},[e("span",{staticClass:"material-icons-outlined handle tw-cursor-grab"},[t._v("drag_indicator")]),e("span",{staticClass:"material-icons-outlined tw-text-red-500 tw-cursor-pointer",attrs:{id:"delete-element"},on:{click:t.deleteElement}},[t._v("delete")]),t.sysadmin?e("span",{staticClass:"material-icons-outlined tw-cursor-pointer tw-ml-2",on:{click:t.openAdmin}},[t._v("content_copy")]):t._e()])]),e("div",{class:"element-field fabrikElement"+t.element.plugin,on:{click:t.triggerElementProperties}},[["radiobutton","checkbox"].includes(t.element.plugin)||t.displayOptions&&"dropdown"===t.element.plugin?e("form-builder-element-options",{attrs:{element:t.element,type:"radiobutton"==t.element.plugin?"radio":t.element.plugin},on:{"update-element":function(e){return t.$emit("update-element")}}}):"display"===t.element.plugin?e("form-builder-element-wysiwig",{attrs:{element:t.element,type:"display"},on:{"update-element":function(e){return t.$emit("update-element")}}}):"emundus_phonenumber"===t.element.plugin?e("form-builder-element-phone-number",{attrs:{type:"phonenumber",element:t.element}}):"currency"===t.element.plugin?e("form-builder-element-currency",{attrs:{type:"currency",element:t.element}}):"emundus_geolocalisation"===t.element.plugin?e("form-builder-element-geolocation",{attrs:{type:"geolocation",element:t.element}}):e("div",{staticClass:"fabrikElement",domProps:{innerHTML:t._s(t.element.element)}})],1)])},un=[],dn=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"form-builder-radio-button"}},[t.loading?e("div",{staticClass:"em-loader"}):e("div",[e("draggable",{attrs:{handle:".handle-options"},on:{end:t.updateOrder},model:{value:t.arraySubValues,callback:function(e){t.arraySubValues=e},expression:"arraySubValues"}},t._l(t.arraySubValues,(function(a,s){return e("div",{key:a,staticClass:"element-option tw-flex tw-items-center tw-justify-between tw-mt-2 tw-mb-2",on:{mouseover:function(e){t.optionHighlight=s},mouseleave:function(e){t.optionHighlight=null}}},[e("div",{staticClass:"tw-flex tw-items-center tw-w-full"},[e("div",{staticClass:"tw-flex tw-items-center"},[e("span",{staticClass:"icon-handle",style:t.optionHighlight===s?"opacity: 1":"opacity: 0"},[e("span",{staticClass:"material-icons-outlined handle-options tw-cursor-grab",staticStyle:{"font-size":"18px"}},[t._v("drag_indicator")])])]),"dropdown"!==t.type?e("input",{attrs:{type:t.type,name:"element-id-"+t.element.id},domProps:{value:t.optionsTranslations[s]}}):e("div",[t._v(t._s(s+1)+".")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.optionsTranslations[s],expression:"optionsTranslations[index]"}],staticClass:"editable-data editable-data-input tw-ml-1 tw-w-full",attrs:{type:"text",id:"option-"+t.element.id+"-"+s,placeholder:t.translate("COM_EMUNDUS_FORM_BUILDER_ADD_OPTION")},domProps:{value:t.optionsTranslations[s]},on:{focusout:function(e){return t.updateOption(s,t.optionsTranslations[s])},keyup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.updateOption(s,t.optionsTranslations[s],!0)},function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"tab",9,e.key,"Tab"))return null;t.document.getElementById("new-option-"+t.element.id).focus()}],input:function(e){e.target.composing||t.$set(t.optionsTranslations,s,e.target.value)}}})]),e("div",{staticClass:"tw-flex tw-items-center"},[e("span",{staticClass:"material-icons-outlined tw-cursor-pointer",style:t.optionHighlight===s?"opacity: 1":"opacity: 0",on:{click:function(e){return t.removeOption(s)}}},[t._v("close")])])])})),0),e("div",{staticClass:"tw-flex tw-items-center lg:tw-justify-start md:tw-justify-center",attrs:{id:"add-option"}},[t._m(0),"dropdown"!==t.type?e("input",{attrs:{type:t.type,name:"element-id-"+t.element.id}}):e("div",[t._v(t._s(t.element.params.sub_options.sub_labels.length+1)+".")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.newOption,expression:"newOption"}],staticClass:"editable-data editable-data-input tw-ml-1 tw-w-full",attrs:{type:"text",id:"new-option-"+t.element.id,placeholder:t.translate("COM_EMUNDUS_FORM_BUILDER_ADD_OPTION")},domProps:{value:t.newOption},on:{focusout:t.addOption,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addOption.apply(null,arguments)},input:function(e){e.target.composing||(t.newOption=e.target.value)}}})])],1)])},pn=[function(){var t=this,e=t._self._c;return e("span",{staticClass:"icon-handle",staticStyle:{opacity:"0"}},[e("span",{staticClass:"material-icons-outlined handle-options",staticStyle:{"font-size":"18px"}},[t._v("drag_indicator")])])}],mn={props:{element:{type:Object,required:!0},type:{type:String,required:!0}},components:{draggable:Xe.a},data(){return{loading:!1,newOption:"",arraySubValues:[],optionsTranslations:[],optionHighlight:null}},created(){this.getSubOptionsTranslation()},methods:{async reloadOptions(t=!1){this.loading=!0,Es.getElementSubOptions(this.element.id).then(e=>{e.data.status?(this.element.params.sub_options=e.data.new_options,this.getSubOptionsTranslation(t)):this.loading=!1})},async getSubOptionsTranslation(t=!1){this.loading=!0,Es.getJTEXTA(this.element.params.sub_options.sub_labels).then(e=>{e&&(this.optionsTranslations=Object.values(e.data),this.arraySubValues=this.element.params.sub_options.sub_values.map((t,e)=>({sub_value:t,sub_label:this.element.params.sub_options.sub_labels[e]})),setTimeout(()=>{t&&document.getElementById("new-option-"+this.element.id).focus()},200)),this.loading=!1})},addOption(){""!=this.newOption.trim()&&(this.loading=!0,Es.addOption(this.element.id,this.newOption,this.shortDefaultLang).then(t=>{this.newOption="",t.data.status&&this.reloadOptions(!0),this.loading=!1}))},updateOption(t,e,a=!1){this.loading=!0,Es.updateOption(this.element.id,this.element.params.sub_options,t,e,this.shortDefaultLang).then(e=>{e.data.status?this.reloadOptions().then(()=>{a&&setTimeout(()=>{document.getElementById("option-"+this.element.id+"-"+(t+1)).focus()},300)}):this.loading=!1})},updateOrder(){if(this.arraySubValues.length>1){let t={sub_values:[],sub_labels:[]};this.arraySubValues.forEach((e,a)=>{t.sub_values.push(e.sub_value),t.sub_labels.push(e.sub_label)}),this.element.params.sub_options.sub_values.every((e,a)=>e===t.sub_values[a])?console.log("No need to call reorder, same order"):(this.loading=!0,Es.updateElementSubOptionsOrder(this.element.id,this.element.params.sub_options,t).then(t=>{t.data.status?this.reloadOptions():this.loading=!1}))}else console.log("No need to reorder, only one element")},removeOption(t){this.loading=!0,Es.deleteElementSubOption(this.element.id,t).then(t=>{t.data.status?this.reloadOptions():this.loading=!1})}}},hn=mn,fn=(a("713c"),Object(y["a"])(hn,dn,pn,!1,null,null,null)),_n=fn.exports,gn=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"form-builder-wysiwig"}},[t.loading?e("div",{staticClass:"em-loader"}):e("div",[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.editable,expression:"!editable"}],attrs:{id:t.element.id},domProps:{innerHTML:t._s(t.element.element)},on:{click:function(e){t.editable=!0}}}),e("transition",{attrs:{name:"slide-down",type:"transition"}},[t.editable?e("editor",{key:t.dynamicComponent,attrs:{height:"30em",text:t.element.default,lang:"fr",enable_variables:!1,id:"editor_"+t.element.id},on:{focusout:t.updateDisplayText},model:{value:t.element.default,callback:function(e){t.$set(t.element,"default",e)},expression:"element.default"}}):t._e()],1)],1)])},vn=[],yn=function(){var t=this,e=t._self._c;return e("div",{staticClass:"editor"},[e("div",{attrs:{id:"tiny_"+t.selector_id}})])},bn=[],wn=a("8e5c"),On=a.n(wn),En=(a("a881"),a("59d1"),a("9908"),a("53b8"),a("66c5"),a("26ab"),a("2efd"),a("5cb9"),a("0898"),a("5aa7"),a("750b"),a("8f8e"),a("bedc"),{components:{editor:On.a},props:{text:String,lang:String,placeholder:String,id:String,height:String,enable_variables:Boolean},data(){return{selector_id:this.id+Ta.a.random(1e4,99999),variables:{},data:null}},methods:{saveText(){void 0!==typeof On.a.activeEditor&&null!==On.a.activeEditor&&this.$emit("input",On.a.activeEditor.getContent())}},watch:{text:function(){this.$forceUpdate()}},mounted(){m()({method:"get",url:"index.php?option=com_emundus&controller=settings&task=geteditorvariables"}).then(t=>{this.variables=t.data.data});var t=window.location.protocol+"//"+window.location.host+"/media/com_emundus_vue/";let e={selector:"#tiny_"+this.selector_id,images_upload_url:"index.php?option=com_emundus&controller=settings&task=uploadimages",plugins:"paste link media preview image code advlist hr emoticons lists searchreplace charmap quickbars pagebreak autolink print mention",toolbar:"undo redo | forecolor bold italic underline strikethrough | fontsizeselect | image preview | alignleft aligncenter alignright alignjustify hr | bullist numlist | outdent indent | insertfile media anchor| charmap emoticons backcolor | searchreplace print",fontsize_formats:"8pt 10pt 12pt 14pt 18pt 24pt 36pt",content_css:t+"skins/ui/oxide/content.min.css",convert_urls:!1,height:this.height,branding:!1,elementpath:!1,statusbar:!1,menubar:!1,a11y_advanced_options:!1,toolbar_sticky:!1,quickbars_insert_toolbar:"",quickbars_selection_toolbar:"bold italic underline | quicklink h2 h3 blockquote",toolbar_mode:"sliding",placeholder:this.placeholder,file_picker_types:"image",paste_data_images:!0,file_picker_callback:function(t,e,a){var s=document.createElement("input");s.setAttribute("type","file"),s.setAttribute("accept","image/*"),s.onchange=function(){var e=this.files[0],a=new FileReader;a.onload=function(){var s="blobid"+(new Date).getTime(),n=On.a.activeEditor.editorUpload.blobCache,i=a.result.split(",")[1],r=n.create(s,e,i);n.add(r),t(r.blobUri(),{title:e.name})},a.readAsDataURL(e)},s.click()},mentions:{delimiter:"/",source:(t,e,a)=>{"/"===a&&1==this.enable_variables&&e(this.variables)},queryBy:"value",delay:200,insert:t=>(setTimeout(()=>{this.$emit("input",On.a.activeEditor.getContent())},500),"<span>["+t.value+"]</span>"),render:function(t){return'<li class="email-tags"><a href="javascript:;"><span>'+t.value+"</span><p>"+t.description+"</p></a></li>"},renderDropdown:function(){return'<ul class="rte-autocomplete em-autocomplete dropdown-menu"></ul>'}},setup:t=>{t.on("keyup",()=>{this.$emit("input",On.a.activeEditor.getContent())}),t.on("blur",()=>{this.$emit("focusout",On.a.activeEditor.getContent())}),t.on("init",()=>{On.a.activeEditor.setContent(this.text)})}};"fr"==this.lang?(e.language="fr_FR",e.language_url=t+"languages/fr_FR.js",On.a.init(e)):On.a.init(e),this.$forceUpdate(),setInterval(this.saveText,3e3)}}),Cn=En,Nn=(a("1901"),Object(y["a"])(Cn,yn,bn,!1,null,"e9696e9a",null)),Sn=Nn.exports,An={props:{element:{type:Object,required:!0},type:{type:String,required:!0}},components:{Editor:Sn},data(){return{loading:!1,editable:!1,dynamicComponent:0}},created(){},methods:{updateDisplayText(t){this.editable=!1,Es.updateDefaultValue(this.$props.element.id,t).then(t=>{this.$emit("update-element")})}},watch:{}},Dn=An,Mn=Object(y["a"])(Dn,gn,vn,!1,null,null,null),xn=Mn.exports,Tn=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"form-builder-phone-number"}},[t.loading?e("div",{staticClass:"em-loader"}):e("div",[e("div",{staticClass:"tw-flex tw-items-center"},[e("div",{staticClass:"tw-h-10 country-select tw-flex tw-items-center tw-p-2 tw-justify-center"},[t.element.params.default_country?e("img",{attrs:{src:"/images/emundus/flags/"+t.element.params.default_country.toLowerCase()+".png"}}):e("img",{attrs:{src:"/images/emundus/flags/fr.png"}})]),t._m(0)])])])},Un=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"tw-w-full"},[e("input",{staticClass:"phonenumber",attrs:{readonly:"",type:"text",value:"+33 6 12 34 56 78"}})])}],kn={props:{element:{type:Object,required:!0},type:{type:String,required:!0}},components:{Editor:Sn},data(){return{loading:!1,editable:!1,dynamicComponent:0}},created(){},methods:{},watch:{}},Rn=kn,Ln=(a("7861"),Object(y["a"])(Rn,Tn,Un,!1,null,null,null)),In=Ln.exports,Pn=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"form-builder-currency"}},[t.loading?e("div",{staticClass:"em-loader"}):e("div",{staticClass:"tw-w-full tw-relative tw-flex tw-items-center currency-block"},[e("input",{staticClass:"currency",attrs:{readonly:"",type:"text"},domProps:{value:this.element.params["all_currencies_options"]["all_currencies_options0"].minimal_value}}),e("span",{staticClass:"currency-icon"},[t._v(" "+t._s(t.currencyIcon)+" ")])])])},Bn=[],jn={props:{element:{type:Object,required:!0},type:{type:String,required:!0}},components:{Editor:Sn},data(){return{loading:!1,editable:!1,dynamicComponent:0}},created(){},methods:{},watch:{},computed:{currencyIcon(){switch(this.element.params["all_currencies_options"]["all_currencies_options0"].iso3){case"USD":return"$";case"EUR":return"";case"GBP":return"";case"JPY":return"";default:return""}}}},Fn=jn,qn=(a("afd4"),Object(y["a"])(Fn,Pn,Bn,!1,null,null,null)),$n=qn.exports,Hn=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"form-builder-geolocation"}},[e("link",{attrs:{rel:"stylesheet",href:"https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",integrity:"sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=",crossorigin:""}}),t.loading?e("div",{staticClass:"em-loader"}):e("div",{staticClass:"fabrikSubElementContainer fabrikEmundusGeolocalisation",attrs:{id:"map_container_"+t.element.id}})])},Gn=[],zn={props:{element:{type:Object,required:!0},type:{type:String,required:!0}},components:{Editor:Sn},data(){return{loading:!1,mapContainer:null}},mounted(){"undefined"!==typeof L&&null!==L&&(this.mapContainer=L.map("map_container_"+this.$props.element.id).setView(["48.85341","2.3488"],13),L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:" OpenStreetMap"}).addTo(this.mapContainer),this.mapContainer.dragging.disable(),this.mapContainer.touchZoom.disable(),this.mapContainer.doubleClickZoom.disable(),this.mapContainer.scrollWheelZoom.disable(),this.mapContainer.boxZoom.disable(),this.mapContainer.keyboard.disable(),this.mapContainer.tap&&this.mapContainer.tap.disable())},methods:{},watch:{}},Vn=zn,Yn=(a("b995"),Object(y["a"])(Vn,Hn,Gn,!1,null,null,null)),Jn=Yn.exports,Kn={components:{FormBuilderElementGeolocation:Jn,FormBuilderElementCurrency:$n,FormBuilderElementPhoneNumber:In,FormBuilderElementWysiwig:xn,FormBuilderElementOptions:_n},props:{element:{type:Object,default:{}}},mixins:[Cs,A],data(){return{keysPressed:[],options_enabled:!1}},methods:{updateLabel(){this.element.label[this.shortDefaultLang]=this.$refs["element-label-"+this.element.id].value.trim().replace(/[\r\n]/gm,""),Es.updateTranslation({value:this.element.id,key:"element"},this.element.label_tag,this.element.label).then(t=>{t.data.status?(this.element.label_tag=t.data.data,this.updateLastSave()):Swal.fire({title:this.translate("COM_EMUNDUS_FORM_BUILDER_ERROR"),text:this.translate("COM_EMUNDUS_FORM_BUILDER_ERROR_SAVE_TRANSLATION"),type:"error",cancelButtonText:this.translate("OK")})})},updateLabelKeyup(){document.activeElement.blur()},updateElement(){Es.updateParams(this.element).then(t=>{t.data.status?(this.$emit("update-element"),this.updateLastSave()):Swal.fire({title:this.translate("COM_EMUNDUS_FORM_BUILDER_ERROR"),text:this.translate("COM_EMUNDUS_FORM_BUILDER_ERROR_UPDATE_PARAMS"),type:"error",cancelButtonText:this.translate("OK")})})},deleteElement(){this.swalConfirm(this.translate("COM_EMUNDUS_FORM_BUILDER_DELETE_ELEMENT"),this.element.label[this.shortDefaultLang],this.translate("COM_EMUNDUS_FORM_BUILDER_DELETE_ELEMENT_CONFIRM"),this.translate("JNO"),()=>{Es.deleteElement(this.element.id),this.$emit("delete-element",this.element.id),this.updateLastSave(),this.tip("foo-velocity",this.translate("COM_EMUNDUS_FORM_BUILDER_DELETED_ELEMENT_TEXT"),this.translate("COM_EMUNDUS_FORM_BUILDER_DELETED_ELEMENT_TITLE")),window.addEventListener("keydown",this.cancelDelete)})},openAdmin(){navigator.clipboard.writeText(this.element.id),Swal.fire({title:"Identifiant de l'lment copi",type:"success",showCancelButton:!1,showConfirmButton:!1,customClass:{title:"em-swal-title"},timer:1500})},triggerElementProperties(){this.$emit("open-element-properties")},cancelDelete(t){let e=this.$parent.$parent.$parent.elementsDeletedPending,a=e.indexOf(this.element.id);e.indexOf(this.element.id)===e.length-1&&(t.stopImmediatePropagation(),this.keysPressed[t.key]=!0,(this.keysPressed["Control"]||this.keysPressed["Meta"])&&"z"===t.key&&(Es.toggleElementPublishValue(this.element.id),this.$emit("cancel-delete-element",this.element.id),this.keysPressed=[],document.removeEventListener("keydown",this.cancelDelete),this.$parent.$parent.$parent.elementsDeletedPending.splice(a,1)))}},computed:{sysadmin:function(){return parseInt(this.$store.state.global.sysadminAccess)},displayOptions:function(){return this.$parent.$parent.$parent.$parent.$parent.$parent.optionsSelectedElement&&null!==this.$parent.$parent.$parent.$parent.$parent.$parent.selectedElement&&this.$parent.$parent.$parent.$parent.$parent.$parent.selectedElement.id==this.element.id},propertiesOpened:function(){return null!==this.$parent.$parent.$parent.$parent.$parent.$parent.selectedElement?this.$parent.$parent.$parent.$parent.$parent.$parent.selectedElement.id:0}}},Wn=Kn,Xn=(a("7726"),Object(y["a"])(Wn,cn,un,!1,null,null,null)),Zn=Xn.exports,Qn={components:{FormBuilderPageSectionElement:Zn,draggable:Xe.a},props:{profile_id:{type:Number,required:!0},page_id:{type:Number,required:!0},section:{type:Object,required:!0},index:{type:Number,default:0},totalSections:{type:Number,default:0}},mixins:[Cs,A],data(){return{closedSection:!1,elements:[],emptySection:[{text:"COM_EMUNDUS_FORM_BUILDER_EMPTY_SECTION"}],elementsDeletedPending:[]}},created(){this.getElements()},methods:{getElements(){this.elements=Object.values(this.section.elements).length>0?Object.values(this.section.elements):[]},updateTitle(){this.section.label[this.shortDefaultLang]=this.section.label[this.shortDefaultLang].trim(),Es.updateTranslation({value:this.section.group_id,key:"group"},this.section.group_tag,this.section.label).then(t=>{t.data.status?(this.section.group_tag=t.data.data,this.updateLastSave()):Swal.fire({title:this.translate("COM_EMUNDUS_FORM_BUILDER_ERROR"),text:this.translate("COM_EMUNDUS_FORM_BUILDER_ERROR_SAVE_TRANSLATION"),type:"error",cancelButtonText:this.translate("OK")})})},blurElement(t){document.querySelector(t).blur()},updateIntro(){this.$refs.sectionIntro.innerHTML=this.$refs.sectionIntro.innerHTML.trim().replace(/[\r\n]/gm," "),this.section.group_intro=this.$refs.sectionIntro.innerHTML,Es.updateGroupParams(this.section.group_id,{intro:this.section.group_intro},this.shortDefaultLang).then(t=>{t.data.status?this.updateLastSave():Swal.fire({title:this.translate("COM_EMUNDUS_FORM_BUILDER_ERROR"),text:this.translate("COM_EMUNDUS_FORM_BUILDER_ERROR_UPDATE_GROUP_PARAMS"),type:"error",cancelButtonText:this.translate("OK")})})},onDragEnd(t){const e=t.to.getAttribute("data-sid");if(e==this.section.group_id){const e=this.elements.map((t,e)=>({id:t.id,order:e+1})),a=this.elements[t.newIndex];Es.updateOrder(e,this.section.group_id,a).then(t=>{this.updateLastSave();let e={};this.elements.forEach((t,a)=>{e["element"+t.id]=t}),this.section.elements=e})}else this.$emit("move-element",t,this.section.group_id,e)},deleteElement(t){this.section.elements["element"+t].publish=-2,this.elementsDeletedPending.push(t),this.getElements(),this.updateLastSave()},cancelDeleteElement(t){this.section.elements["element"+t].publish=!0,this.getElements()},deleteSection(){this.swalConfirm(this.translate("COM_EMUNDUS_FORM_BUILDER_DELETE_SECTION"),this.section.label[this.shortDefaultLang],this.translate("COM_EMUNDUS_FORM_BUILDER_DELETE_SECTION_CONFIRM"),this.translate("JNO"),()=>{Es.deleteGroup(this.section.group_id),this.$emit("delete-section",this.section.group_id),this.updateLastSave()})},moveSection(t="up"){this.$emit("move-section",this.section.group_id,t)}},watch:{section:{handler(){this.getElements()},deep:!0}},computed:{publishedElements(){return this.elements&&this.elements.length>0?this.elements.filter(t=>!0===t.publish&&(!1===t.hidden||this.sysadmin)):[]},sysadmin:function(){return parseInt(this.$store.state.global.sysadminAccess)}}},ti=Qn,ei=(a("c512"),Object(y["a"])(ti,on,ln,!1,null,null,null)),ai=ei.exports,si={components:{FormBuilderPageSection:ai},props:{profile_id:{type:Number,default:0},page:{type:Object,default:{}},mode:{type:String,default:"forms"}},mixins:[Cs,A,nt],data(){return{fabrikPage:{},title:"COM_EMUNDUS_FORM_BUILDER_NEW_PAGE",description:"",sections:[],loading:!1}},mounted(){this.page.id&&(this.title=this.page.label,this.getSections())},methods:{getSections(t=null,e=!1){this.loading=!0,Va.getPageObject(this.page.id).then(a=>{if(a.status&&""!=a.data){this.fabrikPage=a.data,this.title=this.fabrikPage.show_title.label[this.shortDefaultLang];const s=Object.values(a.data.Groups);this.sections=s.filter(t=>-1!=t.hidden_group),this.getDescription(),t&&setTimeout(()=>{e&&document.getElementById("center_content").scrollTo(0,document.getElementById("center_content").scrollHeight),document.getElementById("element_"+t).style.backgroundColor="var(--main-50)",document.getElementById("element_"+t).style.borderColor="var(--main-400)",document.getElementById("element-label-"+t).focus(),setTimeout(()=>{document.getElementById("element_"+t).style.backgroundColor="inherit",document.getElementById("element_"+t).style.borderColor=""},1500)},300)}else this.displayError(this.translate("COM_EMUNDUS_FORM_BUILDER_ERROR"),this.translate(a.msg));this.loading=!1})},getDescription(){Es.getAllTranslations(this.fabrikPage.intro_raw).then(t=>{t.status&&t.data&&""!==t.data[this.shortDefaultLang]&&(this.description=t.data[this.shortDefaultLang])})},addSection(){this.sections.length<10?Es.createSimpleGroup(this.page.id,{fr:"Nouvelle section",en:"New section"},this.mode).then(t=>{t.status?(this.getSections(),this.updateLastSave()):this.displayError(this.translate("COM_EMUNDUS_FORM_BUILDER_CREATE_SECTION_ERROR"),this.translate(t.msg))}).catch(t=>{this.displayError(this.translate("COM_EMUNDUS_FORM_BUILDER_CREATE_SECTION_ERROR"),t)}):this.displayError(this.translate("COM_EMUNDUS_FORM_BUILDER_MAX_SECTION_TITLE"),this.translate("COM_EMUNDUS_FORM_BUILDER_MAX_SECTION_TEXT"))},moveSection(t,e){let a=this.sections.map((t,e)=>({id:t.group_id,order:e}));const s=a.findIndex(e=>t===e.id),n=a[s].id;"up"===e?s>0&&(a[s].id=a[s-1].id,a[s-1].id=n):s<a.length-1&&(a[s].id=a[s+1].id,a[s+1].id=n),Es.reorderSections(this.page.id,a);const i=this.sections;let r=[];a.forEach(t=>{r.push(i.find(e=>e.group_id===t.id))}),this.sections=r},updateTitle(){this.fabrikPage.show_title.label[this.shortDefaultLang]=this.$refs.pageTitle.innerText.trim().replace(/[\r\n]/gm,""),this.$refs.pageTitle.innerText=this.$refs.pageTitle.innerText.trim().replace(/[\r\n]/gm,""),Es.updateTranslation(null,this.fabrikPage.show_title.titleraw,this.fabrikPage.show_title.label).then(t=>{t.status&&(rn.updateTranslations(this.fabrikPage.show_title.label[this.shortDefaultLang],"falang",this.shortDefaultLang,this.fabrikPage.menu_id,"title","menu"),this.$emit("update-page-title",{page:this.page.id,new_title:this.$refs.pageTitle.innerText}),this.updateLastSave())})},updateTitleKeyup(){document.activeElement.blur()},updateDescription(){this.fabrikPage.intro[this.shortDefaultLang]=this.$refs.pageDescription.innerText.replace(/[\r\n]/gm,"<br/>"),Es.updateTranslation(null,this.fabrikPage.intro_raw,this.fabrikPage.intro).then(t=>{t.data.status&&(this.updateLastSave(),this.fabrikPage.intro_raw=t.data.data),""===this.$refs.pageDescription.innerText&&(document.getElementById("pageDescription").textContent=this.translate("COM_EMUNDUS_FORM_BUILDER_ADD_PAGE_INTRO_ADD"),document.getElementById("pageDescription").classList.add("em-text-neutral-600"))})},updateElementsOrder(t,e,a){let s=!1;if(e>0&&a>0&&e!=a){const n=this.sections.find(t=>t.group_id===e),i=Object.values(n.elements),r=i[t.oldIndex];if(void 0!==r&&null!==r&&r.id){const e=this.$refs["section-"+a][0].elements.find(t=>t.id===r.id);void 0!=e&&null!=e||this.$refs["section-"+a][0].elements.splice(t.newIndex,0,r);const n=this.$refs["section-"+a][0].elements.map((t,e)=>({id:t.id,order:e+1}));Es.updateOrder(n,a,r).then(t=>{s=t.data.status,s||this.displayError("COM_EMUNDUS_FORM_BUILDER_UPDATE_ELEMENTS_ORDER_FAILED")}),this.updateLastSave()}else this.displayError("COM_EMUNDUS_FORM_BUILDER_UPDATE_ELEMENTS_ORDER_FAILED")}else this.displayError("COM_EMUNDUS_FORM_BUILDER_UPDATE_ELEMENTS_ORDER_FAILED")},deleteSection(t){this.sections=this.sections.filter(e=>e.group_id!==t),this.updateLastSave()}}},ni=si,ii=(a("2a41"),Object(y["a"])(ni,en,an,!1,null,null,null)),ri=ii.exports,oi=function(){var t=this,e=t._self._c;return e("div",{staticClass:"tw-w-full em-p-32 tw-pt-4",attrs:{id:"form-builder-create-page"}},[e("div",[e("h3",{staticClass:"tw-mb-1 em-text-neutral-800"},[t._v(t._s(t.translate("COM_EMUNDUS_FORM_BUILDER_CREATE_NEW_PAGE")))]),e("p",[t._v(t._s(t.translate("COM_EMUNDUS_FORM_BUILDER_CREATE_NEW_PAGE_INTRO")))]),e("section",{attrs:{id:"new-page"}},[e("div",{staticClass:"tw-mt-4 tw-mb-4 card-wrapper",class:{selected:-1===t.selected},on:{click:function(e){t.selected=-1}}},[e("div",{staticClass:"card em-shadow-cards tw-cursor-pointer tw-flex tw-items-center",on:{dblclick:t.createPage}},[e("span",{staticClass:"add_circle material-icons-outlined em-main-500-color"},[t._v("add_circle")])]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.page.label[t.shortDefaultLang],expression:"page.label[shortDefaultLang]"}],staticClass:"em-p-4",class:{"tw-text-white":-1===t.selected,"tw-bg-main-500":-1===t.selected},attrs:{type:"text"},domProps:{value:t.page.label[t.shortDefaultLang]},on:{input:function(e){e.target.composing||t.$set(t.page.label,t.shortDefaultLang,e.target.value)}}})])]),e("div",{staticClass:"separator tw-mt-8"},[e("p",{staticClass:"line-head em-mt-4 em-p-8 tw-text-white tw-bg-main-500"},[t._v(" "+t._s(t.translate("COM_EMUNDUS_FORM_BUILDER_CREATE_NEW_PAGE_FROM_MODEL")))]),e("div",{staticClass:"line tw-bg-main-500"})]),e("section",{staticClass:"tw-flex tw-items-center tw-w-full",attrs:{id:"models"}},[t.loading?e("div",{staticClass:"tw-w-full"},[e("skeleton",{attrs:{width:"206px",height:"41px",classes:"tw-mt-4 tw-mb-4 tw-rounded-coordinator"}}),e("div",{staticClass:"models-card tw-grid"},t._l(16,(function(t){return e("div",{key:t,staticClass:"tw-flex tw-flex-col card-wrapper tw-mr-6"},[e("skeleton",{attrs:{width:"150px",height:"200px",classes:"card em-shadow-cards model-preview"}}),e("skeleton",{attrs:{width:"150px",height:"20px",classes:"em-p-4"}})],1)})),0)],1):e("div",{staticClass:"tw-w-full"},[e("div",{attrs:{id:"search-model-wrapper"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"tw-mt-4",attrs:{id:"search-model",type:"text",placeholder:"Rechercher"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}}),e("span",{staticClass:"reset-search material-icons-outlined tw-cursor-pointer",on:{click:function(e){t.search=""}}},[t._v("close")])]),e("section",{attrs:{id:"structure-options"}},[e("div",{staticClass:"tw-flex tw-items-center"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.structure,expression:"structure"}],attrs:{type:"radio",id:"new-structure",name:"structure",value:"new"},domProps:{checked:t._q(t.structure,"new")},on:{change:function(e){t.structure="new"}}}),e("label",{attrs:{for:"new-structure"}},[t._v(t._s(t.translate("COM_EMUNDUS_FORM_BUILDER_NEW_STRUCTURE")))])]),e("div",{staticClass:"tw-flex tw-items-center",class:{disabled:!t.canUseInitialStructure}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.structure,expression:"structure"}],attrs:{type:"radio",id:"initial-structure",name:"structure",value:"initial"},domProps:{checked:t._q(t.structure,"initial")},on:{change:function(e){t.structure="initial"}}}),e("label",{attrs:{for:"initial-structure"}},[t._v(t._s(t.translate("COM_EMUNDUS_FORM_BUILDER_INITIAL_STRUCTURE")))])])]),e("div",{staticClass:"models-card tw-flex tw-items-center"},[t._l(t.models,(function(a){return e("div",{key:a.id,staticClass:"card-wrapper em-mr-32",class:{selected:a.id===t.selected,hidden:!a.displayed},attrs:{title:a.label[t.shortDefaultLang]},on:{click:function(e){t.selected=a.id},dblclick:t.createPage}},[e("form-builder-preview-form",{staticClass:"card em-shadow-cards model-preview tw-cursor-pointer",class:{"tw-text-white":a.id===t.selected,"tw-bg-main-500":a.id===t.selected},attrs:{form_id:Number(a.form_id),form_label:a.label[t.shortDefaultLang]}}),e("p",{staticClass:"em-p-4",class:{"tw-text-white":a.id===t.selected,"tw-bg-main-500":a.id===t.selected}},[t._v(" "+t._s(a.label[t.shortDefaultLang])+" ")])],1)})),t.displayedModels.length<1?e("div",{staticClass:"empty-model-message tw-w-full tw-text-center"},[e("span",{staticClass:"material-icons-outlined"},[t._v("manage_search")]),e("p",{staticClass:"tw-w-full"},[t._v(" "+t._s(t.translate("COM_EMUNDUS_FORM_BUILDER_EMPTY_PAGE_MODELS")))])]):t._e()],2)])])]),e("div",{staticClass:"actions tw-justify-between tw-flex tw-items-center tw-w-full"},[e("button",{staticClass:"em-secondary-button !tw-w-auto tw-bg-white",on:{click:function(e){return t.close(!1)}}},[t._v(" "+t._s(t.translate("COM_EMUNDUS_FORM_BUILDER_CANCEL"))+" ")]),e("button",{staticClass:"em-primary-button tw-w-auto tw-ml-2",on:{click:t.createPage}},[t._v(" "+t._s(t.translate("COM_EMUNDUS_FORM_BUILDER_PAGE_CREATE_SAVE"))+" ")])])])},li=[],ci={name:"FormBuilderCreatePage.vue",components:{Skeleton:Ct,FormBuilderPreviewForm:Wa},props:{profile_id:{type:Number,required:!0}},data(){return{loading:!0,selected:-1,models:[],page:{label:{fr:"Nouvelle page",en:"New page"},intro:{fr:"",en:""},prid:this.profile_id,template:0},search:"",structure:"new",canUseInitialStructure:!0}},created(){this.getModels()},methods:{getModels(){Es.getModels().then(t=>{t.status?this.models=t.data.map(t=>(t.displayed=!0,t)):Swal.fire({type:"warning",title:this.translate("COM_EMUNDUS_FORM_BUILDER_GET_PAGE_MODELS_ERROR"),reverseButtons:!0,customClass:{title:"em-swal-title",confirmButton:"em-swal-confirm-button",actions:"em-swal-single-action"}}),this.loading=!1})},createPage(){let t=-1;if(this.selected>0){const e=this.models.find(t=>t.id===this.selected);e&&(t=e.form_id,this.page.label=e.label,this.page.intro=e.intro),"new"===this.structure||this.canUseInitialStructure||(this.structure="new")}const e={...this.page,modelid:t,keep_structure:"initial"===this.structure};Es.addPage(e).then(t=>{t.status?this.close(!0,t.data.id):(Swal.fire({type:"error",title:this.translate("COM_EMUNDUS_FORM_BUILDER_CREATE_PAGE_ERROR"),reverseButtons:!0,customClass:{title:"em-swal-title",confirmButton:"em-swal-confirm-button",actions:"em-swal-single-action"}}),this.close(!1))})},close(t=!0,e=0){this.$emit("close",{reload:t,newSelected:e})},isInitialStructureAlreadyUsed(){let t=!1;if(-1===this.selected)return t;{const e=this.models.find(t=>t.id===this.selected);if(!e)return t;Es.checkIfModelTableIsUsedInForm(e.form_id,this.profile_id).then(e=>(e.status&&(t=e.data),t?(this.structure="new",this.canUseInitialStructure=!1):this.canUseInitialStructure=!0,t)).catch(()=>(this.canUseInitialStructure=!1,!0))}}},computed:{displayedModels(){return this.models.filter(t=>t.displayed)}},watch:{search:function(){this.models.forEach(t=>{t.displayed=t.label[this.shortDefaultLang].toLowerCase().includes(this.search.toLowerCase().trim())})},selected:function(){-1!==this.selected&&this.isInitialStructureAlreadyUsed()}}},ui=ci,di=(a("0b2c"),Object(y["a"])(ui,oi,li,!1,null,"481145fb",null)),pi=di.exports,mi=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"form-builder-pages"}},[e("p",{staticClass:"form-builder-title tw-flex tw-items-center md:tw-justify-center lg:tw-justify-between tw-p-4"},[e("span",[t._v(t._s(t.translate("COM_EMUNDUS_FORM_BUILDER_EVERY_PAGE")))]),e("span",{staticClass:"material-icons tw-cursor-pointer",attrs:{id:"add-page"},on:{click:function(e){return t.$emit("open-page-create")}}},[t._v(" add ")])]),e("draggable",{staticClass:"draggables-list",attrs:{group:"form-builder-pages",sort:!0},on:{end:t.onDragEnd},model:{value:t.pages,callback:function(e){t.pages=e},expression:"pages"}},[e("transition-group",t._l(t.formPages,(function(a,s){return e("div",{key:a.id,staticClass:"tw-font-medium tw-cursor-pointer",class:{selected:a.id==t.selected}},[e("div",{staticClass:"tw-flex tw-items-center tw-justify-between",on:{mouseover:function(e){t.pageOptionsShown=a.id},mouseleave:function(e){t.pageOptionsShown=0}}},[e("p",{staticClass:"tw-w-full tw-p-4 form-builder-page-label",on:{click:function(e){return t.selectPage(a.id)}}},[t._v(t._s(""!==a.label?t.translate(a.label):t.translate("COM_EMUNDUS_FILES_PAGE")+" "+(s+1)))]),e("div",{staticClass:"tw-flex tw-items-center tw-p-4",style:t.pageOptionsShown==a.id?"opacity:1":"opacity: 0"},[e("v-popover",{attrs:{popoverArrowClass:"custom-popover-arrow",placement:"left"}},[e("span",{staticClass:"material-icons"},[t._v("more_horiz")]),e("template",{slot:"popover"},[e("transition",{attrs:{name:"slide-down",type:"transition"}},[e("ul",{staticStyle:{"list-style-type":"none",margin:"0",padding:"0"}},[e("li",{staticClass:"tw-cursor-pointer tw-p-2 tw-text-base tw-text-red-500",on:{click:function(e){return t.deletePage(a)}}},[t._v(" "+t._s(t.translate("COM_EMUNDUS_FORM_BUILDER_DELETE_PAGE"))+" ")]),e("li",{staticClass:"tw-cursor-pointer tw-p-2 tw-text-base",on:{click:function(e){return t.createModelFrom(a)}}},[t._v(" "+t._s(t.translate("COM_EMUNDUS_FORM_BUILDER_SAVE_AS_MODEL_TITLE"))+" ")])])])],1)],2)],1)])])})),0)],1),e("transition-group",t._l(t.submissionPages,(function(a){return e("div",{key:a.id,staticClass:"tw-font-medium tw-cursor-pointer",class:{selected:a.id==t.selected}},[e("div",{staticClass:"tw-flex tw-items-center tw-justify-between"},[e("p",{staticClass:"tw-w-full tw-p-4",on:{click:function(e){return t.selectPage(a.id)}}},[t._v(t._s(a.label))])])])})),0)],1)},hi=[],fi={name:"FormBuilderPages",components:{draggable:Xe.a},props:{pages:{type:Array,required:!0},selected:{type:Number,default:0},profile_id:{type:Number,required:!0}},mixins:[Cs],data(){return{pageOptionsShown:0}},created(){},methods:{selectPage(t){this.$emit("select-page",t)},deletePage(t){this.pages.length>2?$.a.fire({title:this.translate("COM_EMUNDUS_FORM_BUILDER_DELETE_PAGE_CONFIRMATION")+t.label,text:this.translate("COM_EMUNDUS_FORM_BUILDER_DELETE_PAGE_CONFIRMATION_TEXT"),showCancelButton:!0,confirmButtonText:this.translate("COM_EMUNDUS_ACTIONS_DELETE"),cancelButtonText:this.translate("COM_EMUNDUS_ONBOARD_CANCEL"),reverseButtons:!0,customClass:{title:"em-swal-title",cancelButton:"em-swal-cancel-button",confirmButton:"em-swal-delete-button"}}).then(e=>{e.value&&Es.deletePage(t.id).then(e=>{if(e.status){let e=this.pages.findIndex(e=>e.id===t.id);this.pages.splice(e,1),this.selected==t.id&&this.$emit("delete-page"),this.updateLastSave()}})}):$.a.fire({title:this.translate("COM_EMUNDUS_FORM_BUILDER_DELETE_PAGE_ERROR"),text:this.translate("COM_EMUNDUS_FORM_BUILDER_DELETE_PAGE_ERROR_TEXT"),type:"error",showCancelButton:!1,confirmButtonText:this.translate("COM_EMUNDUS_ONBOARD_OK"),reverseButtons:!0,customClass:{title:"em-swal-title",confirmButton:"em-swal-confirm-button",actions:"em-swal-single-action"}})},createModelFrom(t){this.$emit("open-create-model",t.id)},onDragEnd(){const t=this.pages.map((t,e)=>({rgt:e,link:t.link}));Es.reorderMenu(t,this.$props.profile_id).then(t=>{200==t.status&&t.data.status?this.$emit("reorder-pages",this.pages):$.a.fire({title:this.translate("COM_EMUNDUS_FORM_BUILDER_UPDATE_ORDER_PAGE_ERROR"),text:result.msg,type:"error",showCancelButton:!1,confirmButtonText:this.translate("COM_EMUNDUS_ONBOARD_OK"),reverseButtons:!0,customClass:{title:"em-swal-title",confirmButton:"em-swal-confirm-button",actions:"em-swal-single-action"}})})}},computed:{formPages(){return this.pages.filter(t=>"submission"!=t.type)},submissionPages(){return this.pages.filter(t=>"submission"==t.type)}}},_i=fi,gi=(a("d9f4"),Object(y["a"])(_i,mi,hi,!1,null,null,null)),vi=gi.exports,yi=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"form-builder-documents"}},[e("div",{staticClass:"tw-cursor-pointer tw-flex tw-items-center tw-justify-between tw-p-4",attrs:{id:"form-builder-title"},on:{click:function(e){return t.$emit("show-documents")}}},[e("span",[t._v(t._s(t.translate("COM_EMUNDUS_FORM_BUILDER_EVERY_DOCUMENTS")))]),e("span",{staticClass:"material-icons-outlined tw-cursor-pointer",attrs:{id:"add-document"},on:{click:t.createDocument}},[t._v("add")])]),t._l(t.documents,(function(a){return e("div",{key:a.id,staticClass:"tw-p-4",on:{click:function(e){return t.$emit("show-documents")}}},[e("p",{staticClass:"document-label"},[t._v(t._s(a.label))])])}))],2)},bi=[],wi={name:"FormBuilderDocuments",props:{profile_id:{type:Number,required:!0},campaign_id:{type:Number,required:!0}},mixins:[nt],data(){return{documents:[]}},created(){this.getDocuments(),0===this.$store.getters["formBuilder/getDocumentModels"].length&&this.getDocumentModels()},methods:{getDocuments(){Va.getDocuments(this.profile_id).then(t=>{t.status?this.documents=t.data:this.displayError(this.translate("COM_EMUNDUS_FORM_BUILDER_GET_DOCUMENTS_FAILED"),t.msg)})},getDocumentModels(){Va.getDocumentModels().then(t=>{t.status&&this.$store.dispatch("formBuilder/updateDocumentModels",t.data)})},createDocument(){this.$emit("open-create-document")}}},Oi=wi,Ei=(a("5dff"),Object(y["a"])(Oi,yi,bi,!1,null,null,null)),Ci=Ei.exports,Ni=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"form-builder-document-list"}},[e("div",{staticClass:"tw-w-full tw-mb-8 tw-mt-8",attrs:{id:"required-documents"}},[e("p",{staticClass:"tw-text-2xl tw-font-semibold"},[t._v(t._s(t.translate("COM_EMUNDUS_FORM_BUILDER_REQUIRED_DOCUMENTS")))]),t.requiredDocuments.length>0?e("div",[e("draggable",{attrs:{group:"form-builder-documents",sort:!1},model:{value:t.requiredDocuments,callback:function(e){t.requiredDocuments=e},expression:"requiredDocuments"}},[e("transition-group",{attrs:{id:"required-documents"}},t._l(t.requiredDocuments,(function(a,s){return e("form-builder-document-list-element",{key:"required-"+a.id,attrs:{document:a,documentIndex:s+1,totalDocuments:t.requiredDocuments.length,profile_id:t.profile_id},on:{"edit-document":function(e){return t.editDocument(a)},"delete-document":t.deleteDocument,"move-document":t.moveDocument}})})),1)],1)],1):t._e(),t.requiredDocuments.length<1?e("div",{staticClass:"empty-documents tw-mt-4 tw-mb-4"},[e("draggable",{staticClass:"draggables-list",attrs:{list:t.emptyDocuments,group:"form-builder-documents",sort:!1}},[e("transition-group",{attrs:{id:"required-documents"}},t._l(t.emptyDocuments,(function(a,s){return e("p",{key:s,staticClass:"tw-w-full tw-text-center tw-p-4"},[t._v(" "+t._s(t.translate(a.text))+" ")])})),0)],1)],1):t._e(),e("button",{staticClass:"em-primary-button tw-px-6 tw-py-3",attrs:{id:"add-document"},on:{click:function(e){return t.addDocument("1")}}},[t._v(" "+t._s(t.translate("COM_EMUNDUS_FORM_BUILDER_CREATE_REQUIRED_DOCUMENT"))+" ")])]),e("div",{staticClass:"tw-w-full tw-mb-8 tw-mt-8",attrs:{id:"optional-documents"}},[e("p",{staticClass:"tw-text-2xl tw-font-semibold"},[t._v(t._s(t.translate("COM_EMUNDUS_FORM_BUILDER_OPTIONAL_DOCUMENTS")))]),t.optionalDocuments.length>0?e("div",[e("draggable",{attrs:{group:"form-builder-documents",sort:!1},model:{value:t.optionalDocuments,callback:function(e){t.optionalDocuments=e},expression:"optionalDocuments"}},[e("transition-group",{attrs:{id:"optional-documents"}},t._l(t.optionalDocuments,(function(a,s){return e("form-builder-document-list-element",{key:"optional-"+a.id,attrs:{document:a,documentIndex:s+1,totalDocuments:t.optionalDocuments.length,profile_id:t.profile_id},on:{"edit-document":function(e){return t.editDocument(a)},"delete-document":t.deleteDocument,"move-document":t.moveDocument}})})),1)],1)],1):t._e(),t.optionalDocuments.length<1?e("div",{staticClass:"empty-documents tw-mt-4 tw-mb-4"},[e("draggable",{staticClass:"draggables-list",attrs:{list:t.emptyDocuments,group:"form-builder-documents",sort:!1}},[e("transition-group",{attrs:{id:"optional-documents"}},t._l(t.emptyDocuments,(function(a,s){return e("p",{key:s,staticClass:"tw-w-full tw-text-center tw-p-4"},[t._v(" "+t._s(t.translate(a.text))+" ")])})),0)],1)],1):t._e(),e("button",{staticClass:"em-primary-button tw-px-6 tw-py-3",attrs:{id:"add-document"},on:{click:function(e){return t.addDocument("0")}}},[t._v(" "+t._s(t.translate("COM_EMUNDUS_FORM_BUILDER_CREATE_OPTIONAL_DOCUMENT"))+" ")])])])},Si=[],Ai=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"form-builder-document-list-element"},on:{click:t.editDocument}},[e("div",{staticClass:"section-card tw-mt-8 tw-mb-8 tw-w-full tw-flex tw-flex-col"},[e("div",{staticClass:"section-identifier tw-bg-main-500 tw-cursor-pointer"},[t._v(" "+t._s(t.translate("COM_EMUNDUS_FORM_BUILDER_DOCUMENT"))+" "+t._s(t.documentIndex)+" / "+t._s(t.totalDocuments)+" ")]),e("div",{staticClass:"section-content",class:{closed:t.closedSection}},[t.documentData.id?e("div",[e("div",{staticClass:"tw-w-full tw-flex tw-items-center tw-justify-between"},[e("span",{staticClass:"section-title"},[t._v(t._s(t.documentData.name[t.shortDefaultLang]))]),e("div",[e("span",{staticClass:"material-icons-outlined tw-cursor-pointer hover-opacity",attrs:{title:"Move section upwards"},on:{click:function(e){return t.moveDocument("up")}}},[t._v("keyboard_double_arrow_up")]),e("span",{staticClass:"material-icons-outlined tw-cursor-pointer hover-opacity",attrs:{title:"Move section downwards"},on:{click:function(e){return t.moveDocument("down")}}},[t._v("keyboard_double_arrow_down")]),t.canBeRemoved?e("span",{staticClass:"material-icons-outlined tw-text-red-500 tw-cursor-pointer hover-opacity",on:{click:t.deleteDocument}},[t._v("delete")]):t._e()])]),e("p",[t._v(" "+t._s(t.documentData.description[t.shortDefaultLang])+" ")]),e("p",[t._v(t._s(t.translate("COM_EMUNDUS_FORM_BUILDER_ALLOWED_TYPES"))+" : "+t._s(t.documentData.allowed_types))]),e("p",[t._v(t._s(t.translate("COM_EMUNDUS_FORM_BUILDER_MAX_DOCUMENTS"))+" : "+t._s(t.documentData.nbmax))])]):e("div",[e("span",{staticClass:"section-title"},[t._v(t._s(t.document.label))])])])])])},Di=[],Mi={name:"FormBuilderDocumentListElement",props:{document:{type:Object,required:!0},totalDocuments:{type:Number,default:1},documentIndex:{type:Number,default:1},profile_id:{type:Number,required:!0}},mixins:[Cs],data(){return{closedSection:!1,documentData:{},canBeRemoved:!1,reasonCantRemove:""}},created(){this.document.docid&&(this.getDocumentModel(this.document.docid),this.checkIfDocumentCanBeDeleted())},methods:{moveDocument(t){this.$emit("move-document",this.document,t)},getDocumentModel(t=null,e=!0){if(this.models=e?this.$store.getters["formBuilder/getDocumentModels"]:[],this.documentData={},this.models.length>0){const e=this.models.find(e=>e.id===t);e?this.documentData=e:Va.getDocumentModels(t).then(t=>{t.status&&(this.documentData=t.data)})}else Va.getDocumentModels(t).then(t=>{t.status&&(this.documentData=t.data)})},editDocument(t){"delete-section"!==t.target.id&&this.$emit("edit-document")},deleteDocument(t){this.swalConfirm(this.translate("COM_EMUNDUS_FORM_BUILDER_DELETE_DOCUMENT"),this.document.label,this.translate("COM_EMUNDUS_FORM_BUILDER_DELETE_DOCUMENT_CONFIRM"),this.translate("JNO"),()=>{Va.removeDocumentFromProfile(this.document.id).then(t=>{this.$emit("delete-document",this.document.id),this.$destroy()})})},checkIfDocumentCanBeDeleted(){Va.checkIfDocumentCanBeDeletedForProfile(this.document.docid,this.profile_id).then(t=>{t.status?t.data.can_be_deleted?(this.canBeRemoved=!0,this.reasonCantRemove=""):(this.canBeRemoved=!1,this.reasonCantRemove=t.data.reason):this.canBeRemoved=!1})}},watch:{document:{handler(t){this.getDocumentModel(t.docid,!1)},deep:!0}}},xi=Mi,Ti=(a("7af0"),Object(y["a"])(xi,Ai,Di,!1,null,null,null)),Ui=Ti.exports,ki={name:"FormBuilderDocumentList",components:{FormBuilderDocumentListElement:Ui,draggable:Xe.a},props:{profile_id:{type:Number,required:!0},campaign_id:{type:Number,required:!0}},data(){return{documents:[],emptyDocuments:[{text:"COM_EMUNDUS_FORM_BUILDER_EMPTY_DOCUMENTS"}],closedSection:!1}},created(){this.getDocuments()},methods:{getDocuments(){Va.getDocuments(this.profile_id).then(t=>{t.status&&(this.documents=t.data.filter(t=>t.id))})},moveDocument(t,e){let a=this.requiredDocuments.map((t,e)=>({id:t.id,order:e})),s=this.optionalDocuments.map((t,e)=>({id:t.id,order:e})),n=null,i=null,r=!0;1==t.mandatory?(n=a.findIndex(e=>e.id===t.id),i=a.length):(n=s.findIndex(e=>e.id===t.id),i=s.length),null!=n&&(1==t.mandatory?0==n&&"up"===e?r=!1:n==i-1&&"down"===e?(t.mandatory=!1,a=a.filter(e=>e.id!=t.id),s.unshift({id:t.id,order:0})):"up"===e?(a[n].id=a[n-1].id,a[n-1].id=t.id):(a[n].id=a[n+1].id,a[n+1].id=t.id):0==n&&"up"==e?(t.mandatory=!0,s=s.filter(e=>e.id!=t.id),a.push({id:t.id,order:a.length})):n==i-1&&"down"===e?r=!1:"up"===e?(s[n].id=s[n-1].id,s[n-1].id=t.id):(s[n].id=s[n+1].id,s[n+1].id=t.id),r&&(a.forEach((t,e)=>{t.order=e}),s.forEach((t,e)=>{t.order=e+a.length}),this.documents.forEach((t,e)=>{const n=a.find(e=>e.id==t.id),i=s.find(e=>e.id==t.id);n?(this.documents[e].mandatory=1,this.documents[e].ordering=n.order):i&&(this.documents[e].mandatory=0,this.documents[e].ordering=i.order)}),Va.reorderDocuments(this.documents).then(e=>{Zt.setDocumentMandatory({mandatory:t.mandatory,pid:this.profile_id,did:t.attachment_id})})))},addDocument(t="1"){this.$emit("add-document",t)},editDocument(t){this.$emit("edit-document",t)},deleteDocument(){this.$emit("delete-document"),this.getDocuments()}},computed:{requiredDocuments(){const t=this.documents.filter(t=>1==t.mandatory);return t.sort((t,e)=>t.ordering-e.ordering)},optionalDocuments(){const t=this.documents.filter(t=>0==t.mandatory);return t.sort((t,e)=>t.ordering-e.ordering)}}},Ri=ki,Li=(a("8357"),Object(y["a"])(Ri,Ni,Si,!1,null,null,null)),Ii=Li.exports,Pi=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"form-builder-create-document"}},[e("div",{staticClass:"tw-flex tw-items-center tw-justify-between tw-p-4"},[e("p",{staticClass:"tw-font-medium"},[t._v(t._s(t.translate("COM_EMUNDUS_FORM_BUILDER_DOCUMENT_PROPERTIES")))]),e("span",{staticClass:"material-icons-outlined tw-cursor-pointer",on:{click:function(e){return t.$emit("close")}}},[t._v("close")])]),e("ul",{staticClass:"tw-flex tw-items-center tw-justify-between tw-p-4 tw-w-11/12",attrs:{id:"properties-tabs"}},t._l(t.activeTabs,(function(a){return e("li",{key:a.id,staticClass:"tw-p-4 tw-cursor-pointer",class:{"is-active":a.active,"tw-w-2/4":2==t.activeTabs.length,"tw-w-full":1==t.activeTabs.length},on:{click:function(e){return t.selectTab(a)}}},[t._v(" "+t._s(t.translate(a.label))+" ")])})),0),e("div",{attrs:{id:"properties"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.tabs[0].active,expression:"tabs[0].active"}],staticClass:"tw-p-4",attrs:{id:"general-properties"}},[e("div",{staticClass:"tw-mb-4 tw-flex tw-items-center tw-justify-between"},[e("label",{staticClass:"tw-font-medium"},[t._v(t._s(t.translate("COM_EMUNDUS_FORM_BUILDER_ELEMENT_PROPERTIES_REQUIRED")))]),e("div",{staticClass:"em-toggle"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.isMandatory,expression:"isMandatory"}],staticClass:"em-toggle-check",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.isMandatory)?t._i(t.isMandatory,null)>-1:t.isMandatory},on:{click:t.toggleDocumentMandatory,change:function(e){var a=t.isMandatory,s=e.target,n=!!s.checked;if(Array.isArray(a)){var i=null,r=t._i(a,i);s.checked?r<0&&(t.isMandatory=a.concat([i])):r>-1&&(t.isMandatory=a.slice(0,r).concat(a.slice(r+1)))}else t.isMandatory=n}}}),e("strong",{staticClass:"b em-toggle-switch"}),e("strong",{staticClass:"b em-toggle-track"})])]),e("div",{staticClass:"tw-mb-4"},[e("label",{staticClass:"tw-font-medium",attrs:{for:"title"}},[t._v(t._s(t.translate("COM_EMUNDUS_FORM_BUILDER_DOCUMENT_NAME")))]),t.models.length>0?e("incremental-select",{attrs:{options:t.documentList,defaultValue:t.incSelectDefaultValue,locked:"create"!=t.mode},on:{"update-value":t.updateDocumentSelectedValue}}):t._e()],1),e("div",{staticClass:"tw-mb-4"},[e("label",{staticClass:"tw-font-medium"},[t._v(t._s(t.translate("COM_EMUNDUS_FORM_BUILDER_DOCUMENT_DESCRIPTION")))]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.document.description[t.shortDefaultLang],expression:"document.description[shortDefaultLang]"}],attrs:{id:"",name:"",rows:"5"},domProps:{value:t.document.description[t.shortDefaultLang]},on:{input:function(e){e.target.composing||t.$set(t.document.description,t.shortDefaultLang,e.target.value)}}},[t._v(t._s(t.document.description[t.shortDefaultLang]))])]),e("div",{staticClass:"tw-mb-4"},[e("label",{staticClass:"tw-font-medium"},[t._v(t._s(t.translate("COM_EMUNDUS_FORM_BUILDER_DOCUMENT_TYPES")))]),t._l(t.fileTypes,(function(a,s){return e("div",{key:a.value,staticClass:"tw-flex tw-items-center tw-mb-1 tw-items-start"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.document.selectedTypes[a.value],expression:"document.selectedTypes[filetype.value]"}],staticStyle:{height:"auto"},attrs:{type:"checkbox",name:"filetypes",id:a.value},domProps:{value:a.value,checked:Array.isArray(t.document.selectedTypes[a.value])?t._i(t.document.selectedTypes[a.value],a.value)>-1:t.document.selectedTypes[a.value]},on:{change:[function(e){var s=t.document.selectedTypes[a.value],n=e.target,i=!!n.checked;if(Array.isArray(s)){var r=a.value,o=t._i(s,r);n.checked?o<0&&t.$set(t.document.selectedTypes,a.value,s.concat([r])):o>-1&&t.$set(t.document.selectedTypes,a.value,s.slice(0,o).concat(s.slice(o+1)))}else t.$set(t.document.selectedTypes,a.value,i)},t.checkFileType]}}),e("label",{staticClass:"tw-font-normal !tw-mb-0 tw-ml-2",attrs:{for:a.value}},[t._v(" "+t._s(t.translate(a.title))+" ("+t._s(a.value)+")")])])}))],2),e("div",{staticClass:"tw-mb-4"},[e("label",{staticClass:"tw-font-medium",attrs:{for:"nbmax"}},[t._v(t._s(t.translate("COM_EMUNDUS_FORM_BUILDER_DOCUMENT_NBMAX")))]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.document.nbmax,expression:"document.nbmax"}],staticClass:"tw-w-full",attrs:{type:"number",id:"nbmax"},domProps:{value:t.document.nbmax},on:{input:function(e){e.target.composing||t.$set(t.document,"nbmax",e.target.value)}}})])]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.tabs[1].active,expression:"tabs[1].active"}],staticClass:"tw-p-4",attrs:{id:"advanced-properties"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.hasImg,expression:"hasImg"}],staticClass:"tw-mb-4",attrs:{id:"resolution"}},[e("label",{staticClass:"tw-font-medium"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_IMAGE_WIDTH")))]),e("div",{staticClass:"tw-w-full tw-flex tw-items-center tw-justify-between"},[e("div",{staticClass:"tw-w-2/4 tw-mr-1"},[e("label",{staticClass:"tw-font-normal",attrs:{for:"minResolutionW"}},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_MIN_RESOLUTION_PLACEHOLDER")))]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.document.minResolution.width,expression:"document.minResolution.width"}],staticClass:"tw-w-full",attrs:{type:"number",id:"minResolutionW",max:t.document.maxResolution.width},domProps:{value:t.document.minResolution.width},on:{input:function(e){e.target.composing||t.$set(t.document.minResolution,"width",e.target.value)}}})]),e("div",{staticClass:"tw-w-2/4 tw-ml-1"},[e("label",{staticClass:"tw-font-normal",attrs:{for:"maxResolutionW"}},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_MAX_RESOLUTION_PLACEHOLDER")))]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.document.maxResolution.width,expression:"document.maxResolution.width"}],staticClass:"tw-w-full",attrs:{type:"number",id:"maxResolutionW",min:t.document.minResolution.width},domProps:{value:t.document.maxResolution.width},on:{input:function(e){e.target.composing||t.$set(t.document.maxResolution,"width",e.target.value)}}})])]),e("label",{staticClass:"tw-font-medium"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_IMAGE_HEIGHT")))]),e("div",{staticClass:"tw-w-full tw-flex tw-items-center tw-justify-between"},[e("div",{staticClass:"tw-w-2/4 tw-mr-1"},[e("label",{staticClass:"tw-font-normal",attrs:{for:"minResolutionH"}},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_MIN_RESOLUTION_PLACEHOLDER")))]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.document.minResolution.height,expression:"document.minResolution.height"}],staticClass:"tw-w-full",attrs:{type:"number",id:"minResolutionH",max:t.document.maxResolution.height},domProps:{value:t.document.minResolution.height},on:{input:function(e){e.target.composing||t.$set(t.document.minResolution,"height",e.target.value)}}})]),e("div",{staticClass:"tw-w-2/4 tw-ml-1"},[e("label",{staticClass:"tw-font-normal",attrs:{for:"maxResolutionH"}},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_MAX_RESOLUTION_PLACEHOLDER")))]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.document.maxResolution.height,expression:"document.maxResolution.height"}],staticClass:"tw-w-full",attrs:{type:"number",id:"maxResolutionH",min:t.document.minResolution.height},domProps:{value:t.document.maxResolution.height},on:{input:function(e){e.target.composing||t.$set(t.document.maxResolution,"height",e.target.value)}}})])])]),e("div",{attrs:{id:"document-sample"}},[e("label",{staticClass:"tw-font-medium"},[t._v(t._s(t.translate("COM_EMUNDUS_FORMBUILDER_DOCUMENTS_MODEL_TITLE")))]),e("div",{staticClass:"tw-mb-4 tw-flex tw-items-center tw-justify-between"},[e("label",{staticClass:"tw-font-medium",attrs:{for:"has-model"}},[t._v(t._s(t.translate("COM_EMUNDUS_FORMBUILDER_DOCUMENTS_GIVE_MODEL")))]),e("div",{staticClass:"em-toggle"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.hasSample,expression:"hasSample"}],staticClass:"em-toggle-check",attrs:{type:"checkbox",id:"has-model",name:"has-model"},domProps:{checked:Array.isArray(t.hasSample)?t._i(t.hasSample,null)>-1:t.hasSample},on:{change:[function(e){var a=t.hasSample,s=e.target,n=!!s.checked;if(Array.isArray(a)){var i=null,r=t._i(a,i);s.checked?r<0&&(t.hasSample=a.concat([i])):r>-1&&(t.hasSample=a.slice(0,r).concat(a.slice(r+1)))}else t.hasSample=n},t.onHasSampleChange]}}),e("strong",{staticClass:"b em-toggle-switch"}),e("strong",{staticClass:"b em-toggle-track"})])]),t.hasSample&&t.currentSample?e("div",{staticClass:"tw-mb-4",attrs:{id:"current-sample"}},[e("p",[t._v(t._s(t.translate("COM_EMUNDUS_FORMBUILDER_DOCUMENTS_CURRENT_MODEL")))]),e("a",{attrs:{href:t.currentSample,target:"_blank"}},[t._v(t._s(t.translate("COM_EMUNDUS_FORM_BUILDER_DOCUMENT_DOWNLOAD_SAMPLE")))])]):t._e(),t.hasSample?e("div",[e("label",{attrs:{for:"sample",id:"formbuilder_attachments_sample_upload"}},[t.currentSample?e("span",[t._v(t._s(t.translate("COM_EMUNDUS_FORMBUILDER_DOCUMENTS_MODEL_EDIT")))]):e("span",[t._v(t._s(t.translate("COM_EMUNDUS_FORMBUILDER_DOCUMENTS_MODEL_ADD")))]),e("span",{staticClass:"material-icons-outlined tw-ml-1 tw-text-neutral-900"},[t._v("backup")])]),e("input",{ref:"sampleFileInput",staticStyle:{display:"none"},attrs:{id:"sample",name:"sample",type:"file",accept:".pdf,.doc,.docx,.png,.jpg,.xls,.xlsx"},on:{change:t.onSampleFileInputChange}})]):t._e(),""!==t.newSample?e("div",[e("p",{staticClass:"tw-text-neutral-700"},[t._v(t._s(t.translate("COM_EMUNDUS_FORMBUILDER_DOCUMENTS_MODEL_FILE_UPLOADED"))+" : "+t._s(this.newSample.name))])]):t._e()])])]),e("div",{staticClass:"tw-p-4"},[e("button",{staticClass:"em-primary-button",on:{click:t.saveDocument}},[t._v(" "+t._s(t.translate("COM_EMUNDUS_FORM_BUILDER_ELEMENT_PROPERTIES_SAVE"))+" ")])])])},Bi=[],ji={name:"FormBuilderCreateDocument",props:{profile_id:{type:Number,required:!0},current_document:{type:Object,default:null},mandatory:{type:Boolean,default:!0},mode:{type:String,default:"create"}},components:{IncrementalSelect:Ue,editor:Sn},mixins:[A,Cs],data(){return{models:[],modelsUsage:[],document:{id:null,type:{},mandatory:this.$props.mandatory,nbmax:1,description:{fr:"",en:""},name:{fr:"",en:""},selectedTypes:{},minResolution:{width:0,height:0},maxResolution:{width:0,height:0},max_pages_pdf:0},fileTypes:[],activeTab:"general",tabs:[{id:0,label:"COM_EMUNDUS_FORM_BUILDER_ELEMENT_PROPERTIES_GENERAL",active:!0,published:!0},{id:1,label:"COM_EMUNDUS_FORM_BUILDER_ELEMENT_PROPERTIES_ADVANCED",active:!1,published:!0}],hasPDF:!1,hasImg:!1,hasSample:!1,currentSample:"",newSample:"",sampleFromDocumentId:null}},created(){this.getDocumentModels(),this.getFileTypes()},methods:{selectTab(t){this.tabs.forEach(t=>{t.active=!1}),t.active=!0},getDocumentModels(){Va.getDocumentModels().then(t=>{t.status&&(this.models=t.data,null!=this.current_document&&(this.current_document.docid||this.current_document.id)&&this.selectModel({target:{value:this.current_document.docid?this.current_document.docid:this.current_document.id}},null!==this.current_document.mandatory&&"undefined"!=this.current_document.mandatory?this.current_document.mandatory:null),Va.getDocumentModelsUsage(this.models.map(t=>t.id)).then(t=>{t.status&&(this.modelsUsage=t.data)}))})},toggleDocumentMandatory(){this.document.mandatory="1"==this.document.mandatory?"0":"1"},getFileTypes(){this.fileTypes=a("9ac1"),this.fileTypes.forEach(t=>{this.document.selectedTypes[t.value]=!1})},checkFileType(t){this.document.selectedTypes[t.target.value]=t.target.checked,this.hasImgFormat(),this.hasPDFFormat()},selectModel(t,e=null){if("none"!==t.target.value){const a=this.models.find(e=>e.id==t.target.value);this.document.id=a.id,this.document.type=a.type,this.document.mandatory=null==e?a.mandatory:e,this.document.nbmax=a.nbmax,this.document.description=a.description,this.document.name=a.name,this.document.minResolution={width:a.min_width,height:a.min_height},this.document.maxResolution={width:a.max_width,height:a.max_height},this.document.max_pages_pdf=a.max_pages_pdf,this.fileTypes.forEach(t=>{this.document.selectedTypes[t.value]=!1});let s=a.allowed_types.split(";");s.forEach(t=>{["pdf"].includes(t)&&(this.document.selectedTypes["pdf"]=!0),["jpeg","jpg","png","gif"].includes(t)&&(this.document.selectedTypes["jpeg;jpg;png;gif"]=!0),["doc","docx","odt","ppt","pptx"].includes(t)&&(this.document.selectedTypes["doc;docx;odt;ppt;pptx"]=!0),["xls","xlsx","odf"].includes(t)&&(this.document.selectedTypes["xls;xlsx;odf"]=!0),["mp3"].includes(t)&&(this.document.selectedTypes["mp3"]=!0),["mp4"].includes(t)&&(this.document.selectedTypes["mp4"]=!0),["zip"].includes(t)&&(this.document.selectedTypes["zip"]=!0)}),this.hasImgFormat(),this.hasPDFFormat()}},saveDocument(){let t=!0;if(Object.values(this.document.name).forEach(e=>{""!=e&&(t=!1)}),!0===t)return $.a.fire({type:"warning",title:this.translate("COM_EMUNDUS_FORM_BUILDER_DOCUMENT_PLEASE_FILL_TYPE"),reverseButtons:!0,customClass:{title:"em-swal-title",confirmButton:"em-swal-confirm-button",actions:"em-swal-single-action"}}),!1;const e=this.models.find(t=>t.id==this.document.id);let a=[];if(Object.entries(this.document.selectedTypes).forEach((t,e)=>{t[1]&&a.push(t[0])}),a.length<1)return $.a.fire({type:"warning",title:this.translate("COM_EMUNDUS_FORM_BUILDER_DOCUMENT_PLEASE_FILL_FORMAT"),reverseButtons:!0,customClass:{title:"em-swal-title",confirmButton:"em-swal-confirm-button",actions:"em-swal-single-action"}}),!1;if(e){const t={profile_id:this.profile_id,document_id:this.document.id,types:JSON.stringify(a),document:JSON.stringify(this.document),has_sample:this.hasSample};if(this.hasSample&&null!==this.newSample){const e=this.$refs.sampleFileInput,a=e.files[0];t.sample=a}Object.keys(this.modelsUsage).includes(this.document.id)&&this.modelsUsage[this.document.id].usage>1?this.swalConfirm(this.translate("COM_EMUNDUS_FORM_BUILDER_MULTIPLE_FORMS_IMPACTED"),this.translate("COM_EMUNDUS_FORM_BUILDER_MULTIPLE_FORMS_IMPACTED_TEXT")+" : "+this.modelsUsage[this.document.id].profiles.map(t=>t.label).join(", "),this.translate("COM_EMUNDUS_ONBOARD_OK"),this.translate("COM_EMUNDUS_ONBOARD_CANCEL")).then(e=>{e&&Es.updateDocument(t).then(t=>{this.$emit("documents-updated")})}):Es.updateDocument(t).then(t=>{this.$emit("documents-updated")})}else{this.document.id=null;const t={pid:this.profile_id,types:JSON.stringify(a),document:JSON.stringify(this.document),has_sample:this.hasSample};if(this.hasSample&&null!==this.newSample){const e=this.$refs.sampleFileInput,a=e.files[0];t.sample=a}Zt.updateDocument(t,!0).then(t=>{this.$emit("documents-updated")})}},updateDocumentSelectedValue(t){t.id?(this.document.name[this.shortDefaultLang]=t.label,this.selectModel({target:{value:t.id}},this.current_document&&this.current_document.id&&this.current_document.id==t.id?this.current_document.mandatory:this.mandatory)):(this.document.id=null,this.document.name[this.shortDefaultLang]=t.label)},hasImgFormat(){let t=!1;const e=["jpeg","jpg","png","gif"];Object.keys(this.document.selectedTypes).forEach(a=>{this.document.selectedTypes[a]&&e.some(t=>a.includes(t))&&(t=!0)}),this.hasImg=t},hasPDFFormat(){let t=!1;Object.keys(this.document.selectedTypes).forEach(e=>{this.document.selectedTypes[e]&&e.includes("pdf")&&(t=!0)}),this.hasPDF=t},onHasSampleChange(){this.hasSample||(this.newSample="")},onSampleFileInputChange(t){const e=t.target.files||[];if(e.length>0){const t=["pdf","doc","docx","jpg","jpeg","png","xls","xlsx"],a=e[0].name.split(".").pop().toLowerCase();if(!t.includes(a))return $.a.fire({type:"warning",title:this.translate("COM_EMUNDUS_FORM_BUILDER_DOCUMENT_SAMPLE_WRONG_FORMAT"),reverseButtons:!0,customClass:{title:"em-swal-title",confirmButton:"em-swal-confirm-button",actions:"em-swal-single-action"}}),this.newSample=null,!1;this.newSample=e[0]}else this.newSample=null},getCurrentSample(){this.sampleFromDocumentId=this.document.id,null===this.document.id?(this.hasSample=!1,this.currentSample=""):Es.getDocumentSample(Number(this.document.id),Number(this.profile_id)).then(t=>{t.status&&t.data?(this.hasSample="1"===t.data.has_sample,this.currentSample=this.hasSample?t.data.sample_filepath:""):(this.hasSample=!1,this.currentSample="")})}},computed:{activeTabs(){return this.tabs.filter(t=>t.published)},documentList(){return this.models.map(t=>({id:t.id,label:t.name[this.shortDefaultLang]}))},isMandatory(){return"1"==this.document.mandatory},incSelectDefaultValue(){let t=null;return this.current_document&&(this.current_document.docid||this.current_document.id)&&(t=this.current_document.docid?this.current_document.docid:this.current_document.id),t}},watch:{current_document(t){t&&(t.docid||t.id)&&(this.models.length<1?this.getDocumentModels().then(()=>{this.selectModel({target:{value:t.docid?t.docid:t.id}},t.mandatory?t.mandatory:null)}):this.selectModel({target:{value:t.docid?t.docid:t.id}},t.mandatory?t.mandatory:null))},document:{handler(t){t.id!==this.sampleFromDocumentId&&this.getCurrentSample()},deep:!0}}},Fi=ji,qi=(a("1149"),Object(y["a"])(Fi,Pi,Bi,!1,null,null,null)),$i=qi.exports,Hi=function(){var t=this,e=t._self._c;return e("div",{staticClass:"!tw-pr-4",attrs:{id:"form-builder-document-formats"}},[e("p",{staticClass:"tw-text-center tw-full tw-p-4",attrs:{id:"form-builder-document-title"}},[t._v(" "+t._s(t.translate("COM_EMUNDUS_FORM_BUILDER_FORMATS"))+" ")]),t.formats.length>0?e("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"tw-mt-4 tw-full",attrs:{id:"search",type:"text",placeholder:""},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}}):t._e(),e("draggable",{staticClass:"draggables-list",attrs:{group:{name:"form-builder-documents",pull:"clone",put:!1},sort:!1,clone:t.setCloneFormat},on:{start:function(e){return t.$emit("dragging-element")},end:t.onDragEnd},model:{value:t.displayedFormats,callback:function(e){t.displayedFormats=e},expression:"displayedFormats"}},[e("transition-group",t._l(t.displayedFormats,(function(a){return e("div",{key:a.id,staticClass:"tw-flex tw-justify-between tw-items-center draggable-element tw-mt-2 tw-mb-2 tw-p-4"},[e("span",{staticClass:"tw-full tw-p-4",attrs:{id:"format-name",title:a.name[t.shortDefaultLang]}},[t._v(t._s(a.name[t.shortDefaultLang]))]),e("span",{staticClass:"material-icons-outlined"},[t._v(" drag_indicator ")])])})),0)],1)],1)},Gi=[],zi={components:{draggable:Xe.a},props:{profile_id:{type:Number,required:!0}},mixins:[Cs],data(){return{formats:[],cloneFormat:null,search:""}},created(){this.getFormats()},methods:{getFormats(){Va.getDocumentModels().then(t=>{t.status&&(this.formats=t.data)})},setCloneFormat(t){this.cloneFormat=t},onDragEnd(t){const e=t.to;null!==e&&(this.cloneFormat.mandatory="required-documents"==e.id?"1":"0",this.$emit("open-create-document",this.cloneFormat))}},computed:{displayedFormats(){return this.formats.filter(t=>!(this.search.length>0&&this.formats.length>0)||t.name[this.shortDefaultLang].toLowerCase().includes(this.search.toLowerCase()))}}},Vi=zi,Yi=(a("82b2"),Object(y["a"])(Vi,Hi,Gi,!1,null,null,null)),Ji=Yi.exports,Ki=function(){var t=this,e=t._self._c;return e("div",{staticClass:"tw-flex tw-flex-col tw-justify-between tw-w-full",attrs:{id:"form-builder-create-model"}},[e("div",{staticClass:"tw-w-full"},[e("div",{staticClass:"tw-flex tw-items-center tw-justify-between tw-p-4"},[e("p",[t._v(t._s(t.translate("COM_EMUNDUS_FORM_BUILDER_MODEL_PROPERTIES")))]),e("span",{staticClass:"material-icons-outlined tw-cursor-pointer",on:{click:function(e){return t.$emit("close")}}},[t._v("close")])]),t.loading?e("div",{staticClass:"tw-w-full tw-flex tw-items-center tw-justify-center"},[e("div",{staticClass:"em-loader"})]):e("div",{staticClass:"tw-flex tw-flex-col tw-justify-start tw-p-4 tw-text-end",attrs:{id:"model-properties"}},[e("p",{staticClass:"em-main-500-color"},[t._v(t._s(t.translate("COM_EMUNDUS_FORM_BUILDER_MODEL_PROPERTIES_INTRO")))]),e("label",{staticClass:"tw-mt-4 tw-text-end tw-w-full",attrs:{for:"page-model-title"}},[t._v(t._s(t.translate("COM_EMUNDUS_FORM_BUILDER_MODEL_INPUT_LABEL")))]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.modelTitle,expression:"modelTitle"}],staticClass:"tw-w-full tw-mb-4",attrs:{id:"page-model-title",type:"text"},domProps:{value:t.modelTitle},on:{input:function(e){e.target.composing||(t.modelTitle=e.target.value)}}}),t.alreadyExists?e("p",{staticClass:"tw-text-red-500"},[t._v(" "+t._s(t.translate("COM_EMUNDUS_FORM_BUILDER_MODEL_WITH_SAME_TITLE_EXISTS")))]):t._e()])]),e("div",{staticClass:"tw-flex tw-items-center tw-justify-between actions tw-w-full"},[e("button",{staticClass:"em-primary-button tw-m-4",class:{"tw-text-white tw-bg-gray-500 tw-w-full tw-px-2 tw-py-3 tw-rounded-coordinator":t.modelTitle.length<1||t.loading},attrs:{disabled:t.modelTitle.length<1||t.loading},on:{click:function(e){return t.addFormModel()}}},[t._v(" "+t._s(t.translate("COM_EMUNDUS_FORM_BUILDER_SECTION_PROPERTIES_SAVE"))+" ")])])])},Wi=[],Xi={props:{page:{type:Number,required:!0}},data(){return{modelTitle:"",models:[],alreadyExists:!1,loading:!1}},mounted(){this.getModels()},methods:{getModels(){Es.getModels().then(t=>{t.status&&(this.models=t.data)})},checkTitleNotAlreadyExists(){const t=this.models.filter(t=>t.label[this.shortDefaultLang]===this.modelTitle.trim());this.alreadyExists=t.length>0},addFormModel(){if(this.loading=!0,this.modelTitle=this.modelTitle.trim(),this.modelTitle.length<1)return $.a.fire({type:"warning",title:this.translate("COM_EMUNDUS_FORM_BUILDER_MODEL_MUST_HAVE_TITLE"),reverseButtons:!0,customClass:{title:"em-swal-title",confirmButton:"em-swal-confirm-button",actions:"em-swal-single-action"}}),void(this.loading=!1);const t=this.models.filter(t=>t.label[this.shortDefaultLang]===this.modelTitle);this.alreadyExists=t.length>0,this.alreadyExists?this.replaceFormModel(t[0].id,this.modelTitle):Es.addFormModel(this.page,this.modelTitle).then(t=>{t.status?$.a.fire({type:"success",title:this.translate("COM_EMUNDUS_FORM_BUILDER_SAVE_AS_MODEL_SUCCESS"),reverseButtons:!0,customClass:{title:"em-swal-title",confirmButton:"em-swal-confirm-button",actions:"em-swal-single-action"}}):this.displayError(this.translate("COM_EMUNDUS_FORM_BUILDER_SAVE_AS_MODEL_FAILURE"),t.msg),this.loading=!1,this.$emit("close")})},replaceFormModel(t,e){Es.addFormModel(this.page,e).then(e=>{if(e.status){const e=[t];Es.deleteFormModelFromId(e).then(()=>{this.$emit("close")})}else this.displayError(this.translate("COM_EMUNDUS_FORM_BUILDER_SAVE_AS_MODEL_FAILURE"),e.msg),this.$emit("close");this.loading&&(this.loading=!1)})}},watch:{modelTitle:function(t,e){t!=e&&this.checkTitleNotAlreadyExists()}}},Zi=Xi,Qi=(a("bfc5"),Object(y["a"])(Zi,Ki,Wi,!1,null,null,null)),tr=Qi.exports,er={name:"FormBuilder",components:{FormBuilderCreateModel:tr,FormBuilderSectionProperties:tn,FormBuilderCreatePage:pi,FormBuilderElements:Ds,FormBuilderElementProperties:qs,FormBuilderPage:ri,FormBuilderPages:vi,FormBuilderDocuments:Ci,FormBuilderDocumentList:Ii,FormBuilderCreateDocument:$i,FormBuilderDocumentFormats:Ji},mixins:[Cs],data(){return{mode:"forms",profile_id:0,form_id:0,campaign_id:0,title:"",pages:[],principalContainer:"default",showInSection:"page",selectedPage:0,selectedSection:null,selectedElement:null,optionsSelectedElement:!1,selectedDocument:null,rightPanel:{tabs:["hierarchy","element-properties","section-properties","create-model","create-document"]},showInRightPanel:"hierarchy",createDocumentMandatory:"1",lastSave:null,leftPanel:{tabs:[{title:"Elements",icon:"edit_note",active:!0,displayed:!0},{title:"Documents",icon:"edit_note",active:!1,displayed:!1},{title:"Translations",icon:"translate",active:!1,displayed:!0,url:"/parametres-globaux?layout=translation&default_menu=2&object=emundus_setup_profiles"}]},formBuilderCreateDocumentKey:0,createDocumentMode:"create",minimizedLeft:!1,showMinimizedLeft:!1,minimizedRight:!1,showMinimizedRight:!1}},created(){const t=this.$store.getters["global/datas"];0===parseInt(this.$store.state.global.manyLanguages)&&(this.leftPanel.tabs[2].displayed=!1),this.profile_id=t.prid.value,this.campaign_id=t.cid.value,t&&t.settingsmenualias&&t.settingsmenualias.value&&(this.leftPanel.tabs[2].url="/"+t.settingsmenualias.value+"?layout=translation&default_menu=2&object=emundus_setup_profiles"),t&&t.mode&&t.mode.value&&(this.mode=t.mode.value,"eval"!==this.mode&&"models"!=this.mode||(this.rightPanel.tabs=this.rightPanel.tabs.filter(t=>"hierarchy"!==t&&"create-document"!==t),this.leftPanel.tabs=this.leftPanel.tabs.filter(t=>"Documents"!=t.title),this.form_id=this.profile_id,this.profile_id=0)),this.profile_id>0&&(this.leftPanel.tabs[2].url+="&data="+this.profile_id),this.getFormTitle(),this.getPages()},mounted(){this.$modal.show("formBuilder")},methods:{getFormTitle(){this.profile_id&&Va.getProfileLabelByProfileId(this.profile_id).then(t=>{!1!==t.status&&(this.title=t.data.data.label)})},updateFormTitle(){this.title=this.$refs.formTitle.innerText.trim().replace(/[\r\n]/gm," "),this.$refs.formTitle.innerText=this.$refs.formTitle.innerText.trim().replace(/[\r\n]/gm," "),Va.updateFormLabel({label:this.title,prid:this.profile_id,form_id:this.form_id})},updateFormTitleKeyup(){document.activeElement.blur()},getPages(t=0){this.profile_id?Va.getFormsByProfileId(this.profile_id).then(e=>{this.pages=e.data.data,0===t?this.selectPage(this.pages[0].id):this.selectPage(String(t)),this.principalContainer="default",Va.getSubmissionPage(this.profile_id).then(t=>{const e=t.data.link.match(/formid=(\d+)/)[1];if(e){const t=this.pages.find(t=>t.id===e);t||this.pages.push({id:e,label:this.translate("COM_EMUNDUS_FORM_BUILDER_SUBMISSION_PAGE"),type:"submission",elements:[]})}})}):this.form_id&&Va.getFormByFabrikId(this.form_id).then(t=>{this.title=t.data.data.label,this.pages=[t.data.data],this.selectPage(this.pages[0].id),this.principalContainer="default"})},onReorderedPages(t){this.pages=t},onElementCreated(t,e){this.$refs.formBuilderPage.getSections(t,e)},createElementLastGroup(t){const e=Object.values(this.$refs.formBuilderPage.fabrikPage.Groups),a=e[e.length-1].group_id;Es.createSimpleElement({gid:a,plugin:t.value,mode:this.mode}).then(t=>{t.status&&t.data>0?(this.onElementCreated(t.data,!0),this.updateLastSave(),this.loading=!1):(this.displayError(t.msg),this.loading=!1)}).catch(t=>{console.warn(t),this.loading=!1})},onDocumentCreated(){this.$refs.formBuilderDocuments.getDocuments(),this.$refs.formBuilderDocumentList.getDocuments()},onOpenSectionProperties(t){this.selectedSection=t,this.showInRightPanel="section-properties"},onOpenElementProperties(t){this.selectedElement=t,"dropdown"===this.selectedElement.plugin?this.optionsSelectedElement=!0:(!0===this.optionsSelectedElement&&this.$refs.formBuilderPage.getSections(),this.optionsSelectedElement=!1),this.showInRightPanel="element-properties"},onUpdateDocument(){this.$refs.formBuilderDocumentList.getDocuments(),this.showInRightPanel="hierarchy"},onCloseElementProperties(){this.selectedElement=null,this.showInRightPanel="hierarchy",this.$refs.formBuilderPage.getSections()},onCloseSectionProperties(){this.selectedSection=null,this.showInRightPanel="hierarchy",this.$refs.formBuilderPage.getSections()},onCloseCreatePage(t){t.reload?this.getPages(t.newSelected):this.principalContainer="default"},onOpenCreateModel(t){t>0?(this.selectedPage=t,this.showInRightPanel="create-model"):console.error("No page id provided")},onOpenCreateDocument(t="1"){this.selectedDocument=null,this.createDocumentMandatory=t,this.createDocumentMode="create",this.formBuilderCreateDocumentKey++,this.showInRightPanel="create-document",this.setSectionShown("documents")},onEditDocument(t){this.selectedDocument=t,this.createDocumentMode="update",this.createDocumentMandatory=t.mandatory,this.formBuilderCreateDocumentKey++,this.showInRightPanel="create-document",this.setSectionShown("documents")},onDeleteDocument(){this.selectedDocument=null,this.showInRightPanel="hierarchy",this.setSectionShown("documents")},selectTab(t){this.leftPanel.tabs.forEach(e=>{e.active=e.title===t})},selectPage(t){this.selectedPage=t,this.setSectionShown("page")},setSectionShown(t){"documents"===t?(this.leftPanel.tabs.forEach((t,e)=>{this.leftPanel.tabs[e].displayed="Elements"!==t.title}),this.selectTab("Documents"),this.selectedPage=null):(this.leftPanel.tabs.forEach((t,e)=>{this.leftPanel.tabs[e].displayed="Documents"!==t.title}),this.selectTab("Elements")),this.showInSection=t},goTo(t,e=!1){const a=window.location.origin;e?window.open(a+t,"_blank"):window.location.href=a+t},clickGoBack(){"create-page"===this.principalContainer?this.onCloseCreatePage({reload:!1}):window.history.go(-1)},handleSidebarSize(t="left"){"left"===t?this.minimizedLeft=!this.minimizedLeft:this.minimizedRight=!this.minimizedRight}},computed:{currentPage(){return this.pages.find(t=>t.id===this.selectedPage)},leftPanelActiveTab(){return this.leftPanel.tabs.find(t=>t.active).title},displayedLeftPanels(){return this.leftPanel.tabs.filter(t=>t.displayed)}},watch:{"$store.state.formBuilder.lastSave":{handler(t){this.lastSave=t},deep:!0}}},ar=er,sr=(a("2351"),Object(y["a"])(ar,ys,bs,!1,null,null,null)),nr=sr.exports,ir=function(){var t=this,e=t._self._c;return e("div",{staticClass:"tw-w-full"},[e("div",[e("transition",{attrs:{name:"slide-right"}},[0===t.menuHighlight?e("div",{staticClass:"tw-grid tw-grid-cols-3 tw-gap-6"},t._l(t.displayedMenus,(function(a,s){return e("div",{directives:[{name:"wave",rawName:"v-wave"}],key:"menu_"+a.index,staticClass:"em-shadow-cards em-hover-s-scale",staticStyle:{background:"var(--neutral-0)"},on:{click:function(e){return t.changeMenu(a)}}},[e("span",{staticClass:"material-icons-outlined em-main-500-color tw-mb-4"},[t._v(t._s(a.icon))]),e("h3",{staticClass:"tw-mb-2"},[t._v(t._s(t.translate(a.title)))]),e("p",{staticClass:"tw-text-base tw-text-neutral-700"},[t._v(t._s(t.translate(a.description)))])])})),0):t._e()]),e("transition",{attrs:{name:"fade"}},[1===t.menuHighlight?e("StyleTool",{directives:[{name:"show",rawName:"v-show",value:t.modal_ready,expression:"modal_ready"}],on:{resetMenuIndex:function(e){t.menuHighlight=0}}}):2===t.menuHighlight?e("ContentTool",{directives:[{name:"show",rawName:"v-show",value:t.modal_ready,expression:"modal_ready"}],on:{resetMenuIndex:function(e){t.menuHighlight=0}}}):3===t.menuHighlight?e("FilesTool",{directives:[{name:"show",rawName:"v-show",value:t.modal_ready,expression:"modal_ready"}],on:{resetMenuIndex:function(e){t.menuHighlight=0}}}):9===t.menuHighlight?e("TranslationTool",{directives:[{name:"show",rawName:"v-show",value:t.modal_ready,expression:"modal_ready"}],ref:"translations",on:{resetMenuIndex:function(e){t.menuHighlight=0}}}):5===t.menuHighlight?e("AttachmentStorage",{directives:[{name:"show",rawName:"v-show",value:t.modal_ready,expression:"modal_ready"}],on:{resetMenuIndex:function(e){t.menuHighlight=0}}}):t._e()],1)],1),t.loading?e("div",{staticClass:"em-page-loader"}):t._e()])},rr=[],or=function(){var t=this,e=t._self._c;return e("div",{staticClass:"em-settings-menu"},[e("div",{staticClass:"em-w-80"},[e("div",{staticClass:"tw-grid tw-grid-cols-3 tw-gap-6 tw-mb-4"},[e("button",{staticClass:"em-primary-button tw-mb-6",staticStyle:{width:"max-content"},on:{click:t.pushStatus}},[e("div",{staticClass:"add-button-div"},[e("em",{staticClass:"fas fa-plus tw-mr-1"}),t._v(" "+t._s(t.translate("COM_EMUNDUS_ONBOARD_ADD_STATUS"))+" ")])])]),e("draggable",{class:"draggables-list",attrs:{handle:".handle"},on:{end:t.updateStatusOrder},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},t._l(t.status,(function(a,s){return e("div",{key:a.step,staticClass:"tw-mb-6",attrs:{title:"step_"+a.step,id:"step_"+a.step},on:{mouseover:function(e){return t.enableGrab(s)},mouseleave:function(e){return t.disableGrab()}}},[e("div",{staticClass:"tw-flex tw-items-center tw-flex tw-items-center-start tw-w-full"},[e("span",{staticClass:"handle tw-cursor-grab",style:t.grab&&t.indexGrab==s?"opacity: 1":"opacity: 0"},[e("span",{staticClass:"material-icons-outlined"},[t._v("drag_indicator")])]),e("div",{staticClass:"status-field"},[e("div",[e("p",{staticClass:"tw-px-2 tw-py-3 em-editable-content",attrs:{contenteditable:"true",id:"status_label_"+a.step},on:{focusout:function(e){return t.updateStatus(a)},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.manageKeyup(a)},keydown:t.checkMaxlength}},[t._v(" "+t._s(a.label[t.actualLanguage]))])]),e("input",{class:"label-"+a.class,attrs:{type:"hidden"}})]),e("div",{staticClass:"tw-flex tw-items-center"},[e("v-swatches",{attrs:{swatches:t.swatches,shapes:"circles","row-length":"8","show-border":"","popover-x":"left","popover-y":"top"},on:{input:function(e){return t.updateStatus(a)}},model:{value:a.class,callback:function(e){t.$set(a,"class",e)},expression:"statu.class"}}),1==a.edit&&0!=a.step&&1!=a.step?e("a",{staticClass:"tw-flex tw-items-center tw-ml-2 tw-cursor-pointer",attrs:{type:"button",title:t.translate("COM_EMUNDUS_ONBOARD_DELETE_STATUS")},on:{click:function(e){return t.removeStatus(a,s)}}},[e("span",{staticClass:"material-icons-outlined tw-text-red-500"},[t._v("delete_outline")])]):e("a",{staticClass:"tw-flex tw-items-center tw-ml-2 tw-cursor-pointer",attrs:{type:"button",title:t.translate("COM_EMUNDUS_ONBOARD_CANNOT_DELETE_STATUS")}},[e("span",{staticClass:"material-icons-outlined em-text-neutral-600"},[t._v("delete_outline")])])],1)]),e("hr")])})),0)],1),t.loading?e("div",{staticClass:"em-page-loader"}):t._e()])},lr=[],cr=a("b26c"),ur=a.n(cr);a("afdb");const dr=a("bef5");var pr={name:"editStatus",components:{VSwatches:ur.a,draggable:Xe.a},props:{},mixins:[A],data(){return{index:"",indexGrab:"0",grab:0,loading:!1,status:[],show:!1,actualLanguage:"",swatches:[],colors:[],variables:null}},created(){let t=document.querySelector(":root");this.variables=getComputedStyle(t),this.prepareSwatchesColor(),this.getStatus(),this.actualLanguage=this.$store.getters["global/shortLang"]},methods:{prepareSwatchesColor(){this.swatches.push(this.variables.getPropertyValue("--em-red-1")),this.colors.push({name:"red-1",value:this.variables.getPropertyValue("--em-red-1")}),this.swatches.push(this.variables.getPropertyValue("--em-red-2")),this.colors.push({name:"red-2",value:this.variables.getPropertyValue("--em-red-2")}),this.swatches.push(this.variables.getPropertyValue("--em-pink-1")),this.colors.push({name:"pink-1",value:this.variables.getPropertyValue("--em-pink-1")}),this.swatches.push(this.variables.getPropertyValue("--em-pink-2")),this.colors.push({name:"pink-2",value:this.variables.getPropertyValue("--em-pink-2")}),this.swatches.push(this.variables.getPropertyValue("--em-purple-1")),this.colors.push({name:"purple-1",value:this.variables.getPropertyValue("--em-purple-1")}),this.swatches.push(this.variables.getPropertyValue("--em-purple-2")),this.colors.push({name:"purple-2",value:this.variables.getPropertyValue("--em-purple-2")}),this.swatches.push(this.variables.getPropertyValue("--em-light-blue-1")),this.colors.push({name:"light-blue-1",value:this.variables.getPropertyValue("--em-light-blue-1")}),this.swatches.push(this.variables.getPropertyValue("--em-light-blue-2")),this.colors.push({name:"light-blue-2",value:this.variables.getPropertyValue("--em-light-blue-2")}),this.swatches.push(this.variables.getPropertyValue("--em-blue-1")),this.colors.push({name:"blue-1",value:this.variables.getPropertyValue("--em-blue-1")}),this.swatches.push(this.variables.getPropertyValue("--em-blue-2")),this.colors.push({name:"blue-2",value:this.variables.getPropertyValue("--em-blue-2")}),this.swatches.push(this.variables.getPropertyValue("--em-blue-3")),this.colors.push({name:"blue-3",value:this.variables.getPropertyValue("--em-blue-3")}),this.swatches.push(this.variables.getPropertyValue("--em-green-1")),this.colors.push({name:"green-1",value:this.variables.getPropertyValue("--em-green-1")}),this.swatches.push(this.variables.getPropertyValue("--em-green-2")),this.colors.push({name:"green-2",value:this.variables.getPropertyValue("--em-green-2")}),this.swatches.push(this.variables.getPropertyValue("--em-yellow-1")),this.colors.push({name:"yellow-1",value:this.variables.getPropertyValue("--em-yellow-1")}),this.swatches.push(this.variables.getPropertyValue("--em-yellow-2")),this.colors.push({name:"yellow-2",value:this.variables.getPropertyValue("--em-yellow-2")}),this.swatches.push(this.variables.getPropertyValue("--em-orange-1")),this.colors.push({name:"orange-1",value:this.variables.getPropertyValue("--em-orange-1")}),this.swatches.push(this.variables.getPropertyValue("--em-orange-2")),this.colors.push({name:"orange-2",value:this.variables.getPropertyValue("--em-orange-2")}),this.swatches.push(this.variables.getPropertyValue("--em-beige")),this.colors.push({name:"beige",value:this.variables.getPropertyValue("--em-beige")}),this.swatches.push(this.variables.getPropertyValue("--em-brown")),this.colors.push({name:"brown",value:this.variables.getPropertyValue("--em-brown")}),this.swatches.push(this.variables.getPropertyValue("--em-grey-1")),this.colors.push({name:"grey-1",value:this.variables.getPropertyValue("--em-grey-1")}),this.swatches.push(this.variables.getPropertyValue("--em-grey-2")),this.colors.push({name:"grey-2",value:this.variables.getPropertyValue("--em-grey-2")}),this.swatches.push(this.variables.getPropertyValue("--em-black")),this.colors.push({name:"black",value:this.variables.getPropertyValue("--em-black")})},getStatus(){m.a.get("index.php?option=com_emundus&controller=settings&task=getstatus").then(t=>{this.status=t.data.data,setTimeout(()=>{this.status.forEach(t=>{this.getHexColors(t)})},100)})},async updateStatus(t){this.$emit("updateSaving",!0);let e=this.colors.findIndex(e=>e.value===t.class);const a=new FormData;a.append("status",t.step),a.append("label",document.getElementById("status_label_"+t.step).textContent),a.append("color",this.colors[e].name),await f().post("index.php?option=com_emundus&controller=settings&task=updatestatus",a,{headers:{"Content-Type":"multipart/form-data"}}).then(()=>{this.$emit("updateSaving",!1),this.$emit("updateLastSaving",this.formattedDate("","LT"))})},async updateStatusOrder(){let t=[];this.status.forEach(e=>{t.push(e.step)}),this.$emit("updateSaving",!0);const e=new FormData;e.append("status",t.join(",")),await f().post("index.php?option=com_emundus&controller=settings&task=updatestatusorder",e,{headers:{"Content-Type":"multipart/form-data"}}).then(()=>{this.$emit("updateSaving",!1),this.$emit("updateLastSaving",this.formattedDate("","LT"))})},pushStatus(){this.$emit("updateSaving",!0),m()({method:"post",url:"index.php?option=com_emundus&controller=settings&task=createstatus",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(t=>{this.status.push(t.data),setTimeout(()=>{this.getHexColors(t.data)},100),this.$emit("updateSaving",!1),this.$emit("updateLastSaving",this.formattedDate("","LT"))})},removeStatus(t,e){1==t.edit&&0!=t.step&&1!=t.step&&(this.$emit("updateSaving",!0),m()({method:"post",url:"index.php?option=com_emundus&controller=settings&task=deletestatus",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:dr.stringify({id:t.id,step:t.step})}).then(()=>{this.status.splice(e,1),this.$emit("updateSaving",!1),this.$emit("updateLastSaving",this.formattedDate("","LT"))}))},manageKeyup(t){document.getElementById("status_label_"+t.step).textContent=document.getElementById("status_label_"+t.step).textContent.trim(),document.activeElement.blur()},getHexColors(t){t.translate=!1,t.class=this.variables.getPropertyValue("--em-"+t.class)},checkMaxlength(t){50===t.target.textContent.length&&8!=t.keyCode&&t.preventDefault()},enableGrab(t){1!==this.status.length&&(this.indexGrab=t,this.grab=!0)},disableGrab(){this.indexGrab=0,this.grab=!1}}},mr=pr,hr=(a("3abc"),Object(y["a"])(mr,or,lr,!1,null,"723327e0",null)),fr=hr.exports,_r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"em-settings-menu"},[e("div",{staticClass:"em-w-80"},[e("div",{staticClass:"tw-grid tw-grid-cols-3 tw-gap-6 tw-mb-4"},[e("button",{staticClass:"em-primary-button tw-mb-6",staticStyle:{width:"max-content"},on:{click:t.pushTag}},[e("div",{staticClass:"add-button-div"},[e("em",{staticClass:"fas fa-plus tw-mr-1"}),t._v(" "+t._s(t.translate("COM_EMUNDUS_ONBOARD_SETTINGS_ADDTAG"))+" ")])])]),t._l(t.tags,(function(a,s){return e("div",{key:"tag_"+a.id,staticClass:"tw-mb-6",attrs:{id:"tag_"+a.id},on:{mouseover:function(e){return t.enableGrab(s)},mouseleave:function(e){return t.disableGrab()}}},[e("div",{staticClass:"tw-flex tw-items-center tw-flex tw-items-center-start tw-w-full"},[e("div",{staticClass:"status-field"},[e("div",{staticStyle:{width:"100%"}},[e("p",{staticClass:"tw-px-2 tw-py-3 em-editable-content",attrs:{contenteditable:"true",id:"tag_label_"+a.id},on:{focusout:function(e){return t.updateTag(a)},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.manageKeyup(a)},keydown:t.checkMaxlength}},[t._v(" "+t._s(a.label))])]),e("input",{class:a.class,attrs:{type:"hidden"}})]),e("div",{staticClass:"tw-flex tw-items-center"},[e("v-swatches",{attrs:{swatches:t.swatches,shapes:"circles","row-length":"8","show-border":"","popover-x":"left","popover-y":"top"},on:{input:function(e){return t.updateTag(a)}},model:{value:a.class,callback:function(e){t.$set(a,"class",e)},expression:"tag.class"}}),e("a",{staticClass:"tw-flex tw-items-center tw-ml-2 tw-cursor-pointer",attrs:{type:"button",title:t.translate("COM_EMUNDUS_ONBOARD_DELETE_TAGS")},on:{click:function(e){return t.removeTag(a,s)}}},[e("span",{staticClass:"material-icons-outlined tw-text-red-500"},[t._v("delete_outline")])])],1)]),e("hr")])}))],2)])},gr=[];const vr=a("bef5");var yr={name:"editTags",components:{VSwatches:ur.a,draggable:Xe.a},props:{},mixins:[A],data(){return{index:"",indexGrab:"0",grab:0,loading:!1,tags:[],show:!1,actualLanguage:"",swatches:[],colors:[],variables:null}},created(){let t=document.querySelector(":root");this.variables=getComputedStyle(t),this.prepareSwatchesColor(),this.getTags(),this.actualLanguage=this.$store.getters["global/shortLang"]},methods:{prepareSwatchesColor(){this.swatches.push(this.variables.getPropertyValue("--em-red-1")),this.colors.push({name:"red-1",value:this.variables.getPropertyValue("--em-red-1")}),this.swatches.push(this.variables.getPropertyValue("--em-red-2")),this.colors.push({name:"red-2",value:this.variables.getPropertyValue("--em-red-2")}),this.swatches.push(this.variables.getPropertyValue("--em-pink-1")),this.colors.push({name:"pink-1",value:this.variables.getPropertyValue("--em-pink-1")}),this.swatches.push(this.variables.getPropertyValue("--em-pink-2")),this.colors.push({name:"pink-2",value:this.variables.getPropertyValue("--em-pink-2")}),this.swatches.push(this.variables.getPropertyValue("--em-purple-1")),this.colors.push({name:"purple-1",value:this.variables.getPropertyValue("--em-purple-1")}),this.swatches.push(this.variables.getPropertyValue("--em-purple-2")),this.colors.push({name:"purple-2",value:this.variables.getPropertyValue("--em-purple-2")}),this.swatches.push(this.variables.getPropertyValue("--em-light-blue-1")),this.colors.push({name:"light-blue-1",value:this.variables.getPropertyValue("--em-light-blue-1")}),this.swatches.push(this.variables.getPropertyValue("--em-light-blue-2")),this.colors.push({name:"light-blue-2",value:this.variables.getPropertyValue("--em-light-blue-2")}),this.swatches.push(this.variables.getPropertyValue("--em-blue-1")),this.colors.push({name:"blue-1",value:this.variables.getPropertyValue("--em-blue-1")}),this.swatches.push(this.variables.getPropertyValue("--em-blue-2")),this.colors.push({name:"blue-2",value:this.variables.getPropertyValue("--em-blue-2")}),this.swatches.push(this.variables.getPropertyValue("--em-blue-3")),this.colors.push({name:"blue-3",value:this.variables.getPropertyValue("--em-blue-3")}),this.swatches.push(this.variables.getPropertyValue("--em-green-1")),this.colors.push({name:"green-1",value:this.variables.getPropertyValue("--em-green-1")}),this.swatches.push(this.variables.getPropertyValue("--em-green-2")),this.colors.push({name:"green-2",value:this.variables.getPropertyValue("--em-green-2")}),this.swatches.push(this.variables.getPropertyValue("--em-yellow-1")),this.colors.push({name:"yellow-1",value:this.variables.getPropertyValue("--em-yellow-1")}),this.swatches.push(this.variables.getPropertyValue("--em-yellow-2")),this.colors.push({name:"yellow-2",value:this.variables.getPropertyValue("--em-yellow-2")}),this.swatches.push(this.variables.getPropertyValue("--em-orange-1")),this.colors.push({name:"orange-1",value:this.variables.getPropertyValue("--em-orange-1")}),this.swatches.push(this.variables.getPropertyValue("--em-orange-2")),this.colors.push({name:"orange-2",value:this.variables.getPropertyValue("--em-orange-2")}),this.swatches.push(this.variables.getPropertyValue("--em-beige")),this.colors.push({name:"beige",value:this.variables.getPropertyValue("--em-beige")}),this.swatches.push(this.variables.getPropertyValue("--em-brown")),this.colors.push({name:"brown",value:this.variables.getPropertyValue("--em-brown")}),this.swatches.push(this.variables.getPropertyValue("--em-grey-1")),this.colors.push({name:"grey-1",value:this.variables.getPropertyValue("--em-grey-1")}),this.swatches.push(this.variables.getPropertyValue("--em-grey-2")),this.colors.push({name:"grey-2",value:this.variables.getPropertyValue("--em-grey-2")}),this.swatches.push(this.variables.getPropertyValue("--em-black")),this.colors.push({name:"black",value:this.variables.getPropertyValue("--em-black")})},getTags(){m.a.get("index.php?option=com_emundus&controller=settings&task=gettags").then(t=>{this.tags=t.data.data,setTimeout(()=>{this.tags.forEach(t=>{this.getHexColors(t)})},100)})},async updateTag(t){this.$emit("updateSaving",!0);let e=this.colors.findIndex(e=>e.value===t.class);const a=new FormData;a.append("tag",t.id),a.append("label",document.getElementById("tag_label_"+t.id).textContent),a.append("color",this.colors[e].name),await f().post("index.php?option=com_emundus&controller=settings&task=updatetags",a,{headers:{"Content-Type":"multipart/form-data"}}).then(()=>{this.$emit("updateSaving",!1),this.$emit("updateLastSaving",this.formattedDate("","LT"))})},pushTag(){this.$emit("updateSaving",!0),m()({method:"post",url:"index.php?option=com_emundus&controller=settings&task=createtag",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(t=>{this.tags.push(t.data),setTimeout(()=>{this.getHexColors(t.data)},100),this.$emit("updateSaving",!1),this.$emit("updateLastSaving",this.formattedDate("","LT"))})},removeTag(t,e){this.$emit("updateSaving",!0),m()({method:"post",url:"index.php?option=com_emundus&controller=settings&task=deletetag",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:vr.stringify({id:t.id})}).then(()=>{this.tags.splice(e,1),this.$emit("updateSaving",!1),this.$emit("updateLastSaving",this.formattedDate("","LT"))})},manageKeyup(t){document.getElementById("tag_label_"+t.id).textContent=document.getElementById("tag_label_"+t.id).textContent.trim(),document.activeElement.blur()},getHexColors(t){t.translate=!1,t.class=this.variables.getPropertyValue("--em-"+t.class.replace("label-",""))},checkMaxlength(t){50===t.target.textContent.length&&8!=t.keyCode&&t.preventDefault()},enableGrab(t){1!==this.tags.length&&(this.indexGrab=t,this.grab=!0)},disableGrab(){this.indexGrab=0,this.grab=!1}}},br=yr,wr=(a("fad2"),Object(y["a"])(br,_r,gr,!1,null,"869783f2",null)),Or=wr.exports,Er=function(){var t=this,e=t._self._c;return e("span",{attrs:{id:"translationTool"}},[e("modal",{attrs:{name:"translationTool",height:"auto",transition:"fade",delay:100,adaptive:!0,clickToClose:!1},on:{opened:t.checkSetup,closed:t.beforeClose}},[e("div",{staticClass:"em-modal-header"},[e("div",{staticClass:"tw-justify-between tw-flex tw-items-center tw-cursor-pointer",on:{click:function(e){return e.preventDefault(),t.$modal.hide("translationTool")}}},[e("div",{staticClass:"tw-w-max tw-flex tw-items-center"},[e("span",{staticClass:"material-icons-outlined"},[t._v("navigate_before")]),e("span",{staticClass:"tw-ml-2 tw-text-neutral-900"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_ADD_RETOUR")))])]),t.saving?e("div",{staticClass:"tw-flex tw-items-center tw-justify-start"},[e("div",{staticClass:"em-loader tw-mr-2"}),e("p",{staticClass:"tw-text-sm tw-flex tw-items-center"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_TRANSLATIONS_AUTOSAVE_PROGRESS")))])]):t._e(),t.saving||null==t.last_save?t._e():e("p",{staticClass:"tw-text-sm"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_TRANSLATIONS_AUTOSAVE_LAST")+t.last_save))])])]),e("div",{staticClass:"em-modal-content"},[e("div",{staticClass:"em-modal-menu__sidebar"},t._l(t.menus,(function(a){return e("div",{key:"menu_"+a.index,staticClass:"translation-menu-item tw-p-4 tw-flex tw-items-center tw-justify-between pointer",class:t.currentMenu===a.index?"em-modal-menu__current":"",on:{click:function(e){t.currentMenu=a.index}}},[e("p",{staticClass:"tw-text-base"},[t._v(t._s(t.translate(a.title)))]),3===a.index&&t.orphelins_count>0?e("div",{staticClass:"em-notifications-yellow"}):t._e()])})),0),e("transition",{attrs:{name:"fade"}},[1===t.currentMenu?e("Global",{directives:[{name:"show",rawName:"v-show",value:!t.setup_success,expression:"!setup_success"}],staticClass:"em-modal-component",on:{updateOrphelinsCount:t.updateOrphelinsCount}}):t._e(),2===t.currentMenu?e("Translations",{directives:[{name:"show",rawName:"v-show",value:!t.setup_success,expression:"!setup_success"}],staticClass:"em-modal-component",on:{updateSaving:t.updateSaving,updateLastSaving:t.updateLastSaving}}):t._e(),3===t.currentMenu?e("Orphelins",{directives:[{name:"show",rawName:"v-show",value:!t.setup_success,expression:"!setup_success"}],staticClass:"em-modal-component"}):t._e()],1),t.setup_success?e("img",{staticClass:"em-success-animation",attrs:{alt:"checked-animation",src:"/images/emundus/animations/checked.gif"}}):t._e()],1),t.loading?e("div",[t.setup_success?t._e():e("div",{staticClass:"em-page-loader"}),t.setup_success?t._e():e("p",{staticClass:"em-page-loader-text"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_SETUP_PROGRESSING")))]),t.setup_success?e("p",{staticClass:"em-page-loader-text em-fade-loader"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_SETUP_SUCCESS")))]):t._e()]):t._e()])],1)},Cr=[],Nr=function(){var t=this,e=t._self._c;return e("div",[e("h1",{staticClass:"tw-mb-2"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_GLOBAL")))]),e("div",{staticClass:"tw-mb-6 tw-flex tw-items-center tw-justify-between"},[e("div",[e("p",{staticClass:"em-body-16-semibold tw-mb-2"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_DEFAULT")))]),e("p",{staticClass:"tw-text-base tw-text-neutral-700"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_DEFAULT_DESC")))])]),e("div",{staticClass:"em-w-33"},[e("multiselect",{attrs:{label:"title_native","track-by":"lang_code",options:t.allLanguages,multiple:!1,taggable:!1,"select-label":"","selected-label":"","deselect-label":"","close-on-select":!0,"clear-on-select":!1,searchable:!1,"allow-empty":!1},on:{select:t.updateDefaultLanguage},model:{value:t.defaultLang,callback:function(e){t.defaultLang=e},expression:"defaultLang"}})],1)]),e("div",{staticClass:"tw-mb-6 tw-flex tw-items-center tw-justify-between"},[e("div",[e("p",{staticClass:"em-body-16-semibold tw-mb-2"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_SECONDARY")))]),e("p",{staticClass:"tw-text-base tw-text-neutral-700"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_SECONDARY_DESC")))])]),e("div",{staticClass:"em-w-33 tw-text-right"},[e("multiselect",{attrs:{label:"title_native","track-by":"lang_code",options:t.otherLanguages,multiple:!0,taggable:!1,"select-label":"","selected-label":"","deselect-label":"","close-on-select":!1,"clear-on-select":!1,searchable:!1},on:{remove:t.unpublishLanguage,select:t.publishLanguage},model:{value:t.secondaryLanguages,callback:function(e){t.secondaryLanguages=e},expression:"secondaryLanguages"}}),e("a",{staticClass:"tw-cursor-pointer tw-mt-4 tw-text-base em-profile-color tw-underline",on:{click:t.purposeLanguage}},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_OTHER_LANGUAGE")))])],1)]),t.loading?e("div",{staticClass:"em-page-loader"}):t._e()])},Sr=[],Ar={name:"global",props:{},components:{Multiselect:vt.a},data(){return{defaultLang:null,secondaryLanguages:[],allLanguages:[],otherLanguages:[],orphelins_count:0,loading:!1}},created(){this.loading=!0,rn.getDefaultLanguage().then(t=>{this.defaultLang=t,this.getAllLanguages(),this.loading=!1})},methods:{async getAllLanguages(){try{const t=await f().get("index.php?option=com_emundus&controller=translations&task=getlanguages");this.allLanguages=t.data,this.allLanguages.forEach(t=>{t.lang_code!==this.defaultLang.lang_code&&(1==t.published&&this.secondaryLanguages.push(t),this.otherLanguages.push(t))}),this.secondaryLanguages.forEach(t=>{rn.getOrphelins(this.defaultLang.lang_code,t.lang_code).then(t=>{this.orphelins_count=t.data.length,this.$emit("updateOrphelinsCount",this.orphelins_count)})})}catch(t){return!1}},unpublishLanguage(t){rn.updateLanguage(t.lang_code,0)},publishLanguage(t){rn.updateLanguage(t.lang_code,1)},updateDefaultLanguage(t){rn.updateLanguage(t.lang_code,1,1).then(()=>{let e=this.secondaryLanguages.findIndex(e=>e.lang_code==t.lang_code);-1!==e&&this.secondaryLanguages.splice(e,1),this.getAllLanguages()})},async purposeLanguage(){const{value:t}=await $.a.fire({title:this.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_SUGGEST_LANGUAGE"),html:'<p class="em-body-16-semibold tw-mb-2 tw-text-end">'+this.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_SUGGEST_LANGUAGE_FIELD")+'</p><input id="language_purpose" class="em-input">',showCancelButton:!0,cancelButtonText:this.translate("COM_EMUNDUS_ONBOARD_CANCEL"),confirmButtonText:this.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_SUGGEST_LANGUAGE_SEND"),showLoaderOnConfirm:!0,reverseButtons:!0,customClass:{title:"em-swal-title",cancelButton:"em-swal-cancel-button",confirmButton:"em-swal-confirm-button"},preConfirm:()=>{const t=document.getElementById("language_purpose").value;return rn.sendMailToInstallLanguage(t)},allowOutsideClick:()=>!$.a.isLoading()});t&&await $.a.fire({title:this.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_SUGGEST_LANGUAGE_SENDED"),text:this.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_SUGGEST_LANGUAGE_SENDED_TEXT"),showCancelButton:!1,showConfirmButton:!1,timer:3e3,customClass:{title:"em-swal-title"}})}}},Dr=Ar,Mr=Object(y["a"])(Dr,Nr,Sr,!1,null,"34569d2b",null),xr=Mr.exports,Tr=function(){var t=this,e=t._self._c;return e("div",[e("h1",{staticClass:"tw-mb-2"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_TRANSLATIONS")))]),e("p",{staticClass:"tw-text-base tw-text-neutral-700 tw-mb-6 em-h-25"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_TRANSLATIONS_AUTOSAVE")))]),0!==t.availableLanguages.length||t.loading?e("div",{staticClass:"em-grid-4"},[e("div",[e("multiselect",{attrs:{label:"title_native","track-by":"lang_code",options:t.availableLanguages,multiple:!1,taggable:!1,"select-label":"","selected-label":"","deselect-label":"",placeholder:t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_SELECT_LANGUAGE"),"close-on-select":!0,"clear-on-select":!1,searchable:!1,"allow-empty":!0},on:{select:t.getObjects},model:{value:t.lang,callback:function(e){t.lang=e},expression:"lang"}})],1),t.lang?e("div",[e("multiselect",{attrs:{label:"name","track-by":"name",options:t.objects,multiple:!1,taggable:!1,"select-label":"","selected-label":"","deselect-label":"",placeholder:t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_SELECT_OBJECT"),"close-on-select":!0,"clear-on-select":!1,searchable:!1,"allow-empty":!0},model:{value:t.object,callback:function(e){t.object=e},expression:"object"}})],1):t._e(),t.object?e("div",[e("multiselect",{attrs:{label:"label","track-by":"id",options:t.datas,multiple:!1,taggable:!1,"select-label":"","selected-label":"","deselect-label":"",placeholder:t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_SELECT"),"close-on-select":!0,"clear-on-select":!1,searchable:!0,"allow-empty":!0},model:{value:t.data,callback:function(e){t.data=e},expression:"data"}})],1):t._e(),t.childrens.length>0?e("div",[e("multiselect",{attrs:{label:"label","track-by":"id",options:t.childrens,multiple:!1,taggable:!1,"select-label":"","selected-label":"","deselect-label":"",placeholder:t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_SELECT"),"close-on-select":!0,"clear-on-select":!1,searchable:!0,"allow-empty":!0},model:{value:t.children,callback:function(e){t.children=e},expression:"children"}})],1):t._e()]):e("p",{staticClass:"tw-text-base tw-mb-6 em-h-25"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_TRANSLATIONS_NO_LANGUAGES_AVAILABLE")))]),e("hr",{staticClass:"col-md-12",staticStyle:{"z-index":"0"}}),e("div",{staticClass:"col-md-12"},[""===t.lang||null==t.lang||""===t.object||null==t.object||!1===t.init_translations?e("div",{staticClass:"text-center tw-mt-20"},[e("h5",{staticClass:"tw-mb-2"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_NO_TRANSLATION_TITLE")))]),e("p",{staticClass:"tw-text-base em-text-neutral-600"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_NO_TRANSLATION_TEXT")))])]):e("div",["emundus_setup_profiles"===t.object.table.name?e("button",{staticClass:"float-right em-profile-color em-text-underline",on:{click:t.exportToCsv}},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_EXPORT")))]):t._e(),t._l(t.object.fields.Sections,(function(a){return e("div",{key:a.Table,staticClass:"tw-mb-8"},[e("h4",{staticClass:"mb-2"},[t._v(t._s(a.Label))]),e("TranslationRow",{attrs:{section:a,translations:t.translations},on:{saveTranslation:t.saveTranslation}})],1)}))],2)]),t.loading?e("div",{staticClass:"em-page-loader"}):t._e()])},Ur=[],kr=function(){var t=this,e=t._self._c;return e("div",t._l(t.translations_rows,(function(a){return e("div",{staticClass:"tw-mb-8 em-neutral-100-box em-p-24"},t._l(a,(function(a,s){return e("div",{staticClass:"tw-mb-6"},[e("p",[t._v(t._s(a.reference_label?a.reference_label.toUpperCase():a.reference_id))]),e("div",{staticClass:"tw-justify-between tw-mt-4 em-grid-50 em-ml-24"},[e("p",{staticClass:"tw-text-neutral-700"},[t._v(t._s(a.default_lang))]),"field"===a.field_type?e("input",{staticClass:"mb-0 em-input tw-w-full",attrs:{type:"text"},domProps:{value:a.lang_to},on:{focusout:function(e){return t.saveTranslation(e.target.value,a)}}}):t._e(),"textarea"===a.field_type?e("textarea",{staticClass:"mb-0 em-input",domProps:{value:a.lang_to},on:{focusout:function(e){return t.saveTranslation(e.target.value,a)}}}):t._e()])])})),0)})),0)},Rr=[],Lr={name:"TranslationRow",components:{Multiselect:vt.a},mixins:[A],props:{section:Object,translations:Array},data(){return{translations_rows:{},key_fields:[]}},created(){this.initTranslations()},methods:{initTranslations(){this.key_fields=Object.keys(this.$props.section.indexedFields),Object.values(this.$props.translations).forEach(t=>{Object.values(t).forEach(t=>{this.key_fields.includes(t.reference_field)&&t.reference_table===this.$props.section.Name&&(t.reference_field_order=this.key_fields.indexOf(t.reference_field),t.reference_label=this.$props.section.indexedFields[t.reference_field].Label,t.field_type=this.$props.section.indexedFields[t.reference_field].Type,t.hasOwnProperty("tag")||(t.tag=t.reference_field),this.translations_rows.hasOwnProperty(t.reference_id)||(this.translations_rows[t.reference_id]=[]),this.translations_rows[t.reference_id].push(t))})}),Object.values(this.translations_rows).forEach(t=>{t.sort((t,e)=>t.reference_field_order>e.reference_field_order?1:-1)})},async saveTranslation(t,e){this.$emit("saveTranslation",{value:t,translation:e})}}},Ir=Lr,Pr=Object(y["a"])(Ir,kr,Rr,!1,null,"4e2f4578",null),Br=Pr.exports,jr={name:"Translations",components:{TranslationRow:Br,Multiselect:vt.a},mixins:[A],data(){return{defaultLang:null,availableLanguages:[],objects:[],datas:[],childrens:[],translations:{},lang:null,object:null,data:null,children_type:null,children:null,loading:!1,init_translations:!1,firstLoadObjects:!0,firstLoadDatas:!0}},created(){this.loading=!0,rn.getDefaultLanguage().then(t=>{this.defaultLang=t,this.getAllLanguages().then(()=>{this.loading=!1})})},methods:{async getAllLanguages(){try{const t=await f().get("index.php?option=com_emundus&controller=translations&task=getlanguages");this.allLanguages=t.data;for(const e of this.allLanguages)e.lang_code!==this.defaultLang.lang_code&&1==e.published&&this.availableLanguages.push(e);1===this.availableLanguages.length&&(this.lang=this.availableLanguages[0],await this.getObjects())}catch(t){return this.loading=!1,!1}},async getObjects(){this.loading=!0,this.translations=[],this.childrens=[],this.datas=[],this.objects=[],this.object=null,this.data=null,this.children=null,rn.getObjects().then(t=>{if(this.objects=t.data,this.firstLoadObjects){const t=new URLSearchParams(window.location.search),e=t.get("object");e&&(this.object=this.objects.find(t=>t.table.name===e)),this.firstLoadObjects=!1}this.loading=!1})},async getDatas(t){this.loading=!0,rn.getDatas(t.table.name,t.table.reference,t.table.label,t.table.filters).then(async e=>{if(this.datas=e.data,"true"===t.table.load_all){let t=[];await this.asyncForEach(this.object.fields.Fields,async e=>{t.push(e.Name)}),t=t.join(",");const e=async()=>{for(const e of this.datas)await rn.getTranslations(this.object.table.type,this.defaultLang.lang_code,this.lang.lang_code,e.id,t,this.object.table.name).then(async t=>{for(const a of Object.values(t.data))this.translations[e.id]={},this.object.fields.Fields.forEach(t=>{this.translations[e.id][t.Name]=a[t.Name]})});this.init_translations=!0,this.loading=!1};await e()}else if("true"===t.table.load_first_data)if(this.firstLoadDatas){const t=new URLSearchParams(window.location.search),e=t.get("data");this.data=e?this.datas.find(t=>parseInt(t.id)===parseInt(e)):this.datas[0],this.firstLoadDatas=!1}else this.data=this.datas[0];else this.loading=!1})},async getTranslations(t){let e=[];this.object.fields.Fields.forEach(t=>{e.push(t.Name)}),e=e.join(","),rn.getTranslations(this.object.table.type,this.defaultLang.lang_code,this.lang.lang_code,t.id,e,this.object.table.name).then(t=>{this.translations=t.data,this.init_translations=!0,this.loading=!1})},async saveTranslation({value:t,translation:e}){this.$emit("updateSaving",!0),rn.updateTranslations(t,this.object.table.type,this.lang.lang_code,e.reference_id,e.tag,e.reference_table,e.reference_field).then(t=>{t.status?(this.$emit("updateLastSaving",this.formattedDate("","LT")),this.$emit("updateSaving",!1)):console.error(t.msg)})},async exportToCsv(){window.open("index.php?option=com_emundus&controller=translations&task=export&profile="+this.data.id,"_blank")}},watch:{object:function(t){this.init_translations=!1,this.translations={},this.childrens=[],this.children=null,this.datas=[],this.data=null,null!=t&&this.getDatas(t)},data:function(t){this.loading=!0,this.init_translations=!1,this.translations={},this.childrens=[],this.children=null,this.children_type=null;var e=!1;null!=t?(this.object.fields.Fields.forEach(t=>{"children"===t.Type&&(this.children_type=t.Label,e=!0,rn.getChildrens(t.Label,this.data.id,t.Name).then(t=>{this.childrens=t.data,"true"===this.object.table.load_first_child&&(this.children=this.childrens[0]),this.loading=!1}))}),e||this.getTranslations(t)):this.getDatas(this.object)},children:function(t){if(this.loading=!0,this.init_translations=!1,this.translations={},null!=t){let e=[];this.object.fields.Sections.forEach(t=>{const a={table:t.Table,join_table:t.TableJoin,join_column:t.TableJoinColumn,reference_column:t.ReferenceColumn,fields:Object.keys(t.indexedFields)};e.push(a)}),rn.getTranslations(this.object.table.type,this.defaultLang.lang_code,this.lang.lang_code,t.id,"",e).then(t=>{this.translations=t.data,this.init_translations=!0,this.loading=!1})}else this.loading=!1}}},Fr=jr,qr=Object(y["a"])(Fr,Tr,Ur,!1,null,"9dbac8b4",null),$r=qr.exports,Hr=function(){var t=this,e=t._self._c;return e("div",[e("h1",{staticClass:"tw-mb-2"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_ORPHELINS")))]),t.saving||null!=t.last_save?t._e():e("p",{staticClass:"tw-text-base tw-text-neutral-700 tw-mb-6 em-h-25"},[t._v(" "+t._s(t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_TRANSLATIONS_AUTOSAVE")))]),t.saving?e("div",{staticClass:"tw-mb-6 tw-flex tw-items-center tw-justify-start"},[e("div",{staticClass:"em-loader tw-mr-2"}),e("p",{staticClass:"tw-text-base tw-flex tw-items-center"},[t._v(" "+t._s(t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_TRANSLATIONS_AUTOSAVE_PROGRESS")))])]):t._e(),t.saving||null==t.last_save?t._e():e("p",{staticClass:"tw-text-base tw-mb-6 em-h-25"},[t._v(" "+t._s(t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_TRANSLATIONS_AUTOSAVE_LAST")+t.last_save))]),0!==t.availableLanguages.length||t.loading?t._e():e("p",{staticClass:"tw-text-base tw-mb-6 em-h-25"},[t._v(" "+t._s(t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_TRANSLATIONS_NO_LANGUAGES_AVAILABLE")))]),0!==t.translations.length||t.loading?e("div",{staticClass:"em-grid-4"},[e("div",[e("multiselect",{attrs:{label:"title_native","track-by":"lang_code",options:t.availableLanguages,multiple:!1,taggable:!1,"select-label":"","selected-label":"","deselect-label":"",placeholder:t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_SELECT_LANGUAGE"),"close-on-select":!0,"clear-on-select":!1,searchable:!1,"allow-empty":!0},model:{value:t.lang,callback:function(e){t.lang=e},expression:"lang"}})],1)]):e("p",{staticClass:"tw-text-base tw-mb-6 em-h-25"},[t._v(" "+t._s(t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_ORPHANS_CONGRATULATIONS")))]),e("hr",{staticClass:"col-md-12",staticStyle:{"z-index":"0"}}),e("div",{staticClass:"col-md-12"},[""===t.lang||null==t.lang||0===t.translations.length?e("div",{staticClass:"text-center tw-mt-20"},[e("h5",{staticClass:"tw-mb-2"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_NO_ORPHELINS_TITLE")))]),""===t.lang||null==t.lang?e("p",{staticClass:"tw-text-base em-text-neutral-600"},[t._v(" "+t._s(t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_NO_ORPHELINS_TEXT")))]):t._e()]):e("div",t._l(t.translations,(function(a){return e("div",{key:a.id},[e("div",{staticClass:"tw-mb-8 em-neutral-100-box em-p-24"},[e("div",{staticClass:"tw-justify-between tw-mt-4 em-grid-50"},[e("p",{staticClass:"tw-text-neutral-700"},[t._v(t._s(a.override))]),e("div",{staticClass:"tw-text-right"},[e("input",{ref:"translation-"+a.id,refInFor:!0,staticClass:"mb-0 em-input tw-w-full",attrs:{type:"text"},domProps:{value:a.override}}),e("a",{staticClass:"tw-normal-case btn btn-primary tw-cursor-pointer em-profile-color tw-mt-4 tw-text-base",attrs:{role:"button"},on:{click:function(e){return t.saveTranslation(a)}}},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_ORPHELIN_CONFIRM_TRANSLATION")))])])])])])})),0)]),t.loading?e("div",{staticClass:"em-page-loader"}):t._e()])},Gr=[],zr={name:"Orphelins",components:{Multiselect:vt.a},mixins:[A],data(){return{defaultLang:null,availableLanguages:[],translations:[],lang:null,loading:!0,saving:!1,last_save:null}},created(){rn.getDefaultLanguage().then(t=>{this.defaultLang=t,this.getAllLanguages()})},methods:{async getAllLanguages(){try{const t=await f().get("index.php?option=com_emundus&controller=translations&task=getlanguages");this.allLanguages=t.data;for(const e of this.allLanguages)e.lang_code!==this.defaultLang.lang_code&&1==e.published&&this.availableLanguages.push(e);1===this.availableLanguages.length?this.lang=this.availableLanguages[0]:this.loading=!1}catch(t){return this.loading=!1,!1}},async saveTranslation(t){this.saving=!0;const e=this.$refs["translation-"+t.id][0].value;e&&rn.insertTranslation(e,"override",this.lang.lang_code,t.reference_id,t.tag,t.reference_table).then(e=>{this.last_save=this.formattedDate("","LT"),this.saving=!1,this.translations=this.translations.filter((function(e){return e.id!==t.id}))})}},watch:{lang:function(t){null!==t&&void 0!==typeof t&&(this.loading=!0,this.translations=[],rn.getOrphelins(this.defaultLang.lang_code,t.lang_code).then(t=>{this.translations=t.data,this.loading=!1}))}}},Vr=zr,Yr=Object(y["a"])(Vr,Hr,Gr,!1,null,"3958b5ba",null),Jr=Yr.exports,Kr={name:"translationTool",props:{showModalOnLoad:{type:Number,default:0},defaultMenuIndex:{type:Number,default:1}},components:{Orphelins:Jr,Translations:$r,Global:xr},data(){return{orphelins_count:0,currentMenu:0,menus:[{title:"COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_GLOBAL",index:1},{title:"COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_TRANSLATIONS",index:2},{title:"COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_ORPHELINS",index:3}],loading:!1,setup_success:!1,saving:!1,last_save:null}},created(){const t=this.$store.getters["global/datas"];0===this.showModalOnLoad&&void 0!==t.showModalOnLoad&&(this.showModalOnLoad=Number(t.showModalOnLoad.value)||0),t.hasOwnProperty("defaultMenuIndex")&&(this.defaultMenuIndex=Number(t.defaultMenuIndex.value)||1),this.showModalOnLoad>0&&setTimeout(()=>{this.$modal.show("translationTool")},1e3)},methods:{beforeClose(){const t=this.$store.getters["global/datas"];t.hasOwnProperty("redirectOnClose")&&(window.location.href=t.redirectOnClose.value),this.$emit("resetMenuIndex")},updateOrphelinsCount(t){this.orphelins_count=t},checkSetup(){rn.checkSetup().then(t=>{0===t.data?(this.loading=!0,rn.configureSetup().then(t=>{1===t.data&&(this.loading=!1,this.setup_success=!0,this.currentMenu=this.defaultMenuIndex,setTimeout(()=>{this.setup_success=!1},2700))})):this.currentMenu=this.defaultMenuIndex})},updateSaving(t){this.saving=t},updateLastSaving(t){this.last_save=t}}},Wr=Kr,Xr=Object(y["a"])(Wr,Er,Cr,!1,null,"bfb268a0",null),Zr=Xr.exports,Qr=function(){var t=this,e=t._self._c;return e("span",{attrs:{id:"contentTool"}},[e("modal",{attrs:{name:"contentTool",height:"auto",transition:"fade",delay:100,adaptive:!0,clickToClose:!1},on:{closed:t.beforeClose}},[e("div",{staticClass:"em-modal-header"},[e("div",{staticClass:"tw-justify-between tw-flex tw-items-center tw-cursor-pointer",on:{click:function(e){return e.preventDefault(),t.$modal.hide("contentTool")}}},[e("div",{staticClass:"tw-w-max tw-flex tw-items-center"},[e("span",{staticClass:"material-icons-outlined"},[t._v("navigate_before")]),e("span",{staticClass:"tw-ml-2 tw-text-neutral-900"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_ADD_RETOUR")))])]),t.saving?e("div",{staticClass:"tw-flex tw-items-center tw-justify-start"},[e("div",{staticClass:"em-loader tw-mr-2"}),e("p",{staticClass:"tw-text-sm tw-flex tw-items-center"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_TRANSLATIONS_AUTOSAVE_PROGRESS")))])]):t._e(),t.saving||null==t.last_save?t._e():e("p",{staticClass:"tw-text-sm"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_TRANSLATIONS_AUTOSAVE_LAST")+t.last_save))])])]),e("div",{staticClass:"em-modal-content"},[e("div",{staticClass:"em-modal-menu__sidebar"},t._l(t.menus,(function(a){return e("div",{key:"menu_"+a.index,staticClass:"translation-menu-item tw-p-4 tw-flex tw-items-center tw-justify-between pointer",class:t.currentMenu===a.index?"em-modal-menu__current":"",on:{click:function(e){t.currentMenu=a.index}}},[e("p",{staticClass:"tw-text-base"},[t._v(t._s(t.translate(a.title)))])])})),0),t.selectedMenu?e("transition",{attrs:{name:"fade",mode:"out-in"}},["article"===t.selectedMenu.type?e("EditArticle",{key:t.currentMenu,staticClass:"em-modal-component",attrs:{article_id:t.selectedMenu.id,article_alias:t.selectedMenu.alias,category:t.selectedMenu.category,published:t.selectedMenu.published},on:{updateSaving:t.updateSaving,updateLastSaving:t.updateLastSaving,updatePublished:t.updatePublished}}):"footer"===t.selectedMenu.type?e("EditFooter",{staticClass:"em-modal-component",on:{updateSaving:t.updateSaving,updateLastSaving:t.updateLastSaving}}):t._e()],1):t._e()],1),t.loading?e("div"):t._e()])],1)},to=[],eo=function(){var t=this,e=t._self._c;return e("div",{staticClass:"em-settings-menu"},[e("div",{staticClass:"em-w-80"},[e("div",{staticClass:"tw-grid tw-grid-cols-3 tw-gap-6 tw-mb-4"},[e("multiselect",{attrs:{label:"title_native","track-by":"lang_code",options:t.availableLanguages,multiple:!1,taggable:!1,"select-label":"","selected-label":"","deselect-label":"",placeholder:t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_SELECT_LANGUAGE"),"close-on-select":!0,"clear-on-select":!1,searchable:!1,"allow-empty":!1},model:{value:t.lang,callback:function(e){t.lang=e},expression:"lang"}})],1),"rgpd"===t.category?e("div",{staticClass:"tw-mb-4 tw-flex tw-items-center"},[e("div",{staticClass:"em-toggle"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.published,expression:"form.published"}],staticClass:"em-toggle-check",attrs:{type:"checkbox","true-value":"1","false-value":"0",id:"published",name:"published"},domProps:{checked:Array.isArray(t.form.published)?t._i(t.form.published,null)>-1:t._q(t.form.published,"1")},on:{change:[function(e){var a=t.form.published,s=e.target,n=s.checked?"1":"0";if(Array.isArray(a)){var i=null,r=t._i(a,i);s.checked?r<0&&t.$set(t.form,"published",a.concat([i])):r>-1&&t.$set(t.form,"published",a.slice(0,r).concat(a.slice(r+1)))}else t.$set(t.form,"published",n)},function(e){return t.publishArticle()}]}}),e("strong",{staticClass:"b em-toggle-switch"}),e("strong",{staticClass:"b em-toggle-track"})]),e("span",{staticClass:"tw-ml-2",attrs:{for:"published"}},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_SETTINGS_CONTENT_PUBLISH")))])]):t._e(),e("div",{staticClass:"form-group controls"},[e("editor-quill",{key:t.dynamicComponent,attrs:{height:"30em",text:t.form.content,enable_variables:!1,id:"editor"},on:{focusout:t.saveContent},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1)]),t.loading?e("div",{staticClass:"em-page-loader"}):t._e()])},ao=[],so={name:"editArticle",components:{EditorQuill:ye,Editor:Sn,Multiselect:vt.a},props:{actualLanguage:{type:String,default:"fr"},article_alias:{type:String,default:null},article_id:{type:Number,default:0},category:{type:String,default:null},published:{type:Number,default:1}},mixins:[A],data(){return{defaultLang:null,availableLanguages:[],lang:null,loading:!1,dynamicComponent:0,form:{published:this.$props.published,content:""}}},created(){this.loading=!0,rn.getDefaultLanguage().then(t=>{this.defaultLang=t,this.getAllLanguages(),this.loading=!1})},methods:{async getArticle(){let t={article_id:this.$props.article_id,lang:this.lang.lang_code,field:"introtext"};null!==this.$props.article_alias&&(t={article_alias:this.$props.article_alias,lang:this.lang.lang_code,field:"introtext"}),await f().get("index.php?option=com_emundus&controller=settings&task=getarticle",{params:t}).then(t=>{this.form.content=t.data.data.introtext,this.dynamicComponent++})},async saveContent(){this.$emit("updateSaving",!0);const t=new FormData;t.append("content",this.form.content),t.append("lang",this.lang.lang_code),null!==this.$props.article_alias?t.append("article_alias",this.$props.article_alias):t.append("article_id",this.$props.article_id),t.append("field","introtext"),await f().post("index.php?option=com_emundus&controller=settings&task=updatearticle",t,{headers:{"Content-Type":"multipart/form-data"}}).then(()=>{this.$emit("updateSaving",!1),this.$emit("updateLastSaving",this.formattedDate("","LT"))})},async getAllLanguages(){await rn.getAllLanguages().then(t=>{this.availableLanguages=t,this.lang=this.defaultLang})},async publishArticle(){this.$emit("updateSaving",!0);const t=new FormData;t.append("publish",this.form.published),null!==this.$props.article_alias?t.append("article_alias",this.$props.article_alias):t.append("article_id",this.$props.article_id),await f().post("index.php?option=com_emundus&controller=settings&task=publisharticle",t,{headers:{"Content-Type":"multipart/form-data"}}).then(()=>{this.$emit("updateSaving",!1),this.$emit("updateLastSaving",this.formattedDate("","LT")),this.$emit("updatePublished",this.form.published)})}},watch:{lang:function(){null!==this.lang?this.getArticle():(this.form.content="",this.dynamicComponent++)}}},no=so,io=Object(y["a"])(no,eo,ao,!1,null,"79452598",null),ro=io.exports,oo=function(){var t=this,e=t._self._c;return e("div",{staticClass:"em-settings-menu"},[e("div",{staticClass:"em-w-80"},[e("div",{staticClass:"tw-grid tw-grid-cols-3 tw-gap-6 tw-mb-4"},[e("multiselect",{attrs:{label:"label","track-by":"index",options:t.columns,multiple:!1,taggable:!1,"select-label":"","selected-label":"","deselect-label":"",placeholder:t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_SELECT_COLUMN"),"close-on-select":!0,"clear-on-select":!1,searchable:!1,"allow-empty":!0},model:{value:t.selectedColumn,callback:function(e){t.selectedColumn=e},expression:"selectedColumn"}})],1),0===t.selectedColumn.index&&null!=this.form.content.col1?e("div",{staticClass:"form-group controls"},[e("editor-quill",{key:t.dynamicComponent,attrs:{height:"30em",text:t.form.content.col1,lang:t.actualLanguage,enable_variables:!1,id:"editor_1"},on:{focusout:t.saveFooter},model:{value:t.form.content.col1,callback:function(e){t.$set(t.form.content,"col1",e)},expression:"form.content.col1"}})],1):t._e(),1===t.selectedColumn.index&&null!=this.form.content.col2?e("div",{staticClass:"form-group controls"},[e("editor-quill",{key:t.dynamicComponent,attrs:{height:"30em",text:t.form.content.col2,lang:t.actualLanguage,enable_variables:!1,id:"editor_2"},on:{focusout:t.saveFooter},model:{value:t.form.content.col2,callback:function(e){t.$set(t.form.content,"col2",e)},expression:"form.content.col2"}})],1):t._e()]),t.loading?e("div",{staticClass:"em-page-loader"}):t._e()])},lo=[],co={name:"EditFooter",components:{EditorQuill:ye,Multiselect:vt.a},props:{actualLanguage:String},mixins:[A],data(){return{loading:!1,dynamicComponent:0,selectedColumn:0,form:{content:{col1:null,col2:null}},columns:[{index:0,label:this.translate("COM_EMUNDUS_ONBOARD_COLUMN")+" 1"},{index:1,label:this.translate("COM_EMUNDUS_ONBOARD_COLUMN")+" 2"}]}},created(){this.loading=!0,this.getArticles(),this.selectedColumn=this.columns[0]},methods:{async getArticles(){await f().get("index.php?option=com_emundus&controller=settings&task=getfooterarticles").then(t=>{this.form.content.col1=t.data.data.column1,this.form.content.col2=t.data.data.column2,this.loading=!1})},async saveFooter(){this.$emit("updateSaving",!0);const t=new FormData;t.append("col1",this.form.content.col1),t.append("col2",this.form.content.col2),await f().post("index.php?option=com_emundus&controller=settings&task=updatefooter",t,{headers:{"Content-Type":"multipart/form-data"}}).then(()=>{this.$emit("updateSaving",!1),this.$emit("updateLastSaving",this.formattedDate("","LT"))})}},watch:{selectedColumn:function(){this.dynamicComponent++}}},uo=co,po=Object(y["a"])(uo,oo,lo,!1,null,"c65539ee",null),mo=po.exports,ho={name:"contentTool",props:{},components:{EditFooter:mo,EditArticle:ro},mixins:[A],data(){return{currentMenu:1,menus:[],loading:!1,saving:!1,last_save:null}},created(){let t=1;f().get("index.php?option=com_emundus&controller=settings&task=gethomearticle").then(e=>{this.menus.push({type:"article",id:e.data.data,title:"COM_EMUNDUS_ONBOARD_CONTENT_TOOL_HOMEPAGE",index:t,category:"homepage",published:1}),f().get("index.php?option=com_emundus&controller=settings&task=getrgpdarticles").then(e=>{e.data.data.forEach(e=>{t++,e.id?this.menus.push({type:"article",id:parseInt(e.id),title:e.title,index:t,category:"rgpd",published:e.published}):this.menus.push({type:"article",alias:e.alias,title:e.title,index:t,category:"rgpd",published:e.published})}),t++,this.menus.push({type:"footer",title:"COM_EMUNDUS_ONBOARD_CONTENT_TOOL_FOOTER",index:t})})})},methods:{beforeClose(t){this.$emit("resetMenuIndex")},updateSaving(t){this.saving=t},updateLastSaving(t){this.last_save=t},updatePublished(t){this.menus.forEach(e=>{e.index===this.currentMenu&&(e.published=Number(t))})}},computed:{selectedMenu(){return this.menus.find(t=>t.index===this.currentMenu)}}},fo=ho,_o=(a("ac9e"),Object(y["a"])(fo,Qr,to,!1,null,"70344145",null)),go=_o.exports,vo=function(){var t=this,e=t._self._c;return e("span",{attrs:{id:"filesTool"}},[e("modal",{attrs:{name:"filesTool",height:"auto",transition:"fade",delay:100,adaptive:!0,clickToClose:!1},on:{closed:t.beforeClose}},[e("div",{staticClass:"em-modal-header"},[e("div",{staticClass:"tw-justify-between tw-flex tw-items-center tw-cursor-pointer",on:{click:function(e){return e.preventDefault(),t.$modal.hide("filesTool")}}},[e("div",{staticClass:"tw-w-max tw-flex tw-items-center"},[e("span",{staticClass:"material-icons-outlined"},[t._v("navigate_before")]),e("span",{staticClass:"tw-ml-2 tw-text-neutral-900"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_ADD_RETOUR")))])]),t.saving?e("div",{staticClass:"tw-flex tw-items-center tw-justify-start"},[e("div",{staticClass:"em-loader tw-mr-2"}),e("p",{staticClass:"tw-text-sm tw-flex tw-items-center"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_TRANSLATIONS_AUTOSAVE_PROGRESS")))])]):t._e(),t.saving||null==t.last_save?t._e():e("p",{staticClass:"tw-text-sm"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_TRANSLATIONS_AUTOSAVE_LAST")+t.last_save))])])]),e("div",{staticClass:"em-modal-content"},[e("div",{staticClass:"em-modal-menu__sidebar"},t._l(t.menus,(function(a){return e("div",{key:"menu_"+a.index,staticClass:"translation-menu-item tw-p-4 tw-flex tw-items-center tw-justify-between pointer",class:t.currentMenu===a.index?"em-modal-menu__current":"",on:{click:function(e){t.currentMenu=a.index}}},[e("p",{staticClass:"tw-text-base"},[t._v(t._s(t.translate(a.title)))])])})),0),e("transition",{attrs:{name:"fade",mode:"out-in"}},[1===t.currentMenu?e("EditStatus",{key:t.currentMenu,staticClass:"em-modal-component",on:{updateSaving:t.updateSaving,updateLastSaving:t.updateLastSaving}}):t._e(),2===t.currentMenu?e("EditTags",{key:t.currentMenu,staticClass:"em-modal-component",on:{updateSaving:t.updateSaving,updateLastSaving:t.updateLastSaving}}):t._e(),3===t.currentMenu?e("EditApplicants",{key:t.currentMenu,staticClass:"em-modal-component",attrs:{type:"general"},on:{updateSaving:t.updateSaving,updateLastSaving:t.updateLastSaving}}):t._e(),4===t.currentMenu?e("EditApplicants",{key:t.currentMenu,staticClass:"em-modal-component",attrs:{type:"applicants"},on:{updateSaving:t.updateSaving,updateLastSaving:t.updateLastSaving}}):t._e()],1)],1),t.loading?e("div"):t._e()])],1)},yo=[],bo=function(){var t=this,e=t._self._c;return e("div",{staticClass:"em-settings-menu"},[t.loading?t._e():e("div",{staticClass:"em-w-80"},t._l(t.displayedParams,(function(a){return e("div",{key:a.param,staticClass:"form-group tw-justify-center tw-w-full tw-mb-4"},[e("label",{staticClass:"tw-flex tw-items-center",attrs:{for:"param_"+a.param}},[t._v(" "+t._s(t.translate(a.label))+" "),a.helptext?e("span",{staticClass:"material-icons-outlined tw-ml-2",on:{click:function(e){return t.displayHelp(a.helptext)}}},[t._v("help_outline")]):t._e()]),a.options?e("select",{directives:[{name:"model",rawName:"v-model",value:a.value,expression:"param.value"}],staticClass:"dropdown-toggle w-select",staticStyle:{"margin-bottom":"0"},attrs:{id:"param_"+a.param},on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(a,"value",e.target.multiple?s:s[0])},function(e){return t.saveEmundusParam(a)}]}},t._l(a.options,(function(a){return e("option",{key:a.value,domProps:{value:a.value}},[t._v(t._s(t.translate(a.label)))])})),0):e("input",{directives:[{name:"model",rawName:"v-model",value:a.value,expression:"param.value"}],staticClass:"form-control",staticStyle:{"margin-bottom":"0"},attrs:{type:"text",id:"param_"+a.param,maxlength:a.maxlength},domProps:{value:a.value},on:{change:function(e){return t.saveEmundusParam(a)},input:function(e){e.target.composing||t.$set(a,"value",e.target.value)}}})])})),0),t.loading?e("div",{staticClass:"em-page-loader"}):t._e()])},wo=[];const Oo=a("bef5");var Eo={name:"EditApplicants",components:{},props:{type:String},mixins:[A],data(){return{loading:!0,params:{},config:{}}},created(){this.params=a("b035")("./settings-"+this.$props.type+".json"),this.getEmundusParams()},methods:{getEmundusParams(){m.a.get("index.php?option=com_emundus&controller=settings&task=getemundusparams").then(t=>{this.config=t.data,Object.values(this.params).forEach(t=>{t.value=this.config[t.component][t.param]}),this.loading=!1})},saveEmundusParam(t){this.$emit("updateSaving",!0),m()({method:"post",url:"index.php?option=com_emundus&controller=settings&task=updateemundusparam",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Oo.stringify({component:t.component,param:t.param,value:t.value})}).then(()=>{this.$emit("updateSaving",!1),this.$emit("updateLastSaving",this.formattedDate("","LT"))})},displayHelp(t){$.a.fire({title:this.translate("COM_EMUNDUS_SWAL_HELP_TITLE"),text:this.translate(t),showCancelButton:!1,confirmButtonText:this.translate("COM_EMUNDUS_SWAL_OK_BUTTON"),reverseButtons:!0,customClass:{title:"em-swal-title",confirmButton:"em-swal-confirm-button",actions:"em-swal-single-action"}})}},computed:{displayedParams(){return Object.values(this.params).filter(t=>t.displayed)}}},Co=Eo,No=(a("21cc"),Object(y["a"])(Co,bo,wo,!1,null,"300a6e42",null)),So=No.exports,Ao={name:"filesTool",props:{},components:{EditApplicants:So,EditTags:Or,EditStatus:fr},data(){return{currentMenu:1,menus:[{title:"COM_EMUNDUS_ONBOARD_SETTINGS_MENU_STATUS",index:1},{title:"COM_EMUNDUS_ONBOARD_SETTINGS_MENU_TAGS",index:2},{title:"COM_EMUNDUS_ONBOARD_SETTINGS_MENU_GENERAL",index:3},{title:"COM_EMUNDUS_ONBOARD_SETTINGS_MENU_APPLICANTS",index:4}],loading:!1,saving:!1,last_save:null}},methods:{beforeClose(t){this.$emit("resetMenuIndex")},updateSaving(t){this.saving=t},updateLastSaving(t){this.last_save=t}}},Do=Ao,Mo=Object(y["a"])(Do,vo,yo,!1,null,"23dafe8c",null),xo=Mo.exports,To=function(){var t=this,e=t._self._c;return e("span",{class:"full-width-modal",attrs:{id:"styleTool"}},[e("modal",{attrs:{name:"styleTool",height:"auto",transition:"fade",delay:100,adaptive:!0,clickToClose:!1},on:{closed:t.beforeClose}},[e("div",{staticClass:"em-modal-header tw-flew tw-items-center"},[e("div",{staticClass:"tw-justify-between tw-flex tw-items-center tw-cursor-pointer",on:{click:function(e){return e.preventDefault(),t.$modal.hide("styleTool")}}},[e("div",{staticClass:"tw-w-max tw-flex tw-items-center"},[e("span",{staticClass:"material-icons-outlined"},[t._v("navigate_before")]),e("span",{staticClass:"tw-ml-2 tw-text-neutral-900"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_ADD_RETOUR")))])]),t.saving?e("div",{staticClass:"tw-flex tw-items-center tw-justify-start"},[e("div",{staticClass:"em-loader tw-mr-2"}),e("p",{staticClass:"tw-text-sm tw-flex tw-items-center"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_TRANSLATIONS_AUTOSAVE_PROGRESS")))])]):t._e(),t.saving||null==t.last_save?t._e():e("p",{staticClass:"tw-text-sm"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_TRANSLATIONS_AUTOSAVE_LAST")+t.last_save))])])]),e("div",{staticClass:"em-modal-content"},[e("div",{staticClass:"em-modal-menu__sidebar"},t._l(t.menus,(function(a){return e("div",{key:"menu_"+a.index,staticClass:"translation-menu-item tw-p-4 tw-flex tw-items-center tw-justify-between pointer",class:t.currentMenu===a.index?"em-modal-menu__current":"",on:{click:function(e){t.currentMenu=a.index}}},[e("p",{staticClass:"tw-text-base"},[t._v(t._s(t.translate(a.title)))])])})),0),e("transition",{attrs:{name:"fade"}},[1===t.currentMenu?e("General",{staticClass:"em-modal-component"}):t._e()],1)],1),t.loading?e("div"):t._e()])],1)},Uo=[],ko=function(){var t=this,e=t._self._c;return e("div",[t.primary&&t.secondary?e("ModalUpdateColors",{key:t.primary+t.secondary,attrs:{primary:t.primary,secondary:t.secondary},on:{UpdateColors:t.updateColors}}):t._e(),t.loading?t._e():e("div",{staticClass:"em-grid-2"},[e("div",{staticClass:"em-style-options tw-mb-8"},[e("div",{staticClass:"tw-flex tw-items-center"},[e("div",[e("h4",{staticClass:"em-text-neutral-800 tw-flex tw-items-center tw-mb-2"},[t._v(" Logo "),e("span",{staticClass:"material-icons-outlined tw-ml-1 tw-text-base tw-cursor-pointer",on:{click:t.displayLogoTip}},[t._v("help_outline")])]),e("p",{staticClass:"tw-text-neutral-700"},[e("em",[t._v(t._s(t.translate("COM_EMUNDUS_FORM_BUILDER_ALLOWED_FORMATS"))+" : jpeg, jpg, png, gif, svg")])]),e("p",{staticClass:"tw-text-neutral-700"},[e("em",[t._v(t._s(t.translate("COM_EMUNDUS_FORM_BUILDER_LOGO_RECOMMENDED")))])])])]),t.logo_updating?t._e():e("div",{staticClass:"em-logo-box pointer tw-mt-4"},[t.hideLogo?t._e():e("img",{staticClass:"logo-settings",attrs:{id:"logo-img",src:t.imageLink,srcset:"/"+t.imageLink},on:{error:function(e){t.hideLogo=!0}}}),t.hideLogo?e("p",[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_INSERT_LOGO")))]):t._e()]),t.logo_updating?e("div",{staticClass:"tw-mt-4"},[e("vue-dropzone",{ref:"dropzone",attrs:{id:"customdropzone","include-styling":!1,options:t.logoDropzoneOptions,useCustomSlot:!0},on:{"vdropzone-file-added":t.afterAdded,"vdropzone-thumbnail":t.thumbnail,"vdropzone-removed-file":t.afterRemoved,"vdropzone-complete":t.onComplete,"vdropzone-error":t.catchError}},[e("div",{staticClass:"dropzone-custom-content",attrs:{id:"dropzone-message"}},[t._v(" "+t._s(t.translate("COM_EMUNDUS_ONBOARD_DROP_HERE"))+" ")])])],1):t._e(),e("button",{staticClass:"tw-mt-2 em-primary-button",attrs:{id:"btn-update-logo"},on:{click:function(e){t.logo_updating=!t.logo_updating}}},[t.logo_updating?e("span",[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_CANCEL")))]):e("span",[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_UPDATE_LOGO")))])])]),e("div",{staticClass:"em-style-options tw-mb-8"},[e("div",{staticClass:"tw-flex tw-items-center"},[e("div",[e("h4",{staticClass:"em-text-neutral-800 tw-flex tw-items-center tw-mb-2"},[t._v(" "+t._s(t.translate("COM_EMUNDUS_ONBOARD_ICON"))+" "),e("span",{staticClass:"material-icons-outlined tw-ml-1 tw-text-base tw-cursor-pointer",on:{click:t.displayFaviconTip}},[t._v("help_outline")])]),e("p",{staticClass:"tw-text-neutral-700"},[e("em",[t._v(t._s(t.translate("COM_EMUNDUS_FORM_BUILDER_ALLOWED_FORMATS"))+" : jpeg, jpg, png, ico")])]),e("p",{staticClass:"tw-text-neutral-700"},[e("em",[t._v(t._s(t.translate("COM_EMUNDUS_FORM_BUILDER_ICON_RECOMMENDED")))])])])]),t.favicon_updating?t._e():e("div",{staticClass:"em-logo-box pointer tw-mt-4"},[t.hideIcon?t._e():e("img",{staticClass:"logo-settings",attrs:{src:t.iconLink,srcset:"/"+t.iconLink},on:{error:function(e){t.hideIcon=!0}}}),t.hideIcon?e("p",[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_INSERT_ICON")))]):t._e()]),t.favicon_updating?e("div",{staticClass:"tw-mt-4"},[e("vue-dropzone",{ref:"dropzone",attrs:{id:"customdropzone","include-styling":!1,options:t.faviconDropzoneOptions,useCustomSlot:!0},on:{"vdropzone-file-added":t.afterAdded,"vdropzone-thumbnail":t.thumbnail,"vdropzone-removed-file":t.afterRemoved,"vdropzone-complete":t.onComplete,"vdropzone-error":t.catchError}},[e("div",{staticClass:"dropzone-custom-content",attrs:{id:"dropzone-message"}},[t._v(" "+t._s(t.translate("COM_EMUNDUS_ONBOARD_DROP_HERE"))+" ")])])],1):t._e(),e("button",{staticClass:"tw-mt-2 em-primary-button",attrs:{id:"btn-update-favicon"},on:{click:function(e){t.favicon_updating=!t.favicon_updating}}},[t.favicon_updating?e("span",[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_CANCEL")))]):e("span",[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_UPDATE_ICON")))])])]),e("div",{staticClass:"em-style-options tw-mb-8"},[e("div",[e("h4",{staticClass:"em-text-neutral-800 tw-flex tw-items-center tw-mb-2"},[t._v(" "+t._s(t.translate("COM_EMUNDUS_ONBOARD_COLORS"))+" "),e("span",{staticClass:"material-icons-outlined tw-ml-1 tw-text-base tw-cursor-pointer",on:{click:t.displayColorsTip}},[t._v("help_outline")])]),e("span",{staticStyle:{opacity:"0"}},[t._v("Colors")]),e("br"),e("span",{staticStyle:{opacity:"0"}},[t._v("Colors")])]),e("div",{staticClass:"em-logo-box pointer tw-mt-4"},[e("div",{staticClass:"color-preset",style:"background-color:"+t.primary+";border-right: 25px solid"+t.secondary})]),e("button",{staticClass:"tw-mt-2 em-primary-button",on:{click:function(e){return t.$modal.show("modalUpdateColors")}}},[e("span",[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_UPDATE_COLORS")))])])]),t.bannerLink?e("div",{staticClass:"em-h-auto em-flex-col tw-mb-8",staticStyle:{"align-items":"start"}},[e("div",{staticClass:"tw-flex tw-items-center"},[e("div",[e("h4",{staticClass:"em-text-neutral-800 tw-mb-2 tw-flex tw-items-center"},[t._v(" "+t._s(t.translate("COM_EMUNDUS_ONBOARD_BANNER"))+" "),e("span",{staticClass:"material-icons-outlined tw-ml-1 tw-text-base tw-cursor-pointer",on:{click:t.displayBannerTip}},[t._v("help_outline")])]),e("span",[e("em",[t._v(t._s(t.translate("COM_EMUNDUS_FORM_BUILDER_ALLOWED_FORMATS"))+" : jpeg, png")])]),e("br"),e("span",[e("em",[t._v(t._s(t.translate("COM_EMUNDUS_FORM_BUILDER_RECOMMENDED_SIZE"))+" : 1440x200px")])])])]),t.banner_updating?t._e():e("div",{staticClass:"em-logo-box pointer tw-mt-4"},[e("img",{staticClass:"logo-settings",staticStyle:{width:"180px"},attrs:{src:t.bannerLink,srcset:"/"+t.bannerLink,alt:t.InsertBanner}})]),t.banner_updating?e("div",{staticClass:"tw-mt-4"},[e("vue-dropzone",{ref:"dropzone",attrs:{id:"customdropzone","include-styling":!1,options:t.bannerDropzoneOptions,useCustomSlot:!0},on:{"vdropzone-file-added":t.afterAdded,"vdropzone-thumbnail":t.thumbnail,"vdropzone-removed-file":t.afterRemoved,"vdropzone-complete":t.onComplete,"vdropzone-error":t.catchError}},[e("div",{staticClass:"dropzone-custom-content",attrs:{id:"dropzone-message"}},[t._v(" "+t._s(t.translate("COM_EMUNDUS_ONBOARD_DROP_HERE"))+" ")])])],1):t._e(),e("button",{staticClass:"tw-mt-2 em-primary-button",attrs:{id:"btn-update-banner"},on:{click:function(e){t.banner_updating=!t.banner_updating}}},[t.banner_updating?e("span",[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_CANCEL")))]):e("span",[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_UPDATE_BANNER")))])])]):t._e()]),t.loading?e("div",{staticClass:"em-page-loader"}):t._e()],1)},Ro=[],Lo=function(){var t=this,e=t._self._c;return e("span",{attrs:{id:"modalUpdateColors"}},[e("modal",{attrs:{name:"modalUpdateColors",height:"auto","min-width":200,"min-height":200,delay:100,adaptive:!0,clickToClose:!1}},[e("div",{staticClass:"em-modal-header"},[e("div",{staticClass:"tw-justify-between tw-flex tw-items-center tw-cursor-pointer",on:{click:function(e){return e.preventDefault(),t.$modal.hide("modalUpdateColors")}}},[e("div",{staticClass:"tw-w-max tw-flex tw-items-center"},[e("span",{staticClass:"material-icons-outlined"},[t._v("navigate_before")]),e("span",{staticClass:"tw-ml-2 tw-text-neutral-900"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_ADD_RETOUR")))])])])]),e("div",{staticClass:"tw-grid tw-grid-cols-5 tw-gap-y-0 tw-gap-x-6"},[t._l(t.presets,(function(a){return e("div",{key:a.id,staticClass:"preset-presentation",class:a.selected?"tw-outline-green-500":"",style:"background-color:"+a.primary+";border-right: 50px solid"+a.secondary,on:{click:function(e){a.custom?t.openCustomPalette():t.changeColors(a)}}},[a.custom?e("span",{staticClass:"material-icons-outlined tw-text-white tw-p-3"},[t._v("color_lens")]):t._e(),a.rgaa?t._e():e("span",{staticClass:"material-icons-outlined tw-text-yellow-500"},[t._v("warning")])])})),!1===t.presets[t.presets.length-1].custom?e("div",{staticClass:"preset-presentation tw-flex tw-items-center tw-justify-center",on:{click:t.openCustomPalette}},[e("span",{staticClass:"material-icons-outlined !tw-text-6xl"},[t._v("add_circle_outline")])]):t._e()],2)])],1)},Io=[];const Po=a("bef5");var Bo={name:"modalUpdateColors",props:{primary:String,secondary:String},components:{},data(){return{presets:[{id:1,primary:"#1b1f3c",secondary:"#de6339",selected:!1,custom:!1,rgaa:!0},{id:2,primary:"#DA3832",secondary:"#204382",selected:!1,custom:!1,rgaa:!0},{id:3,primary:"#727378",secondary:"#A0BD51",selected:!1,custom:!1,rgaa:!0},{id:4,primary:"#727378",secondary:"#000000",selected:!1,custom:!1,rgaa:!0},{id:5,primary:"#000000",secondary:"#5AA6DC",selected:!1,custom:!1,rgaa:!0},{id:6,primary:"#A0BD51",secondary:"#204382",selected:!1,custom:!1,rgaa:!0}],updateColors:this.translate("COM_EMUNDUS_ONBOARD_UPDATE_COLORS"),Retour:this.translate("COM_EMUNDUS_ONBOARD_ADD_RETOUR"),Continuer:this.translate("COM_EMUNDUS_ONBOARD_ADD_CONTINUER"),Error:this.translate("COM_EMUNDUS_ONBOARD_ERROR")}},mounted(){let t={id:7,primary:this.$props.primary,secondary:this.$props.secondary,selected:!0,custom:!0,rgaa:!0};if(this.presets.forEach(e=>{e.primary==this.primary&&e.secondary==this.secondary&&(t=null,e.selected=!0)}),t){const e=checkContrast("#FFFFFF",this.primary),a=checkContrast("#FFFFFF",this.secondary),s=checkSimilarity(this.primary,this.secondary);e&&a&&s||(t.rgaa=!1),this.presets.push(t)}},methods:{changeColors(t){m()({method:"post",url:"index.php?option=com_emundus&controller=settings&task=updatecolor",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Po.stringify({preset:t})}).then(()=>{this.$emit("UpdateColors",t),this.$modal.hide("modalUpdateColors")})},openCustomPalette(){$.a.fire({title:this.translate("COM_EMUNDUS_ONBOARD_CUSTOM_PALETTE"),html:"<div><label>"+this.translate("COM_EMUNDUS_ONBOARD_PRIMARY_COLOR")+"</label><div class=\"tw-flex tw-items-center\"><input type=\"color\" onchange=\"document.querySelector('#hexacode-primary').innerHTML = event.srcElement.value;checkContrast('#FFFFFF',event.srcElement.value,'#swal2-content');checkSimilarity(event.srcElement.value,document.querySelector('#secondary_color').value,'#swal2-content')\" class=\"custom-color-picker\" value=\""+this.primary+'" id="primary_color" /><span id="hexacode-primary" class="tw-ml-4">'+this.primary+'</span></div></div><div class="tw-mt-4 mb-3"><label>'+this.translate("COM_EMUNDUS_ONBOARD_SECONDARY_COLOR")+'</label><div class="tw-flex tw-items-center"><input type="color" value="'+this.secondary+'" class="custom-color-picker" id="secondary_color" onchange="document.querySelector(\'#hexacode-secondary\').innerHTML = event.srcElement.value;checkContrast(\'#FFFFFF\',event.srcElement.value,\'#swal2-content\');checkSimilarity(event.srcElement.value,document.querySelector(\'#primary_color\').value,\'#swal2-content\')" /><span id="hexacode-secondary" class="tw-ml-4">'+this.secondary+"</span></div></div></div>",showCancelButton:!0,confirmButtonText:this.translate("COM_EMUNDUS_ONBOARD_ADD_CONTINUER"),cancelButtonText:this.translate("COM_EMUNDUS_ONBOARD_ADD_RETOUR"),showLoaderOnConfirm:!1,reverseButtons:!0,customClass:{title:"em-swal-title",cancelButton:"em-swal-cancel-button",confirmButton:"em-swal-confirm-button"},preConfirm:()=>{let t=document.querySelector("#primary_color").value,e=document.querySelector("#secondary_color").value;if(t==e)return $.a.fire({title:this.translate("COM_EMUNDUS_ONBOARD_ERROR"),text:this.translate("COM_EMUNDUS_ONBOARD_ERROR_COLORS_SAME"),type:"error",confirmButtonText:this.translate("COM_EMUNDUS_ONBOARD_OK"),customClass:{title:"em-swal-title",actions:"em-swal-single-action",confirmButton:"em-swal-confirm-button"}}),!1;let a={id:7,primary:t,secondary:e};return m()({method:"post",url:"index.php?option=com_emundus&controller=settings&task=updatecolor",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Po.stringify({preset:a})}).then(()=>{this.$emit("UpdateColors",a)})},allowOutsideClick:()=>!$.a.isLoading()}).then(t=>{t.value&&$.a.fire({title:this.translate("COM_EMUNDUS_ONBOARD_COLOR_SUCCESS"),type:"success",showConfirmButton:!1,customClass:{title:"em-swal-title"},timer:2e3}).then(()=>{this.$modal.hide("modalUpdateColors")})}),checkContrast("#FFFFFF",this.primary,"#swal2-content"),checkContrast("#FFFFFF",this.secondary,"#swal2-content"),checkSimilarity(this.primary,this.secondary,"#swal2-content")}}},jo=Bo,Fo=(a("66309"),Object(y["a"])(jo,Lo,Io,!1,null,null,null)),qo=Fo.exports;const $o=()=>'\n<div class="dz-preview dz-file-preview">\n  <div class="dz-image">\n    <div data-dz-thumbnail-bg></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-error-mark"><i class="fa fa-close"></i></div>\n</div>\n';var Ho={name:"global",props:{},components:{ModalUpdateColors:qo,Multiselect:vt.a,vueDropzone:Ke.a},data(){return{loading:!1,logo_updating:!1,favicon_updating:!1,banner_updating:!1,imageLink:null,iconLink:null,bannerLink:null,primary:"",secondary:"",changes:!1,hideIcon:!1,hideLogo:!1,InsertLogo:this.translate("COM_EMUNDUS_ONBOARD_INSERT_LOGO"),InsertIcon:this.translate("COM_EMUNDUS_ONBOARD_INSERT_ICON"),InsertBanner:this.translate("COM_EMUNDUS_ONBOARD_INSERT_BANNER"),logoDropzoneOptions:{url:"index.php?option=com_emundus&controller=settings&task=updatelogo",maxFilesize:10,maxFiles:1,autoProcessQueue:!0,addRemoveLinks:!0,thumbnailWidth:null,thumbnailHeight:null,resizeMimeType:"image/png",acceptedFiles:"image/*",previewTemplate:$o(),dictCancelUpload:this.translate("COM_EMUNDUS_ONBOARD_CANCEL_UPLOAD"),dictCancelUploadConfirmation:this.translate("COM_EMUNDUS_ONBOARD_CANCEL_UPLOAD_CONFIRMATION"),dictRemoveFile:this.translate("COM_EMUNDUS_ONBOARD_REMOVE_FILE"),dictInvalidFileType:this.translate("COM_EMUNDUS_ONBOARD_INVALID_FILE_TYPE"),dictFileTooBig:this.translate("COM_EMUNDUS_ONBOARD_FILE_TOO_BIG")+" (10Mo).",dictMaxFilesExceeded:this.translate("COM_EMUNDUS_ONBOARD_MAX_FILES_EXCEEDED")},faviconDropzoneOptions:{url:"index.php?option=com_emundus&controller=settings&task=updateicon",maxFilesize:10,maxFiles:1,autoProcessQueue:!0,addRemoveLinks:!0,thumbnailWidth:null,thumbnailHeight:null,acceptedFiles:"image/png,image/jpeg,,image/x-icon,image/vnd.microsoft.icon",previewTemplate:$o(),dictCancelUpload:this.translate("COM_EMUNDUS_ONBOARD_CANCEL_UPLOAD"),dictCancelUploadConfirmation:this.translate("COM_EMUNDUS_ONBOARD_CANCEL_UPLOAD_CONFIRMATION"),dictRemoveFile:this.translate("COM_EMUNDUS_ONBOARD_REMOVE_FILE"),dictInvalidFileType:this.translate("COM_EMUNDUS_ONBOARD_INVALID_FILE_TYPE"),dictFileTooBig:this.translate("COM_EMUNDUS_ONBOARD_FILE_TOO_BIG")+" : 10Mo",dictMaxFilesExceeded:this.translate("COM_EMUNDUS_ONBOARD_MAX_FILES_EXCEEDED")},bannerDropzoneOptions:{url:"index.php?option=com_emundus&controller=settings&task=updatebanner",maxFilesize:10,maxFiles:1,autoProcessQueue:!0,addRemoveLinks:!0,thumbnailWidth:null,thumbnailHeight:null,resizeMimeType:"image/png",acceptedFiles:"image/png,image/jpeg",previewTemplate:$o(),dictCancelUpload:this.translate("COM_EMUNDUS_ONBOARD_CANCEL_UPLOAD"),dictCancelUploadConfirmation:this.translate("COM_EMUNDUS_ONBOARD_CANCEL_UPLOAD_CONFIRMATION"),dictRemoveFile:this.translate("COM_EMUNDUS_ONBOARD_REMOVE_FILE"),dictInvalidFileType:this.translate("COM_EMUNDUS_ONBOARD_INVALID_FILE_TYPE"),dictFileTooBig:this.translate("COM_EMUNDUS_ONBOARD_FILE_TOO_BIG")+" : 10Mo",dictMaxFilesExceeded:this.translate("COM_EMUNDUS_ONBOARD_MAX_FILES_EXCEEDED")}}},async created(){this.loading=!0,this.changes=!1,await this.getLogo(),await this.getFavicon(),await this.getBanner(),await this.getAppColors(),this.changes=!0,this.loading=!1},methods:{getLogo(){return new Promise(t=>{m()({method:"get",url:"index.php?option=com_emundus&controller=settings&task=getlogo"}).then(e=>{null==e.data.filename?this.imageLink="images/custom/logo.png":this.imageLink="images/custom/"+e.data.filename+"?"+(new Date).getTime(),t(!0)})})},getFavicon(){return new Promise(t=>{m()({method:"get",url:"index.php?option=com_emundus&controller=settings&task=getfavicon"}).then(e=>{null==e.data.filename?this.iconLink="images/custom/favicon.png":this.iconLink=e.data.filename+"?"+(new Date).getTime(),t(!0)})})},getBanner(){return new Promise(t=>{m()({method:"get",url:"index.php?option=com_emundus&controller=settings&task=getbanner"}).then(e=>{null!=e.data.filename&&(this.bannerLink=e.data.filename),t(!0)})})},getAppColors(){return new Promise(t=>{m()({method:"get",url:"index.php?option=com_emundus&controller=settings&task=getappcolors"}).then(e=>{this.primary=e.data.primary,this.secondary=e.data.secondary,t(!0)})})},updateView(t){this.hideLogo=!1,this.imageLink="images/custom/"+t.filename+"?"+(new Date).getTime();const e=document.querySelector(".logo");e&&(e.src="/"+this.imageLink),this.$forceUpdate()},updateIcon(t){this.hideIcon=!1,this.iconLink=window.location.origin+"//images/custom/"+t.filename+"?"+(new Date).getTime(),document.querySelector('link[type="image/x-icon"]').href=window.location.origin+"//images/custom/"+t.filename+"?"+(new Date).getTime(),document.querySelector(".tchooz-vertical-logo a img").src=window.location.origin+"//images/custom/"+t.filename+"?"+(new Date).getTime(),this.$forceUpdate()},updateBanner(t="png"){this.bannerLink="images/custom/default_banner."+t+"?"+(new Date).getTime(),this.$forceUpdate()},updateColors(t){this.primary=t.primary,this.secondary=t.secondary},beforeClose(t){},beforeOpen(t){},afterAdded(){document.getElementById("dropzone-message").style.display="none"},afterRemoved(){0===this.$refs.dropzone.getAcceptedFiles().length&&(this.banner_updating||this.logo_updating||this.favicon_updating)&&(document.getElementById("dropzone-message").style.display="block")},onComplete:function(t){const e=t.name.split(".").pop();"success"==t.status&&(this.logo_updating&&(this.logo_updating=!1,this.updateView(JSON.parse(t.xhr.response))),this.favicon_updating&&(this.favicon_updating=!1,this.updateIcon(JSON.parse(t.xhr.response))),this.banner_updating&&(this.banner_updating=!1,this.updateBanner(e)),this.banner_updating&&(this.banner_updating=!1,this.updateBanner()))},catchError:function(t,e,a){$.a.fire({title:this.translate("COM_EMUNDUS_ONBOARD_ERROR"),text:e,type:"error",showCancelButton:!1,showConfirmButton:!1,timer:3e3}),this.$refs.dropzone.removeFile(t)},thumbnail:function(t,e){var a,s,n,i;if(t.previewElement){for(t.previewElement.classList.remove("dz-file-preview"),n=t.previewElement.querySelectorAll("[data-dz-thumbnail-bg]"),a=0,s=n.length;a<s;a++)i=n[a],i.alt=t.name,i.style.backgroundImage='url("'+e+'")';return setTimeout(function(e){return function(){return t.previewElement.classList.add("dz-image-preview")}}(),1)}},uploadNewLogo(){this.$refs.dropzone.processQueue()},displayFaviconTip(){$.a.fire({title:this.translate("COM_EMUNDUS_ONBOARD_ICON"),text:this.translate("COM_EMUNDUS_ONBOARD_ICON_TIP_TEXT"),showCancelButton:!1,confirmButtonText:this.translate("COM_EMUNDUS_SWAL_OK_BUTTON"),reverseButtons:!0,customClass:{title:"em-swal-title",confirmButton:"em-swal-confirm-button",actions:"em-swal-single-action"}}).then(t=>{})},displayLogoTip(){$.a.fire({title:"Logo",text:this.translate("COM_EMUNDUS_ONBOARD_LOGO_TIP_TEXT"),showCancelButton:!1,confirmButtonText:this.translate("COM_EMUNDUS_SWAL_OK_BUTTON"),reverseButtons:!0,customClass:{title:"em-swal-title",confirmButton:"em-swal-confirm-button",actions:"em-swal-single-action"}})},displayBannerTip(){$.a.fire({title:this.translate("COM_EMUNDUS_ONBOARD_BANNER"),text:this.translate("COM_EMUNDUS_ONBOARD_BANNER_TIP_TEXT"),showCancelButton:!1,confirmButtonText:this.translate("COM_EMUNDUS_SWAL_OK_BUTTON"),reverseButtons:!0,customClass:{title:"em-swal-title",confirmButton:"em-swal-confirm-button",actions:"em-swal-single-action"}})},displayColorsTip(){$.a.fire({title:this.translate("COM_EMUNDUS_ONBOARD_COLORS"),text:this.translate("COM_EMUNDUS_FORM_BUILDER_COLORS_RECOMMENDED"),showCancelButton:!1,confirmButtonText:this.translate("COM_EMUNDUS_SWAL_OK_BUTTON"),reverseButtons:!0,customClass:{title:"em-swal-title",confirmButton:"em-swal-confirm-button",actions:"em-swal-single-action"}})},openFileInput(){setTimeout(()=>{document.getElementsByClassName("dz-clickable")[0].click()},300)}},watch:{logo_updating:function(t){t&&(this.favicon_updating=!1,this.banner_updating=!1,this.openFileInput())},favicon_updating:function(t){t&&(this.logo_updating=!1,this.banner_updating=!1,this.openFileInput())},banner_updating:function(t){t&&(this.favicon_updating=!1,this.logo_updating=!1,this.openFileInput())}}},Go=Ho,zo=(a("56eb"),Object(y["a"])(Go,ko,Ro,!1,null,"96ecc1da",null)),Vo=zo.exports,Yo={name:"styleTool",props:{},components:{General:Vo},data(){return{currentMenu:1,menus:[{title:"COM_EMUNDUS_ONBOARD_SETTINGS_MENU_STYLE",index:1}],loading:!1,saving:!1,last_save:null}},methods:{beforeClose(t){this.$emit("resetMenuIndex")},updateSaving(t){this.saving=t},updateLastSaving(t){this.last_save=t}},computed:{selectedMenu(){return this.menus.find(t=>t.index===this.currentMenu)}}},Jo=Yo,Ko=Object(y["a"])(Jo,To,Uo,!1,null,"7de16e3b",null),Wo=Ko.exports,Xo=function(){var t=this,e=t._self._c;return e("span",{attrs:{id:"attachmentStorage"}},[e("modal",{attrs:{name:"attachmentStorage",height:"auto",transition:"fade",delay:100,adaptive:!0,clickToClose:!1},on:{closed:t.beforeClose}},[e("div",{staticClass:"em-modal-header"},[e("div",{staticClass:"tw-justify-between tw-flex tw-items-center tw-cursor-pointer",on:{click:function(e){return e.preventDefault(),t.$modal.hide("attachmentStorage")}}},[e("div",{staticClass:"tw-w-max tw-flex tw-items-center"},[e("span",{staticClass:"material-icons-outlined"},[t._v("arrow_back")]),e("span",{staticClass:"tw-ml-2"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_ADD_RETOUR")))])]),t.saving?e("div",{staticClass:"tw-flex tw-items-center tw-justify-start"},[e("div",{staticClass:"em-loader tw-mr-2"}),e("p",{staticClass:"tw-text-sm tw-flex tw-items-center"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_TRANSLATIONS_AUTOSAVE_PROGRESS")))])]):t._e(),t.saving||null==t.last_save?t._e():e("p",{staticClass:"tw-text-sm"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_TRANSLATIONS_AUTOSAVE_LAST")+t.last_save))])])]),e("div",{staticClass:"em-modal-content"},[e("div",{staticClass:"em-modal-menu__sidebar"},t._l(t.menus,(function(a){return e("div",{key:"menu_"+a.index,staticClass:"translation-menu-item tw-p-4 tw-flex tw-items-center tw-justify-between tw-cursor-pointer",class:t.currentMenu===a.index?"em-modal-menu__current":"",on:{click:function(e){t.currentMenu=a.index}}},[e("p",{staticClass:"tw-text-base"},[t._v(t._s(t.translate(a.title)))])])})),0),e("transition",{attrs:{name:"fade",mode:"out-in"}},[1===t.currentMenu?e("Configuration",{staticClass:"em-modal-component",on:{updateSaving:t.updateSaving,updateLastSaving:t.updateLastSaving}}):t._e(),2===t.currentMenu?e("Storage",{staticClass:"em-modal-component",on:{updateSaving:t.updateSaving,updateLastSaving:t.updateLastSaving}}):t._e()],1)],1),t.loading?e("div",{staticClass:"em-page-loader"}):t._e()])],1)},Zo=[],Qo=function(){var t=this,e=t._self._c;return e("div",[e("h2",[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_ATTACHMENT_STORAGE_CONFIGURATION")))]),e("div",{staticClass:"tw-flex tw-items-center"},[e("ul",{staticClass:"nav nav-tabs topnav"},t._l(t.integrations,(function(a,s){return e("li",{key:"integration-"+s},[e("a",{staticClass:"tw-text-neutral-700 tw-cursor-pointer",class:t.currentIntegration===s?"w--current":""},[t._v(" "+t._s(t.translate(a))+" ")])])})),0)]),0===t.currentIntegration?e("IntegrationGED",{attrs:{site:t.site,level_max:t.level_max},on:{updateSaving:t.updateSaving,updateLastSaving:t.updateLastSaving}}):t._e(),t.loading?e("div",{staticClass:"em-page-loader"}):t._e()],1)},tl=[],el=function(){var t=this,e=t._self._c;return e("div",{staticClass:"tw-mt-8"},[e("div",{staticClass:"em-h4 tw-mb-4"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_ATTACHMENT_STORAGE_GED_ALFRESCO_CONF_WRITING"))+" ")]),e("div",{staticClass:"tw-flex tw-items-center tw-mb-4"},[e("span",{staticClass:"material-icons"},[t._v("folder")]),e("span",{staticClass:"tw-ml-2 tw-mr-2"},[t._v("/"+t._s(t.site))]),e("v-popover",{attrs:{popoverArrowClass:"custom-popover-arrow"}},[e("span",{staticClass:"tooltip-target b3 material-icons"},[t._v("more_horiz")]),e("template",{slot:"popover"},[e("div",{staticClass:"tw-text-sm tw-cursor-pointer tw-px-2 tw-py-3 em-hover-background-neutral-300",on:{click:function(e){return t.addNode(null)}}},[t._v(" "+t._s(t.translate("COM_EMUNDUS_ONBOARD_ATTACHMENT_STORAGE_GED_ALFRESCO_ADD_MENU"))+" ")])])],2)],1),t._l(t.nodes,(function(a){return e("div",[e("Tree",{attrs:{node:a,level_max:t.level_max,emundus_tags:t.emundus_tags},on:{addNode:t.addNode,deleteNode:t.deleteNode,saveConfig:t.saveConfig}})],1)})),e("hr"),t.buildedComponent?e("FilesName",{attrs:{name:t.name},on:{updateName:t.updateName}}):t._e(),e("hr"),e("Aspects",{attrs:{aspects:t.aspects},on:{"update-aspects":t.updateAspects}})],2)},al=[],sl=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"tw-flex tw-items-center tw-mb-4",class:"em-level-"+t.node.level},[0!==t.node.type?e("span",{staticClass:"material-icons"},[t._v("folder")]):e("span",{staticClass:"material-icons-outlined"},[t._v("folder")]),!t.other_tags.includes(t.node.type)&&0!==t.node.type||""===t.node.type?e("input",{staticClass:"tw-ml-2 tw-mr-2 em-xs-input tw-w-auto tree-branch",attrs:{type:"text"},domProps:{value:t.node.type},on:{focusout:function(e){return t.updateNodeType(e)}}}):e("select",{directives:[{name:"model",rawName:"v-model",value:t.node.type,expression:"node.type"}],staticClass:"tw-ml-2 tw-mr-2 em-clear-dropdown tree-branch",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.node,"type",e.target.multiple?a:a[0])}}},[e("option",{attrs:{value:"0",selected:""}},[t._v("/"+t._s(t.translate("COM_EMUNDUS_ONBOARD_ATTACHMENT_STORAGE_GED_ALFRESCO_SELECT_TYPE"))+" ")]),t._l(t.fieldsData,(function(a){return e("option",{domProps:{value:a.value}},[t._v(t._s(t.translate(a.label)))])}))],2),e("v-popover",{attrs:{popoverArrowClass:"custom-popover-arrow"}},[e("span",{staticClass:"tooltip-target b3 material-icons"},[t._v("more_horiz")]),e("template",{slot:"popover"},[!t.other_tags.includes(t.node.type)&&0!==t.node.type||""===t.node.type?e("div",{staticClass:"tw-text-sm tw-cursor-pointer tw-px-2 tw-py-3 em-hover-background-neutral-300",on:{click:function(e){t.node.type=0}}},[t._v(" "+t._s(t.translate("COM_EMUNDUS_ONBOARD_ATTACHMENT_STORAGE_GO_BACK_TO_SELECT"))+" ")]):t._e(),t.node.level<t.level_max?e("div",{staticClass:"tw-text-sm tw-cursor-pointer tw-px-2 tw-py-3 em-hover-background-neutral-300",on:{click:function(e){return t.$emit("addNode",t.node)}}},[t._v(" "+t._s(t.translate("COM_EMUNDUS_ONBOARD_ATTACHMENT_STORAGE_GED_ALFRESCO_ADD_MENU"))+" ")]):t._e(),e("div",{staticClass:"tw-text-sm tw-cursor-pointer tw-px-2 tw-py-3 em-hover-background-neutral-300 tw-text-red-500",on:{click:function(e){return t.$emit("deleteNode",t.node)}}},[t._v(" "+t._s(t.translate("COM_EMUNDUS_ONBOARD_ATTACHMENT_STORAGE_GED_ALFRESCO_DELETE"))+" ")])])],2)],1),t._l(t.node.childrens,(function(a){return e("div",{staticClass:"tw-flex tw-items-center",class:"em-level-"+a.level},[e("Tree",{attrs:{node:a,level_max:t.level_max,emundus_tags:t.emundus_tags},on:{addNode:t.addNode,deleteNode:t.deleteNode,saveConfig:function(e){return t.$emit("saveConfig")}}})],1)}))],2)},nl=[],il={default:[{label:"COM_EMUNDUS_ONBOARD_ATTACHMENT_STORAGE_GED_ALFRESCO_CAMPAIGN_TYPE",value:"[CAMPAIGN_LABEL]",field:"none"},{label:"COM_EMUNDUS_ONBOARD_ATTACHMENT_STORAGE_GED_ALFRESCO_FILE_TYPE",value:"[FNUM]",field:"none"},{label:"COM_EMUNDUS_ONBOARD_ATTACHMENT_STORAGE_GED_ALFRESCO_USER_TYPE",value:"[APPLICANT_ID]",field:"none"},{label:"COM_EMUNDUS_ONBOARD_ATTACHMENT_STORAGE_GED_ALFRESCO_YEAR_TYPE",value:"[CAMPAIGN_YEAR]",field:"none"},{label:"COM_EMUNDUS_ONBOARD_ATTACHMENT_STORAGE_GED_ALFRESCO_OTHER",value:"",field:"text"}]},rl={name:"Tree",props:{node:{type:Object,required:!0},level_max:{type:Number,default:3},emundus_tags:Array},data(){return{fieldsData:[],other_tags:[]}},mounted(){this.fieldsData=il["default"],this.fieldsData.forEach(t=>{this.other_tags.push(t.value)})},methods:{addNode(t){this.$emit("addNode",t)},deleteNode(t){this.$emit("deleteNode",t)},updateNodeType(t){this.node.type=t.target.value}},watch:{"node.type":function(){this.$emit("saveConfig")}}},ol=rl,ll=(a("fce4"),Object(y["a"])(ol,sl,nl,!1,null,"3bbfdb13",null)),cl=ll.exports,ul=function(){var t=this,e=t._self._c;return e("div",{staticClass:"tw-mt-4"},[e("div",{staticClass:"tw-flex tw-items-center tw-justify-between"},[e("div",{staticClass:"em-h4 tw-mb-4"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_ATTACHMENT_STORAGE_GED_ALFRESCO_NAME_WRITING"))+" ")]),e("div",{staticClass:"tw-flex tw-items-center"},[e("a",{staticClass:"tw-mr-4 tw-cursor-pointer em-blue-500-color em-hover-blue-500",attrs:{href:"component/emundus/?view=export_select_columns&format=html&layout=all_programs&Itemid=1173",target:"_blank"}},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_ATTACHMENT_STORAGE_GED_ALFRESCO_NAME_TAGS_LIST")))]),e("div",{staticClass:"tw-cursor-pointer em-blue-500-color",on:{click:t.resetName}},[t._v(" "+t._s(t.translate("COM_EMUNDUS_ONBOARD_ATTACHMENT_STORAGE_GED_ALFRESCO_NAME_RESET"))+" ")])])]),e("div",{staticClass:"em-name-preview tw-mb-4 tw-flex tw-items-center",class:0===t.selectedTags.length?"em-name-preview-error":""},t._l(t.selectedTags,(function(a,s){return e("div",{staticClass:"tw-flex tw-items-center"},[e("span",[t._v(t._s(a.value))]),s+1!==t.selectedTags.length?e("div",[t._v(t._s(t.selectedSeparator))]):t._e()])})),0),0===t.selectedTags.length?e("div",{staticClass:"tw-text-red-500 tw-mb-4"},[t._v(" "+t._s(t.translate("COM_EMUNDUS_ONBOARD_ATTACHMENT_STORAGE_GED_ALFRESCO_NAME_SELECT_A_TAG"))+" ")]):t._e(),e("div",{staticClass:"tw-flex tw-items-center"},[e("multiselect",{attrs:{label:"label","track-by":"value",options:t.tags,multiple:!0,taggable:!0,"tag-placeholder":"Ajouter une balise","select-label":"","selected-label":"","deselect-label":"",placeholder:"Ajouter une balise"},on:{tag:t.addTag},model:{value:t.new_tag,callback:function(e){t.new_tag=e},expression:"new_tag"}}),t._l(t.selectedTags,(function(a,s){return e("div",{key:s,staticClass:"em-ml-16 tw-flex tw-items-center em-tag-preview"},[e("span",[t._v(t._s(a.label))]),e("span",{staticClass:"material-icons tw-cursor-pointer tw-ml-2",on:{click:function(e){return t.removeTag(a.value)}}},[t._v("close")])])}))],2),e("div",{staticClass:"tw-flex tw-items-center tw-mt-4"},[e("span",[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_ATTACHMENT_STORAGE_GED_ALFRESCO_SEPARATOR"))+" : ")]),t._l(t.separators,(function(a){return e("div",{staticClass:"em-ml-16 em-separator tw-cursor-pointer",class:t.selectedSeparator===a?"em-selected-separator":"",on:{click:function(e){t.selectedSeparator=a}}},[e("span",[t._v(t._s(a))])])}))],2)])},dl=[],pl={name:"FilesName",components:{Multiselect:vt.a},props:{name:String},data(){return{loading:!1,new_tag:"",tags:[{label:"N de dossier",value:"[FNUM]"},{label:"Nom du candidat",value:"[APPLICANT_NAME]"},{label:"Type de document",value:"[DOCUMENT_TYPE]"}],separators:["-","_"],selectedTags:[],selectedSeparator:""}},created(){R.getSetupTags().then(t=>{if(t.status&&t.data.forEach(t=>{this.tags.find(e=>e.value=="["+t.tag+"]")||this.tags.push({label:t.description,value:"["+t.tag+"]"})}),""!==this.name){this.selectedSeparator=-1===this.name.indexOf("-")?"_":"-";let t=[];if("_"==this.selectedSeparator){const e=this.name.split("]_[");e.forEach((e,a)=>{e=e.replace(/\[/g,""),e=e.replace(/]/g,""),""!==e&&t.push(e)})}else this.name=this.name.replace(/\[/g,""),this.name=this.name.replace(/]/g,""),t=this.name.split(this.selectedSeparator);t.forEach((e,a)=>{t[a]="["+e+"]";let s=this.tags.findIndex((function(t,a){if(t.value==="["+e+"]")return!0}));-1!==s&&this.selectedTags.push(this.tags[s])})}else this.selectedSeparator="-",0===this.selectedTags.length&&this.resetName()})},methods:{addTag(t){const e={label:t,value:t};this.tags.push(e),this.selectedTags.push(e),this.updateName()},removeTag(t){let e=this.selectedTags.findIndex((function(e,a){if(e.value===t)return!0}));this.selectedTags.splice(e,1),this.updateName()},resetName(){this.selectedTags=[{label:"N de dossier",value:"[FNUM]"},{label:"Type de document",value:"[DOCUMENT_TYPE]"}],this.updateName()},updateName(){let t="";this.selectedTags.forEach((e,a)=>{a!=this.selectedTags.length-1?t=t+e.value+this.selectedSeparator:(t+=e.value,this.$emit("updateName",t))})}},watch:{new_tag:function(t){if(""!==t){const e=t[0];this.selectedTags.push(e),this.updateName()}this.new_tag=""},selectedSeparator:function(){this.updateName()}}},ml=pl,hl=(a("7770"),Object(y["a"])(ml,ul,dl,!1,null,"75136789",null)),fl=hl.exports,_l=function(){var t=this,e=t._self._c;return e("section",[e("div",{staticClass:"em-h4 tw-mb-4"},[t._v(t._s(t.translate("COM_EMUNDUS_ATTACHMENT_STORAGE_GED_ALFRESCO_ASPECTS")))]),t.aspects.length<1&&t.upload?e("div",{staticClass:"tw-flex tw-items-center",attrs:{id:"no-aspects"}},[e("input",{staticClass:"em-m-0",attrs:{type:"file",id:"aspect-file",accept:".xml"}}),e("div",{staticClass:"em-primary-button em-w-33 em-ml-16 tw-cursor-pointer",on:{click:t.uploadAspectFile}},[t._v(" "+t._s(t.translate("COM_EMUNDUS_ATTACHMENT_STORAGE_GED_ALFRESCO_ASPECTS_UPLOAD"))+" ")])]):e("div",{attrs:{id:"aspects"}},[e("div",{staticClass:"em-h5 tw-mb-4"},[t._v(t._s(t.translate("COM_EMUNDUS_ATTACHMENT_STORAGE_GED_ALFRESCO_ASPECTS_MAPPING")))]),t._l(t.aspects,(function(a){return e("div",{key:a.name,staticClass:"tw-mb-4"},[e("div",{staticClass:"tw-flex tw-items-center tw-justify-between"},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.label,expression:"aspect.label"}],attrs:{type:"text",disabled:""},domProps:{value:a.label},on:{input:function(e){e.target.composing||t.$set(a,"label",e.target.value)}}}),e("span",{staticClass:"material-icons"},[t._v("sync_alt")]),e("select",{directives:[{name:"model",rawName:"v-model",value:a.mapping,expression:"aspect.mapping"}],on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(a,"mapping",e.target.multiple?s:s[0])},t.updateAspectMapping]}},t._l(t.tags,(function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.tag))])})),0)])])})),t.upload?e("div",[e("div",{staticClass:"em-h6 tw-mb-4"},[t._v(" "+t._s(t.translate("COM_EMUNDUS_ATTACHMENT_STORAGE_GED_ALFRESCO_ASPECTS_UPLOAD_ADD_FROM_FILE"))+" ")]),e("div",{staticClass:"tw-flex tw-items-center",attrs:{id:"add-aspects-from-file"}},[e("input",{attrs:{type:"file",id:"update-aspect-file",accept:".xml"}}),e("div",{staticClass:"em-primary-button tw-cursor-pointer",on:{click:t.updateAspectListFromFile}},[t._v(" "+t._s(t.translate("COM_EMUNDUS_ATTACHMENT_STORAGE_GED_ALFRESCO_ASPECTS_UPLOAD_ADD"))+" ")])])]):t._e()],2)])},gl=[],vl={name:"Aspects",props:{aspects:{type:Array,default:[]},upload:{type:Boolean,default:!0}},data(){return{tags:[]}},mounted(){this.getTags()},methods:{getTags(){R.getSetupTags().then(t=>{this.tags=t.data})},uploadAspectFile(){let t=document.getElementById("aspect-file").files[0];"undefined"!==typeof t&&null!==t?R.uploadAspectFile(t).then(t=>{this.aspects=t.data.data,this.$emit("update-aspects",this.aspects)}):Swal.fire({type:"warning",title:this.translate("COM_EMUNDUS_ATTACHMENT_STORAGE_GED_ALFRESCO_ASPECTS_MISSING_ASPECT_FILE"),timer:5e3,customClass:{title:"em-swal-title",confirmButton:"em-swal-confirm-button",actions:"em-swal-single-action"}})},updateAspectListFromFile(){let t=document.getElementById("update-aspect-file").files[0];R.updateAspectListFromFile(t).then(t=>{this.aspects=t.data.data,this.$emit("update-aspects",this.aspects)})},updateAspectMapping(t){this.$emit("update-aspects",this.aspects)}}},yl=vl,bl=(a("e7fe"),Object(y["a"])(yl,_l,gl,!1,null,null,null)),wl=bl.exports,Ol={name:"IntegrationGED",components:{FilesName:fl,Tree:cl,Aspects:wl},mixins:[A],props:{site:String,level_max:{type:Number,default:3}},data(){return{loading:!1,buildedComponent:!1,emundus_tags:[],nodes:[],aspects:[],name:""}},created(){R.getConfig("ged").then(t=>{null!==t.data.data&&(this.nodes=t.data.data.tree,this.name=t.data.data.name,this.aspects=t.data.data.aspects),this.buildedComponent=!0})},methods:{addNode(t){if(null===t){let t=1;"undefined"!==typeof this.nodes[this.nodes.length-1]&&(t=this.nodes[this.nodes.length-1].id++);let e={id:t,level:1,type:0,parent:0,childrens:[]};this.nodes.push(e)}else{let e=t.level+1,a=t.id+"_1";if("undefined"!==typeof t.childrens[t.childrens.length-1]){let e=t.childrens.length+1;a=t.id+"_"+e}let s={id:a,level:e,type:0,parent:t.id,childrens:[]};t.childrens.push(s)}this.saveConfig()},deleteNode(t){this.deleteNodeById(this.nodes,t.id),this.saveConfig()},deleteNodeById(t,e){for(let a=0;a<t.length;a++){if(t[a].id===e)return void t.splice(a,1);t[a].childrens.length>0&&this.deleteNodeById(t[a].childrens,e)}},updateName(t){this.name=t,this.nodes.length>0&&this.saveConfig()},updateAspects(t){this.aspects=t,this.saveConfig()},saveConfig(){this.$emit("updateSaving",!0);let t={tree:this.nodes,name:this.name,aspects:this.aspects};R.saveConfig(t,"ged").then(()=>{this.$emit("updateLastSaving",this.formattedDate("","LT")),this.$emit("updateSaving",!1)})}}},El=Ol,Cl=Object(y["a"])(El,el,al,!1,null,"7170ba2c",null),Nl=Cl.exports,Sl={name:"Configuration",components:{IntegrationGED:Nl},data(){return{loading:!1,em_params:{},integrations:[],currentIntegration:0,site:null,level_max:null}},created(){this.loading=!0,Tt.getEmundusParams().then(t=>{this.em_params=t.data.emundus,1===parseInt(this.em_params.external_storage_ged_alfresco_integration)&&(this.integrations.push("COM_EMUNDUS_ONBOARD_ATTACHMENT_STORAGE_GED_ALFRESCO"),this.site=this.em_params.external_storage_ged_alfresco_site,this.level_max=parseInt(this.em_params.external_storage_ged_alfresco_max_level)),this.loading=!1})},methods:{updateSaving(t){this.$emit("updateSaving",t)},updateLastSaving(t){this.$emit("updateLastSaving",t)}}},Al=Sl,Dl=(a("16e4"),Object(y["a"])(Al,Qo,tl,!1,null,"110c9517",null)),Ml=Dl.exports,xl=function(){var t=this,e=t._self._c;return e("div",[e("h2",[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_ATTACHMENT_STORAGE_STORAGE")))]),e("table",[e("thead",[e("tr",[e("th",[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_ATTACHMENT_STORAGE_DOCTYPE")))]),e("th",[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_ATTACHMENT_STORAGE_STATUS")))]),e("th",[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_ATTACHMENT_STORAGE_STORAGE_TYPE")))]),e("th",[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_ATTACHMENT_STORAGE_SYNCHRO")))])]),t._l(t.documents,(function(a){return e("tr",[e("td",{on:{click:function(e){return t.openAttachmentParameters(a)}}},[t._v(t._s(a.value))]),e("td"),e("td",[e("select",{directives:[{name:"model",rawName:"v-model",value:a.sync,expression:"document.sync"}],staticClass:"tw-mr-2 em-clear-dropdown",on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(a,"sync",e.target.multiple?s:s[0])},function(e){return t.updateSync(a.id,a.sync)}]}},t._l(t.syncTypes,(function(a){return e("option",{domProps:{value:a.value}},[t._v(t._s(t.translate(a.label)))])})),0)]),e("td",[0!=a.sync?e("select",{directives:[{name:"model",rawName:"v-model",value:a.sync_method,expression:"document.sync_method"}],staticClass:"tw-mr-2 em-clear-dropdown",on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(a,"sync_method",e.target.multiple?s:s[0])},function(e){return t.updateSyncMethod(a.id,a.sync_method)}]}},[e("option",{attrs:{selected:""},domProps:{value:"write"}},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_ATTACHMENT_STORAGE_SYNC_WRITE"))+" ")]),e("option",{domProps:{value:"read"}},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_ATTACHMENT_STORAGE_SYNC_READ")))])]):t._e()])])}))],2)]),e("modal",{staticClass:"tw-h-full em-w-25",attrs:{name:"attachmentParameters",transition:"fade",delay:100,adaptive:!0,id:"modal-attachment-parameters"}},[e("AttachmentParameters",{attrs:{attachment:t.selectedDocument}})],1),t.loading?e("div",{staticClass:"em-page-loader"}):t._e()],1)},Tl=[],Ul={sync_type:[{label:"COM_EMUNDUS_ONBOARD_ATTACHMENT_STORAGE_GED_ALFRESCO_SYNC_TYPE_LOCAL",value:"0"},{label:"COM_EMUNDUS_ONBOARD_ATTACHMENT_STORAGE_GED_ALFRESCO_SYNC_TYPE_GED",value:"1"}]},kl=function(){var t=this,e=t._self._c;return e("div",{staticClass:"em-container"},[e("div",{staticClass:"em-h4"},[t._v(" "+t._s(t.attachment.value))]),1==t.attachment.sync?e("AttachmentAspectsMapping",{attrs:{attachment:t.attachment}}):t._e()],1)},Rl=[],Ll=function(){var t=this,e=t._self._c;return e("div",{staticClass:"tw-mt-4",attrs:{id:"attachment-aspects-mapping"}},[e("div",{staticClass:"tw-flex tw-items-center tw-justify-start",attrs:{id:"default-aspects-toggle"}},[e("div",{staticClass:"em-toggle"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.aspectsConfig.default,expression:"aspectsConfig.default"}],staticClass:"em-toggle-check",attrs:{type:"checkbox","true-value":!0,"false-value":!1,id:"default-aspects",name:"'default-aspects'"},domProps:{checked:Array.isArray(t.aspectsConfig.default)?t._i(t.aspectsConfig.default,null)>-1:t.aspectsConfig.default},on:{click:function(e){t.aspectsConfig.default=!t.aspectsConfig.default,t.saveAttachmentAspects()},change:function(e){var a=t.aspectsConfig.default,s=e.target,n=!!s.checked;if(Array.isArray(a)){var i=null,r=t._i(a,i);s.checked?r<0&&t.$set(t.aspectsConfig,"default",a.concat([i])):r>-1&&t.$set(t.aspectsConfig,"default",a.slice(0,r).concat(a.slice(r+1)))}else t.$set(t.aspectsConfig,"default",n)}}}),e("strong",{staticClass:"b em-toggle-switch"}),e("strong",{staticClass:"b em-toggle-track"})]),e("label",{attrs:{for:"default-aspects"}},[t._v(t._s(t.translate("COM_EMUNDUS_ATTACHMENT_STORAGE_DEFAULT_ASPECTS_MAPPING")))])]),0==t.aspectsConfig.default?e("div",[e("Aspects",{attrs:{aspects:t.aspectsConfig.aspects,upload:!1},on:{"update-aspects":t.saveAttachmentAspects}})],1):t._e()])},Il=[],Pl={name:"AttachmentAspectsMapping",components:{Aspects:wl},props:{attachment:{type:Object,required:!0}},data(){return{tags:[],aspectsConfig:{default:!0,aspects:[]}}},created(){this.getAttachmentAspectsConfig()},methods:{getAttachmentAspectsConfig(){R.getConfig("ged").then(t=>{t.data.data.aspects&&(this.aspectsConfig.aspects=t.data.data.aspects)}).then(()=>{R.getAttachmentAspectsConfig(this.attachment.id).then(t=>{const e=("string"===typeof t.data||t.data instanceof String)&&JSON.parse(t.data);e&&(this.aspectsConfig=e)})})},saveAttachmentAspects(){R.saveAttachmentAspectsConfig(this.attachment.id,this.aspectsConfig)}}},Bl=Pl,jl=(a("0373"),Object(y["a"])(Bl,Ll,Il,!1,null,null,null)),Fl=jl.exports,ql={name:"AttachmentParameters",components:{AttachmentAspectsMapping:Fl},props:{attachment:{type:Object,required:!0}},data(){return{syncType:""}}},$l=ql,Hl=Object(y["a"])($l,kl,Rl,!1,null,null,null),Gl=Hl.exports,zl={name:"Storage",components:{AttachmentParameters:Gl},mixins:[A],data(){return{loading:!1,documents:[],syncTypes:[],selectedDocument:{}}},mounted(){this.syncTypes=Ul["sync_type"]},created(){R.getDocuments().then(t=>{this.documents=t.data.data})},methods:{updateSync(t,e){this.$emit("updateSaving",!0),R.updateSync(t,e).then(()=>{this.$emit("updateSaving",!1),this.$emit("updateLastSaving",this.formattedDate("","LT"))})},updateSyncMethod(t,e){this.$emit("updateSaving",!0),R.updateSyncMethod(t,e).then(()=>{this.$emit("updateSaving",!1),this.$emit("updateLastSaving",this.formattedDate("","LT"))})},openAttachmentParameters(t){this.selectedDocument=t,this.$modal.show("attachmentParameters")}}},Vl=zl,Yl=(a("34d6"),Object(y["a"])(Vl,xl,Tl,!1,null,"df30dbd2",null)),Jl=Yl.exports,Kl={name:"attachmentStorage",props:{},components:{Storage:Jl,Configuration:Ml},data(){return{currentMenu:1,menus:[{title:"COM_EMUNDUS_ONBOARD_ATTACHMENT_STORAGE_CONFIGURATION",index:1},{title:"COM_EMUNDUS_ONBOARD_ATTACHMENT_STORAGE_STORAGE",index:2}],loading:!1,saving:!1,last_save:null}},methods:{beforeClose(){this.$emit("resetMenuIndex")},updateSaving(t){this.saving=t},updateLastSaving(t){this.last_save=t}}},Wl=Kl,Xl=Object(y["a"])(Wl,Xo,Zo,!1,null,"18a2304c",null),Zl=Xl.exports,Ql={name:"globalSettings",components:{StyleTool:Wo,AttachmentStorage:Zl,FilesTool:xo,ContentTool:go,TranslationTool:Zr,EditStatus:fr,EditTags:Or},props:{actualLanguage:{type:String,default:"fr"},coordinatorAccess:{type:Number,default:1},manyLanguages:{type:Number,default:1}},data:()=>({menuHighlight:0,currentTitle:"",langue:0,saving:!1,endSaving:!1,loading:!1,em_params:{},menus:[{title:"COM_EMUNDUS_ONBOARD_SETTINGS_MENU_STYLE",description:"COM_EMUNDUS_ONBOARD_SETTINGS_MENU_STYLE_DESC",icon:"style",index:1,access:1},{title:"COM_EMUNDUS_ONBOARD_SETTINGS_MENU_CONTENT",description:"COM_EMUNDUS_ONBOARD_SETTINGS_MENU_CONTENT_DESC",icon:"notes",index:2,access:1},{title:"COM_EMUNDUS_ONBOARD_SETTINGS_FILES_TOOL",description:"COM_EMUNDUS_ONBOARD_SETTINGS_FILES_TOOL_DESC",icon:"source",index:3,access:1},{title:"COM_EMUNDUS_ONBOARD_SETTINGS_MENU_TRANSLATIONS",description:"COM_EMUNDUS_ONBOARD_SETTINGS_MENU_TRANSLATIONS_DESC",icon:"language",index:9,access:1},{title:"COM_EMUNDUS_ONBOARD_SETTINGS_MENU_ATTACHMENT_STORAGE",description:"COM_EMUNDUS_ONBOARD_SETTINGS_MENU_ATTACHMENT_STORAGE_DESC",icon:"inventory_2",index:5,access:0}],modal_ready:!1}),created(){this.loading=!0,Tt.getEmundusParams().then(t=>{this.em_params=t.data.emundus,this.menus[0].access=void 0!=this.em_params.style?parseInt(this.em_params.style):1,this.menus[1].access=void 0!=this.em_params.content?parseInt(this.em_params.content):1,this.menus[2].access=1,this.menus[3].access=void 0!=this.em_params.translations?parseInt(this.em_params.translations):1,this.menus[4].access=void 0!=this.em_params.attachment_storage?parseInt(this.em_params.attachment_storage):0,this.loading=!1});let t=document.querySelector(".view-settings #g-page-surround");if(t){let e=document.createElement("div"),a=document.createElement("div");e.id="container-parameters-background-shapes",a.id="parameters-background-shapes";let s=t.firstChild;t.insertBefore(e,s),t.insertBefore(a,s)}},methods:{changeMenu(t){setTimeout(()=>{this.menuHighlight=t.index,this.currentTitle=t.title},200)}},computed:{displayedMenus(){return this.menus.filter(t=>1===t.access)}},watch:{menuHighlight:function(t){this.modal_ready=!1,setTimeout(()=>{switch(t){case 1:this.$modal.show("styleTool"),this.modal_ready=!0;break;case 2:this.$modal.show("contentTool"),this.modal_ready=!0;break;case 3:this.$modal.show("filesTool"),this.modal_ready=!0;break;case 9:this.$modal.show("translationTool"),this.modal_ready=!0;break;case 5:this.$modal.show("attachmentStorage"),this.modal_ready=!0;break;default:break}},500)}}},tc=Ql,ec=(a("34f4"),Object(y["a"])(tc,ir,rr,!1,null,"3baa0774",null)),ac=ec.exports,sc=function(){var t=this,e=t._self._c;return e("div",{staticClass:"messages__coordinator_vue tw-w-full"},[e("div",{staticClass:"messages__list col-md-12"},[e("label",{staticClass:"text-center",staticStyle:{width:"100%"}},[t._v(t._s(t.translations.messages))]),e("div",{staticClass:"messages__list-block",attrs:{id:"messages__list"}},t._l(t.dates,(function(a){return e("div",[e("div",{staticClass:"messages__date-section"},[e("hr"),e("p",[t._v(t._s(t.moment(a.dates).format("DD/MM/YYYY")))]),e("hr")]),t._l(t.messages,(function(s){return a.messages.includes(s.message_id)?e("div",{staticClass:"messages__message-item",class:t.user==s.user_id_from?"messages__current_user":"messages__other_user"},[e("div",{staticClass:"messages__message-item-block",class:t.user==s.user_id_from?"messages__text-align-right":"messages__text-align-left",on:{click:function(e){t.showDate!=s.message_id?t.showDate=s.message_id:t.showDate=0}}},[e("p",[e("span",{staticClass:"messages__message-item-from"},[t._v(t._s(s.name)+" - "+t._s(t.moment(s.date_time).format("HH:mm")))])]),e("span",{staticClass:"messages__message-item-span",class:t.user==s.user_id_from?"messages__message-item-span_current-user":"messages__message-item-span_other-user",domProps:{innerHTML:t._s(s.message)}}),e("p",[t.showDate==s.message_id?e("span",{staticClass:"messages__message-item-from"},[t._v(t._s(t.moment(s.date_time).format("DD/MM/YYYY HH:mm")))]):t._e()])])]):t._e()}))],2)})),0),e("transition",{attrs:{name:"slide-up",type:"transition"}},[t.attachOpen?e("AttachDocument",{ref:"attachment",attrs:{user:t.user,fnum:t.fnum,applicant:!1},on:{pushAttachmentMessage:t.pushAttachmentMessage,close:t.attachDocument}}):t._e()],1),e("div",{staticClass:"messages__bottom-input"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],staticClass:"messages__input_text",attrs:{type:"text",disabled:t.attachOpen,rows:"1",spellcheck:"true",placeholder:t.translations.writeMessage},domProps:{value:t.message},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:(e.preventDefault(),t.sendMessage(e))},input:function(e){e.target.composing||(t.message=e.target.value)}}})]),e("div",{staticClass:"messages__bottom-input-actions"},[e("div",{staticClass:"messages__actions_bar"},[e("span",{staticClass:"material-icons-outlined tw-cursor-pointer",on:{click:t.attachDocument}},[t._v("attach_file")])]),e("button",{staticClass:"messages__send_button btn btn-primary",attrs:{type:"button"},on:{click:t.sendMessage}},[t._v(" "+t._s(t.translations.send)+" ")])])],1),t.loading?e("div",{staticClass:"loader"}):t._e()])},nc=[],ic=(a("367a"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"messages__vue_attach_document"},[e("div",{attrs:{id:"attach_documents"+t.fnum}},[e("div",{attrs:{name:"attach_documents"+t.fnum,transition:"nice-modal-fade",adaptive:!0,height:"auto",width:"30%",scrollable:!0,delay:100,clickToClose:!0},on:{closed:t.beforeClose,opened:t.getTypesByCampaign}},[e("div",{staticClass:"messages__attach_header tw-p-4 tw-w-full tw-flex tw-items-center-justify-end"},[e("span",{staticClass:"material-icons-outlined tw-cursor-pointer",on:{click:function(e){return t.$emit("close")}}},[t._v("close")])]),e("div",{staticClass:"messages__attach_content"},[t.applicant?t._e():e("ul",{staticClass:"messages__attach_actions_tabs"},[e("li",{staticClass:"messages__attach_action tw-mr-2",class:1===t.action?"messages__attach_action__current":"",on:{click:function(e){t.action=1}}},[t._v(t._s(t.translations.sendDocument))]),e("li",{staticClass:"messages__attach_action tw-mr-2",class:2===t.action?"messages__attach_action__current":"",on:{click:function(e){t.action=2}}},[t._v(t._s(t.translations.askDocument))])]),e("div",{staticClass:"messages_action_container tw-pt-4"},[1===t.action?e("div",[t.applicant?e("label",[t._v(t._s(t.translations.sendDocument))]):t._e(),t.applicant&&t.types.length>0?e("div",{staticClass:"messages__attach_applicant_doc"},[e("label",{attrs:{for:"applicant_attachment_input"}},[t._v(t._s(t.translations.typeAttachment))]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.attachment_input,expression:"attachment_input"}],attrs:{id:"applicant_attachment_input"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.attachment_input=e.target.multiple?a:a[0]}}},[e("option",{domProps:{value:0}},[t._v(t._s(t.translations.pleaseSelect))]),t._l(t.types,(function(a){return e("option",{domProps:{value:a.id}},[t._v(t._s(a.value))])}))],2)]):t._e(),e("vue-dropzone",{ref:"dropzone",attrs:{id:"customdropzone_messenger","include-styling":!1,options:t.dropzoneOptions,useCustomSlot:!0},on:{"vdropzone-file-added":t.afterAdded,"vdropzone-thumbnail":t.thumbnail,"vdropzone-removed-file":t.afterRemoved,"vdropzone-complete":t.onComplete,"vdropzone-error":t.catchError,"vdropzone-sending":t.sendingEvent}},[e("div",{staticClass:"dropzone-custom-content",attrs:{id:"dropzone-message"}},[e("em",{staticClass:"fas fa-file-image"}),t._v(" "+t._s(t.translations.DropHere)+" ")])]),t.applicant?e("button",{staticClass:"messages__send_button",attrs:{type:"button"},on:{click:t.sendMessage}},[t._v(" "+t._s(t.translations.send)+" ")]):t._e()],1):e("div",[e("label",{attrs:{for:"attachment_input"}},[t._v(t._s(t.translations.typeAttachment))]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.attachment_input,expression:"attachment_input"}],attrs:{id:"attachment_input"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.attachment_input=e.target.multiple?a:a[0]}}},[e("option",{domProps:{value:0}},[t._v(t._s(t.translations.pleaseSelect))]),t._l(t.types,(function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.value))])}))],2)])])])])]),t.loading?e("div",{staticClass:"loader"}):t._e()])}),rc=[];const oc=a("bef5"),lc=()=>'\n<div class="dz-preview dz-file-preview">\n  <div class="dz-image">\n    <img src="/images/emundus/messenger/file_download.svg" style="max-width: 50px"/>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark"><i class="fa fa-check"></i></div>\n  <div class="dz-error-mark"><i class="fa fa-close"></i></div>\n</div>\n';var cc={name:"AttachDocument",props:{user:Number,fnum:String,applicant:Boolean},components:{vueDropzone:Ke.a},data(){return{translations:{sendDocument:Joomla.JText._("COM_EMUNDUS_MESSENGER_SEND_DOCUMENT"),askDocument:Joomla.JText._("COM_EMUNDUS_MESSENGER_ASK_DOCUMENT"),DropHere:Joomla.JText._("COM_EMUNDUS_MESSENGER_DROP_HERE"),send:Joomla.JText._("COM_EMUNDUS_MESSENGER_SEND"),typeAttachment:Joomla.JText._("COM_EMUNDUS_MESSENGER_TYPE_ATTACHMENT"),pleaseSelect:Joomla.JText._("COM_EMUNDUS_PLEASE_SELECT")},types:[],message_input:"",attachment_input:0,loading:!1,action:1,dropzoneOptions:{url:"index.php?option=com_emundus&controller=messenger&task=uploaddocument&fnum="+this.fnum+"&applicant="+this.applicant,maxFilesize:10,maxFiles:5,autoProcessQueue:!1,addRemoveLinks:!0,thumbnailWidth:null,thumbnailHeight:null,previewTemplate:lc()}}},methods:{beforeClose(){},afterAdded(){document.getElementById("dropzone-message").style.display="none"},afterRemoved(){0===this.$refs.dropzone.getAcceptedFiles().length&&(document.getElementById("dropzone-message").style.display="block")},onComplete:function(t){this.message_input="","success"==t.status&&this.$emit("pushAttachmentMessage",JSON.parse(t.xhr.response).data)},sendingEvent(t,e,a){a.append("message",this.message_input),a.append("attachment",this.attachment_input)},catchError:function(t,e,a){$.a.fire({title:Joomla.JText._("COM_EMUNDUS_ONBOARD_ERROR"),text:e,type:"error",showCancelButton:!1,showConfirmButton:!1,timer:3e3}),this.$refs.dropzone.removeFile(t)},thumbnail:function(t,e){var a,s,n,i;if(t.previewElement){for(t.previewElement.classList.remove("dz-file-preview"),n=t.previewElement.querySelectorAll("[data-dz-thumbnail-bg]"),a=0,s=n.length;a<s;a++)i=n[a],i.alt=t.name,i.style.backgroundImage='url("'+e+'")';return setTimeout(function(e){return function(){return t.previewElement.classList.add("dz-image-preview")}}(),1)}},getTypesByCampaign(){m()({method:"get",url:"index.php?option=com_emundus&controller=messenger&task=getdocumentsbycampaign",params:{fnum:this.fnum,applicant:this.applicant},paramsSerializer:t=>oc.stringify(t)}).then(t=>{this.types=t.data.data})},askAttachment(){m()({method:"post",url:"index.php?option=com_emundus&controller=messenger&task=askattachment",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:oc.stringify({fnum:this.fnum,attachment:this.attachment_input,message:this.message_input})}).then(t=>{this.$emit("pushAttachmentMessage",t.data.data)})},sendMessage(t){if(1===this.action)this.applicant||(this.message_input=t),this.$refs.dropzone.processQueue();else if(this.attachment_input){this.message_input="Demande de document : ";const t=this.types.find(t=>t.id==this.attachment_input);t&&(this.message_input+=t.value),this.askAttachment()}}}},uc=cc,dc=(a("155a"),Object(y["a"])(uc,ic,rc,!1,null,"35366fa6",null)),pc=dc.exports;const mc=a("bef5");var hc={name:"MessagesCoordinator",props:{},components:{AttachDocument:pc},data(){return{fnum:String,user:Number,dates:[],messages:[],fileSelected:0,message:"",loading:!1,showDate:0,counter:0,attachOpen:!1,translations:{messages:Joomla.JText._("COM_EMUNDUS_MESSENGER_TITLE"),send:Joomla.JText._("COM_EMUNDUS_MESSENGER_SEND"),writeMessage:Joomla.JText._("COM_EMUNDUS_MESSENGER_WRITE_MESSAGE")}}},methods:{moment(t){return o()(t)},getMessagesByFnum(t=!0,e=!0){this.loading=t,m()({method:"get",url:"index.php?option=com_emundus&controller=messenger&task=getmessagesbyfnum",params:{fnum:this.fileSelected},paramsSerializer:t=>mc.stringify(t)}).then(t=>{this.messages=t.data.data.messages,this.dates=t.data.data.dates,this.markAsRead(),"undefined"!=typeof document.getElementsByClassName("notifications-counter")[0]&&document.getElementsByClassName("notifications-counter")[0].remove(),e&&this.scrollToBottom(),this.loading=!1})},markAsRead(){m()({method:"get",url:"index.php?option=com_emundus&controller=messenger&task=markasread",params:{fnum:this.fileSelected},paramsSerializer:t=>mc.stringify(t)}).then(t=>{this.$emit("removeNotifications",t.data.data)})},sendMessage(t){"undefined"!=typeof t&&t.stopImmediatePropagation(),this.attachOpen?(this.$refs.attachment.sendMessage(this.message),this.message=""):""!==this.message.trim()&&m()({method:"post",url:"index.php?option=com_emundus&controller=messenger&task=sendmessage",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:mc.stringify({message:this.message,fnum:this.fileSelected})}).then(t=>{t.data.status&&(this.message="",this.pushToDatesArray(t.data.data),this.scrollToBottom())})},pushToDatesArray(t){let e=!1,a=this.moment().format("YYYY-MM-DD");if(t.date_time&&(a=t.date_time.split(" ")[0]),this.dates.forEach((s,n)=>{s.dates==a&&(this.dates[n].messages.push(t.message_id),e=!0)}),!e){var s={dates:this.moment().format("YYYY-MM-DD"),messages:[]};s.messages.push(t.message_id),this.dates.push(s)}this.messages.push(t)},scrollToBottom(){setTimeout(()=>{const t=document.getElementsByClassName("messages__list-block")[0];t.scrollTop=t.scrollHeight},500)},attachDocument(){this.attachOpen=!this.attachOpen,setTimeout(()=>{this.attachOpen&&this.$refs.attachment.getTypesByCampaign()},500)},pushAttachmentMessage(t){this.pushToDatesArray(t),this.scrollToBottom(),this.attachDocument()}},created(){this.fnum=this.$store.getters["global/datas"].fnum.value,this.user=this.$store.getters["global/datas"].user.value,"undefined"!=typeof this.fnum&&(this.fileSelected=this.fnum,this.getMessagesByFnum(),setInterval(()=>{this.getMessagesByFnum(!1,!1)},2e4))},watch:{fileSelected:function(){this.getMessagesByFnum(!0)}}},fc=hc,_c=(a("ac44"),Object(y["a"])(fc,sc,nc,!1,null,null,null)),gc=_c.exports,vc=function(){var t=this,e=t._self._c;return e("div",{staticClass:"messages__vue"},[e("span",{attrs:{id:"messages"}},[e("modal",{attrs:{name:"messages",transition:"nice-modal-fade",adaptive:!0,height:"90%",width:"90%",scrollable:!0,delay:100,clickToClose:!0,draggable:".drag-window"},on:{closed:t.beforeClose,opened:t.getFilesByUser}},[e("div",{staticClass:"tw-flex tw-items-center tw-items-start tw-w-full tw-h-full em-small-flex-column"},[e("div",{staticClass:"messages__campaigns-list tw-h-full"},t._l(t.files,(function(a){return e("div",{key:a.fnum,staticClass:"messages__block",class:a.fnum==t.fileSelected?"messages__active-campaign":"",on:{click:function(e){t.fileSelected=a.fnum}}},[e("div",{staticClass:"messages__campaign-block tw-w-full"},[e("div",{staticClass:"tw-w-full"},[e("p",{staticClass:"messages__campaigns_title"},[t._v(t._s(a.label))]),e("p",{staticClass:"messages__campaigns_fnum messages__campaigns_title"},[t._v("N "+t._s(a.fnum))]),e("p",{staticClass:"messages__campaigns_fnum messages__campaigns_title"},[t._v(t._s(a.year))])])]),e("div")])})),0),e("div",{staticClass:"messages__campaigns-list-select"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.fileSelected,expression:"fileSelected"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.fileSelected=e.target.multiple?a:a[0]}}},t._l(t.files,(function(a){return e("option",{key:a.fnum,domProps:{value:a.fnum}},[t._v(t._s(a.label)+" - "+t._s(a.fnum))])})),0)]),e("div",{staticClass:"messages__list tw-w-full tw-h-full tw-flex tw-flex-col tw-justify-between"},[e("div",{staticClass:"message__header tw-w-full"},[e("label",{staticClass:"text-center",staticStyle:{width:"100%"}},[t._v(t._s(t.translations.messages))]),e("i",{staticClass:"fas fa-times pointer",on:{click:function(e){return t.$modal.hide("messages")}}})]),e("div",{staticClass:"messages__list-block tw-w-full tw-h-full",attrs:{id:"messages__list"}},[t._l(t.messageByDates,(function(a){return e("div",[e("div",{staticClass:"messages__date-section"},[e("hr"),e("p",[t._v(t._s(t.moment(a.date).format("DD/MM/YYYY")))]),e("hr")]),t._l(a.messages,(function(a){return e("div",{key:a.message_id,staticClass:"messages__message-item",class:t.user==a.user_id_from?"messages__current_user":"messages__other_user"},[e("div",{staticClass:"messages__message-item-block",class:t.user==a.user_id_from?"messages__text-align-right":"messages__text-align-left",on:{click:function(e){t.showDate!=a.message_id?t.showDate=a.message_id:t.showDate=0}}},[e("p",[e("span",{staticClass:"messages__message-item-from"},[0===t.anonymous&&t.user!=a.user_id_from?e("span",[t._v(t._s(a.name)+" - ")]):t._e(),t.user==a.user_id_from?e("span",[t._v(t._s(a.name)+" - ")]):t._e(),t._v(" "+t._s(t.moment(a.date_time).format("HH:mm"))+" ")])]),e("span",{staticClass:"messages__message-item-span",class:t.user==a.user_id_from?"messages__message-item-span_current-user":"messages__message-item-span_other-user",domProps:{innerHTML:t._s(a.message)}}),e("p",[t.showDate==a.message_id?e("span",{staticClass:"messages__message-item-from"},[t._v(t._s(t.moment(a.date_time).format("DD/MM/YYYY HH:mm")))]):t._e()])])])}))],2)})),e("transition",{attrs:{name:"slide-up",type:"transition"}},[t.attachOpen?e("AttachDocument",{ref:"attachment",attrs:{user:t.user,fnum:t.fileSelected,applicant:!0},on:{pushAttachmentMessage:t.pushAttachmentMessage,close:t.attachDocument}}):t._e()],1)],2),e("div",{staticClass:"tw-w-full",staticStyle:{position:"sticky",bottom:"15px",padding:"0 15px","margin-right":"15px"}},[e("div",{staticClass:"messages__bottom-input"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],staticClass:"messages__input_text em-p-8",attrs:{type:"text",rows:"1",disabled:t.send_progress||t.attachOpen,spellcheck:"true",placeholder:t.translations.writeMessage},domProps:{value:t.message},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:(e.preventDefault(),t.sendMessage(e))},input:function(e){e.target.composing||(t.message=e.target.value)}}})]),e("div",{staticClass:"messages__bottom-input-actions"},[e("div",{staticClass:"messages__actions_bar"},[e("span",{staticClass:"material-icons-outlined tw-cursor-pointer",on:{click:t.attachDocument}},[t._v("attach_file")])]),e("button",{staticClass:"messages__send_button btn btn-primary",attrs:{type:"button"},on:{click:t.sendMessage}},[t._v(" "+t._s(t.translations.send)+" ")])])])])])])],1),t.loading?e("div",{staticClass:"loader"}):t._e()])},yc=[];const bc=a("bef5");var wc={name:"Messages",props:{user:Number,fnum:String,notifications:Object},components:{AttachDocument:pc},data(){return{dates:[],messages:[],anonymous:0,files:[],fileSelected:0,message:"",loading:!1,interval:0,showDate:0,attachOpen:!1,send_progress:!1,translations:{messages:Joomla.JText._("COM_EMUNDUS_MESSENGER_TITLE"),send:Joomla.JText._("COM_EMUNDUS_MESSENGER_SEND"),writeMessage:Joomla.JText._("COM_EMUNDUS_MESSENGER_WRITE_MESSAGE")}}},methods:{moment(t){return o()(t)},beforeClose(){clearInterval(this.interval)},getFilesByUser(){m()({method:"get",url:"index.php?option=com_emundus&controller=messenger&task=getfilesbyuser"}).then(t=>{this.files=t.data.data,""!=this.fnum?this.fileSelected=this.fnum:this.fileSelected=this.files[0].fnum,this.getMessagesByFnum(!0),this.interval=setInterval(()=>{this.getMessagesByFnum(!1,!1)},2e4)})},getMessagesByFnum(t=!0,e=!0){this.loading=t,m()({method:"get",url:"index.php?option=com_emundus&controller=messenger&task=getmessagesbyfnum",params:{fnum:this.fileSelected},paramsSerializer:t=>bc.stringify(t)}).then(t=>{this.messages=t.data.data.messages,this.dates=t.data.data.dates,this.anonymous=parseInt(t.data.data.anonymous),this.markAsRead(),e&&this.scrollToBottom(),this.loading=!1})},markAsRead(){m()({method:"get",url:"index.php?option=com_emundus&controller=messenger&task=markasread",params:{fnum:this.fileSelected},paramsSerializer:t=>bc.stringify(t)}).then(t=>{this.$emit("removeNotifications",t.data.data)})},sendMessage(t){"undefined"!=typeof t&&t.stopImmediatePropagation(),""===this.message.trim()||this.send_progress||(this.send_progress=!0,m()({method:"post",url:"index.php?option=com_emundus&controller=messenger&task=sendmessage",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:bc.stringify({message:this.message,fnum:this.fileSelected})}).then(t=>{t.data.status&&(this.message="",this.send_progress=!1,this.pushToDatesArray(t.data.data),this.scrollToBottom())}))},pushToDatesArray(t){let e=!1,a=this.moment().format("YYYY-MM-DD");if(t.date_time&&(a=t.date_time.split(" ")[0]),this.dates.forEach((s,n)=>{s.dates==a&&(this.dates[n].messages.push(t.message_id),e=!0)}),!e){var s={dates:this.moment().format("YYYY-MM-DD"),messages:[]};s.messages.push(t.message_id),this.dates.push(s)}this.messages.push(t)},scrollToBottom(){setTimeout(()=>{const t=document.getElementById("messages__list");t.scrollTop=t.scrollHeight},500)},attachDocument(){this.attachOpen=!this.attachOpen,this.scrollToBottom(),setTimeout(()=>{this.attachOpen&&this.$refs.attachment.getTypesByCampaign()},500)},pushAttachmentMessage(t){this.pushToDatesArray(t),this.scrollToBottom(),this.attachOpen=!this.attachOpen}},computed:{messageByDates(){let t=[];return this.dates.forEach((e,a)=>{let s=e.dates,n=[];e.messages.forEach(t=>{this.messages.forEach(e=>{e.message_id==t&&n.push(e)})}),t.push({date:s,messages:n})}),t}},watch:{fileSelected:function(){this.getMessagesByFnum(!0)}}},Oc=wc,Ec=(a("23e8"),Object(y["a"])(Oc,vc,yc,!1,null,null,null)),Cc=Ec.exports,Nc=function(){var t=this,e=t._self._c;return null!==t.selectedFile&&void 0!==t.selectedFile?e("div",{class:{"context-files":"files"===t.context,hidden:t.hidden},attrs:{id:"application-modal",name:"application-modal"}},[e("div",{staticClass:"em-modal-header tw-w-full tw-px-3 tw-py-4 tw-bg-main-900 tw-flex tw-items-center"},[e("div",{staticClass:"tw-flex tw-items-center tw-cursor-pointer tw-justify-between tw-w-full",attrs:{id:"evaluation-modal-close"}},[e("div",{staticClass:"tw-flex tw-items-center tw-gap-2"},[e("div",{staticClass:"tw-w-max tw-flex tw-items-center"},[e("span",{staticClass:"material-icons-outlined tw-text-base",staticStyle:{color:"white"},on:{click:t.onClose}},[t._v("arrow_back")])]),e("span",{staticClass:"tw-text-neutral-500"},[t._v("|")]),""!=t.selectedFile.applicant_name?e("p",{staticClass:"tw-text-sm",staticStyle:{color:"white"}},[t._v(" "+t._s(t.selectedFile.applicant_name)+" - "+t._s(t.selectedFile.fnum)+" ")]):e("p",{staticClass:"tw-text-sm",staticStyle:{color:"white"}},[t._v(" "+t._s(t.selectedFile.fnum)+" ")])]),t.fnums.length>1?e("div",{staticClass:"tw-flex tw-items-center"},[e("span",{staticClass:"material-icons-outlined tw-text-base",staticStyle:{color:"white"},on:{click:t.openPreviousFnum}},[t._v("navigate_before")]),e("span",{staticClass:"material-icons-outlined tw-text-base",staticStyle:{color:"white"},on:{click:t.openNextFnum}},[t._v("navigate_next")])]):t._e()])]),t.access?e("div",{staticClass:"modal-grid",style:"grid-template-columns:"+this.ratioStyle},[e("div",{attrs:{id:"modal-applicationform"}},[e("div",{staticClass:"scrollable"},[e("div",{staticClass:"tw-flex tw-items-center tw-justify-center tw-gap-4 tw-border-b tw-border-neutral-300 sticky-tab"},t._l(t.tabsICanAccessTo,(function(a){return e("div",{key:a.name,staticClass:"em-light-tabs tw-cursor-pointer",class:t.selected===a.name?"em-light-selected-tab":"",on:{click:function(e){t.selected=a.name}}},[e("span",{staticClass:"tw-text-sm"},[t._v(t._s(t.translate(a.label)))])])})),0),t.loading?t._e():e("div",["application"===t.selected?e("div",{domProps:{innerHTML:t._s(t.applicationform)}}):t._e(),"attachments"===t.selected?e("Attachments",{key:t.selectedFile.fnum,attrs:{fnum:t.selectedFile.fnum,user:t.$props.user,columns:["check","name","date","category","status"],displayEdit:!1}}):t._e(),"comments"===t.selected?e("Comments",{key:t.selectedFile.fnum,attrs:{fnum:t.selectedFile.fnum,user:t.$props.user,access:t.access["10"]}}):t._e()],1)])]),e("div",{attrs:{id:"modal-evaluationgrid"}},[t.loading?t._e():e("div",{staticClass:"tw-flex tw-flex-col",staticStyle:{width:"40px",height:"40px",margin:"24px 0 12px 24px"}},[t._m(0)]),t.url?e("iframe",{staticClass:"iframe-evaluation",attrs:{src:t.url,id:"iframe-evaluation",title:"Evaluation form"},on:{load:function(e){return t.iframeLoaded(e)}}}):t._e(),t.loading?e("div",{staticClass:"em-page-loader"}):t._e()])]):t._e()]):t._e()},Sc=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"em-circle-main-100 tw-flex tw-justify-center tw-items-center",staticStyle:{width:"40px",height:"40px"}},[e("div",{staticClass:"em-circle-main-200 tw-flex tw-justify-center tw-items-center",staticStyle:{width:"24px",height:"24px"}},[e("span",{staticClass:"material-icons-outlined tw-text-main-400",staticStyle:{"font-size":"14px"}},[t._v("troubleshoot")])])])}],Ac={name:"ApplicationSingle",components:{Comments:pt,Attachments:V},props:{file:Object|String,type:String,user:{type:String,required:!0},ratio:{type:String,default:"66/33"},context:{type:String,default:""}},mixins:[nt],data:()=>({fnums:[],selectedFile:null,applicationform:"",selected:"application",tabs:[{label:"COM_EMUNDUS_FILES_APPLICANT_FILE",name:"application",access:"1"},{label:"COM_EMUNDUS_FILES_ATTACHMENTS",name:"attachments",access:"4"},{label:"COM_EMUNDUS_FILES_COMMENTS",name:"comments",access:"10"}],evaluation_form:0,url:null,access:null,student_id:null,hidden:!1,loading:!1}),created(){document.querySelector("body").style.overflow="hidden";var t=document.querySelector(":root");let e=this.$props.ratio.split("/");t.style.setProperty("--attachment-width",e[0]+"%"),this.selectedFile=this.file,"undefined"!==typeof this.selectedFile&&null!==this.selectedFile?this.render():this.$modal.hide("application-modal"),this.addEventListeners()},onBeforeDestroy(){window.removeEventListener("openSingleApplicationWithFnum")},methods:{addEventListeners(){window.addEventListener("openSingleApplicationWithFnum",t=>{this.selectedFile=t.detail.fnum,t.detail.fnums&&(this.fnums=t.detail.fnums),"undefined"!==typeof this.selectedFile&&null!==this.selectedFile&&this.render()})},render(){this.loading=!0;let t="";t="string"==typeof this.selectedFile?this.selectedFile:this.selectedFile.fnum,"string"==typeof this.selectedFile?at.getFile(t,this.$props.type).then(t=>{1==t.status?(this.selectedFile=t.data,this.access=t.rights,this.updateURL(this.selectedFile.fnum),this.getApplicationForm(),"evaluation"===this.$props.type&&this.getEvaluationForm(),this.$modal.show("application-modal"),this.hidden=!1):this.displayError("COM_EMUNDUS_FILES_CANNOT_ACCESS",t.msg).then(t=>{!0===t&&(this.$modal.hide("application-modal"),this.hidden=!0)})}):at.checkAccess(t).then(t=>{1==t.status?(this.access=t.data,this.updateURL(this.selectedFile.fnum),this.access["1"].r?this.getApplicationForm():this.access["4"].r?this.selected="attachments":this.access["10"].r&&(this.selected="comments"),"evaluation"===this.$props.type&&this.getEvaluationForm(),this.$modal.show("application-modal"),this.hidden=!1):this.displayError("COM_EMUNDUS_FILES_CANNOT_ACCESS","COM_EMUNDUS_FILES_CANNOT_ACCESS_DESC").then(t=>{!0===t&&(this.$modal.hide("application-modal"),this.hidden=!0)})}).catch(t=>{this.displayError("COM_EMUNDUS_FILES_CANNOT_ACCESS","COM_EMUNDUS_FILES_CANNOT_ACCESS_DESC"),this.loading=!1})},getApplicationForm(){m()({method:"get",url:"index.php?option=com_emundus&view=application&format=raw&layout=form&fnum="+this.selectedFile.fnum}).then(t=>{this.applicationform=t.data,"evaluation"!==this.$props.type&&(this.loading=!1)})},getEvaluationForm(){null!=this.selectedFile.id&&(this.rowid=this.selectedFile.id),"undefined"!=typeof this.selectedFile.applicant_id?this.student_id=this.selectedFile.applicant_id:this.student_id=this.selectedFile.student_id;let t="form";at.getEvaluationFormByFnum(this.selectedFile.fnum,this.$props.type).then(e=>{0!==e.data&&("undefined"===typeof this.selectedFile.id?at.getMyEvaluation(this.selectedFile.fnum).then(a=>{this.rowid=a.data,null==this.rowid&&(this.rowid=""),this.url="index.php?option=com_fabrik&c=form&view="+t+"&formid="+e.data+"&rowid="+this.rowid+"&jos_emundus_evaluations___student_id[value]="+this.student_id+"&jos_emundus_evaluations___campaign_id[value]="+this.selectedFile.campaign+"&jos_emundus_evaluations___fnum[value]="+this.selectedFile.fnum+"&student_id="+this.student_id+"&tmpl=component&iframe=1"}):this.url="index.php?option=com_fabrik&c=form&view="+t+"&formid="+e.data+"&rowid="+this.rowid+"&jos_emundus_evaluations___student_id[value]="+this.student_id+"&jos_emundus_evaluations___campaign_id[value]="+this.selectedFile.campaign+"&jos_emundus_evaluations___fnum[value]="+this.selectedFile.fnum+"&student_id="+this.student_id+"&tmpl=component&iframe=1")})},iframeLoaded(){this.loading=!1},updateURL(t=""){let e=window.location.href;e=e.split("#"),""===t?window.history.pushState("","",e[0]):window.history.pushState("","",e[0]+"#"+t)},onClose(t){t.preventDefault(),this.hidden=!0,this.$modal.hide("application-modal"),document.querySelector("body").style.overflow="visible",swal.close()},openNextFnum(){let t="string"===typeof this.selectedFile?this.fnums.indexOf(this.selectedFile):this.fnums.indexOf(this.selectedFile.fnum);if(-1!==t&&t<this.fnums.length-1){const e=t+1;e>this.fnums.length?this.selectedFile=this.fnums[0]:this.selectedFile=this.fnums[e],this.render()}},openPreviousFnum(){let t="string"===typeof this.selectedFile?this.fnums.indexOf(this.selectedFile):this.fnums.indexOf(this.selectedFile.fnum);if(-1!==t&&t>0){const e=t-1;this.selectedFile=e<0?this.fnums[this.fnums.length-1]:this.fnums[e],this.render()}}},computed:{ratioStyle(){let t=this.$props.ratio.split("/");return t[0]+"% "+t[1]+"%"},tabsICanAccessTo(){return this.tabs.filter(t=>this.access[t.access].r)}}},Dc=Ac,Mc=(a("4389"),Object(y["a"])(Dc,Nc,Sc,!1,null,null,null)),xc=Mc.exports,Tc={props:{datas:NamedNodeMap,currentLanguage:String,shortLang:String,manyLanguages:String,coordinatorAccess:String,sysadminAccess:String,defaultLang:{type:String,default:"fr"},component:{type:String,required:!0},data:{type:Object,default:()=>({})}},components:{ApplicationSingle:xc,Attachments:V,addcampaign:Ce,campaignedition:vs,addemail:Pe,formbuilder:nr,settings:ac,messagescoordinator:gc,messages:Cc,Files:Dt,list_v2:Lt,TranslationTool:Zr},created(){"attachments"===this.$props.component&&F.isDataAnonymized().then(t=>{!1!==t.status&&this.$store.dispatch("global/setAnonyme",t.anonyme)}),this.data.attachments&&(this.data.attachments=JSON.parse(atob(this.data.attachments))),this.data.columns&&(this.data.columns=JSON.parse(atob(this.data.columns))),"undefined"!=typeof this.$props.datas&&this.$store.commit("global/initDatas",this.$props.datas),"undefined"!=typeof this.$props.currentLanguage?(this.$store.commit("global/initCurrentLanguage",this.$props.currentLanguage),o.a.locale(this.$store.state.global.currentLanguage)):(this.$store.commit("global/initCurrentLanguage","fr"),o.a.locale("fr")),"undefined"!=typeof this.$props.shortLang&&this.$store.commit("global/initShortLang",this.$props.shortLang),"undefined"!=typeof this.$props.manyLanguages&&this.$store.commit("global/initManyLanguages",this.$props.manyLanguages),"undefined"!=typeof this.$props.defaultLang&&this.$store.commit("global/initDefaultLang",this.$props.defaultLang),"undefined"!=typeof this.$props.coordinatorAccess&&this.$store.commit("global/initCoordinatorAccess",this.$props.coordinatorAccess),"undefined"!=typeof this.$props.coordinatorAccess&&this.$store.commit("global/initSysadminAccess",this.$props.sysadminAccess),Tt.getOffset().then(t=>{!1!==t.status&&this.$store.commit("global/initOffset",t.data.data)})},mounted(){this.data.base&&this.$store.dispatch("attachment/setAttachmentPath",this.data.base+"/images/emundus/files/")}},Uc=Tc,kc=(a("4640"),Object(y["a"])(Uc,n,i,!1,null,null,null)),Rc=kc.exports,Lc=a("209f"),Ic=a.n(Lc),Pc=a("3332"),Bc=a("4859"),jc=(a("9e26"),a("c2ca")),Fc=a("66d6"),qc=a.n(Fc),$c=a("6db0"),Hc=a.n($c),Gc=a("7cdb"),zc=a("94ea");const Vc={datas:[],currentLanguage:"",shortLang:"",manyLanguages:"",defaultLang:"",coordinatorAccess:"",sysadminAccess:!1,anonyme:!1,offset:0},Yc={datas:t=>t.datas,currentLanguage:t=>t.currentLanguage,shortLang:t=>t.shortLang,manyLanguages:t=>t.manyLanguages,defaultLang:t=>t.defaultLang,coordinatorAccess:t=>t.coordinatorAccess,sysadminAccess:t=>t.sysadminAccess,offset:t=>t.offset},Jc={setLang({commit:t},e){t("setLang",e)},setAnonyme({commit:t},e){t("setAnonyme",e)}},Kc={initDatas(t,e){return t.datas=e,t.datas},initCurrentLanguage(t,e){return t.currentLanguage=e,t.currentLanguage},initOffset(t,e){return t.offset=e,t.offset},initShortLang(t,e){return t.shortLang=e,t.shortLang},initManyLanguages(t,e){return t.manyLanguages=e,t.manyLanguages},initDefaultLang(t,e){return t.defaultLang=e,t.defaultLang},initCoordinatorAccess(t,e){return t.coordinatorAccess=e,t.coordinatorAccess},initSysadminAccess(t,e){return t.sysadminAccess=e,t.sysadminAccess},setAnonyme(t,e){t.anonyme=e}};var Wc={namespaced:!0,state:Vc,getters:Yc,actions:Jc,mutations:Kc};const Xc={users:{},currentUser:0,displayedUser:0,rights:{}},Zc={},Qc={setUsers({commit:t},e){t("setUser",e)},setCurrentUser({commit:t},e){t("setCurrentUser",e)},setDisplayedUser({commit:t},e){t("setDisplayedUser",e)},setAccessRights({commit:t},e){t("setAccessRights",e)}},tu={setUser(t,e){e&&e.length>0&&e.forEach(e=>{t.users[e.user_id]=e})},setCurrentUser(t,e){t.currentUser=e},setDisplayedUser(t,e){t.displayedUser=e},setAccessRights(t,e){t.rights[e.fnum]=e.rights}};var eu={namespaced:!0,state:Xc,getters:Zc,actions:Qc,mutations:tu};const au={attachmentPath:"images/emundus/files/",attachments:{},selectedAttachment:{},previews:{},categories:{},checkedAttachments:[]},su={},nu={setAttachments({commit:t},e){t("setAttachments",e)},setAttachmentsOfFnum({commit:t},e){t("setAttachmentsOfFnum",e)},updateAttachmentOfFnum({commit:t},e){t("updateAttachmentOfFnum",e)},setSelectedAttachment({commit:t},e){t("setSelectedAttachment",e)},setPreview({commit:t},e){t("setPreview",e)},setCategories({commit:t},e){t("setCategories",e)},setAttachmentPath({commit:t},e){t("setAttachmentPath",e)},setCheckedAttachments({commit:t},e){t("setCheckedAttachments",e)}},iu={setAttachments(t,e){t.attachments=e},setAttachmentsOfFnum(t,e){t.attachments[e.fnum]=e.attachments},updateAttachmentOfFnum(t,e){const a=t.attachments[e.fnum].findIndex(t=>t.aid===e.attachment.aid);t.attachments[e.fnum][a]=e.attachment},setSelectedAttachment(t,e){t.selectedAttachment=e},setPreview(t,e){t.previews[e.id]=e.preview},setCategories(t,e){t.categories=e},setAttachmentPath(t,e){t.attachmentPath=e},setCheckedAttachments(t,e){t.checkedAttachments=e}};var ru={namespaced:!0,state:au,getters:su,actions:nu,mutations:iu};const ou={list:[],selectedItems:[],formsAccess:[]},lu={list:t=>t.list,formsAccess:t=>t.formsAccess,selectedItems:t=>t.selectedItems,isSelected:t=>e=>t.selectedItems.includes(e),isSomething:t=>Array.isArray(t.selectedItems)&&t.selectedItems.length},cu={deleteSelected({commit:t,state:e},a){a.forEach(e=>{t("deleteSelected",e)})}},uu={selectItem(t,e){return t.selectedItems.includes(e)?t.selectedItems.splice(t.selectedItems.indexOf(e),1):t.selectedItems.push(e),t.selectedItems},resetSelectedItemsList(t){t.selectedItems=[]},listUpdate(t,e){t.list=e},formsAccessUpdate(t,e){t.formsAccess=e},listInsert(t,e){e.forEach(e=>{t.list.push(e)})},publish(t,e){t.list.forEach((a,s)=>{e.includes(a.id)&&(t.list[s].published=1)})},unpublish(t,e){t.list.forEach((a,s)=>{e.includes(a.id)&&(t.list[s].published=0)})},deleteSelected(t,e){t.list.some((a,s)=>{if(e==a.id)return t.list.splice(s,1),!0})}};var du={namespaced:!0,state:ou,getters:lu,actions:cu,mutations:uu};const pu={fnums:[]},mu={},hu={},fu={};var _u={namespaced:!0,state:pu,getters:mu,actions:hu,mutations:fu};const gu={lastSave:null,pages:null,documentModels:[]},vu={getLastSave:t=>t.lastSave,getPages:t=>t.pages,getDocumentModels:t=>t.documentModels},yu={updateLastSave({commit:t},e){t("updateLastSave",e)},updateDocumentModels({commit:t},e){t("updateDocumentModels",e)}},bu={updateLastSave(t,e){t.lastSave=e},updateDocumentModels(t,e){t.documentModels=e}};var wu={namespaced:!0,state:gu,getters:vu,actions:yu,mutations:bu};const Ou={unsavedChanges:!1,allowPinnedCampaign:!1,pinned:0},Eu={unsavedChanges:t=>t.unsavedChanges,pinned:t=>t.pinned,allowPinnedCampaign:t=>t.allowPinnedCampaign},Cu={setUnsavedChanges({commit:t},e){t("setUnsavedChanges",e)},setPinned({commit:t},e){t("setPinned",e)},setAllowPinnedCampaign({commit:t},e){t("setAllowPinnedCampaign",e)}},Nu={setUnsavedChanges(t,e){t.unsavedChanges=e},setPinned(t,e){t.pinned=e},setAllowPinnedCampaign(t,e){t.allowPinnedCampaign=e}};var Su={namespaced:!0,state:Ou,getters:Eu,actions:Cu,mutations:Nu};s["default"].use(zc["a"]);var Au=new zc["a"].Store({modules:{global:Wc,user:eu,attachment:ru,file:_u,lists:du,formBuilder:wu,campaign:Su}}),Du={data(){return{shortDefaultLang:"fr"}},beforeMount(){null!==this.$data.translations&&"undefined"!==typeof this.$data.translations&&Object.entries(this.$data.translations).forEach(([t,e])=>{this.$data.translations[t]=this.translate(e)})},mounted(){null!==this.$store&&"undefined"!==typeof this.$store&&(this.shortDefaultLang=this.$store.getters["global/defaultLang"].substring(0,2))},methods:{translate(t){return void 0!=typeof t&&null!=t&&null!==Joomla&&"undefined"!==typeof Joomla?Joomla.JText._(t)?Joomla.JText._(t):t:""}}};const Mu=["click"];function xu({event:t,el:e,handler:a,middleware:s}){const n=t.target!==e&&!e.contains(t.target);return n&&s(t,e)?a(t,e):null}const Tu=new Map;function Uu(t){return e=>{t.forEach(({event:t,handler:a})=>{document[e+"EventListener"](t,a,!0)})}}function ku(t){const e="function"===typeof t;if(!e&&"object"!==typeof t)throw new Error(`v-click-outside: Binding value should be a function or an object, ${typeof bindingValue} given`);return{handler:e?t:t.handler,middleware:t.middleware||(()=>!0)}}function Ru(t,{el:e,handler:a,middleware:s}){return t.map(t=>({event:t,handler:t=>xu({event:t,el:e,handler:a,middleware:s})}))}function Lu(t,{value:e}){const{handler:a,middleware:s}=ku(e),n=Ru(Mu,{el:t,handler:a,middleware:s});Tu.set(t,n),Uu(n)("add")}function Iu(t){const e=Tu.get(t);Uu(e)("remove"),Tu.delete(t)}const Pu={bind:Lu,unbind:Iu};var Bu=Pu;s["default"].config.productionTip=!1,s["default"].config.devtools=!0,s["default"].component("v-popover",Pc["b"]),s["default"].component("table-component",jc["TableComponent"]),s["default"].component("table-column",jc["TableColumn"]),s["default"].use(qc.a,{velocity:Hc.a}),s["default"].use(Ic.a),s["default"].use(Bc),s["default"].use(Gc["a"]),s["default"].use(zc["a"]),s["default"].mixin(Du),s["default"].directive("tooltip",Pc["c"]),s["default"].directive("close-popover",Pc["a"]),s["default"].directive("click-outside",Bu);let ju="",Fu={},qu="";const $u=document.getElementById("em-application-attachment"),Hu=document.getElementById("em-files");if($u||Hu){let t=null;$u?(t=$u,qu="attachments",ju="#em-application-attachment"):Hu&&(t=Hu,qu="files",ju="#em-files"),null!==t&&(Array.prototype.slice.call(t.attributes).forEach((function(t){Fu[t.name]=t.value})),""!==Fu.fnum&&Hu&&(qu="application"),new s["default"]({el:ju,store:Au,render(t){return t(Rc,{props:{component:qu,data:Fu}})}}))}else document.getElementById("em-component-vue")&&new s["default"]({el:"#em-component-vue",store:Au,render(t){return t(Rc,{props:{component:this.$el.attributes.component.value,datas:this.$el.attributes,currentLanguage:this.$el.attributes.currentLanguage.value,shortLang:this.$el.attributes.shortLang.value,manyLanguages:this.$el.attributes.manyLanguages.value,defaultLang:this.$el.attributes.defaultLang?this.$el.attributes.defaultLang.value:this.$el.attributes.currentLanguage.value,coordinatorAccess:this.$el.attributes.coordinatorAccess.value,sysadminAccess:this.$el.attributes.sysadminAccess.value}})}})},"56eb":function(t,e,a){"use strict";a("4726")},"5c3c":function(t,e,a){"use strict";a("1e8d")},"5dff":function(t,e,a){"use strict";a("cfcc")},"5e63":function(t){t.exports=JSON.parse('{"applicant_can_renew":{"displayed":true,"component":"emundus","label":"COM_EMUNDUS_ONBOARD_SETTINGS_APPLICANT_CAN_RENEW","param":"applicant_can_renew","options":[{"label":"JNO","value":0},{"label":"JYES","value":1},{"label":"COM_EMUNDUS_APPLICANT_CAN_RENEW_CAMPAIGN","value":2},{"label":"COM_EMUNDUS_APPLICANT_CAN_RENEW_YEAR","value":3}],"value":0},"can_edit_until_deadline":{"displayed":true,"component":"emundus","label":"COM_EMUNDUS_ONBOARD_SETTINGS_APPLICANT_CAN_EDIT_UNTIL_DEADLINE","param":"can_edit_until_deadline","options":[{"label":"JNO","value":0},{"label":"JYES","value":1}],"value":0},"can_submit_encrypted":{"displayed":true,"component":"emundus","label":"COM_EMUNDUS_ONBOARD_SETTINGS_APPLICANT_CAN_SUBMIT_ENCRYPTED","param":"can_submit_encrypted","options":[{"label":"JNO","value":0},{"label":"JYES","value":1}],"value":0}}')},"62b9":function(t){t.exports=JSON.parse('{"sitename":{"displayed":true,"component":"joomla","label":"COM_EMUNDUS_ONBOARD_SETTINGS_GENERAL_SITENAME","param":"sitename","maxlength":50},"list_limit":{"displayed":true,"component":"joomla","label":"COM_EMUNDUS_ONBOARD_SETTINGS_GENERAL_LIST_LIMIT","param":"list_limit","options":[{"label":"5","value":5},{"label":"10","value":10},{"label":"15","value":15},{"label":"20","value":20},{"label":"25","value":25},{"label":"30","value":30},{"label":"50","value":50},{"label":"100","value":100},{"label":"200","value":200}],"value":20},"display_other_user_editing_same_file":{"displayed":true,"component":"emundus","label":"COM_EMUNDUS_ONBOARD_SETTINGS_GENERAL_OTHER_USER_EDITING_SAME_FILE","param":"display_other_user_editing_same_file","helptext":"COM_EMUNDUS_ONBOARD_SETTINGS_GENERAL_OTHER_USER_EDITING_SAME_FILE_HELPTEXT","options":[{"label":"JNO","value":0},{"label":"JYES","value":1}],"value":1},"attachment_storage":{"displayed":false,"component":"emundus","label":"COM_EMUNDUS_MODULES_ATTACHMENT_STORAGE","param":"attachment_storage","options":[{"label":"JNO","value":0},{"label":"JYES","value":1}]},"external_storage_ged_alfresco_integration":{"displayed":false,"component":"emundus","label":"COM_EMUNDUS_MODULES_EXTERNAL_STORAGE_GED_ALFRESCO_INTEGRATION","param":"external_storage_ged_alfresco_integration","options":[{"label":"JNO","value":0},{"label":"JYES","value":1}]},"external_storage_ged_alfresco_site":{"displayed":false,"component":"emundus","label":"COM_EMUNDUS_MODULES_EXTERNAL_STORAGE_GED_ALFRESCO_SITE","param":"external_storage_ged_alfresco_site","maxlength":255},"external_storage_ged_alfresco_max_level":{"displayed":false,"component":"emundus","label":"COM_EMUNDUS_MODULES_EXTERNAL_STORAGE_GED_ALFRESCO_MAX_LEVEL","param":"external_storage_ged_alfresco_max_level","maxlength":50}}')},66309:function(t,e,a){"use strict";a("dc5f")},6653:function(t,e,a){},"699e":function(t,e,a){},"6a25":function(t,e,a){},"6f1d":function(t,e,a){},"713c":function(t,e,a){"use strict";a("735c")},7334:function(t,e,a){"use strict";a("351d")},"735c":function(t,e,a){},7379:function(t,e,a){},"74d7":function(t,e,a){},"74f7":function(t,e,a){},"753d":function(t,e,a){},7726:function(t,e,a){"use strict";a("4f4d")},7770:function(t,e,a){"use strict";a("dee1")},7861:function(t,e,a){"use strict";a("ec98")},"7a6e":function(t,e,a){},"7af0":function(t,e,a){"use strict";a("7c16")},"7b96":function(t,e,a){"use strict";a("3dd0")},"7bc0":function(t,e,a){"use strict";a("699e")},"7c16":function(t,e,a){},"7c8c":function(t,e,a){},"82b2":function(t,e,a){"use strict";a("8b18")},"832a":function(t,e,a){"use strict";a("34b0")},8357:function(t,e,a){"use strict";a("411f")},8418:function(t,e,a){},"87d6":function(t,e,a){"use strict";a("8846")},"87ec":function(t,e,a){"use strict";a("e47e")},8846:function(t,e,a){},"8a8e":function(t,e,a){"use strict";a("20a9")},"8b18":function(t,e,a){},"8e95":function(t,e,a){"use strict";a("dd8a")},"920a":function(t,e,a){},"937d":function(t,e,a){"use strict";a("920a")},9556:function(t,e,a){},"97e6":function(t,e,a){},"9ac1":function(t){t.exports=JSON.parse('[{"title":"COM_EMUNDUS_ONBOARD_PDF_DOCUMENTS","value":"pdf"},{"title":"COM_EMUNDUS_ONBOARD_PICTURES_DOCUMENTS","value":"jpeg;jpg;png;gif"},{"title":"COM_EMUNDUS_ONBOARD_OFFICE_DOCUMENTS","value":"doc;docx;odt;ppt;pptx"},{"title":"COM_EMUNDUS_ONBOARD_EXCEL_DOCUMENTS","value":"xls;xlsx;odf"},{"title":"COM_EMUNDUS_FORM_BUILDER_FORMATS_AUDIO","value":"mp3"},{"title":"COM_EMUNDUS_FORM_BUILDER_FORMATS_VIDEO","value":"mp4"},{"title":"Zip","value":"zip"}]')},"9e88":function(t,e,a){"use strict";a("e9d0")},a7ea:function(t,e,a){"use strict";a("753d")},a961:function(t,e,a){},ac44:function(t,e,a){"use strict";a("c2be")},ac5e:function(t,e,a){},ac9e:function(t,e,a){"use strict";a("6a25")},af58:function(t,e,a){"use strict";a("062c")},afd4:function(t,e,a){"use strict";a("74f7")},b035:function(t,e,a){var s={"./settings-applicants.json":"5e63","./settings-general.json":"62b9"};function n(t){var e=i(t);return a(e)}function i(t){if(!a.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}n.keys=function(){return Object.keys(s)},n.resolve=i,t.exports=n,n.id="b035"},b317:function(t,e,a){"use strict";a("7a6e")},b428:function(t,e,a){},b995:function(t,e,a){"use strict";a("5151")},bba5:function(t,e,a){},bc3e:function(t,e,a){"use strict";a("de36")},bd94:function(t,e,a){"use strict";a("3c60")},bfc5:function(t,e,a){"use strict";a("ff66")},c1ff:function(t,e,a){},c2be:function(t,e,a){},c341:function(t,e,a){},c512:function(t,e,a){"use strict";a("97e6")},cdba:function(t,e,a){"use strict";a("2d78")},cfcc:function(t,e,a){},d2bf:function(t,e,a){},d622:function(t,e,a){"use strict";a("df1c")},d9f4:function(t,e,a){"use strict";a("11fa")},dc0d:function(t,e,a){},dc5f:function(t,e,a){},dd8a:function(t,e,a){},de36:function(t,e,a){},dee1:function(t,e,a){},df1c:function(t,e,a){},e47e:function(t,e,a){},e7fe:function(t,e,a){"use strict";a("4d2f")},e9d0:function(t,e,a){},ec3a:function(t,e,a){"use strict";a("faa3")},ec98:function(t,e,a){},ed79:function(t,e,a){"use strict";a("17e19")},ef96:function(t){t.exports=JSON.parse('[{"value":"field","icon":"text_fields","name":"COM_EMUNDUS_ONBOARD_TYPE_FIELD","published":true},{"value":"textarea","icon":"notes","name":"COM_EMUNDUS_ONBOARD_TYPE_TEXTAREA","published":true},{"value":"nom","icon":"text_fields","name":"COM_EMUNDUS_ONBOARD_TYPE_LASTNAME","published":true},{"value":"prenom","icon":"text_fields","name":"COM_EMUNDUS_ONBOARD_TYPE_FIRSTNAME","published":true},{"value":"email","icon":"mail","name":"COM_EMUNDUS_ONBOARD_TYPE_EMAIL","published":true},{"value":"emundus_phonenumber","icon":"phone","name":"COM_EMUNDUS_ONBOARD_TYPE_PHONE_NUMBER","published":true},{"value":"checkbox","icon":"check_box","name":"COM_EMUNDUS_ONBOARD_TYPE_CHECKBOX","published":true},{"value":"radiobutton","icon":"radio_button_checked","name":"COM_EMUNDUS_ONBOARD_TYPE_RADIOBUTTON","published":true},{"value":"dropdown","icon":"arrow_drop_down_circle","name":"COM_EMUNDUS_ONBOARD_TYPE_DROPDOWN","published":true},{"value":"date","icon":"calendar_month","name":"COM_EMUNDUS_ONBOARD_TYPE_CALENDAR","published":true},{"value":"birthday","icon":"event","name":"COM_EMUNDUS_ONBOARD_TYPE_BIRTHDAY","published":true},{"value":"yesno","icon":"toggle_on","name":"COM_EMUNDUS_ONBOARD_TYPE_YESNO","published":true},{"value":"display","icon":"wysiwyg","name":"COM_EMUNDUS_ONBOARD_TYPE_DISPLAY","description":"COM_EMUNDUS_ONBOARD_TYPE_DISPLAY_DESC","published":false},{"value":"databasejoin","icon":"table_rows","name":"COM_EMUNDUS_ONBOARD_TYPE_DATABASEJOIN","description":"COM_EMUNDUS_ONBOARD_TYPE_DATABASEJOIN_DESC","published":true},{"value":"currency","icon":"money","name":"COM_EMUNDUS_ONBOARD_TYPE_CURRENCY","description":"COM_EMUNDUS_ONBOARD_TYPE_CURRENCY_DESC","published":true},{"value":"panel","icon":"view_agenda","name":"COM_EMUNDUS_ONBOARD_TYPE_PANEL","description":"COM_EMUNDUS_ONBOARD_TYPE_PANEL_DESC","published":true},{"value":"emundus_colorpicker","icon":"palette","name":"COM_EMUNDUS_ONBOARD_TYPE_COLOR","published":false},{"value":"emundus_fileupload","icon":"file_upload","name":"COM_EMUNDUS_ONBOARD_TYPE_FILE","published":false}]')},f0a4:function(t,e,a){},f1a1:function(t,e,a){},f5b4:function(t,e,a){},faa3:function(t,e,a){},fabc:function(t,e,a){"use strict";a("ac5e")},fad2:function(t,e,a){"use strict";a("8418")},fce4:function(t,e,a){"use strict";a("dc0d")},fda5:function(t,e,a){},ff66:function(t,e,a){}});
//# sourceMappingURL=app_emundus.js.map