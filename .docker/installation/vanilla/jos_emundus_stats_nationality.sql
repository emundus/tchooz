CREATE  VIEW `jos_emundus_stats_nationality` AS select `ecc`.`id` AS `id`,`esc`.`year` AS `schoolyear`,count(distinct `ecc`.`applicant_id`) AS `nb`,`epd`.`nationality` AS `nationality`,`esc`.`label` AS `campaign`,`esc`.`training` AS `course` from (((`jos_emundus_declaration` `ed` join `jos_emundus_campaign_candidature` `ecc` on((`ed`.`user` = `ecc`.`applicant_id`))) left join `jos_emundus_setup_campaigns` `esc` on((`esc`.`id` = `ecc`.`campaign_id`))) left join `jos_emundus_personal_detail` `epd` on((`ecc`.`applicant_id` = `epd`.`user`))) where ((`epd`.`nationality` is not null) and (`ecc`.`submitted` = 1)) group by `epd`.`nationality`,`ecc`.`id`