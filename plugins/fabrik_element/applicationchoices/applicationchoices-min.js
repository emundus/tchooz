define(["jquery","fab/element"],(function(e,t){return window.FbApplicationChoices=new Class({Extends:t,initialize:function(e,t){if(this.setPlugin("applicationchoices"),this.parent(e,t),"form"===t.layout){document.getElementById(this.element.id+"_choice").addEventListener("change",(e=>{this.choice=e.target.value,this.updateValue(e)}));var i=document.getElementById(this.element.id+"_status");i&&i.addEventListener("change",(e=>{this.status=e.target.value,this.updateValue(e)}))}},cloned:function(e){this.parent(e);var t=this.element.parentElement;t.id=this.element.id+"_container";var i=t.querySelector('select[id*="_choice"]');i&&(i.id=this.element.id+"_choice",i.name=this.element.name+"_choice",i.addEventListener("change",(e=>{this.choice=e.target.value,this.updateValue(e)})));var n=t.querySelector('select[id*="_status"]');n&&(n.id=this.element.id+"_status",n.name=this.element.name+"_status",n.addEventListener("change",(e=>{this.status=e.target.value,this.updateValue(e)})))},updateValue:function(e){var t=this.element.id;e&&(t=(t=e.srcElement.id).replace("_choice","").replace("_status",""));var i=document.getElementById(t+"_choice").value;1==this.options.confirmation&&(i+="|"+document.getElementById(t+"_status").value);document.getElementById(t).value=i;var n=new Event("change");document.getElementById(t).dispatchEvent(n)}}),window.FbApplicationChoices}));